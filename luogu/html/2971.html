<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[USACO10HOL]牛的政治Cow Politics - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376220:OsMYL8Y8urWiuNWVvgqwvcue1NsUzGAToNcDCyUVRP4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Farmer%20John%27s%20cows%20are%20living%20on%20N%20%282%20%3C%3D%20N%20%3C%3D%20200%2C000%29%20different%20pastures%20conveniently%20numbered%201..N.%20Exactly%20N-1%20bidirectional%20cow%20paths%20%28of%20unit%20length%29%20connect%20these%20pastures%20in%20various%20ways%2C%20and%20each%20pasture%20is%20reachable%20from%20any%20other%20cow%20pasture%20by%20traversing%20one%20or%20more%20of%20these%20paths%20%28thus%2C%20the%20pastures%20and%20paths%20form%20a%20graph%20called%20a%20tree%29.%5Cn%5CnThe%20input%20for%20a%20particular%20set%20of%20pastures%20will%20specify%20the%20parent%20node%20P%5C%5C_i%20%280%20%3C%3D%20P%5C%5C_i%20%3C%3D%20N%29%20for%20each%20pasture.%20The%20root%20node%20will%20specify%20parent%20P%5C%5C_i%20%3D%3D%200%2C%20which%20means%20it%20has%20no%20parent.%5Cn%5CnThe%20cows%20have%20organized%20K%20%281%20%3C%3D%20K%20%3C%3D%20N%5C%2F2%29%20different%20political%20parties%20conveniently%20numbered%201..K.%20Each%20cow%20identifies%20with%20a%20single%5Cn%5Cnpolitical%20party%3B%20cow%20i%20identifies%20with%20political%20party%20A%5C%5C_i%20%281%20%3C%3D%20A%5C%5C_i%20%3C%3D%20K%29.%20Each%20political%20party%20includes%20at%20least%20two%20cows.%5Cn%5CnThe%20political%20parties%20are%20feuding%20and%20would%20like%20to%20know%20how%20much%20%27range%27%20each%20party%20covers.%20The%20range%20of%20a%20party%20is%20the%20largest%20distance%20between%20any%20two%20cows%20within%20that%20party%20%28over%20cow%20paths%29.%5Cn%5CnFor%20example%2C%20suppose%20political%20party%201%20consists%20of%20cows%201%2C%203%2C%20and%206%2C%20political%20party%202%20consists%20of%20cows%202%2C%204%2C%20and%205%2C%20and%20the%20pastures%20are%20connected%20as%20follows%20%28party%201%20members%20are%20marked%20as%20-n-%29%3A%5Cn%5Cn-3-%5Cn%7C%5Cn-1-%5Cn%5C%2F%20%7C%20%5C%5C%5Cn2%20%204%20%205%5Cn%5Cn%7C%5Cn-6-%5CnThe%20greatest%20distance%20between%20any%20two%20pastures%20of%20political%20party%201%20is%203%20%28between%20cows%203%20and%206%29%2C%20and%20the%20greatest%20distance%20for%20political%20party%202%20is%202%20%28between%20cows%202%20and%204%2C%20between%20cows%204%20and%205%2C%20and%20between%20cows%205%20and%202%29.%5Cn%5CnHelp%20the%20cows%20determine%20party%20ranges.%5Cn%5CnTIME%20LIMIT%3A%202%20seconds%5Cn%5CnMEMORY%20LIMIT%3A%2064MB%5Cn%5Cn%5Cu519c%5Cu592b%5Cu7ea6%5Cu7ff0%5Cu7684%5Cu5976%5Cu725b%5Cu4f4f%5Cu5728N%20%282%20%3C%3D%20N%20%3C%3D%20200%2C000%29%5Cu7247%5Cu4e0d%5Cu540c%5Cu7684%5Cu8349%5Cu5730%5Cu4e0a%5Cuff0c%5Cu6807%5Cu53f7%5Cu4e3a1%5Cu5230N%5Cu3002%5Cu6070%5Cu597d%5Cu6709N-1%5Cu6761%5Cu5355%5Cu4f4d%5Cu957f%5Cu5ea6%5Cu7684%5Cu53cc%5Cu5411%5Cu9053%5Cu8def%5Cuff0c%5Cu7528%5Cu5404%5Cu79cd%5Cu5404%5Cu6837%5Cu7684%5Cu65b9%5Cu6cd5%5Cu8fde%5Cu63a5%5Cu8fd9%5Cu4e9b%5Cu8349%5Cu5730%5Cu3002%5Cu800c%5Cu4e14%5Cu4ece%5Cu6bcf%5Cu7247%5Cu8349%5Cu5730%5Cu51fa%5Cu53d1%5Cu90fd%5Cu53ef%5Cu4ee5%5Cu62b5%5Cu8fbe%5Cu5176%5Cu4ed6%5Cu6240%5Cu6709%5Cu8349%5Cu5730%5Cu3002%5Cu4e5f%5Cu5c31%5Cu662f%5Cu8bf4%5Cuff0c%5Cu8fd9%5Cu4e9b%5Cu8349%5Cu5730%5Cu548c%5Cu9053%5Cu8def%5Cu6784%5Cu6210%5Cu4e86%5Cu4e00%5Cu79cd%5Cu53eb%5Cu505a%5Cu6811%5Cu7684%5Cu56fe%5Cu3002%5Cu8f93%5Cu5165%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu8be6%5Cu7ec6%5Cu7684%5Cu8349%5Cu5730%5Cu7684%5Cu96c6%5Cu5408%5Cuff0c%5Cu8be6%5Cu7ec6%5Cu8bf4%5Cu660e%5Cu4e86%5Cu6bcf%5Cu4e2a%5Cu8349%5Cu5730%5Cu7684%5Cu7236%5Cu8282%5Cu70b9P%5C%5C_i%20%280%20%3C%3D%20P%5C%5C_i%20%3C%3D%20N%29%5Cu3002%5Cu6839%5Cu8282%5Cu70b9%5Cu7684P%5C%5C_i%20%3D%3D%200%2C%20%5Cu8868%5Cu793a%5Cu5b83%5Cu6ca1%5Cu6709%5Cu7236%5Cu8282%5Cu70b9%5Cu3002%5Cu56e0%5Cu4e3a%5Cu5976%5Cu725b%5Cu5efa%5Cu7acb%5Cu4e861%5Cu5230K%5Cu4e00%5Cu5171K%20%281%20%3C%3D%20K%20%3C%3D%20N%5C%2F2%29%5Cu4e2a%5Cu653f%5Cu515a%5Cu3002%5Cu6bcf%5Cu53ea%5Cu5976%5Cu725b%5Cu90fd%5Cu8981%5Cu52a0%5Cu5165%5Cu67d0%5Cu4e00%5Cu4e2a%5Cu653f%5Cu515a%5Cuff0c%5Cu5176%5Cu4e2d%5Cuff0c%20%5Cu7b2ci%5Cu53ea%5Cu5976%5Cu725b%5Cu5c5e%5Cu4e8e%5Cu7b2cA%5C%5C_i%20%281%20%3C%3D%20A%5C%5C_i%20%3C%3D%20K%29%5Cu4e2a%5Cu653f%5Cu515a%5Cu3002%5Cu800c%5Cu4e14%5Cu6bcf%5Cu4e2a%5Cu653f%5Cu515a%5Cu81f3%5Cu5c11%5Cu6709%5Cu4e24%5Cu53ea%5Cu5976%5Cu725b%5Cu3002%20%5Cu8fd9%5Cu4e9b%5Cu653f%5Cu515a%5Cu4e92%5Cu76f8%5Cu5435%5Cu95f9%5Cu4e89%5Cu3002%5Cu6bcf%5Cu4e2a%5Cu653f%5Cu515a%5Cu90fd%5Cu60f3%5Cu77e5%5Cu9053%5Cu81ea%5Cu5df1%5Cu7684%5Cu201c%5Cu8303%5Cu56f4%5Cu201d%5Cu6709%5Cu591a%5Cu5927%5Cu3002%5Cu5176%5Cu4e2d%5Cuff0c%5Cu5b9a%5Cu4e49%5Cu4e00%5Cu4e2a%5Cu653f%5Cu515a%5Cu7684%5Cu8303%5Cu56f4%5Cu662f%5Cu8fd9%5Cu4e2a%5Cu653f%5Cu515a%5Cu79bb%5Cu5f97%5Cu6700%5Cu8fdc%5Cu7684%5Cu4e24%5Cu53ea%5Cu5976%5Cu725b%5Cuff08%5Cu6cbf%5Cu7740%5Cu53cc%5Cu5411%5Cu9053%5Cu8def%5Cu884c%5Cu8d70%5Cuff09%5Cu7684%5Cu8ddd%5Cu79bb%5Cu3002%5Cn%22%2C%22inputFormat%22%3A%22%5C%5C%2A%20Line%201%3A%20Two%20space-separated%20integers%3A%20N%20and%20K%5Cn%5Cn%5C%5C%2A%20Lines%202..N%2B1%3A%20Line%20i%2B1%20contains%20two%20space-separated%20integers%3A%20A%5C%5C_i%20and%20P%5C%5C_i%5Cn%22%2C%22outputFormat%22%3A%22%5C%5C%2A%20Lines%201..K%3A%20Line%20i%20contains%20a%20single%20integer%20that%20is%20the%20range%20of%20party%20i.%5Cn%22%2C%22samples%22%3A%5B%5B%226%202%20%5Cr%5Cn1%203%20%5Cr%5Cn2%201%20%5Cr%5Cn1%200%20%5Cr%5Cn2%201%20%5Cr%5Cn2%201%20%5Cr%5Cn1%205%20%5Cr%5Cn%22%2C%223%20%5Cr%5Cn2%20%5Cr%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A20%2C%22name%22%3A%22FarmerJohn2%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Gray%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B27%2C46%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A655%2C%22totalAccepted%22%3A285%2C%22pid%22%3A%22P2971%22%2C%22title%22%3A%22%5BUSACO10HOL%5D%5Cu725b%5Cu7684%5Cu653f%5Cu6cbbCow%20Politics%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A159554%2C%22title%22%3A%22%5Cu8d85%5Cu65f6%5Cu5728%5Cu54ea%5Cu4e86%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A2100%2C%22name%22%3A%22P2971%20%5BUSACO10HOL%5D%5Cu725b%5Cu7684%5Cu653f%5Cu6cbbCow%20Politics%22%2C%22slug%22%3A%22P2971%22%7D%7D%2C%7B%22id%22%3A137063%2C%22title%22%3A%22%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu53ea%5Cu670923%5Cu5206%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A2100%2C%22name%22%3A%22P2971%20%5BUSACO10HOL%5D%5Cu725b%5Cu7684%5Cu653f%5Cu6cbbCow%20Politics%22%2C%22slug%22%3A%22P2971%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2146%22%2C%22title%22%3A%22%5BNOI2015%5D%5Cu8f6f%5Cu4ef6%5Cu5305%5Cu7ba1%5Cu7406%5Cu5668%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2590%22%2C%22title%22%3A%22%5BZJOI2008%5D%5Cu6811%5Cu7684%5Cu7edf%5Cu8ba1%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3128%22%2C%22title%22%3A%22%5BUSACO15DEC%5D%5Cu6700%5Cu5927%5Cu6d41Max%20Flow%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4281%22%2C%22title%22%3A%22%5BAHOI2008%5D%5Cu7d27%5Cu6025%5Cu96c6%5Cu5408%20%5C%2F%20%5Cu805a%5Cu4f1a%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4556%22%2C%22title%22%3A%22%5BVani%5Cu6709%5Cu7ea6%5Cu4f1a%5D%5Cu96e8%5Cu5929%5Cu7684%5Cu5c3e%5Cu5df4%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BUSACO10HOL%5D%5Cu725b%5Cu7684%5Cu653f%5Cu6cbbCow%20Politics%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[USACO10HOL]牛的政治Cow Politics</h1>
<h2>题目描述</h2>
<div>Farmer John's cows are living on N (2 <= N <= 200,000) different pastures conveniently numbered 1..N. Exactly N-1 bidirectional cow paths (of unit length) connect these pastures in various ways, and each pasture is reachable from any other cow pasture by traversing one or more of these paths (thus, the pastures and paths form a graph called a tree).
The input for a particular set of pastures will specify the parent node P\_i (0 <= P\_i <= N) for each pasture. The root node will specify parent P\_i == 0, which means it has no parent.
The cows have organized K (1 <= K <= N/2) different political parties conveniently numbered 1..K. Each cow identifies with a single
political party; cow i identifies with political party A\_i (1 <= A\_i <= K). Each political party includes at least two cows.
The political parties are feuding and would like to know how much 'range' each party covers. The range of a party is the largest distance between any two cows within that party (over cow paths).
For example, suppose political party 1 consists of cows 1, 3, and 6, political party 2 consists of cows 2, 4, and 5, and the pastures are connected as follows (party 1 members are marked as -n-):
-3-
|
-1-
/ | \
2 4 5
|
-6-
The greatest distance between any two pastures of political party 1 is 3 (between cows 3 and 6), and the greatest distance for political party 2 is 2 (between cows 2 and 4, between cows 4 and 5, and between cows 5 and 2).
Help the cows determine party ranges.
TIME LIMIT: 2 seconds
MEMORY LIMIT: 64MB
农夫约翰的奶牛住在N (2 <= N <= 200,000)片不同的草地上，标号为1到N。恰好有N-1条单位长度的双向道路，用各种各样的方法连接这些草地。而且从每片草地出发都可以抵达其他所有草地。也就是说，这些草地和道路构成了一种叫做树的图。输入包含一个详细的草地的集合，详细说明了每个草地的父节点P\_i (0 <= P\_i <= N)。根节点的P\_i == 0, 表示它没有父节点。因为奶牛建立了1到K一共K (1 <= K <= N/2)个政党。每只奶牛都要加入某一个政党，其中， 第i只奶牛属于第A\_i (1 <= A\_i <= K)个政党。而且每个政党至少有两只奶牛。 这些政党互相吵闹争。每个政党都想知道自己的“范围”有多大。其中，定义一个政党的范围是这个政党离得最远的两只奶牛（沿着双向道路行走）的距离。
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>\* Line 1: Two space-separated integers: N and K
\* Lines 2..N+1: Line i+1 contains two space-separated integers: A\_i and P\_i
</div>
<h3>输出格式</h3>
<br />
<div>\* Lines 1..K: Line i contains a single integer that is the range of party i.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>6 2 
1 3 
2 1 
1 0 
2 1 
2 1 
1 5 
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3 
2 
</code></pre>
</article>
</div>
</div>
</body>
</html>
