<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[USACO18JAN]Sprinklers - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573381118:9BTxoJhVK0pPeu/x2rJdq5SvqzKXhdsn/L9ItYXmQag=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Farmer%20John%20has%20a%20large%20field%2C%20and%20he%20is%20thinking%20of%20planting%20sweet%20corn%20in%20some%20part%20of%20it.%20After%20surveying%20his%20field%2C%20FJ%20found%20that%20it%20forms%20an%20%24%28N-1%29%20%5C%5Ctimes%20%28N-1%29%24%20square.%20The%20southwest%20corner%20is%20at%20coordinates%20%24%280%2C0%29%24%2C%20and%20the%20northeast%20corner%20is%20at%20%24%28N-1%2CN-1%29%24.%5Cn%5CnAt%20some%20integer%20coordinates%20there%20are%20double-headed%20sprinklers%2C%20each%20one%20sprinkling%20both%20water%20and%20fertilizer.%20A%20double-heading%20sprinkler%20at%20coordinates%20%24%28i%2Cj%29%24%20sprinkles%20water%20on%20the%20part%20of%20the%20field%20north%20and%20east%20of%20it%2C%20and%20sprinkles%20fertilizer%20on%20the%20part%20of%20the%20field%20south%20and%20west%20of%20it.%20Formally%2C%20it%20waters%20all%20real%20coordinates%20%24%28x%2Cy%29%24%20for%20which%20%24N%20%5C%5Cgeq%20x%20%5C%5Cgeq%20i%24%20and%20%24N%20%5C%5Cgeq%20y%20%5C%5Cgeq%20j%24%2C%20and%20it%20fertilizes%20all%20real%20coordinates%20%24%28x%2Cy%29%24%20for%20which%20%240%20%5C%5Cleq%20x%20%5C%5Cleq%20i%24%20and%20%240%20%5C%5Cleq%20y%20%5C%5Cleq%20j%24.%5Cn%5Cn%5CnFarmer%20John%20wants%20to%20plant%20sweet%20corn%20in%20some%20axis-aligned%20rectangle%20in%20his%20field%20with%20integer-valued%20corner%20coordinates.%20However%2C%20for%20the%20sweet%20corn%20to%20grow%2C%20all%20points%20in%20the%20rectangle%20must%20be%20both%20watered%20and%20fertilized%20by%20the%20double-headed%20sprinklers.%20And%20of%20course%20the%20rectangle%20must%20have%20positive%20area%2C%20or%20Farmer%20John%20wouldn%27t%20be%20able%20to%20grow%20any%20corn%20in%20it%21%5Cn%5Cn%5CnHelp%20Farmer%20John%20determine%20the%20number%20of%20rectangles%20of%20positive%20area%20in%20which%20he%20could%20grow%20sweet%20corn.%20Since%20this%20number%20may%20be%20large%2C%20output%20the%20remainder%20of%20this%20number%20modulo%20%2410%5E9%20%2B%207%24.%5Cn%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20consists%20of%20a%20single%20integer%20%24N%24%2C%20the%20size%20of%20the%20field%20%28%241%20%5C%5Cleq%20N%20%5C%5Cleq%2010%5E5%24%29.%5Cn%5CnThe%20next%20%24N%24%20lines%20each%20contain%20two%20space-separated%20integers.%20If%20these%20integers%20are%20%24i%24%20and%20%24j%24%2C%20where%20%240%20%5C%5Cleq%20i%2Cj%20%5C%5Cleq%20N-1%24%2C%20they%20denote%20a%20sprinkler%20located%20at%20%24%28i%2Cj%29%24.%5Cn%5Cn%5CnIt%20is%20guaranteed%20that%20there%20is%20exactly%20one%20sprinkler%20in%20each%20column%20and%20exactly%20one%20sprinkler%20in%20each%20row.%20That%20is%2C%20no%20two%20sprinklers%20have%20the%20same%20%24x%24-coordinate%2C%20and%20no%20two%20sprinklers%20have%20the%20same%20%24y%24-coordinate.%5Cn%22%2C%22outputFormat%22%3A%22The%20output%20should%20consist%20of%20a%20single%20integer%3A%20the%20number%20of%20rectangles%20of%20positive%20area%20which%20are%20fully%20watered%20and%20fully%20fertilized%2C%20modulo%20%2410%5E9%20%2B%207%24.%5Cn%22%2C%22samples%22%3A%5B%5B%225%5Cn0%204%5Cn1%201%5Cn2%202%5Cn3%200%5Cn4%203%22%2C%2221%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A20%2C%22name%22%3A%22FarmerJohn2%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Gray%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22translation%22%3A%22%5Cu519c%5Cu592b%5Cu7ea6%5Cu7ff0%5Cu6709%5Cu5757%5Cu7530%5Cuff0c%5Cu8fd9%5Cu5757%5Cu7530%5Cu53ef%5Cu89c6%5Cu4e3a%5Cu4e00%5Cu4e2a%20%24N%5Cu00d7N%24%20%20%5Cu7684%5Cu6b63%5Cu65b9%5Cu5f62%5Cu7f51%5Cu683c%5Cu3002%5Cu897f%5Cu5357%5Cu89d2%5Cu4e3a%20%24%280%2C0%29%24%20%5Cuff0c%5Cu4e1c%5Cu5317%5Cu89d2%5Cu4e3a%20%24%28N-1%2C%20N-1%29%24%20%5Cu3002%20%20%5Cn%5Cu5728%5Cu67d0%5Cu4e9b%5Cu683c%5Cu5b50%5Cu4e2d%5Cu6709%5Cu53cc%5Cu5934%5Cu55b7%5Cu5934%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu90fd%5Cu80fd%5Cu591f%5Cu540c%5Cu65f6%5Cu55b7%5Cu6d12%5Cu6c34%5Cu548c%5Cu80a5%5Cu6599%5Cu3002%5Cu4e00%5Cu4e2a%5Cu4f4d%5Cu4e8e%20%24%28i%2Cj%29%24%20%20%5Cu7684%5Cu53cc%5Cu5934%5Cu55b7%5Cu5934%5Cu4f1a%5Cn%2A%20%5Cu5c06%5Cu6c34%5Cu6d12%5Cu5728%5Cu6240%5Cu6709%5Cu6ee1%5Cu8db3%20%24N%5Cu2265x%5Cu2265i%2C%24%20%20%24N%5Cu2265y%5Cu2265j%24%20%20%5Cu7684%5Cu683c%5Cu5b50%20%24%28x%2Cy%29%24%20%20%5Cu4e0a%5Cuff1b%5Cn%2A%20%5Cu5c06%5Cu80a5%5Cu6599%5Cu6d12%5Cu5728%5Cu6240%5Cu6709%5Cu6ee1%5Cu8db3%20%240%5Cu2264x%5Cu2264i%24%20%20%5Cu548c%20%240%5Cu2264y%5Cu2264j%24%20%20%5Cu7684%5Cu683c%5Cu5b50%20%24%28x%2Cy%29%24%20%20%5Cu4e0a%5Cu3002%5Cn%5Cn%5Cu519c%5Cu6c11%5Cu7ea6%5Cu7ff0%5Cu60f3%5Cu5728%5Cu8fd9%5Cu5757%5Cu7530%5Cu91cc%5Cu5207%5Cu5272%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu77e9%5Cu5f62%5Cu79cd%5Cu751c%5Cu7389%5Cu7c73%5Cu3002%5Cu77e9%5Cu5f62%5Cu7684%5Cu8fb9%5Cu4e0d%5Cu80fd%5Cu628a%5Cu683c%5Cu5b50%5Cu5207%5Cu5f00%5Cu3002%5Cu77e9%5Cu5f62%5Cu5185%5Cu7684%5Cu6240%5Cu6709%5Cu683c%5Cu5b50%5Cu90fd%5Cu5fc5%5Cu987b%5Cu80fd%5Cu7531%5Cu53cc%5Cu5934%5Cu55b7%5Cu5934%5Cu704c%5Cu6e89%5Cu548c%5Cu65bd%5Cu80a5%5Cu3002%20%20%5Cn%5Cu6c42%5Cu5207%5Cu5272%5Cu77e9%5Cu5f62%5Cu7684%5Cu65b9%5Cu6848%5Cu6570%5Cu3002%5Cu7531%5Cu4e8e%5Cu8fd9%5Cu4e2a%5Cu6570%5Cu5b57%5Cu53ef%5Cu80fd%5Cu5f88%5Cu5927%5Cuff0c%5Cu6240%5Cu4ee5%5Cu8f93%5Cu51fa%5Cu5bf9%20%2410%5E9%2B7%24%20%20%5Cu53d6%5Cu6a21%5Cu3002%5Cn%5Cu8f93%5Cu5165%5Cn%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%20%24N%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu519c%5Cu573a%5Cu7684%5Cu5927%5Cu5c0f%5Cu3002%20%20%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%5Cu7684%20%24N%24%20%20%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu6709%5Cu4e24%5Cu4e2a%5Cu7531%5Cu7a7a%5Cu683c%5Cu5206%5Cu9694%5Cu7684%5Cu6574%5Cu6570%20%24i%2C%20j%24%20%5Cu3002%5Cu8fd9%5Cu8868%5Cu793a%5Cu6709%5Cu4e00%5Cu4e2a%5Cu53cc%5Cu5934%5Cu55b7%5Cu5934%5Cu4f4d%5Cu4e8e%20%24%28i%2C%20j%29%24%20%5Cu3002%20%20%5Cn%5Cu4fdd%5Cu8bc1%5Cu6bcf%5Cu5217%5Cu90fd%5Cu6709%5Cu4e00%5Cu53f0%5Cu55b7%5Cu5934%5Cuff0c%5Cu6bcf%5Cu6392%5Cu6b63%5Cu597d%5Cu6709%5Cu4e00%5Cu53f0%5Cu55b7%5Cu5934%5Cu3002%5Cu6362%5Cu53e5%5Cu8bdd%5Cu8bf4%5Cuff0c%5Cu6ca1%5Cu6709%5Cu4e24%5Cu4e2a%5Cu55b7%5Cu5934%5Cu6709%5Cu76f8%5Cu540c%5Cu7684%5Cu6a2a%5Cu5750%5Cu6807%5Cu6216%5Cu7eb5%5Cu5750%5Cu6807%5Cu3002%5Cn%5Cu8f93%5Cu51fa%5Cn%5Cn%5Cu8f93%5Cu51fa%5Cu5305%5Cu542b%5Cu4e00%5Cu884c%5Cuff0c%5Cu8868%5Cu793a%5Cu65b9%5Cu6848%5Cu6570%5Cuff0c%5Cu5bf9%20%2410%5E9%2B7%24%20%20%5Cu53d6%5Cu6a21%5Cu3002%22%2C%22tags%22%3A%5B35%2C42%2C46%2C254%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A74%2C%22totalAccepted%22%3A39%2C%22pid%22%3A%22P4184%22%2C%22title%22%3A%22%5BUSACO18JAN%5DSprinklers%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A37146%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12809%2C%22name%22%3A%22P4184%20%5BUSACO18JAN%5DSprinklers%22%2C%22slug%22%3A%22P4184%22%7D%7D%2C%7B%22id%22%3A33778%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%5Cu5728%5Cu6b64%22%2C%22forum%22%3A%7B%22id%22%3A12809%2C%22name%22%3A%22P4184%20%5BUSACO18JAN%5DSprinklers%22%2C%22slug%22%3A%22P4184%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3716%22%2C%22title%22%3A%22%5BCTSC2000%5D%5Cu51b0%5Cu539f%5Cu63a2%5Cu9669%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4271%22%2C%22title%22%3A%22%5BUSACO18FEB%5DNew%20Barns%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4501%22%2C%22title%22%3A%22%5BZJOI2018%5D%5Cu80d6%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P5157%22%2C%22title%22%3A%22%5BUSACO18DEC%5DThe%20Cow%20Gathering%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P5205%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu591a%5Cu9879%5Cu5f0f%5Cu5f00%5Cu6839%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BUSACO18JAN%5DSprinklers%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[USACO18JAN]Sprinklers</h1>
<h2>题意翻译</h2>
<div>农夫约翰有块田，这块田可视为一个 $N×N$ 的正方形网格。西南角为 $(0,0)$ ，东北角为 $(N-1, N-1)$ 。
在某些格子中有双头喷头，每一个都能够同时喷洒水和肥料。一个位于 $(i,j)$ 的双头喷头会
* 将水洒在所有满足 $N≥x≥i,$ $N≥y≥j$ 的格子 $(x,y)$ 上；
* 将肥料洒在所有满足 $0≤x≤i$ 和 $0≤y≤j$ 的格子 $(x,y)$ 上。
农民约翰想在这块田里切割出一个矩形种甜玉米。矩形的边不能把格子切开。矩形内的所有格子都必须能由双头喷头灌溉和施肥。
求切割矩形的方案数。由于这个数字可能很大，所以输出对 $10^9+7$ 取模。
输入
第一行包含一个整数 $N$ ，表示农场的大小。
接下来的 $N$ 行，每行有两个由空格分隔的整数 $i, j$ 。这表示有一个双头喷头位于 $(i, j)$ 。
保证每列都有一台喷头，每排正好有一台喷头。换句话说，没有两个喷头有相同的横坐标或纵坐标。
输出
输出包含一行，表示方案数，对 $10^9+7$ 取模。</div>
<h2>题目描述</h2>
<div>Farmer John has a large field, and he is thinking of planting sweet corn in some part of it. After surveying his field, FJ found that it forms an $(N-1) \times (N-1)$ square. The southwest corner is at coordinates $(0,0)$, and the northeast corner is at $(N-1,N-1)$.
At some integer coordinates there are double-headed sprinklers, each one sprinkling both water and fertilizer. A double-heading sprinkler at coordinates $(i,j)$ sprinkles water on the part of the field north and east of it, and sprinkles fertilizer on the part of the field south and west of it. Formally, it waters all real coordinates $(x,y)$ for which $N \geq x \geq i$ and $N \geq y \geq j$, and it fertilizes all real coordinates $(x,y)$ for which $0 \leq x \leq i$ and $0 \leq y \leq j$.
Farmer John wants to plant sweet corn in some axis-aligned rectangle in his field with integer-valued corner coordinates. However, for the sweet corn to grow, all points in the rectangle must be both watered and fertilized by the double-headed sprinklers. And of course the rectangle must have positive area, or Farmer John wouldn't be able to grow any corn in it!
Help Farmer John determine the number of rectangles of positive area in which he could grow sweet corn. Since this number may be large, output the remainder of this number modulo $10^9 + 7$.
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input consists of a single integer $N$, the size of the field ($1 \leq N \leq 10^5$).
The next $N$ lines each contain two space-separated integers. If these integers are $i$ and $j$, where $0 \leq i,j \leq N-1$, they denote a sprinkler located at $(i,j)$.
It is guaranteed that there is exactly one sprinkler in each column and exactly one sprinkler in each row. That is, no two sprinklers have the same $x$-coordinate, and no two sprinklers have the same $y$-coordinate.
</div>
<h3>输出格式</h3>
<br />
<div>The output should consist of a single integer: the number of rectangles of positive area which are fully watered and fully fertilized, modulo $10^9 + 7$.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5
0 4
1 1
2 2
3 0
4 3</code></pre>
<h3>输出样例 #1</h3>
<pre><code>21</code></pre>
</article>
</div>
</div>
</body>
</html>
