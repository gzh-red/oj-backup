<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[POI2007]TET-Tetris Attack - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376919:uYaU2XtrW22GP7aWH671R0/g2/B1keHSyWnJ+cDA7rM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22A%20puzzle%20called%20%5C%22Tetris%20Attack%5C%22%20has%20lately%20become%20a%20very%20popular%20game%20in%20Byteotia.%20The%20game%20itself%20is%20highlysophisticated%2C%20so%20we%20shall%20only%20introduce%20its%20simplified%20rules%3A%20the%20player%20is%20given%20a%20stack%20of%20%242n%24%20elements%2C%20placedone%20on%20another%20and%20marked%20with%20%24n%24%20different%20symbols.%20Exactly%20two%20elements%20of%20the%20stack%20are%20marked%20with%20eachsymbol.%20A%20player%27s%20move%20consists%20in%20swapping%20two%20neighbouring%20elements%2C%20ie.%20interchanging%20them.%20If%2C%20as%20aresult%20of%20the%20swap%2C%20there%20are%20some%20two%20neighbouring%20elements%20marked%20with%20the%20same%20symbol%2C%20they%20are%20bothremoved%20from%20the%20stack.%20Then%20all%20the%20elements%20that%20have%20been%20above%20them%20fall%20down%20in%20consequence%20and%20mayvery%20well%20cause%20another%20removals.%20The%20player%27s%20goal%20is%20emptying%20the%20stack%20in%20the%20least%20possible%20number%20ofmoves.%5Cn%5CnTaskWrite%20a%20programme%20that%3A%5Cn%5Cnreads%20the%20description%20of%20the%20initial%20stack%20content%20from%20the%20standard%20input%2C%20%20%20%20%20%20%20%20finds%20a%20solution%20with%20the%20minimum%20number%20of%20moves%20possible%2C%20%20%20%20%20%20%20%20writes%20out%20the%20outcome%20to%20the%20standard%20output.%5Cn%5Cn%5Cu7ed9%5Cu5b9a%5Cu4e00%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu4e3a2n%5Cu7684%5Cu5e8f%5Cu5217%5Cuff0c1~n%5Cu5404%5Cu51fa%5Cu73b0%5Cu4e24%5Cu6b21%5Cuff0c%5Cu53ef%5Cu4ee5%5Cu4ea4%5Cu6362%5Cu76f8%5Cu90bb%5Cu4e24%5Cu9879%5Cuff0c%5Cu4e24%5Cu4e2a%5Cu540c%5Cu6837%5Cu7684%5Cu6570%5Cu653e%5Cu5728%5Cu4e00%5Cu8d77%5Cu4f1a%5Cu5bf9%5Cu6d88%5Cuff0c%5Cu6c42%5Cu628a%5Cu6240%5Cu6709%5Cu6570%5Cu5bf9%5Cu6d88%5Cu7684%5Cu6700%5Cu5c0f%5Cu4ea4%5Cu6362%5Cu6b21%5Cu6570%5Cu3002%5Cn%5Cn%23%20%5Cu6e29%5Cu99a8%5Cu63d0%5Cu793a%5Cuff0c%5Cu8f93%5Cu51fa%5Cu65b9%5Cu6848%5Cu3002%5Cn%22%2C%22inputFormat%22%3A%22In%20the%20first%20line%20of%20the%20standard%20input%20there%20is%20one%20integer%20%24n%24%2C%20%241%5C%5Cle%20n%5C%5Cle%2050%5C%5C%20000%24.%5Cn%5CnThe%20following%20%242n%24%20lines%20describe%20theinitial%20content%20of%20the%20stack.%20The%20%24%28i%2B1%29%24%27th%20line%20contains%20one%20integer%20%24a_i%24%20-the%20symbol%20which%20the%20%24i%24%27th%20%28%241%5C%5Cle%20a_i%5C%5Cle%20n%24%29element%20from%20the%20bottom%20is%20marked%20with.%20Each%20symbol%20appears%20in%20the%20stack%20exactly%20twice.%20Moreover%2C%20notwo%20identical%20symbols%20neighbour%20initially.%20The%20test%20data%20is%20well%20chosen%20so%20that%20a%20solution%20with%20no%20more%20than%20%241%5C%5C%20000%5C%5C%20000%24%20moves%20exists.%5Cn%22%2C%22outputFormat%22%3A%22A%20solution%20with%20the%20minimum%20number%20of%20moves%20possible%20should%20be%20written%20out%20to%20the%20standard%20output%20asfollows.%20The%20first%20line%20should%20contain%20one%20integer%20%24m%24%20-the%20minimum%20number%20of%20moves.%20The%20following%20%24m%24%20should%20describe%20the%20optimal%20solution%20itself%2C%20i.e.%20a%20sequence%20of%20%24m%24%20integers%20%24p_1%2C%5C%5Ccdots%2Cp_m%24%29%2C%20one%20in%20each%20line.%20%24p_i%24%20denotes%20that%20in%20%24i%24%27th%20move%20the%20player%20has%20chosen%20to%20swap%20the%20%24p_i%24%27thand%20%24%28p_i%2B1%29%24%27th%20elements%20from%20the%20bottom.%5Cn%5CnIf%20more%20than%20one%20optimal%20solution%20exists%2C%20your%20programme%20should%20write%20out%20any%20one%20of%20them.%5Cn%22%2C%22samples%22%3A%5B%5B%225%5Cn5%5Cn2%5Cn3%5Cn1%5Cn4%5Cn1%5Cn4%5Cn3%5Cn5%5Cn2%22%2C%222%5Cn5%5Cn2%22%5D%5D%2C%22hint%22%3A%22SPJ%5Cu8fd4%5Cu56deWA%5Cuff1aSomething%20Left%5Cu4e3a%5Cu65b9%5Cu6848%5Cu9519%5Cu8bef%5Cn%5Cn%23%20%5Cu6e29%5Cu99a8%5Cu63d0%5Cu793a%5Cuff0c%5Cu8f93%5Cu51fa%5Cu65b9%5Cu6848%5Cu3002%5Cn%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B7%2C24%2C53%2C57%2C107%2C287%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A448%2C%22totalAccepted%22%3A117%2C%22pid%22%3A%22P3460%22%2C%22title%22%3A%22%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A44833%2C%22title%22%3A%22SPJ%5Cu662f%5Cu5426%5Cu6709%5Cu95ee%5Cu9898%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%2C%7B%22id%22%3A27560%2C%22title%22%3A%22%5Cu90a3%5Cu4e48%5Cu3002%5Cu3002%5Cu849f%5Cu84bb%5Cu6211%5Cu53ea%5Cu597d%5Cu6c42%5Cu52a9%5Cu5404%5Cu4f4d%5Cu5927%5Cu4f6c%5Cu4e86%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%2C%7B%22id%22%3A27478%2C%22title%22%3A%22%5Cu663e%5Cu793aunexpected%20end%20of%20file%5Cu662f%5Cu4ec0%5Cu4e48%5Cu9519%5Cu8bef%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%2C%7B%22id%22%3A24610%2C%22title%22%3A%22wa%5Cu4e86%5Cuff0c%5Cu63d0%5Cu793a%5Cu201csomething%20left%5Cu201d%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%2C%7B%22id%22%3A19898%2C%22title%22%3A%22%5Cu62a5%5Cu544a%5Cuff01UKE%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%2C%7B%22id%22%3A12351%2C%22title%22%3A%22%5Cu6837%5Cu4f8b%5Cu4e0e%5Cu9898%5Cu9762%5Cu4e0d%5Cu7b26%22%2C%22forum%22%3A%7B%22id%22%3A2698%2C%22name%22%3A%22P3460%20%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22slug%22%3A%22P3460%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3474%22%2C%22title%22%3A%22%5BPOI2008%5DKUP-Plot%20purchase%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3558%22%2C%22title%22%3A%22%5BPOI2013%5DBAJ-Bytecomputer%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3567%22%2C%22title%22%3A%22%5BPOI2014%5DKUR-Couriers%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4011%22%2C%22title%22%3A%22%5Cu5b64%5Cu5c9b%5Cu8425%5Cu6551%5Cu95ee%5Cu9898%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4292%22%2C%22title%22%3A%22%5BWC2010%5D%5Cu91cd%5Cu5efa%5Cu8ba1%5Cu5212%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BPOI2007%5DTET-Tetris%20Attack%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[POI2007]TET-Tetris Attack</h1>
<h2>题目描述</h2>
<div>A puzzle called "Tetris Attack" has lately become a very popular game in Byteotia. The game itself is highlysophisticated, so we shall only introduce its simplified rules: the player is given a stack of $2n$ elements, placedone on another and marked with $n$ different symbols. Exactly two elements of the stack are marked with eachsymbol. A player's move consists in swapping two neighbouring elements, ie. interchanging them. If, as aresult of the swap, there are some two neighbouring elements marked with the same symbol, they are bothremoved from the stack. Then all the elements that have been above them fall down in consequence and mayvery well cause another removals. The player's goal is emptying the stack in the least possible number ofmoves.
TaskWrite a programme that:
reads the description of the initial stack content from the standard input, finds a solution with the minimum number of moves possible, writes out the outcome to the standard output.
给定一个长度为2n的序列，1~n各出现两次，可以交换相邻两项，两个同样的数放在一起会对消，求把所有数对消的最小交换次数。
# 温馨提示，输出方案。
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>In the first line of the standard input there is one integer $n$, $1\le n\le 50\ 000$.
The following $2n$ lines describe theinitial content of the stack. The $(i+1)$'th line contains one integer $a_i$ -the symbol which the $i$'th ($1\le a_i\le n$)element from the bottom is marked with. Each symbol appears in the stack exactly twice. Moreover, notwo identical symbols neighbour initially. The test data is well chosen so that a solution with no more than $1\ 000\ 000$ moves exists.
</div>
<h3>输出格式</h3>
<br />
<div>A solution with the minimum number of moves possible should be written out to the standard output asfollows. The first line should contain one integer $m$ -the minimum number of moves. The following $m$ should describe the optimal solution itself, i.e. a sequence of $m$ integers $p_1,\cdots,p_m$), one in each line. $p_i$ denotes that in $i$'th move the player has chosen to swap the $p_i$'thand $(p_i+1)$'th elements from the bottom.
If more than one optimal solution exists, your programme should write out any one of them.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5
5
2
3
1
4
1
4
3
5
2</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
5
2</code></pre>
<h2>说明</h2>
<div>SPJ返回WA：Something Left为方案错误
# 温馨提示，输出方案。
</div>
</article>
</div>
</div>
</body>
</html>
