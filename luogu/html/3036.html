<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[USACO16DEC]Lasers and Mirrors激光和镜子 - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376318:u4VVhgAKK6wtovUkyXnZFzUw6DYvJ/DFq0Z5HKKIZS0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22For%20some%20reason%2C%20Farmer%20John%27s%20cows%20always%20seem%20to%20be%20running%20laser%20light%20shows.%5Cn%5Cn%5Cu51fa%5Cu4e8e%5Cu67d0%5Cu79cd%5Cu539f%5Cu56e0%5Cuff0c%5Cu519c%5Cu592b%5Cu7ea6%5Cu7ff0%5Cu7684%5Cu725b%5Cu603b%5Cu662f%5Cu5728%5Cu4e3e%5Cu884c%5Cu6fc0%5Cu5149%5Cu8868%5Cu6f14%5Cu3002%5Cn%5CnFor%20their%20latest%20show%2C%20the%20cows%20have%20procured%20a%20large%20powerful%20laser%20--%20so%20large%2Cin%20fact%2C%20that%20they%20cannot%20seem%20to%20move%20it%20easily%20from%20the%20location%20where%20it%20was%20delivered.%20They%20would%20like%20to%20somehow%20send%20the%20light%20from%20the%20laser%20to%20the%20barn%20on%20the%20other%20side%20of%20FJ%27s%20property.%20%20Both%20the%20laser%20and%20the%20barn%20can%20be%20considered%20to%20be%20located%20at%20points%20in%20the%202D%20plane%20on%20a%20map%20of%20FJ%27s%20farm.%20%20The%20cows%20plan%20to%20point%20the%20laser%20so%20that%20it%20sends%20a%20beam%20of%20light%20out%20either%20horizontally%20or%20vertically%20%28i.e.%2C%20%20aligned%20with%20the%20x%20or%20y%20axes%29.%20%20They%20will%20then%20bounce%20this%20beam%20off%20a%20number%20of%20mirrors%20to%20direct%20it%20to%20the%20barn.%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu4ed6%5Cu4eec%5Cu7684%5Cu6700%5Cu65b0%5Cu5c55%5Cu4f1a%5Cuff0c%5Cu5976%5Cu725b%5Cu5df2%5Cu7ecf%5Cu8d2d%5Cu4e70%5Cu4e86%5Cu4e00%5Cu4e2a%5Cu5927%5Cu529f%5Cu7387%5Cu7684%5Cu6fc0%5Cu5149%5Cu5668%20-%20%5Cu8fd9%5Cu4e48%5Cu5927%5Cuff0c%5Cu4e8b%5Cu5b9e%5Cu4e0a%5Cuff0c%5Cu4ed6%5Cu4eec%5Cu4f3c%5Cu4e4e%5Cu4e0d%5Cu80fd%5Cu8f7b%5Cu6613%5Cu5730%5Cu4ece%5Cu5b83%5Cu4ea4%5Cu4ed8%5Cu7684%5Cu4f4d%5Cu7f6e%5Cu79fb%5Cu52a8%5Cu3002%5Cu4ed6%5Cu4eec%5Cu60f3%5Cu4ee5%5Cu67d0%5Cu79cd%5Cu65b9%5Cu5f0f%5Cu5c06%5Cu6fc0%5Cu5149%5Cu7684%5Cu5149%5Cu53d1%5Cu9001%5Cu5230FJ%5Cu7269%5Cu4e1a%5Cu53e6%5Cu4e00%5Cu4fa7%5Cu7684%5Cu8c37%5Cu4ed3%5Cu3002%5Cu6fc0%5Cu5149%5Cu5668%5Cu548c%5Cu8c37%5Cu4ed3%5Cu90fd%5Cu53ef%5Cu4ee5%5Cu88ab%5Cu8ba4%5Cu4e3a%5Cu4f4d%5Cu4e8eFJ%5Cu519c%5Cu573a%5Cu7684%5Cu5730%5Cu56fe%5Cu4e0a%5Cu76842D%5Cu5e73%5Cu9762%5Cu4e2d%5Cu7684%5Cu70b9%5Cu4e0a%5Cu3002%5Cu725b%5Cu8ba1%5Cu5212%5Cu6307%5Cu6325%5Cu6fc0%5Cu5149%5Cu5668%5Cuff0c%5Cu4f7f%5Cu5f97%5Cu5b83%5Cu53d1%5Cu51fa%5Cu6c34%5Cu5e73%5Cu6216%5Cu7ad6%5Cu76f4%5Cuff08%5Cu5373%5Cuff0c%5Cu4e0ex%5Cu6216y%5Cu8f74%5Cu5e73%5Cu884c%5Cuff09%5Cu7684%5Cu5149%5Cu675f%5Cu3002%5Cu4ed6%5Cu4eec%5Cu4f1a%5Cu5c06%5Cu8fd9%5Cu4e2a%5Cu5149%5Cu675f%5Cu4ece%5Cu4e00%5Cu4e9b%5Cu955c%5Cu5b50%5Cu53cd%5Cu5c04%5Cu56de%5Cu53bb%5Cuff0c%5Cu76f4%5Cu63a5%5Cu5230%5Cu8c37%5Cu4ed3%5Cu3002%5Cn%5CnOn%20the%20farm%20there%20are%20%24N%24%20fence%20posts%20%28%241%20%5C%5Cleq%20N%20%5C%5Cleq%20100%2C000%24%29%20located%20at%20distinct%202D%20points%20%28also%20distinct%20from%20the%20laser%20and%20the%20barn%29%20at%20which%20the%20cows%20can%20mount%20mirrors.%20%20The%20cows%20can%20choose%20not%20to%20mount%20a%20mirror%20on%20a%20fence%20post%2C%20in%20which%20case%20the%20laser%20would%20simply%20pass%20straight%20over%20the%20top%20of%20the%20post%20without%20changing%20direction.%20%20If%20the%20cows%20do%20mount%20a%20mirror%20on%20a%20fence%20post%2C%20they%20align%20it%20diagonally%20like%20%5C%2F%20or%20%5C%5C%20so%20that%20it%20will%20re-direct%20a%20horizontal%20beam%20of%20light%20in%20a%20vertical%20direction%20or%20vice%20versa.%5Cn%5Cn%5Cu5728%5Cu519c%5Cu573a%5Cu4e0a%5Cu6709%24N%24%5Cu4e2a%5Cu6805%5Cu680f%28%241%20%5C%5Cleq%20N%20%5C%5Cleq%20100%2C000%24%29%5Cuff0c%5Cu4f4d%5Cu4e8e%5Cu4e0d%5Cu540c%5Cu7684%5Cu4e8c%5Cu7ef4%5Cu70b9%5Cuff08%5Cu4e5f%5Cu4e0d%5Cu540c%5Cu4e8e%5Cu6fc0%5Cu5149%5Cu548c%5Cu8c37%5Cu4ed3%5Cuff09%5Cuff0c%5Cu725b%5Cu53ef%5Cu4ee5%5Cu5b89%5Cu88c5%5Cu955c%5Cu5b50%5Cu3002%5Cu53ef%5Cu4ee5%5Cu9009%5Cu62e9%5Cu4e0d%5Cu5728%5Cu62a4%5Cu680f%5Cu67f1%5Cu4e0a%5Cu5b89%5Cu88c5%5Cu955c%5Cu5b50%5Cuff0c%5Cu5728%5Cu8fd9%5Cu79cd%5Cu60c5%5Cu51b5%5Cu4e0b%5Cuff0c%5Cu6fc0%5Cu5149%5Cu5668%5Cu5c06%5Cu7b80%5Cu5355%5Cu5730%5Cu76f4%5Cu63a5%5Cu901a%5Cu8fc7%5Cu67f1%5Cu5b50%5Cu7684%5Cu9876%5Cu90e8%5Cu800c%5Cu4e0d%5Cu6539%5Cu53d8%5Cu65b9%5Cu5411%5Cu3002%5Cu5982%5Cu679c%5Cu6bcd%5Cu725b%5Cu786e%5Cu5b9e%5Cu5728%5Cu6805%5Cu680f%5Cu67f1%5Cu4e0a%5Cu5b89%5Cu88c5%5Cu4e86%5Cu4e00%5Cu4e2a%5Cu955c%5Cu5b50%5Cuff0c%5Cu5b83%5Cu4eec%5Cu4f1a%5Cu50cf%5C%2F%5Cu6216%5C%5C%5Cu5bf9%5Cu9f50%5Cuff0c%5Cu4f7f%5Cu5f97%5Cu5b83%5Cu5c06%5Cu5728%5Cu5782%5Cu76f4%5Cu65b9%5Cu5411%5Cu4e0a%5Cu91cd%5Cu5b9a%5Cu5411%5Cu5149%5Cu675f%5Cuff0c%5Cu53cd%5Cu4e4b%5Cu4ea6%5Cu7136%5Cu3002%5Cn%5CnPlease%20compute%20the%20minimum%20possible%20number%20of%20mirrors%20the%20cows%20need%20to%20use%20in%20order%20to%20re-direct%20the%20laser%20to%20the%20barn.%5Cn%5Cn%5Cu8bf7%5Cu8ba1%5Cu7b97%5Cu725b%5Cu9700%5Cu8981%5Cu4f7f%5Cu7528%5Cu7684%5Cu955c%5Cu5b50%5Cu7684%5Cu6700%5Cu5c0f%5Cu53ef%5Cu80fd%5Cu6570%5Cu91cf%5Cuff0c%5Cu4ee5%5Cu4fbf%5Cu5c06%5Cu6fc0%5Cu5149%5Cu91cd%5Cu65b0%5Cu5bfc%5Cu5411%5Cu8c37%5Cu4ed3%5Cu3002%5Cn%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20contains%205%20space-separated%20integers%3A%5Cn%5Cn%24N%2C%20x_L%2C%20y_L%2C%20x_B%2C%20y_B%24%2C%20where%20%24%28x_L%2C%20y_L%29%24%20is%20the%20location%20of%20the%20laser%20and%20%24%28x_B%2C%20y_B%29%24%20is%20the%20location%20of%20the%20barn.%20%20All%20coordinates%20are%20between%20%240%24%20and%20%241%2C000%2C000%2C000%24.%5Cn%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu8f93%5Cu5165%5Cu5305%5Cu542b5%5Cu4e2a%5Cu7a7a%5Cu683c%5Cu5206%5Cu9694%5Cu7684%5Cu6574%5Cu6570%5Cuff1a%24N%2C%20x_L%2C%20y_L%2C%20x_B%2C%20y_B%24%5Cuff0c%5Cu5176%5Cu4e2d%24%28x_L%2C%20y_L%29%24%5Cu662f%5Cu6fc0%5Cu5149%5Cu5668%5Cu7684%5Cu4f4d%5Cu7f6e%5Cuff0c%24%28x_B%2C%20y_B%29%24%5Cu662f%5Cu8c37%5Cu4ed3%5Cu7684%5Cu4f4d%5Cu7f6e%5Cu3002%20%5Cu6240%5Cu6709%5Cu5750%5Cu6807%5Cu90fd%5Cu5728%240%24%5Cu548c%241%2C000%2C000%2C000%24%5Cu4e4b%5Cu95f4%5Cu3002%5Cn%5CnThe%20next%20%24N%24%20lines%20each%20contain%20the%20%24x%24%20and%20%24y%24%20locations%20of%20a%20fence%20post%2C%20both%20integers%20in%20the%20range%20%240%20%5C%5Cldots%201%2C000%2C000%2C000%24.%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%5Cu7684N%5Cu884c%5Cu6bcf%5Cu884c%5Cu5305%5Cu542b%5Cu56f4%5Cu680f%5Cu67f1%5Cu7684%24x%24%5Cu548c%24y%24%5Cu4f4d%5Cu7f6e%5Cuff0c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%5Cu5728%240%20%5C%5Cldots%201%2C000%2C000%2C000%24%5Cu7684%5Cu8303%5Cu56f4%5Cu5185%5Cu3002%5Cn%22%2C%22outputFormat%22%3A%22Please%20output%20the%20minimum%20number%20of%20mirrors%20needed%20to%20direct%20the%20laser%20to%20the%20barn%2C%20or%20-1%20if%20this%20is%20impossible%20to%20do.%5Cn%5Cn%5Cu8bf7%5Cu8f93%5Cu51fa%5Cu5c06%5Cu6fc0%5Cu5149%5Cu5f15%5Cu5bfc%5Cu5230%5Cu8c37%5Cu4ed3%5Cu6240%5Cu9700%5Cu7684%5Cu6700%5Cu5c0f%5Cu53cd%5Cu5c04%5Cu955c%5Cu6570%5Cuff0c%5Cu5982%5Cu679c%5Cu4e0d%5Cu53ef%5Cu80fd%5Cuff0c%5Cu5219%5Cu8f93%5Cu51fa-1%5Cu3002%5Cn%22%2C%22samples%22%3A%5B%5B%224%200%200%207%202%5Cn3%202%5Cn0%202%5Cn1%206%5Cn3%200%22%2C%221%22%5D%5D%2C%22hint%22%3A%22%5Cu611f%5Cu8c22%40huzhaoyang%20%5Cu63d0%5Cu4f9b%5Cu7ffb%5Cu8bd1%5Cn%22%2C%22provider%22%3A%7B%22uid%22%3A20%2C%22name%22%3A%22FarmerJohn2%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Gray%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B33%2C46%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A241%2C%22totalAccepted%22%3A81%2C%22pid%22%3A%22P3036%22%2C%22title%22%3A%22%5BUSACO16DEC%5DLasers%20and%20Mirrors%5Cu6fc0%5Cu5149%5Cu548c%5Cu955c%5Cu5b50%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A57145%2C%22title%22%3A%22%5Cu8fd9%5Cu4e9b%5Cu4eba%5Cu7ec8%5Cu4e8e%5Cu7f16%5Cu4e0d%5Cu51fa%5Cu6765%5Cu7406%5Cu7531%5Cu4e86%5Cu5417%3F%22%2C%22forum%22%3A%7B%22id%22%3A1973%2C%22name%22%3A%22P3036%20%5BUSACO16DEC%5DLasers%20and%20Mirrors%5Cu6fc0%5Cu5149%5Cu548c%5Cu955c%5Cu5b50%22%2C%22slug%22%3A%22P3036%22%7D%7D%2C%7B%22id%22%3A15096%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A1973%2C%22name%22%3A%22P3036%20%5BUSACO16DEC%5DLasers%20and%20Mirrors%5Cu6fc0%5Cu5149%5Cu548c%5Cu955c%5Cu5b50%22%2C%22slug%22%3A%22P3036%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P1715%22%2C%22title%22%3A%22%5BUSACO16DEC%5DLots%20of%20Triangles%5Cu597d%5Cu591a%5Cu4e09%5Cu89d2%5Cu5f62%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3280%22%2C%22title%22%3A%22%5BSCOI2013%5D%5Cu6469%5Cu6258%5Cu8f66%5Cu4ea4%5Cu6613%20%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3605%22%2C%22title%22%3A%22%5BUSACO17JAN%5DPromotion%20Counting%5Cu664b%5Cu5347%5Cu8005%5Cu8ba1%5Cu6570%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3608%22%2C%22title%22%3A%22%5BUSACO17JAN%5DBalanced%20Photo%5Cu5e73%5Cu8861%5Cu7684%5Cu7167%5Cu7247%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4268%22%2C%22title%22%3A%22%5BUSACO18FEB%5DDirectory%20Traversal%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BUSACO16DEC%5DLasers%20and%20Mirrors%5Cu6fc0%5Cu5149%5Cu548c%5Cu955c%5Cu5b50%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[USACO16DEC]Lasers and Mirrors激光和镜子</h1>
<h2>题目描述</h2>
<div>For some reason, Farmer John's cows always seem to be running laser light shows.
出于某种原因，农夫约翰的牛总是在举行激光表演。
For their latest show, the cows have procured a large powerful laser -- so large,in fact, that they cannot seem to move it easily from the location where it was delivered. They would like to somehow send the light from the laser to the barn on the other side of FJ's property. Both the laser and the barn can be considered to be located at points in the 2D plane on a map of FJ's farm. The cows plan to point the laser so that it sends a beam of light out either horizontally or vertically (i.e., aligned with the x or y axes). They will then bounce this beam off a number of mirrors to direct it to the barn.
对于他们的最新展会，奶牛已经购买了一个大功率的激光器 - 这么大，事实上，他们似乎不能轻易地从它交付的位置移动。他们想以某种方式将激光的光发送到FJ物业另一侧的谷仓。激光器和谷仓都可以被认为位于FJ农场的地图上的2D平面中的点上。牛计划指挥激光器，使得它发出水平或竖直（即，与x或y轴平行）的光束。他们会将这个光束从一些镜子反射回去，直接到谷仓。
On the farm there are $N$ fence posts ($1 \leq N \leq 100,000$) located at distinct 2D points (also distinct from the laser and the barn) at which the cows can mount mirrors. The cows can choose not to mount a mirror on a fence post, in which case the laser would simply pass straight over the top of the post without changing direction. If the cows do mount a mirror on a fence post, they align it diagonally like / or \ so that it will re-direct a horizontal beam of light in a vertical direction or vice versa.
在农场上有$N$个栅栏($1 \leq N \leq 100,000$)，位于不同的二维点（也不同于激光和谷仓），牛可以安装镜子。可以选择不在护栏柱上安装镜子，在这种情况下，激光器将简单地直接通过柱子的顶部而不改变方向。如果母牛确实在栅栏柱上安装了一个镜子，它们会像/或\对齐，使得它将在垂直方向上重定向光束，反之亦然。
Please compute the minimum possible number of mirrors the cows need to use in order to re-direct the laser to the barn.
请计算牛需要使用的镜子的最小可能数量，以便将激光重新导向谷仓。
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input contains 5 space-separated integers:
$N, x_L, y_L, x_B, y_B$, where $(x_L, y_L)$ is the location of the laser and $(x_B, y_B)$ is the location of the barn. All coordinates are between $0$ and $1,000,000,000$.
第一行输入包含5个空格分隔的整数：$N, x_L, y_L, x_B, y_B$，其中$(x_L, y_L)$是激光器的位置，$(x_B, y_B)$是谷仓的位置。 所有坐标都在$0$和$1,000,000,000$之间。
The next $N$ lines each contain the $x$ and $y$ locations of a fence post, both integers in the range $0 \ldots 1,000,000,000$.
接下来的N行每行包含围栏柱的$x$和$y$位置，两个整数在$0 \ldots 1,000,000,000$的范围内。
</div>
<h3>输出格式</h3>
<br />
<div>Please output the minimum number of mirrors needed to direct the laser to the barn, or -1 if this is impossible to do.
请输出将激光引导到谷仓所需的最小反射镜数，如果不可能，则输出-1。
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 0 0 7 2
3 2
0 2
1 6
3 0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1</code></pre>
<h2>说明</h2>
<div>感谢@huzhaoyang 提供翻译
</div>
</article>
</div>
</div>
</body>
</html>
