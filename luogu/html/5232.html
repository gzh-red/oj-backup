<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[JSOI2012]智者的考验 - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573382357:NcKzNlw+Vwcrk533F4Pl5q9R2kiNPKeUk95FHJac9Js=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22%5Cu516c%5Cu5143%241371%24%5Cu5e74%5Cuff0c%5Cu592a%5Cu7956%5Cu4e0b%5Cu4ee4%5Cu5728%5Cu5317%5Cu6781%5Cu9601%5Cu4e0a%5Cu5927%5Cu5efa%5Cu5e99%5Cu5b87%5Cuff0c%5Cu77ed%5Cu77ed%5Cu51e0%5Cu5e74%5Cuff0c%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu4e0a%5Cu4fbf%5Cu5efa%5Cu6210%5Cu4e86%5Cu5e1d%5Cu738b%5Cu5e99%5Cu3001%5Cu5173%5Cu516c%5Cu5e99%5Cu3001%5Cu771f%5Cu6b66%5Cu5e99%5Cu3001%5Cu529f%5Cu81e3%5Cu5e99%5Cu3001%5Cu848b%5Cu738b%5Cu5e99%5Cu3001%5Cu90fd%5Cu57ce%5Cu968d%5Cu5e99%5Cu3001%5Cu535e%5Cu58f6%5Cu5e99%5Cu3001%5Cu5fe0%5Cu70c8%5Cu5e99%5Cu3001%5Cu5218%5Cu8d8a%5Cu738b%5Cu5e99%5Cu3001%5Cu66f9%5Cu6b66%5Cu60e0%5Cu738b%5Cu5e99%5Cu5171%5Cu5341%5Cu5ea7%5Cu5e99%5Cu5b87%5Cuff0c%5Cu7edf%5Cu79f0%5Cu4e3a%5Cu201c%5Cu5341%5Cu5e99%5Cu201d%5Cu3002%20%5Cn%5Cn%5Cu540e%5Cu6765%5Cuff0c%5Cu4e3a%5Cu4e86%5Cu65b9%5Cu4fbf%5Cu4eba%5Cu4eec%5Cu6765%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu8fdb%5Cu9999%5Cu793c%5Cu4f5b%5Cuff0c%5Cu592a%5Cu7956%5Cu4e0b%5Cu4ee4%5Cu758f%5Cu901a%5Cu4e86%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu4e0b%5Cu5df2%5Cu6de4%5Cu585e%5Cu591a%5Cu5e74%5Cu7684%5Cu6f6e%5Cu6c9f%5Cu3002%5Cu4e8e%5Cu662f%5Cuff0c%5Cu4fbf%5Cu6709%5Cu4e86%5Cu201c%5Cu8fdb%5Cu9999%5Cu6cb3%5Cu201d%5Cu3002%20%5Cn%5Cn%5Cu7136%5Cu800c%5Cu5e76%5Cu4e0d%5Cu662f%5Cu6240%5Cu6709%5Cu4eba%5Cu90fd%5Cu53ef%5Cu4ee5%5Cu6765%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu7684%5Cuff0c%5Cu592a%5Cu7956%5Cu5728%5Cu8fdb%5Cu9999%5Cu6cb3%5Cu4e0a%5Cu4fee%5Cu5efa%5Cu4e86%5Cu4e00%5Cu5ea7%5Cu77f3%5Cu6865%5Cuff0c%5Cu4e2d%5Cu95f4%5Cu60ac%5Cu6302%5Cu4e86%5Cu4e00%5Cu5757%5Cu9ad8%24Rx%24%5Cu5bbd%24Ry%24%5Cu7684%5Cu673a%5Cu5173%5Cu683c%5Cu56fe%5Cuff08%5Cu5982%5Cu4e0b%5Cu56fe%5Cu6240%5Cu793a%5Cuff09%5Cu3002%5Cu6240%5Cu6709%5Cu683c%5Cu5b50%5Cu90fd%5Cu662f%5Cu6d3b%5Cu52a8%5Cu53ef%5Cu7ffb%5Cu8f6c%5Cu7684%5Cuff0c%5Cu4e00%5Cu9762%5Cu662f%5Cu767d%5Cu8272%5Cuff0c%5Cu4e00%5Cu9762%5Cu662f%5Cu9ed1%5Cu8272%5Cuff0c%5Cu8fd9%5Cu91cc%5Cu6211%5Cu4eec%5Cu7528%240%24%5Cu8868%5Cu793a%5Cu767d%5Cu8272%5Cuff0c%5Cu7528%241%24%5Cu8868%5Cu793a%5Cu9ed1%5Cu8272%5Cu3002%5Cu521d%5Cu59cb%5Cu60c5%5Cu51b5%5Cu4e0b%5Cuff0c%5Cu6240%5Cu6709%5Cu683c%5Cu5b50%5Cu90fd%5Cu662f%5Cu767d%5Cu8272%5Cu9762%5Cu671d%5Cu524d%5Cu7684%5Cu3002%5Cu6709%24Rx%2BRy%24%5Cu4e2a%5Cu673a%5Cu5173%5Cu6309%5Cu94ae%5Cuff0c%5Cu5bf9%5Cu5e94%24Rx%24%5Cu884c%5Cu548c%24Ry%24%5Cu5217%5Cu3002%5Cu4e00%5Cu4e2a%5Cu6309%5Cu94ae%5Cu4e00%5Cu65e6%5Cu89e6%5Cu53d1%5Cuff0c%5Cu5c31%5Cu4f1a%5Cu5f15%5Cu53d1%5Cu5bf9%5Cu5e94%5Cu7684%5Cu4e00%5Cu884c%5Cu6216%5Cu4e00%5Cu5217%5Cu7684%5Cu683c%5Cu5b50%5Cu540c%5Cu65f6%5Cu7ffb%5Cu8f6c%5Cu3002%5Cn%20%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fpic%5C%2F52643.png%29%5Cn%5Cn%5Cu540c%5Cu65f6%5Cuff0c%5Cu5584%5Cu4e8e%5Cu8bc6%5Cu5929%5Cu8c61%5Cu7684%5Cu8c0b%5Cu81e3%5Cu5218%5Cu57fa%5Cu7ed9%5Cu51fa%5Cu4e86%5Cu4e00%5Cu79cd%5Cu9ed1%5Cu767d%5Cu72b6%5Cu6001%5Cuff0c%5Cu79f0%5Cu4e4b%5Cu4e3a%5Cu201c%5Cu5384%5Cu8fd0%5Cu661f%5Cu201d%5Cu3002%5Cu6bcf%5Cu4e00%5Cu4f4d%5Cu8fc7%5Cu5f80%5Cu524d%5Cu53bb%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu7684%5Cu4eba%5Cu90fd%5Cu9700%5Cu8981%5Cu89e6%5Cu53d1%5Cu4e14%5Cu53ea%5Cu89e6%5Cu53d1%5Cu4e00%5Cu4e2a%5Cu6309%5Cu94ae%5Cuff0c%5Cu89e6%5Cu53d1%5Cu540e%5Cuff0c%5Cu5982%5Cu679c%5Cu6765%5Cu8bbf%5Cu8005%5Cu5448%5Cu201c%5Cu5384%5Cu8fd0%5Cu661f%5Cu201d%5Cu5f62%5Cu72b6%5Cuff0c%5Cu5219%5Cu4e0d%5Cu5141%5Cu8bb8%5Cu901a%5Cu8fc7%5Cu3002%20%5Cn%5Cn%5Cu6bcf%5Cu4e00%5Cu5929%5Cu8981%5Cu6765%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu7684%5Cu4eba%5Cu6570%24N%24%5Cu662f%5Cu4e8b%5Cu5148%5Cu5c31%5Cu77e5%5Cu9053%5Cu7684%5Cuff0c%5Cu540c%5Cu65f6%5Cu5929%5Cu671d%5Cu795e%5Cu5a01%5Cu6d69%5Cu8361%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu4f4d%5Cu6765%5Cu8005%5Cu4e00%5Cu5f00%5Cu59cb%5Cu603b%5Cu662f%5Cu6709%5Cu5f88%5Cu5927%5Cu6982%5Cu7387%5Cu89e6%5Cu53d1%5Cu7f16%5Cu53f7%5Cu4e3a%241%24%5Cu7684%5Cu6309%5Cu94ae%5Cuff0c%5Cu6211%5Cu4eec%5Cu4e0d%5Cu59a8%5Cu7528%5Cu6570%5Cu5217%24A_1%24%2C%24A_2%24%2C%24%5C%5Cdots%24%2C%24A_N%24%5Cu6765%5Cu8868%5Cu793a%5Cuff0c%5Cu95ee%5Cu9898%5Cu4fdd%5Cu8bc1%5Cu4e86%5Cu521d%5Cu59cb%5Cu65f6%5Cu5019%5Cu7684%24A%24%5Cu6570%5Cu5217%5Cu5168%5Cu4e3a%241%24%5Cu3002%5Cu540c%5Cu65f6%5Cu5728%5Cu6574%5Cu4e2a%5Cu95ee%5Cu9898%5Cu4e2d%5Cuff0c%24A_i%24%5Cu6ee1%5Cu8db3%241%20%5C%5Cleq%20A_i%20%5C%5Cleq%20Rx%2BRy%24%5Cu3002%5Cu592a%5Cu7956%5Cu5f88%5Cu5173%5Cu5fc3%5Cu90a3%5Cu4e9b%5Cu4e0d%5Cu5141%5Cu8bb8%5Cu53bb%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu7684%5Cu4eba%5Cu6570%5Cu3002%5Cu4e8e%5Cu662f%5Cu4ed6%5Cu65f6%5Cu4e0d%5Cu65f6%5Cu5c31%5Cu4f1a%5Cu8be2%5Cu95ee%5Cu5173%5Cu4e8e%5Cu201c%5Cu67d0%5Cu4e00%5Cu6bb5%5Cu65f6%5Cu95f4%5Cu5185%5Cu4f1a%5Cu6709%5Cu591a%5Cu5c11%5Cu4eba%5Cu4e0d%5Cu80fd%5Cu901a%5Cu8fc7%5Cu201c%5Cu5384%5Cu8fd0%5Cu661f%5Cu201d%5Cu7684%5Cu8003%5Cu9a8c%5Cu201d%5Cu3002%5Cu7136%5Cu800c%5Cu90a3%5Cu4e9b%5Cu524d%5Cu6765%5Cu9e21%5Cu7b3c%5Cu5c71%5Cu7684%5Cu6587%5Cu4eba%5Cu58a8%5Cu5ba2%5Cu5e76%5Cu4e0d%5Cu613f%5Cu610f%5Cu5982%5Cu6b64%5Cu5355%5Cu4e00%5Cu7684%5Cu64cd%5Cu4f5c%5Cu3002%5Cu6765%5Cu8bbf%5Cu8005%5Cu6709%5Cu53ef%5Cu80fd%5Cu4f1a%5Cu7a81%5Cu7136%5Cu51b3%5Cu5b9a%5Cu4fee%5Cu6539%5Cu81ea%5Cu5df1%5Cu7684%5Cu89e6%5Cu53d1%5Cu6309%5Cu94ae%5Cu3002%5Cu66f4%5Cu9ebb%5Cu70e6%5Cu7684%5Cu60c5%5Cu51b5%5Cuff0c%5Cu7ed3%5Cu4f34%5Cu800c%5Cu6765%5Cu7684%5Cu8fde%5Cu7eed%5Cu82e5%5Cu5e72%5Cu4eba%5Cu4f1a%5Cu7a81%5Cu7136%5Cu51b3%5Cu5b9a%5Cu4fee%5Cu6539%5Cu89e6%5Cu53d1%5Cu6309%5Cu94ae%5Cu5e76%5Cu4e14%5Cu90fd%5Cu53bb%5Cu89e6%5Cu53d1%5Cu540c%5Cu4e00%5Cu4e2a%5Cu6309%5Cu94ae%5Cu3002%20%5Cn%5Cn%5Cu73b0%5Cu5728%5Cu8fd9%5Cu9ebb%5Cu70e6%5Cu7684%5Cu95ee%5Cu9898%5Cu4ea4%5Cu7ed9%5Cu4e86%5Cu4f60%5Cu3002%20%22%2C%22inputFormat%22%3A%22%5Cu8f93%5Cu5165%5Cu6587%5Cu4ef6%5Cu7b2c%5Cu4e00%5Cu884c%5Cu6709%242%24%5Cu4e2a%5Cu6570%5Cu5b57%24Rx%24%5Cu548c%24Ry%24%5Cu8868%5Cu793a%5Cu673a%5Cu5173%5Cu683c%5Cu56fe%5Cu7684%5Cu9ad8%5Cu548c%5Cu5bbd%5Cuff08%5Cu5982%5Cu56fe%5Cu6240%5Cu793a%5Cuff09%5Cu3002%5Cu4e4b%5Cu540e%24Rx%24%5Cu884c%5Cu6bcf%5Cu4e00%5Cu884c%24Ry%24%5Cu4e2a%5Cu6570%5Cu5b57%5Cuff0c%5Cu63cf%5Cu8ff0%5Cu4e86%5Cu201c%5Cu5384%5Cu8fd0%5Cu661f%5Cu201d%5Cu5f62%5Cu72b6%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu6570%5Cu5b57%5Cu90fd%5Cu6ee1%5Cu8db3%5Cu975e%240%24%5Cu5373%241%24%5Cu3002%20%5Cn%5Cn%5Cu4e4b%5Cu540e%5Cu4e00%5Cu884c%5Cu6709%5Cu4e24%5Cu4e2a%5Cu6570%5Cu5b57%5Cuff0c%5Cu5206%5Cu522b%5Cu4e3a%24N%24%5Cu548c%24M%24%5Cuff0c%5Cu8868%5Cu793a%5Cu4eba%5Cu6570%5Cu548c%5Cu8be2%5Cu95ee%5Cu4fee%5Cu6539%5Cu7684%5Cu6b21%5Cu6570%5Cu3002%20%5Cn%5Cn%5Cu4e4b%5Cu540e%24M%24%5Cu884c%5Cuff0c%5Cu5bf9%5Cu5e94%24M%24%5Cu6b21%5Cu8be2%5Cu95ee%5Cu6216%5Cu4fee%5Cu6539%5Cu3002%5Cu6bcf%5Cu4e00%5Cu884c%5Cu5148%5Cu6709%5Cu4e00%5Cu4e2a%5Cu6570%5Cu5b57%24t%24%5Cuff1a%20%5Cn%5Cn%5Cu82e5%24t%24%5Cu4e3a%240%24%5Cuff1a%5Cu4e4b%5Cu540e%5Cu6709%242%24%5Cu4e2a%5Cu6570%5Cu5b57%24d%24%5Cu548c%24x%24%5Cuff0c%5Cu8868%5Cu660e%5Cu5c06%24A_d%24%5Cu4fee%5Cu6539%5Cu4e3a%24x%24%5Cu3002%5Cn%20%5Cn%5Cu82e5%24t%24%5Cu4e3a%241%24%5Cuff1a%5Cu4e4b%5Cu540e%5Cu6709%242%24%5Cu4e2a%5Cu6570%5Cu5b57%24l%24%5Cu548c%24r%24%5Cuff0c%5Cu8868%5Cu660e%5Cu8be2%5Cu95ee%5Cu7b2c%24l%24%5Cu4e2a%5Cu4eba%5Cu5230%5Cu7b2c%24r%24%5Cu4e2a%5Cu4eba%5Cu4e2d%5Cu6709%5Cu591a%5Cu5c11%5Cu4eba%5Cu89e6%5Cu53d1%5Cu6309%5Cu94ae%5Cu540e%5Cu4f1a%5Cu51fa%5Cu73b0%5Cu201c%5Cu5384%5Cu8fd0%5Cu661f%5Cu201d%5Cu5f62%5Cu72b6%5Cuff0c%5Cu4ece%5Cu800c%5Cu65e0%5Cu6cd5%5Cu901a%5Cu8fc7%5Cu3002%5Cn%5Cn%5Cu82e5%24t%24%5Cu4e3a%242%24%5Cuff1a%5Cu4e4b%5Cu540e%5Cu6709%243%24%5Cu4e2a%5Cu6570%5Cu5b57%24l%24%2C%24r%24%5Cu548c%24x%24%5Cuff0c%5Cu8868%5Cu660e%5Cu5c06%24A_l%24%2C%24A_%7Bl%2B1%7D%24%2C%24%5C%5Cdots%24%2C%24A_%7Br-1%7D%24%2C%24A_r%24%5Cu90fd%5Cu4fee%5Cu6539%5Cu4e3a%24x%24%5Cu3002%20%22%2C%22outputFormat%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e00%5Cu6b21%5Cu8be2%5Cu95ee%28%5Cu5373%24t%24%5Cu4e3a%241%24%5Cu7684%5Cu60c5%5Cu51b5%29%5Cuff0c%5Cu8f93%5Cu51fa%5Cu5355%5Cu72ec%5Cu4e00%5Cu884c%5Cuff0c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cu63cf%5Cu8ff0%5Cu4e86%5Cu5728%5Cu533a%5Cu95f4%24%5Bl%2Cr%5D%24%5Cu4e2d%5Cu6ee1%5Cu8db3%5Cu8981%5Cu6c42%5Cu7684%5Cu4eba%5Cu6570%5Cu3002%22%2C%22samples%22%3A%5B%5B%222%203%20%5Cn0%200%201%20%5Cn1%201%200%20%5Cn7%204%20%5Cn1%201%207%20%5Cn0%202%203%20%5Cn0%203%204%5Ct%5Cn1%201%207%22%2C%220%5Cn3%22%5D%5D%2C%22hint%22%3A%22%5Cu5bf9%5Cu4e8e%2440%5C%5C%25%24%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24N%20%5C%5Cleq%205000%24%2C%24M%20%5C%5Cleq%2010000%24%5Cu3002%5Cn%5Cn%5Cu5b58%5Cu5728%2470%5C%5C%25%24%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24N%20%5C%5Cleq%20130000%24%2C%24M%20%5C%5Cleq%2030000%24%5Cu3002%5Cn%5Cn%5Cu5bf9%5Cu4e8e%24100%5C%5C%25%24%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24N%20%5C%5Cleq%201000000%24%5Cuff0c%24M%20%5C%5Cleq%20120000%24%5Cuff0c%24Rx%20%5C%5Cleq%202%24%5Cuff0c%24Ry%20%5C%5Cleq%203%24%5Cu3002%22%2C%22provider%22%3A%7B%22uid%22%3A64500%2C%22name%22%3A%22Burnside%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Blue%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%2C2000%2C2000%2C2000%2C2000%2C2000%2C2000%2C2000%2C2000%2C2000%5D%2C%22memory%22%3A%5B256000%2C256000%2C256000%2C256000%2C256000%2C256000%2C256000%2C256000%2C256000%2C256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B29%2C48%2C91%2C108%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A17%2C%22totalAccepted%22%3A10%2C%22pid%22%3A%22P5232%22%2C%22title%22%3A%22%5BJSOI2012%5D%5Cu667a%5Cu8005%5Cu7684%5Cu8003%5Cu9a8c%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BJSOI2012%5D%5Cu667a%5Cu8005%5Cu7684%5Cu8003%5Cu9a8c%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[JSOI2012]智者的考验</h1>
<h2>题目描述</h2>
<div>公元$1371$年，太祖下令在北极阁上大建庙宇，短短几年，鸡笼山上便建成了帝王庙、关公庙、真武庙、功臣庙、蒋王庙、都城隍庙、卞壶庙、忠烈庙、刘越王庙、曹武惠王庙共十座庙宇，统称为“十庙”。
后来，为了方便人们来鸡笼山进香礼佛，太祖下令疏通了鸡笼山下已淤塞多年的潮沟。于是，便有了“进香河”。
然而并不是所有人都可以来鸡笼山的，太祖在进香河上修建了一座石桥，中间悬挂了一块高$Rx$宽$Ry$的机关格图（如下图所示）。所有格子都是活动可翻转的，一面是白色，一面是黑色，这里我们用$0$表示白色，用$1$表示黑色。初始情况下，所有格子都是白色面朝前的。有$Rx+Ry$个机关按钮，对应$Rx$行和$Ry$列。一个按钮一旦触发，就会引发对应的一行或一列的格子同时翻转。
![](https://cdn.luogu.com.cn/upload/pic/52643.png)
同时，善于识天象的谋臣刘基给出了一种黑白状态，称之为“厄运星”。每一位过往前去鸡笼山的人都需要触发且只触发一个按钮，触发后，如果来访者呈“厄运星”形状，则不允许通过。
每一天要来鸡笼山的人数$N$是事先就知道的，同时天朝神威浩荡，每一位来者一开始总是有很大概率触发编号为$1$的按钮，我们不妨用数列$A_1$,$A_2$,$\dots$,$A_N$来表示，问题保证了初始时候的$A$数列全为$1$。同时在整个问题中，$A_i$满足$1 \leq A_i \leq Rx+Ry$。太祖很关心那些不允许去鸡笼山的人数。于是他时不时就会询问关于“某一段时间内会有多少人不能通过“厄运星”的考验”。然而那些前来鸡笼山的文人墨客并不愿意如此单一的操作。来访者有可能会突然决定修改自己的触发按钮。更麻烦的情况，结伴而来的连续若干人会突然决定修改触发按钮并且都去触发同一个按钮。
现在这麻烦的问题交给了你。 </div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>输入文件第一行有$2$个数字$Rx$和$Ry$表示机关格图的高和宽（如图所示）。之后$Rx$行每一行$Ry$个数字，描述了“厄运星”形状，每一个数字都满足非$0$即$1$。
之后一行有两个数字，分别为$N$和$M$，表示人数和询问修改的次数。
之后$M$行，对应$M$次询问或修改。每一行先有一个数字$t$：
若$t$为$0$：之后有$2$个数字$d$和$x$，表明将$A_d$修改为$x$。
若$t$为$1$：之后有$2$个数字$l$和$r$，表明询问第$l$个人到第$r$个人中有多少人触发按钮后会出现“厄运星”形状，从而无法通过。
若$t$为$2$：之后有$3$个数字$l$,$r$和$x$，表明将$A_l$,$A_{l+1}$,$\dots$,$A_{r-1}$,$A_r$都修改为$x$。 </div>
<h3>输出格式</h3>
<br />
<div>对于每一次询问(即$t$为$1$的情况)，输出单独一行，一个整数描述了在区间$[l,r]$中满足要求的人数。</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 3 
0 0 1 
1 1 0 
7 4 
1 1 7 
0 2 3 
0 3 4	
1 1 7</code></pre>
<h3>输出样例 #1</h3>
<pre><code>0
3</code></pre>
<h2>说明</h2>
<div>对于$40\%$的数据，$N \leq 5000$,$M \leq 10000$。
存在$70\%$的数据，$N \leq 130000$,$M \leq 30000$。
对于$100\%$的数据，$N \leq 1000000$，$M \leq 120000$，$Rx \leq 2$，$Ry \leq 3$。</div>
</article>
</div>
</div>
</body>
</html>
