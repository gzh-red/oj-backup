<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[POI2006]NAJ-The Invasion - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376898:VAtgZ9zsRBjrxjbC83Gs04IsbnO8JB66EIyIcNJJjhI=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22And%20so%20it%20has%20come%20-%20the%20Triangles%20have%20invaded%20Byteotia%21%5Cn%5CnByteotia%20lies%20on%20an%20island%2C%20occupying%20its%20entire%20surface.%5Cn%5CnThe%20shape%20of%20the%20island%20is%20a%20convex%20polygon%28i.e.%20a%20polygon%20whose%20each%20inner%20angle%20is%20smaller%20than%20%24180%5C%5Cdegree%24%29.%5Cn%5CnA%20certain%20number%20of%20software%20factories%20are%20located%20in%20Byteotia%2C%20each%20of%20which%20generates%20constant%20gains%20or%20losses.%5Cn%5CnThe%20Triangles%20have%20decided%20to%20occupy%20such%20a%20part%20of%20Byteotia%20which%3A%5Cn%5Cnis%20a%20triangle-shaped%20area%2C%20the%20vertices%20of%20which%20are%20three%20different%20vertices%20of%20the%20polygon-island%2C%20%20%20%20%20brings%20the%20largest%20income%20i.e.%20the%20sum%20of%20all%20gains%20and%20losses%20generated%20by%20factories%20within%20the%20occupied%20area%20is%20maximal.%5Cn%5CnWe%20assume%20that%20a%20factory%20located%20on%20the%20border%20or%20in%20the%20vertex%20of%20occupied%20area%20belongs%20to%20that%20area.%20A%20territory%20which%20contains%20no%20factory%20brings%2C%20obviously%2C%20a%20zero%20income.%5Cn%5CnByteasar%2C%20the%20King%20of%20Byteotia%2C%20is%20concerned%20by%20the%20amount%20of%20losses%20the%20Triangles%27%20invasion%20could%20generate.%20Help%20him%20by%20writing%20a%20programme%20which%20shall%20calculate%20the%20sum%20of%20gains%20and%20losses%20generated%20by%20factories%20which%20the%20Triangles%20wish%20to%20capture.%5Cn%5CnTaskWrite%20a%20programme%20which%3A%5Cn%5Cnreads%20a%20decription%20of%20Byteotia%27s%20shape%20and%20the%20locations%20of%20factories%20from%20the%20input%20file%2C%20%20%20%20%20determines%20the%20maximal%20value%20of%20sum%20of%20all%20gains%20and%20losses%20generated%20by%20factories%20within%20a%20triangle%2C%20whose%20vertices%20are%20three%20different%20vertices%20of%20the%20polygon%20island%2C%20%20%20%20%20writes%20the%20outcome%20to%20the%20output%20file.%5Cn%5Cn%5Cu7ed9%5Cu5b9a%5Cu4e00%5Cu4e2a%5Cu51f8%5Cu5305%5Cuff0c%20%5Cu5e76%5Cu7ed9%5Cu51fa%5Cu51f8%5Cu5305%5Cu5185%5Cu90e8%5Cu6216%5Cu8fb9%5Cu4e0a%5Cu7684%5Cu82e5%5Cu5e72%5Cu4e2a%5Cu8d44%5Cu6e90%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu8d44%5Cu6e90%5Cu90fd%5Cu6709%5Cu6743%5Cu503c%2C%5Cu73b0%5Cu5728%5Cu8981%5Cu5728%5Cu51f8%5Cu5305%5Cu4e0a%5Cu9762%5Cu9009%5Cu62e9%5Cu4e0d%5Cu540c%5Cu76843%5Cu4e2a%5Cu70b9%5Cuff0c%5Cu4f7f%5Cu5f973%5Cu4e2a%5Cu70b9%5Cu7ec4%5Cu6210%5Cu7684%5Cu4e09%5Cu89d2%5Cu5f62%5Cn%5Cn%5Cn%5Cu5185%5Cu90e8%5Cu7684%5Cu8d44%5Cu6e90%5Cu7684%5Cu6743%5Cu503c%5Cu4e4b%5Cu548c%5Cu6700%5Cu5927%5Cu3002%5Cn%5Cn%5Cn%5Cu51f8%5Cu5305%5Cu70b9%5Cu4e2a%5Cu6570%20%24n%20%5C%5Cle%20600%24%5Cn%5Cn%5Cn%5Cu8d44%5Cu6e90%5Cu4e2a%5Cu6570%20%24m%20%5C%5Cle%2010000%24%5Cn%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20file%20contains%20a%20single%20integer%20%24n%24%20%28%243%20%5C%5Cle%20n%20%5C%5Cle%20600%24%29%2C%20denoting%20the%20number%20of%20vertices%20of%20the%20polygon-island.%5Cn%5CnThe%20following%20%24n%24%20lines%20of%20the%20input%20contain%20two%20integers%20each%20%24x_j%24%20and%20%24y_j%24%20%28%24-10%5C%5C%20000%20%5C%5Cle%20x_j%2C%20y_j%20%5C%5Cle%2010%5C%5C%20000%24%29%2C%20separated%20by%20a%20single%20space%2C%20denoting%20the%20coordinates%20%24x%24%20and%20%24y%24%20of%20consecutive%20vertices%20of%20the%20island%2C%20in%20a%20clockwise%20order.%5Cn%5CnThe%20%24%28n%2B2%29%24-nd%20line%20contains%20a%20single%20integer%20%24m%24%20%28%241%20%5C%5Cle%20m%20%5C%5Cle%2010%5C%5C%20000%24%29%2C%20denoting%20thetotal%20number%20of%20factories.%5Cn%5CnIn%20each%20of%20the%20following%20%24m%24%20lines%20there%20are%20three%20integers%20%24x_i%27%24%2C%20%24y_i%27%24%20and%20%24w_i%24%20%28%24-10%5C%5C%20000%20%5C%5Cle%20x_i%27%2C%20y_i%27%20%5C%5Cle%2010%5C%5C%20000%24%2C%20%24-100%5C%5C%20000%20%5C%5Cle%20w_i%20%5C%5Cle%20100%5C%5C%20000%24%29%2C%20separated%20by%20single%20spaces%2C%20denoting%3A%20the%20coordinates%20%24x%24%20and%20%24y%24%20of%20the%20%24i%24-th%20factory%20and%20the%20gain%20%28for%20%24w_i%20%5C%5Cge%200%24%29%20or%20loss%20%28for%20%24w_i%20%3C%200%24%29%20this%20factory%20generates%2C%20respectively.%20Each%20factory%20is%20situated%20on%20the%20polygon-island%20i.e.%20within%20or%20on%20the%20border%20of%20it.%20Distinct%20factories%20may%20be%20located%20in%20the%20same%20place%20i.e.%20have%20the%20same%20coordinates.%5Cn%22%2C%22outputFormat%22%3A%22The%20first%20and%20only%20line%20of%20the%20output%20file%20should%20contain%20a%20single%20integer%20denoting%20the%20maximal%20value%20of%20sum%20of%20all%20gains%20and%20losses%20generated%20by%20factories%20within%20a%20triangle%20whose%20vertices%20are%20three%20different%20vertices%20of%20the%20polygon-island.%20Notice%20that%20it%20may%20happen%20that%20the%20outcome%20is%20a%20negative%20integer.%5Cn%22%2C%22samples%22%3A%5B%5B%225%5Cn4%201%5Cn1%204%5Cn8%209%5Cn11%205%5Cn8%201%5Cn4%5Cn7%202%203%5Cn6%203%20-1%5Cn4%205%203%5Cn9%206%20-4%22%2C%225%22%5D%5D%2C%22hint%22%3A%22the%20correct%20result%20is%3A%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fpic%5C%2F6970.png%29%5Cn%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B23%2C57%2C291%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A13%2C%22totalAccepted%22%3A1%2C%22pid%22%3A%22P3442%22%2C%22title%22%3A%22%5BPOI2006%5DNAJ-The%20Invasion%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BPOI2006%5DNAJ-The%20Invasion%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[POI2006]NAJ-The Invasion</h1>
<h2>题目描述</h2>
<div>And so it has come - the Triangles have invaded Byteotia!
Byteotia lies on an island, occupying its entire surface.
The shape of the island is a convex polygon(i.e. a polygon whose each inner angle is smaller than $180\degree$).
A certain number of software factories are located in Byteotia, each of which generates constant gains or losses.
The Triangles have decided to occupy such a part of Byteotia which:
is a triangle-shaped area, the vertices of which are three different vertices of the polygon-island, brings the largest income i.e. the sum of all gains and losses generated by factories within the occupied area is maximal.
We assume that a factory located on the border or in the vertex of occupied area belongs to that area. A territory which contains no factory brings, obviously, a zero income.
Byteasar, the King of Byteotia, is concerned by the amount of losses the Triangles' invasion could generate. Help him by writing a programme which shall calculate the sum of gains and losses generated by factories which the Triangles wish to capture.
TaskWrite a programme which:
reads a decription of Byteotia's shape and the locations of factories from the input file, determines the maximal value of sum of all gains and losses generated by factories within a triangle, whose vertices are three different vertices of the polygon island, writes the outcome to the output file.
给定一个凸包， 并给出凸包内部或边上的若干个资源，每个资源都有权值,现在要在凸包上面选择不同的3个点，使得3个点组成的三角形
内部的资源的权值之和最大。
凸包点个数 $n \le 600$
资源个数 $m \le 10000$
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input file contains a single integer $n$ ($3 \le n \le 600$), denoting the number of vertices of the polygon-island.
The following $n$ lines of the input contain two integers each $x_j$ and $y_j$ ($-10\ 000 \le x_j, y_j \le 10\ 000$), separated by a single space, denoting the coordinates $x$ and $y$ of consecutive vertices of the island, in a clockwise order.
The $(n+2)$-nd line contains a single integer $m$ ($1 \le m \le 10\ 000$), denoting thetotal number of factories.
In each of the following $m$ lines there are three integers $x_i'$, $y_i'$ and $w_i$ ($-10\ 000 \le x_i', y_i' \le 10\ 000$, $-100\ 000 \le w_i \le 100\ 000$), separated by single spaces, denoting: the coordinates $x$ and $y$ of the $i$-th factory and the gain (for $w_i \ge 0$) or loss (for $w_i < 0$) this factory generates, respectively. Each factory is situated on the polygon-island i.e. within or on the border of it. Distinct factories may be located in the same place i.e. have the same coordinates.
</div>
<h3>输出格式</h3>
<br />
<div>The first and only line of the output file should contain a single integer denoting the maximal value of sum of all gains and losses generated by factories within a triangle whose vertices are three different vertices of the polygon-island. Notice that it may happen that the outcome is a negative integer.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5
4 1
1 4
8 9
11 5
8 1
4
7 2 3
6 3 -1
4 5 3
9 6 -4</code></pre>
<h3>输出样例 #1</h3>
<pre><code>5</code></pre>
<h2>说明</h2>
<div>the correct result is:
![](https://cdn.luogu.com.cn/upload/pic/6970.png)
</div>
</article>
</div>
</div>
</body>
</html>
