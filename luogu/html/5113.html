<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Sabbat of the witch - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573382205:GcYuoHxKriF1il9DAAzC5Bwvw/QbyKQoE71Q32jJcyE=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%5Cu60a8%5Cu6b63%5Cu5728%5Cu5728%5Cu6e38%5Cu73a9%5Cu300a%5Cu9b54%5Cu5973%5Cu7684%5Cu591c%5Cu5bb4%5Cu300b%2C%5Cu7a81%5Cu7136%5Cu5f00%5Cu59cb%5Cu601d%5Cu8003%5Cu4e00%5Cu4e2a%5Cu54f2%5Cu5b66%5Cu95ee%5Cu9898%3A%5Cu8fd9%5Cu4f5c%5Cu7684restart%5Cu7ebf%5Cu5230%5Cu5e95%5Cu7b97%5Cu4e0d%5Cu7b97ntr%5Cuff1f%5Cn%5Cn%21%5B%5D%28http%3A%5C%2F%5C%2F0d077ef9e74d8.cdn.sohucs.com%5C%2FrcLQDT4_png%29%5Cn%5Cn%21%5B%5D%28http%3A%5C%2F%5C%2F0d077ef9e74d8.cdn.sohucs.com%5C%2FrcLQJyV_png%29%5Cn%5Cn%21%5B%5D%28http%3A%5C%2F%5C%2F0d077ef9e74d8.cdn.sohucs.com%5C%2FrcLQMrk_png%29%5Cn~~%5Cu60a8%5Cu5728%5Cu601d%5Cu7d22%5Cu4e86%5Cu5f88%5Cu957f%5Cu65f6%5Cu95f4%5Cu4e4b%5Cu540e%2C%5Cu7a81%5Cu7136%5Cu6ce8%5Cu610f%5Cu5230%5Cu8fd9%5Cu662f%5Cu4e2a%5Cu6d89%5Cu53ca%5Cu5230%5Cu65f6%5Cu95f4%5Cu7ebf%5Cu548c%5Cu4eba%5Cu683c%5Cu540c%5Cu4e00%5Cu6027%5Cu7684%5Cu54f2%5Cu5b66%5Cu95ee%5Cu9898~~%5Cn%5Cn%5Cu6b64%5Cu65f6%5Cu60a8%5Cu7a81%5Cu7136%5Cu53d1%5Cu73b0galgame%5Cu548c%5Cu6570%28%5Cu6bd2%29%5Cu636e%28%5Cu7624%29%5Cu7ed3%28%5Cu5206%29%5Cu6784%28%5Cu5757%29%5Cu6709%5Cu4e00%5Cu4e9b%5Cu5965%5Cu5999%5Cu91cd%5Cu91cd%5Cu7684%5Cu5173%5Cu7cfb%5Cuff0c%5Cu4e3a%5Cu4e86%5Cu66f4%5Cu597d%5Cu7684%5Cu601d%5Cu8003%5Cu8fd9%5Cu4e2a%5Cu95ee%5Cu9898%5Cuff0c%5Cu60a8%5Cu51b3%5Cu5b9a%5Cu53bb%5Cu5199%5Cu4e00%5Cu9053%5Cu6570%28%5Cu6bd2%29%5Cu636e%28%5Cu7624%29%5Cu7ed3%28%5Cu5206%29%5Cu6784%28%5Cu5757%29%5Cu9898%22%2C%22description%22%3A%22%5Cu7ef4%5Cu62a4%5Cu4e00%5Cu4e2a%5Cu5e8f%5Cu5217%2C%5Cu652f%5Cu6301%5Cu4ee5%5Cu4e0b%5Cu4e09%5Cu79cd%5Cu64cd%5Cu4f5c%5Cn%5Cn1.%5Cu533a%5Cu95f4%5Cu8d4b%5Cu503c%5Cn%5Cn2.%5Cu533a%5Cu95f4%5Cu6c42%5Cu548c%5Cn%5Cn3.%5Cu64a4%5Cu56de%5Cu4e4b%5Cu524d%5Cu7684%5Cu4e00%5Cu4e2a%5Cu533a%5Cu95f4%5Cu8d4b%5Cu503c%5Cu64cd%5Cu4f5c%5Cn%5Cn%2A%2A%5Cu5f3a%5Cu5236%5Cu5728%5Cu7ebf%2A%2A%5Cn%5Cn%5Cu6ce8%5Cu610f%5Cuff1a%5Cu8fd9%5Cu91cc%5Cu7684%5Cu64a4%5Cu56de%5Cu64cd%5Cu4f5c%5Cu65e2%5Cu4e0d%5Cu4f1a%5Cu5f71%5Cu54cd%5Cu4e4b%5Cu524d%5Cu7684%5Cu64cd%5Cu4f5c%5Cu4e5f%5Cu4e0d%5Cu4f1a%5Cu5f71%5Cu54cd%5Cu4e4b%5Cu540e%5Cu7684%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu6362%5Cu53e5%5Cu8bdd%5Cu8bb2%5Cu64a4%5Cu56de%5Cu4e00%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cu4e4b%5Cu540e%5Cu5e8f%5Cu5217%5Cu5c06%5Cu4f1a%5Cu53d8%5Cu6210%5Cu5386%5Cu53f2%5Cu4e0a%5Cu4ece%5Cu6765%5Cu6ca1%5Cu6709%5Cu8fc7%5Cu88ab%5Cu64a4%5Cu56de%5Cu64cd%5Cu4f5c%5Cu7684%5Cu72b6%5Cu6001%5Cn%5Cn%5Cu716e%5Cu4e2a%5Cu6817%5Cu5b50%5Cuff0c%5Cu5047%5Cu8bbe%5Cu6211%5Cu4eec%5Cu5bf9%5Cu5e8f%5Cu5217%5Cu6309%5Cu987a%5Cu5e8f%5Cu6267%5Cu884c%5Cu4e861%2C2%2C3%2C4%2C5%5Cu53f7%5Cu64cd%5Cu4f5c%5Cn%5Cn%5Cu5f53%5Cu6211%5Cu4eec%5Cu64a4%5Cu56de%5Cu64cd%5Cu4f5c4%5Cu7684%5Cu65f6%5Cu5019%5Cuff0c%5Cu6574%5Cu4e2a%5Cu5e8f%5Cu5217%5Cu5e94%5Cu8be5%5Cu548c%5Cu6309%5Cu987a%5Cu5e8f%5Cu6267%5Cu884c%5Cu4e861%2C2%2C3%2C5%5Cu64cd%5Cu4f5c%5Cu4e4b%5Cu540e%5Cu7684%5Cu5e8f%5Cu5217%5Cu4e00%5Cu6837%5Cn%5Cn%5Cu5f53%5Cu6211%5Cu4eec%5Cu63a5%5Cu7740%5Cu64a4%5Cu56de%5Cu64cd%5Cu4f5c2%5Cu7684%5Cu65f6%5Cu5019%5Cuff0c%5Cu6574%5Cu4e2a%5Cu5e8f%5Cu5217%5Cu5e94%5Cu8be5%5Cu548c%5Cu6309%5Cu987a%5Cu5e8f%5Cu6267%5Cu884c%5Cu4e861%2C3%2C5%5Cu64cd%5Cu4f5c%5Cu4e4b%5Cu540e%5Cu7684%5Cu5e8f%5Cu5217%5Cu4e00%5Cu6837%5Cn%5Cn%5Cn%5Cn%5Cn%5Cn%22%2C%22inputFormat%22%3A%22%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%24n%2Cm%24%5Cu8868%5Cu793a%5Cu5e8f%5Cu5217%5Cu957f%5Cu5ea6%5Cu548c%5Cu64cd%5Cu4f5c%5Cu4e2a%5Cu6570%5Cn%5Cn%5Cu7b2c%5Cu4e8c%5Cu884c%24n%24%5Cu4e2a%5Cu6574%5Cu6570%24a_%7B1%7D...a_%7Bn%7D%24%5Cu5176%5Cu4e2d%24a_%7Bi%7D%24%5Cu8868%5Cu793a%5Cu5e8f%5Cu5217%5Cu7684%5Cu7b2c%24i%24%5Cu9879%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%24m%24%5Cu884c%5Cn%5Cn%5Cu5982%5Cu679c%5Cu8fd9%5Cu4e00%5Cu884c%5Cu662f%241%2Cl%2Cr%2Cv%24%5Cu7684%5Cu8bdd%5Cu4ee3%5Cu8868%5Cu5c06%24%28l%2Cr%29%24%5Cu8fd9%5Cu6bb5%5Cu533a%5Cu95f4%5Cu8d4b%5Cu503c%5Cu6210%24v%24%2C%5Cu5047%5Cu5982%5Cu8fd9%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cu662f%5Cu7b2c%24k%24%5Cu6b21%5Cu8d4b%5Cu503c%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu90a3%5Cu4e48%5Cu8fd9%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cu7684%5Cu7f16%5Cu53f7%5Cu5c31%5Cu662f%24k%24%5Cn%5Cn%5Cu5982%5Cu679c%5Cu8fd9%5Cu4e00%5Cu884c%5Cu662f%242%2Cl%2Cr%24%5Cu7684%5Cu8bdd%5Cu4ee3%5Cu8868%5Cu8be2%5Cu95ee%24%28l%2Cr%29%24%5Cu8fd9%5Cu6bb5%5Cu533a%5Cu95f4%5Cu4e2d%5Cu6570%5Cu5b57%5Cu7684%5Cu548c%5Cn%5Cn%5Cu5982%5Cu679c%5Cu8fd9%5Cu4e00%5Cu884c%5Cu662f%243%2Cx%24%5Cu7684%5Cu8bdd%5Cu4ee3%5Cu8868%5Cu64a4%5Cu56de%5Cu7f16%5Cu53f7%5Cu4e3a%24x%24%5Cu7684%5Cu64cd%5Cu4f5c%5Cn%5Cn%2A%2A%5Cu6570%5Cu636e%5Cu4fdd%5Cu8bc1%5Cu88ab%5Cu64a4%5Cu56de%5Cu7684%5Cu64cd%5Cu4f5c%5Cu4e00%5Cu5b9a%5Cu5b58%5Cu5728%5Cu5e76%5Cu4e14%5Cu6bcf%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cu53ea%5Cu4f1a%5Cu88ab%5Cu64a4%5Cu56de%5Cu4e00%5Cu6b21%2A%2A%5Cn%5Cn%5Cu4e3a%5Cu4e86%5Cu4f53%5Cu73b0%5Cu9898%5Cu76ee%5Cu7684%5Cu5728%5Cu7ebf%5Cu6027%5Cuff0c%5Cu6211%5Cu4eec%5Cu8bbelastans%5Cu8868%5Cu793a%5Cu8bfb%5Cu5165%5Cu5f53%5Cu524d%5Cu64cd%5Cu4f5c%5Cu65f6%5Cu6700%5Cu540e%5Cu4e00%5Cu6b21%5Cu8be2%5Cu95ee%5Cu7684%5Cu7b54%5Cu6848%5Cuff0c%28lastans%5Cu7684%5Cu521d%5Cu59cb%5Cu503c%5Cu4e3a0%29%5Cn%5Cn%5Cu90a3%5Cu4e48%5Cu5bf9%5Cu4e8e%5Cu64cd%5Cu4f5c1%2C%5Cu4f60%5Cu9700%5Cu8981%5Cu64cd%5Cu4f5c%5Cu7684%5Cu771f%5Cu5b9e%5Cu533a%5Cu95f4%5Cu662f%24%28l%20%5C%5Coplus%20lastans%2Cr%20%5C%5Coplus%20lastans%29%24%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu64cd%5Cu4f5c2%2C%5Cu4f60%5Cu9700%5Cu8981%5Cu8be2%5Cu95ee%5Cu7684%5Cu771f%5Cu5b9e%5Cu533a%5Cu95f4%5Cu662f%24%28l%20%5C%5Coplus%20lastans%2Cr%20%5C%5Coplus%20lastans%29%24%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu64cd%5Cu4f5c3%2C%5Cu4f60%5Cu9700%5Cu8981%5Cu64a4%5Cu56de%5Cu7684%5Cu64cd%5Cu4f5c%5Cu7f16%5Cu53f7%5Cu662f%24x%20%5C%5Coplus%20lastans%24%5Cn%5Cn%5Cu5176%5Cu4e2d%24%5C%5Coplus%24%5Cu8fd0%5Cu7b97%5Cu7b26%5Cu8868%5Cu793a%5Cu5f02%5Cu6216%5Cu8fd0%5Cu7b97%5Cn%5Cn%22%2C%22outputFormat%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu64cd%5Cu4f5c2%5Cu8f93%5Cu51fa%5Cu4e00%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu8868%5Cu793a%5Cu8be2%5Cu95ee%5Cu533a%5Cu95f4%5Cu4e2d%5Cu7684%5Cu5143%5Cu7d20%5Cu4e4b%5Cu548c%5Cn%5Cn%5Cu4e3a%5Cu4e86%5Cu65b9%5Cu4fbf%5Cu4f60%5Cu7406%5Cu89e3%5Cu9898%5Cu610f%5Cu548c%5Cu8c03%5Cu8bd5%5Cuff0c%5Cu6211%5Cu4eec%5Cu4e86%5Cu51c6%5Cu5907%5Cu4e24%5Cu4e2a%5Cu6837%5Cu4f8b%5Cuff0c%5Cu4e00%5Cu4e2a%5Cu662f%5Cu5f3a%5Cu5236%5Cu5728%5Cu7ebf%5Cu7684%5Cu800c%5Cu53e6%5Cu4e00%5Cu4e2a%5Cu662f%5Cu975e%5Cu5f3a%5Cu5236%5Cu5728%5Cu7ebf%5Cu7684%28%5Cu5c3d%5Cu7ba1%5Cu672c%5Cu9898%5Cu6ca1%5Cu6709%5Cu975e%5Cu5f3a%5Cu5236%5Cu5728%5Cu7ebf%5Cu7684%5Cu90e8%5Cu5206%5Cu5206%29%22%2C%22samples%22%3A%5B%5B%2220%2020%5Cn8%206%204%209%209%208%205%205%207%209%208%208%205%208%202%202%202%201%209%204%20%5Cn1%2017%2019%204%5Cn1%203%208%205%5Cn3%202%5Cn2%204%2010%5Cn1%2014%2019%208%5Cn2%2010%2016%5Cn2%209%209%5Cn1%201%2018%201%5Cn1%201%207%2010%5Cn2%204%206%5Cn2%209%2010%5Cn1%205%2017%202%5Cn1%2010%2019%206%5Cn1%202%205%202%5Cn1%206%208%202%5Cn1%2014%2019%201%5Cn1%204%207%206%5Cn1%2017%2019%2010%5Cn2%208%2012%5Cn1%2010%2010%202%5Cn%22%2C%2252%5Cn54%5Cn7%5Cn30%5Cn2%5Cn22%5Cn%22%5D%2C%5B%2220%2020%5Cn8%206%204%209%209%208%205%205%207%209%208%208%205%208%202%202%202%201%209%204%20%5Cn1%2017%2019%204%5Cn1%203%208%205%5Cn3%202%5Cn2%204%2010%5Cn1%2058%2039%208%5Cn2%2062%2036%5Cn2%2063%2063%5Cn1%206%2021%201%5Cn1%206%200%2010%5Cn2%203%201%5Cn2%2023%2020%5Cn1%207%2019%202%5Cn1%208%2017%206%5Cn1%200%207%202%5Cn1%204%2010%202%5Cn1%2012%2017%201%5Cn1%206%205%206%5Cn1%2019%2017%2010%5Cn2%2010%2014%5Cn1%2028%2028%202%5Cn%22%2C%2252%5Cn54%5Cn7%5Cn30%5Cn2%5Cn22%5Cn%22%5D%5D%2C%22hint%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu7b2c9%2C10%5Cu4e2a%5Cu6d4b%5Cu8bd5%5Cu70b9%2C%5Cu6ee1%5Cu8db3%24n%2Cm%20%5C%5Cleq%2010%5E4%24%5Cuff0c%5Cu8fd9%5Cu4e24%5Cu4e2a%5Cu6d4b%5Cu8bd5%5Cu70b9%5Cu7684%5Cu5206%5Cu6570%5Cu90fd%5Cu4e3a1%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu5269%5Cu4f59%5Cu7684%5Cu6d4b%5Cu8bd5%5Cu70b9%24n%2Cm%20%5C%5Cleq%2010%5E5%24%5Cu5e76%5Cu4e14%5Cu64cd%5Cu4f5c1%5Cu7684%5Cu4e2a%5Cu6570%5Cu4e0d%5Cu8d85%5Cu8fc7%2465000%24%5Cn%5Cn%5Cu4fdd%5Cu8bc1%5Cu8f93%5Cu5165%5Cu7684%5Cu6570%5Cu5b57%5Cu5168%5Cu90e8%5Cu5c0f%5Cu4e8e%2410%5E9%24%22%2C%22provider%22%3A%7B%22uid%22%3A56384%2C%22name%22%3A%22shadowice1984%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Blue%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1500%2C1500%2C1500%2C1500%2C1500%2C1500%2C1500%2C1500%2C1500%2C1500%5D%2C%22memory%22%3A%5B512000%2C512000%2C512000%2C512000%2C512000%2C512000%2C512000%2C512000%2C512000%2C512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B108%2C109%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A314%2C%22totalAccepted%22%3A33%2C%22pid%22%3A%22P5113%22%2C%22title%22%3A%22Sabbat%20of%20the%20witch%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A145034%2C%22title%22%3A%22%5Cu8fd9%5Cu79cd%5Cu4f5c%5Cu54c1%5Cu8fd8%5Cu7ba1%5Cu4ec0%5Cu4e48%5Cu5267%5Cu60c5%5Cu3002%5Cu723d%5Cu5c31%5Cu5b8c%5Cu4e8b%5Cu4e86%5Cuff08%22%2C%22forum%22%3A%7B%22id%22%3A33094%2C%22name%22%3A%22P5113%20Sabbat%20of%20the%20witch%22%2C%22slug%22%3A%22P5113%22%7D%7D%2C%7B%22id%22%3A112657%2C%22title%22%3A%22emm%5Cu8fd9%5Cu9898%5Cu771f%5Cu7684%5Cu8be5%5Cu7d2b%5Cu5417%3D%20%3D%22%2C%22forum%22%3A%7B%22id%22%3A33094%2C%22name%22%3A%22P5113%20Sabbat%20of%20the%20witch%22%2C%22slug%22%3A%22P5113%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3783%22%2C%22title%22%3A%22%5BSDOI2017%5D%5Cu5929%5Cu624d%5Cu9ed1%5Cu5ba2%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3900%22%2C%22title%22%3A%22%5B%5Cu6e56%5Cu5357%5Cu96c6%5Cu8bad%5D%5Cu56fe%5Cu6837%5Cu56fe%5Cu68ee%5Cu7834%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P5114%22%2C%22title%22%3A%22%5Cu516b%5Cu6708%5Cu8138%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P5111%22%2C%22title%22%3A%22zhtobu3232%5Cu7684%5Cu7ebf%5Cu6bb5%5Cu6811%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P5115%22%2C%22title%22%3A%22Check%2CCheck%2CCheck%20one%20two%21%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Sabbat%20of%20the%20witch%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Sabbat of the witch</h1>
<h2>题目背景</h2>
<div>您正在在游玩《魔女的夜宴》,突然开始思考一个哲学问题:这作的restart线到底算不算ntr？
![](http://0d077ef9e74d8.cdn.sohucs.com/rcLQDT4_png)
![](http://0d077ef9e74d8.cdn.sohucs.com/rcLQJyV_png)
![](http://0d077ef9e74d8.cdn.sohucs.com/rcLQMrk_png)
~~您在思索了很长时间之后,突然注意到这是个涉及到时间线和人格同一性的哲学问题~~
此时您突然发现galgame和数(毒)据(瘤)结(分)构(块)有一些奥妙重重的关系，为了更好的思考这个问题，您决定去写一道数(毒)据(瘤)结(分)构(块)题</div>
<h2>题目描述</h2>
<div>维护一个序列,支持以下三种操作
1.区间赋值
2.区间求和
3.撤回之前的一个区间赋值操作
**强制在线**
注意：这里的撤回操作既不会影响之前的操作也不会影响之后的操作，换句话讲撤回一个操作之后序列将会变成历史上从来没有过被撤回操作的状态
煮个栗子，假设我们对序列按顺序执行了1,2,3,4,5号操作
当我们撤回操作4的时候，整个序列应该和按顺序执行了1,2,3,5操作之后的序列一样
当我们接着撤回操作2的时候，整个序列应该和按顺序执行了1,3,5操作之后的序列一样
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>第一行两个整数$n,m$表示序列长度和操作个数
第二行$n$个整数$a_{1}...a_{n}$其中$a_{i}$表示序列的第$i$项
接下来$m$行
如果这一行是$1,l,r,v$的话代表将$(l,r)$这段区间赋值成$v$,假如这个操作是第$k$次赋值操作，那么这个操作的编号就是$k$
如果这一行是$2,l,r$的话代表询问$(l,r)$这段区间中数字的和
如果这一行是$3,x$的话代表撤回编号为$x$的操作
**数据保证被撤回的操作一定存在并且每个操作只会被撤回一次**
为了体现题目的在线性，我们设lastans表示读入当前操作时最后一次询问的答案，(lastans的初始值为0)
那么对于操作1,你需要操作的真实区间是$(l \oplus lastans,r \oplus lastans)$
对于操作2,你需要询问的真实区间是$(l \oplus lastans,r \oplus lastans)$
对于操作3,你需要撤回的操作编号是$x \oplus lastans$
其中$\oplus$运算符表示异或运算
</div>
<h3>输出格式</h3>
<br />
<div>对于每一个操作2输出一行一个整数，表示询问区间中的元素之和
为了方便你理解题意和调试，我们了准备两个样例，一个是强制在线的而另一个是非强制在线的(尽管本题没有非强制在线的部分分)</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>20 20
8 6 4 9 9 8 5 5 7 9 8 8 5 8 2 2 2 1 9 4 
1 17 19 4
1 3 8 5
3 2
2 4 10
1 14 19 8
2 10 16
2 9 9
1 1 18 1
1 1 7 10
2 4 6
2 9 10
1 5 17 2
1 10 19 6
1 2 5 2
1 6 8 2
1 14 19 1
1 4 7 6
1 17 19 10
2 8 12
1 10 10 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>52
54
7
30
2
22
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>20 20
8 6 4 9 9 8 5 5 7 9 8 8 5 8 2 2 2 1 9 4 
1 17 19 4
1 3 8 5
3 2
2 4 10
1 58 39 8
2 62 36
2 63 63
1 6 21 1
1 6 0 10
2 3 1
2 23 20
1 7 19 2
1 8 17 6
1 0 7 2
1 4 10 2
1 12 17 1
1 6 5 6
1 19 17 10
2 10 14
1 28 28 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>52
54
7
30
2
22
</code></pre>
<h2>说明</h2>
<div>对于第9,10个测试点,满足$n,m \leq 10^4$，这两个测试点的分数都为1
对于剩余的测试点$n,m \leq 10^5$并且操作1的个数不超过$65000$
保证输入的数字全部小于$10^9$</div>
</article>
</div>
</div>
</body>
</html>
