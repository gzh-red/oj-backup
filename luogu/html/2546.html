<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[POI2008]SZK - Mirror trap - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573375565:wNNg7EBm/8vkOaack2it/NC4ZPSl7HUU6bfiU0Iggmk=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22King%20Byteasar%27s%20palace%20is%20haunted%20by%20a%20ghost.%20The%20spiteful%20claim%20it%20is%20the%20ghost%20of%20the%20late%20Byteasar%27s%20wife%20%28who%20died%20recently%20in%20suspicious%20circumstances%29%2C%20for%20it%20takes%20great%20pleasure%20in%20looking%20at%20itself%20in%20the%20mirror%2C%20just%20as%20she%20did.%20No%20wonder%20that%20Byteasar%20would%20gladly%20get%20rid%20of%20this%20ghost%21%5Cn%5CnByteasar%20has%20decided%20to%20plant%20a%20special%20mirror%20trap%20in%20one%20of%20the%20palace%27s%20chambers.%20It%20is%20a%20closed%2C%20well%20lit%20room%20whose%20every%20interior%20wall%20is%20covered%20with%20mirror.%20Furthermore%2C%20in%20its%20every%20corner%20a%20laser%20gun%20or%20a%20laser%20detector%20can%20be%20set%20up.%20As%20soon%20as%20the%20ghost%20crosses%20one%20of%20the%20laser%20beams%20an%20alarm%20will%20go%20off%2C%20summoning%20Byteasar%27s%20ghost%20vanquishers%20team%20%28as%20a%20royal%20team%2C%20they%20prefer%20not%20to%20be%20colloquially%20called%20%27ghost%20busters%27%29%2C%20who%20will%20surely%20dispose%20of%20the%20ghost%20in%20no%20time.%5Cn%5CnThe%20chamber%2C%20in%20which%20the%20mirror%20trap%20is%20being%20installed%2C%20is%20in%20the%20shape%20of%20a%20polygon%20whose%20consecutive%20sides%20are%20perpendicular.%20Moreover%2C%20the%20length%20of%20every%20side%20%28measured%20in%20metres%29%20is%20integral.%20Should%20a%20laser%20gun%20be%20installed%20in%20some%20corner%2C%20its%20beam%20has%20to%20be%20pointed%20along%20the%20bisector%20of%20the%20angle%20formed%20by%20the%20walls%20meeting%20in%20this%20corner%20%28in%20a%20plane%20parallel%20to%20the%20floor%20surface%29.%20Obviously%2C%20if%20the%20laser%20beam%20encounters%20a%20mirror%2C%20it%20is%20reflected%2C%20obeying%20the%20regular%20reflection%20law%3A%20the%20angle%20which%20the%20incident%20ray%20makes%20with%20the%20normal%20is%20equal%20to%20the%20angle%20which%20the%20reflected%20ray%20makes%20to%20the%20same%20normal.%20This%20angle%2C%20as%20you%20may%20notice%2C%20is%20always%2045%20degrees%20due%20to%20the%20chamber%27s%20architecture.%20A%20beam%20cast%20along%20the%20bisector%20into%20a%20corner%20where%20a%20detector%20is%20placed%2C%20is%20completely%20absorbed%20by%20it.%20On%20the%20other%20hand%2C%20a%20beam%20cast%20along%20the%20bisector%20into%20corner%20without%20a%20detector%20%28though%20possibly%20with%20a%20laser%20gun%29%20is%20reflected%20back%20%28by%20180%20degrees%29.%20In%20all%20the%20remaining%20cases%20the%20beam%20does%20not%20change%20its%20direction%20at%20all.%5Cn%5CnA%20maximum%20number%20of%20laser%20guns%20complemented%20with%20laser%20detectors%20should%20be%20placed%20in%20the%20room%20in%20such%20a%20way%20that%20each%20laser%20beam%20is%20eventually%20absorbed%20by%20some%20detector%2C%20no%20two%20laser%20beams%20are%20absorbed%20by%20the%20same%20detector%20and%20each%20detector%20absorbs%20some%20laser%20beam.%20Also%2C%20a%20laser%20gun%20and%20a%20detector%20may%20not%20be%20placed%20in%20the%20same%20corner.%5Cn%5Cn%5CnAn%20example%20of%20a%20mirror%20trap%20with%20the%20laser%20beam%20going%20from%20corner%201%20to%20corner%207%3A%5Cn%5CnWrite%20a%20programme%20that%3A%5Cn%5Cnreads%20from%20the%20standard%20input%20the%20the%20mirror%20trap%27s%20shape%20description%2C%5Cndetermines%20the%20way%20of%20setting%20up%20the%20maximum%20possible%20number%20of%20laser%20guns%20and%20detectors%20satisfying%20the%20aforementioned%20conditions%2C%5Cnwrites%20out%20the%20result%20to%20the%20standard%20output.%5Cn%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fpic%5C%2F15471.png%29%22%2C%22inputFormat%22%3A%22%5Cu7b2c%5Cu4e00%5Cu884c%5Cu7ed9%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu6570%5Cu5b57N%2C%5Cu4ee3%5Cu8868%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu70b9.%20%5Cu4e0b%5Cu9762N%5Cu884c%2C%5Cu7528%5Cu6765%5Cu63cf%5Cu8ff0%5Cu70b9%5Cu7684%5Cu5750%5Cu6807.%5Cu5176%5Cu503c%5Cu5728%5B-1000000%2C1000000%5D%22%2C%22outputFormat%22%3A%22%5Cu6700%5Cu591a%5Cu53ef%5Cu653e%5Cu7f6e%5Cu591a%5Cu5c11%5Cu5bf9%5Cu53d1%5Cu5c04%5Cu5668%5Cu548c%5Cu63a5%5Cu6536%5Cu5668%22%2C%22samples%22%3A%5B%5B%2210%5Cn1%201%5Cn3%201%5Cn3%20-2%5Cn-3%20-2%5Cn-3%200%5Cn-1%200%5Cn-1%20-1%5Cn2%20-1%5Cn2%200%5Cn1%200%22%2C%225%5Cn10%205%5Cn1%207%5Cn2%209%5Cn3%208%5Cn4%206%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A163%2C%22name%22%3A%22linyorson%22%2C%22slogan%22%3A%22%5Cu5df2%5Cu9000%5Cu5f79%5Cu3002%5Cu73b0%5Cu4e8epku%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Blue%22%2C%22ccfLevel%22%3A7%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22translation%22%3A%22%5Cu591a%5Cu8fb9%5Cu5f62%5Cu76f8%5Cu90bb%5Cu8fb9%5Cu5782%5Cu76f4%5Cuff0c%5Cu8fb9%5Cu957f%5Cu4e3a%5Cu6574%5Cu6570%5Cuff0c%5Cu8fb9%5Cu5e73%5Cu884c%5Cu5750%5Cu6807%5Cu8f74%5Cu3002%5Cu8981%5Cu5728%5Cu591a%5Cu8fb9%5Cu5f62%5Cu7684%5Cu70b9%5Cu4e0a%5Cu653e%5Cu4e00%5Cu4e9b%5Cu6fc0%5Cu5149%5Cu53d1%5Cu5c04%5Cu5668%5Cu548c%5Cu63a5%5Cu6536%5Cu5668%5Cu3002%5Cu6ee1%5Cu8db3%5Cu4e0b%5Cu5217%5Cu8981%5Cu6c42%5Cuff1a%20%5Cn1.%20%5Cu53d1%5Cu5c04%5Cu5668%5Cu548c%5Cu63a5%5Cu6536%5Cu5668%5Cu4e0d%5Cu80fd%5Cu653e%5Cu7f6e%5Cu5728%5Cu540c%5Cu4e00%5Cu70b9%5Cuff1b%20%5Cn2.%20%5Cu53d1%5Cu5c04%5Cu5668%5Cu53d1%5Cu51fa%5Cu6fc0%5Cu5149%5Cu53ef%5Cu4ee5%5Cu6cbf%5Cu58c1%5Cu53cd%5Cu5c04%5Cuff0c%5Cu6700%5Cu7ec8%5Cu5230%5Cu8fbe%5Cu4e00%5Cu4e2a%5Cu63a5%5Cu6536%5Cu5668%5Cuff1b%20%5Cn3.%20%5Cu53d1%5Cu5c04%5Cu5668%5Cu53ea%5Cu80fd%5Cu6cbf%5Cu89d2%5Cu5e73%5Cu5206%5Cu7ebf%5Cu53d1%5Cu5c04%5Cu6fc0%5Cu5149%5Cu3002%5Cu6c42%5Cuff1a%5Cu6700%5Cu591a%5Cu53ef%5Cu653e%5Cu7f6e%5Cu591a%5Cu5c11%5Cu5bf9%5Cu53d1%5Cu5c04%5Cu5668%5Cu548c%5Cu63a5%5Cu6536%5Cu5668%5Cuff1f%5Cu70b9%5Cu65704%3C%3Dn%3C%3D100000%22%2C%22tags%22%3A%5B25%2C57%2C107%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A132%2C%22totalAccepted%22%3A20%2C%22pid%22%3A%22P2546%22%2C%22title%22%3A%22%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A83246%2C%22title%22%3A%22%5Cu8fd9%5Cu9898%5Cu9898%5Cu89e3%5Cu6709%5Cu6bd2%5Cu5427%22%2C%22forum%22%3A%7B%22id%22%3A1648%2C%22name%22%3A%22P2546%20%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22slug%22%3A%22P2546%22%7D%7D%2C%7B%22id%22%3A41072%2C%22title%22%3A%22%5Cu6b64%5Cu9898spj%5Cu5df2%5Cu4fee%5Cu590d%22%2C%22forum%22%3A%7B%22id%22%3A1648%2C%22name%22%3A%22P2546%20%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22slug%22%3A%22P2546%22%7D%7D%2C%7B%22id%22%3A38307%2C%22title%22%3A%22%5Cu5173%5Cu4e8e%5Cu8f93%5Cu51fa%22%2C%22forum%22%3A%7B%22id%22%3A1648%2C%22name%22%3A%22P2546%20%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22slug%22%3A%22P2546%22%7D%7D%2C%7B%22id%22%3A31779%2C%22title%22%3A%22%5Cu8fd9%5Cu4e2a%5Cu9898%5Cu662f%5Cu5c11%5Cu6570%5Cu636e%5Cu70b9%5Cu4e48%5Cuff1f%5Cuff1f%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A1648%2C%22name%22%3A%22P2546%20%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22slug%22%3A%22P2546%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P1437%22%2C%22title%22%3A%22%5BHNOI2004%5D%5Cu6572%5Cu7816%5Cu5757%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2455%22%2C%22title%22%3A%22%5BSDOI2006%5D%5Cu7ebf%5Cu6027%5Cu65b9%5Cu7a0b%5Cu7ec4%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2590%22%2C%22title%22%3A%22%5BZJOI2008%5D%5Cu6811%5Cu7684%5Cu7edf%5Cu8ba1%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3435%22%2C%22title%22%3A%22%5BPOI2006%5DOKR-Periods%20of%20Words%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4138%22%2C%22title%22%3A%22%5BJOISC2014%5D%5Cu6302%5Cu9970%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BPOI2008%5DSZK%20-%20Mirror%20trap%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[POI2008]SZK - Mirror trap</h1>
<h2>题意翻译</h2>
<div>多边形相邻边垂直，边长为整数，边平行坐标轴。要在多边形的点上放一些激光发射器和接收器。满足下列要求：
1. 发射器和接收器不能放置在同一点；
2. 发射器发出激光可以沿壁反射，最终到达一个接收器；
3. 发射器只能沿角平分线发射激光。求：最多可放置多少对发射器和接收器？点数4<=n<=100000</div>
<h2>题目描述</h2>
<div>King Byteasar's palace is haunted by a ghost. The spiteful claim it is the ghost of the late Byteasar's wife (who died recently in suspicious circumstances), for it takes great pleasure in looking at itself in the mirror, just as she did. No wonder that Byteasar would gladly get rid of this ghost!
Byteasar has decided to plant a special mirror trap in one of the palace's chambers. It is a closed, well lit room whose every interior wall is covered with mirror. Furthermore, in its every corner a laser gun or a laser detector can be set up. As soon as the ghost crosses one of the laser beams an alarm will go off, summoning Byteasar's ghost vanquishers team (as a royal team, they prefer not to be colloquially called 'ghost busters'), who will surely dispose of the ghost in no time.
The chamber, in which the mirror trap is being installed, is in the shape of a polygon whose consecutive sides are perpendicular. Moreover, the length of every side (measured in metres) is integral. Should a laser gun be installed in some corner, its beam has to be pointed along the bisector of the angle formed by the walls meeting in this corner (in a plane parallel to the floor surface). Obviously, if the laser beam encounters a mirror, it is reflected, obeying the regular reflection law: the angle which the incident ray makes with the normal is equal to the angle which the reflected ray makes to the same normal. This angle, as you may notice, is always 45 degrees due to the chamber's architecture. A beam cast along the bisector into a corner where a detector is placed, is completely absorbed by it. On the other hand, a beam cast along the bisector into corner without a detector (though possibly with a laser gun) is reflected back (by 180 degrees). In all the remaining cases the beam does not change its direction at all.
A maximum number of laser guns complemented with laser detectors should be placed in the room in such a way that each laser beam is eventually absorbed by some detector, no two laser beams are absorbed by the same detector and each detector absorbs some laser beam. Also, a laser gun and a detector may not be placed in the same corner.
An example of a mirror trap with the laser beam going from corner 1 to corner 7:
Write a programme that:
reads from the standard input the the mirror trap's shape description,
determines the way of setting up the maximum possible number of laser guns and detectors satisfying the aforementioned conditions,
writes out the result to the standard output.
![](https://cdn.luogu.com.cn/upload/pic/15471.png)</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>第一行给出一个数字N,代表有多少个点. 下面N行,用来描述点的坐标.其值在[-1000000,1000000]</div>
<h3>输出格式</h3>
<br />
<div>最多可放置多少对发射器和接收器</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>10
1 1
3 1
3 -2
-3 -2
-3 0
-1 0
-1 -1
2 -1
2 0
1 0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>5
10 5
1 7
2 9
3 8
4 6</code></pre>
</article>
</div>
</div>
</body>
</html>
