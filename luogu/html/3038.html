<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[USACO11DEC]牧草种植Grass Planting - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376321:q7DeD1XsYqjEwIxCqmRCmNH2X/SA0K+Re/Gn0s8gTIU=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Farmer%20John%20has%20N%20barren%20pastures%20%282%20%3C%3D%20N%20%3C%3D%20100%2C000%29%20connected%20by%20N-1%20bidirectional%20roads%2C%20such%20that%20there%20is%20exactly%20one%20path%20between%20any%20two%20pastures.%20%20Bessie%2C%20a%20cow%20who%20loves%20her%20grazing%20time%2C%20often%20complains%20about%20how%20there%20is%20no%20grass%20on%20the%20roads%20between%20pastures.%20%20Farmer%20John%20loves%20Bessie%20very%20much%2C%20and%20today%20he%20is%20finally%20going%20to%20plant%20grass%20on%20the%20roads.%20%20He%20will%20do%20so%20using%20a%20procedure%20consisting%20of%20M%20steps%20%281%20%3C%3D%20M%20%3C%3D%20100%2C000%29.%5Cn%5CnAt%20each%20step%20one%20of%20two%20things%20will%20happen%3A%5Cn%5Cn-%20FJ%20will%20choose%20two%20pastures%2C%20and%20plant%20a%20patch%20of%20grass%20along%20each%20road%20in%20between%20the%20two%20pastures%2C%20or%2C%5Cn%5Cn-%20Bessie%20will%20ask%20about%20how%20many%20patches%20of%20grass%20on%20a%20particular%20road%2C%20and%20Farmer%20John%20must%20answer%20her%20question.%5Cn%5CnFarmer%20John%20is%20a%20very%20poor%20counter%20--%20help%20him%20answer%20Bessie%27s%20questions%21%5Cn%5Cn%5Cu7ed9%5Cu51fa%5Cu4e00%5Cu68f5n%5Cu4e2a%5Cu8282%5Cu70b9%5Cu7684%5Cu6811%5Cuff0c%5Cu6709m%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu64cd%5Cu4f5c%5Cu4e3a%5Cu5c06%5Cu4e00%5Cu6761%5Cu8def%5Cu5f84%5Cu4e0a%5Cu7684%5Cu8fb9%5Cu6743%5Cu52a0%5Cu4e00%5Cu6216%5Cu8be2%5Cu95ee%5Cu67d0%5Cu6761%5Cu8fb9%5Cu7684%5Cu6743%5Cu503c%5Cu3002%5Cn%22%2C%22inputFormat%22%3A%22%5C%5C%2A%20Line%201%3A%20Two%20space-separated%20integers%20N%20and%20M%5Cn%5Cn%5C%5C%2A%20Lines%202..N%3A%20Two%20space-separated%20integers%20describing%20the%20endpoints%20of%20a%20road.%5Cn%5Cn%5C%5C%2A%20Lines%20N%2B1..N%2BM%3A%20Line%20i%2B1%20describes%20step%20i.%20The%20first%20character%20of%20the%20line%20is%20either%20P%20or%20Q%2C%20which%20describes%20whether%20or%20not%20FJ%20is%20planting%20grass%20or%20simply%20querying.%20This%20is%20followed%20by%20two%20space-separated%20integers%20A%5C%5C_i%20and%20B%5C%5C_i%20%281%20%3C%3D%20A%5C%5C_i%2C%20B%5C%5C_i%20%3C%3D%20N%29%20which%20describe%20FJ%27s%20action%20or%20query.%5Cn%22%2C%22outputFormat%22%3A%22%5C%5C%2A%20Lines%201..%3F%3F%3F%3A%20Each%20line%20has%20the%20answer%20to%20a%20query%2C%20appearing%20in%20the%20same%20order%20as%20the%20queries%20appear%20in%20the%20input.%5Cn%22%2C%22samples%22%3A%5B%5B%224%206%20%5Cr%5Cn1%204%20%5Cr%5Cn2%204%20%5Cr%5Cn3%204%20%5Cr%5CnP%202%203%20%5Cr%5CnP%201%203%20%5Cr%5CnQ%203%204%20%5Cr%5CnP%201%204%20%5Cr%5CnQ%202%204%20%5Cr%5CnQ%201%204%20%5Cr%5Cn%22%2C%222%20%5Cr%5Cn1%20%5Cr%5Cn2%20%5Cr%5Cn%5Cr%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A20%2C%22name%22%3A%22FarmerJohn2%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3Anull%2C%22isAdmin%22%3Afalse%2C%22color%22%3A%22Gray%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B3%2C28%2C42%2C46%2C228%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A1746%2C%22totalAccepted%22%3A871%2C%22pid%22%3A%22P3038%22%2C%22title%22%3A%22%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A149161%2C%22title%22%3A%22%5Cu8fd9%5Cu9898%5Cu7ffb%5Cu8bd1%5Cu4e5f%5Cu8fc7%5Cu4e8e%5Cu7b80%5Cu77ed%5Cu4e86%5Cu5427%5Cu3002%5Cu3002%5Cu3002%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%2C%7B%22id%22%3A142550%2C%22title%22%3A%22%5Cu840c%5Cu65b0%5Cuff0c%5Cu521a%5Cu5b66OI%5Cuff0c%5Cu6811%5Cu5256%5Cuff0c%5Cu6ca1%5Cu8fc7%5Cu6837%5Cu4f8b%5Cuff0c%5Cu6c42%5Cu67e5%5Cu9519%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%2C%7B%22id%22%3A138273%2C%22title%22%3A%22%5Cu849f%5Cu84bb%5Cu521a%5Cu5b66IO%5Cuff0c%5Cu4e0d%5Cu4f1aa%2Bb%5Cuff0c%5Cu6c42%5Cu52a9%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%2C%7B%22id%22%3A128625%2C%22title%22%3A%22%5Cu6570%5Cu636e%5Cu8303%5Cu56f4%3F%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%2C%7B%22id%22%3A123363%2C%22title%22%3A%22%5Cu6c42%5Cu52a9%5Cuff01%5Cu4e00%5Cu4e2a%5Cu6811%5Cu94fe%5Cu5256%5Cu5206%5Cu600e%5Cu6837%5Cu624d%5Cu80fdTLE%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%2C%7B%22id%22%3A111809%2C%22title%22%3A%22%5Cu521a%5Cu5b66oi%5Cu5c31%5Cu7ea2%5Cu540d%5Cu7684%5Cu849f%5Cu84bb%5Cu6c42%5Cu6551%22%2C%22forum%22%3A%7B%22id%22%3A2157%2C%22name%22%3A%22P3038%20%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22slug%22%3A%22P3038%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2146%22%2C%22title%22%3A%22%5BNOI2015%5D%5Cu8f6f%5Cu4ef6%5Cu5305%5Cu7ba1%5Cu7406%5Cu5668%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2486%22%2C%22title%22%3A%22%5BSDOI2011%5D%5Cu67d3%5Cu8272%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3258%22%2C%22title%22%3A%22%5BJLOI2014%5D%5Cu677e%5Cu9f20%5Cu7684%5Cu65b0%5Cu5bb6%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3833%22%2C%22title%22%3A%22%5BSHOI2012%5D%5Cu9b54%5Cu6cd5%5Cu6811%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4114%22%2C%22title%22%3A%22Qtree1%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[USACO11DEC]牧草种植Grass Planting</h1>
<h2>题目描述</h2>
<div>Farmer John has N barren pastures (2 <= N <= 100,000) connected by N-1 bidirectional roads, such that there is exactly one path between any two pastures. Bessie, a cow who loves her grazing time, often complains about how there is no grass on the roads between pastures. Farmer John loves Bessie very much, and today he is finally going to plant grass on the roads. He will do so using a procedure consisting of M steps (1 <= M <= 100,000).
At each step one of two things will happen:
- FJ will choose two pastures, and plant a patch of grass along each road in between the two pastures, or,
- Bessie will ask about how many patches of grass on a particular road, and Farmer John must answer her question.
Farmer John is a very poor counter -- help him answer Bessie's questions!
给出一棵n个节点的树，有m个操作，操作为将一条路径上的边权加一或询问某条边的权值。
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>\* Line 1: Two space-separated integers N and M
\* Lines 2..N: Two space-separated integers describing the endpoints of a road.
\* Lines N+1..N+M: Line i+1 describes step i. The first character of the line is either P or Q, which describes whether or not FJ is planting grass or simply querying. This is followed by two space-separated integers A\_i and B\_i (1 <= A\_i, B\_i <= N) which describe FJ's action or query.
</div>
<h3>输出格式</h3>
<br />
<div>\* Lines 1..???: Each line has the answer to a query, appearing in the same order as the queries appear in the input.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 6 
1 4 
2 4 
3 4 
P 2 3 
P 1 3 
Q 3 4 
P 1 4 
Q 2 4 
Q 1 4 
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2 
1 
2 

</code></pre>
</article>
</div>
</div>
</body>
</html>
