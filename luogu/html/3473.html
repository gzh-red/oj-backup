<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>[POI2008]UCI-The Great Escape - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573376936:JxECOSbH2V1i5ZhmuVna/NjRgBzvisJydRnOkaNE1y8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Al%20Bytone%2C%20the%20infamous%20thief%2C%20plans%20a%20bank%20robbery.%5Cn%5CnHe%20knows%20only%20too%20well%20that%20the%20moment%20he%20robs%20the%20bank%20a%20pursuit%20%20%20%20will%20be%20commenced.%20Unfortunately%2C%20Al%20Bytone%20is%20a%20poor%20driver%20and%20turning%20%20%20%20left%20causes%20him%20great%20trouble.%20This%20is%20why%20he%20tries%20to%20devise%20such%20an%20%20%20%20escape%20route%20that%20at%20each%20intersection%20he%20would%20either%20ride%20straight%20%20%20%20ahead%20or%20turn%20right.%20He%20is%20also%20aware%20that%20once%20he%20passes%20through%20any%20%20%20%20intersection%2C%20the%20police%20will%20come%20and%20remain%20there%2C%20waiting%20for%20him.%5Cn%5CnTherefore%20he%20may%20pass%20through%20any%20intersection%20at%20most%20once.%5Cn%5CnFurthermore%2C%20the%20police%20are%20always%20present%20at%20certain%20intersections%2C%20%20%20%20so%20Al%20Bytone%20will%20have%20to%20avoid%20these%20intersections%20as%20well%20%20%20%20%28there%27s%20no%20police%20at%20the%20intersections%20near%20the%20bank%20and%20near%20Al%20Bytone%27s%20%20%20%20hideout.%29%20%20%20%20Al%20Bytone%20is%20planning%20his%20escape%20route.%20To%20your%20great%20%28and%20rather%20%20%20%20unpleasant%29%20surprise%2C%20he%20paid%20you%20a%20visit%20and%20told%20to%20calculate%20the%20%20%20%20number%20of%20different%20escape%20routes%20leading%20from%20the%20bank%20to%20his%20hideout%20%20%20%20complying%20the%20aforementioned%20requirements.%20Needless%20to%20say%2C%20Al%20Bytone%20%20%20%20does%20not%20take%20%27no%27%20as%20an%20answer...%5Cn%5Cn%20%20%20%20The%20streets%20of%20Byteburg%20form%20a%20rectangular%20grid.%5Cn%5CnEvery%20street%20runs%20either%20in%20the%20North-South%20or%20East-West%20direction%2C%20%20%20%20and%20every%20two%20non-parallel%20streets%20intersect.%5Cn%5CnThe%20bank%20is%20situated%20to%20the%20south%20of%20the%20south-western-most%20intersection.%5Cn%5CnAl%20Bytone%20will%20start%20his%20great%20escape%20driving%20north.%5Cn%5CnTask%20%20%20%20%20%20Write%20a%20programme%20that%3A%5Cn%5Cnreads%20from%20the%20standard%20input%20the%20location%20of%20hideout%2C%20%20%20%20%20%20%20%20%20%20descriptions%20of%20intersections%20with%20police%20and%20a%20positive%20%20%20%20%20%20%20%20%20%20integer%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.1.png%29%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20calculates%20the%20number%20of%20different%20escape%20routes%20leading%20from%20the%20bank%20to%20the%20hideout%20%20%20%20%20%20%20%20%20%20complying%20the%20aforementioned%20requirements%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20writes%20out%20to%20the%20standard%20output%20this%20number%27s%20residue%20modulo%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.2.png%29.%5Cn%5Cn%5Cu7ed9%5Cu4e00%5Cu4e2an%5C%5C%2Am%20%20%5Cu7684%5Cu5730%5Cu56fe%5Cuff0c%5Cu8ba1%5Cu7b97%5Cu4ece%28n%2C1%29%20%20%5Cu5230%5Cu7b2c%20x%20%5Cu5217%5Cu7684%5Cu7b2cy%20%20%5Cu884c%5Cu7684%5Cu8def%5Cu5f84%5Cu6761%5Cu6570%20mod%20k%20%5Cuff0c%5Cu8d70%5Cu8fc7%5Cu7684%5Cu70b9%5Cu4e0d%5Cu80fd%5Cu518d%5Cu8d70%5Cuff0c%5Cu8f6c%5Cu5f2f%5Cu53ea%5Cu80fd%5Cu5411%5Cu53f3%5Cu8f6c%5Cu3002%5Cn%22%2C%22inputFormat%22%3A%22There%20are%20three%20integers%20in%20the%20first%20line%20of%20the%20standard%20input%2C%20%20%20%20%20%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.3.png%29%2C%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.4.png%29%20and%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.5.png%29%20%28%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.6.png%29%2C%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.7.png%29%29.%5Cn%5CnThe%20numbers%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.8.png%29%20and%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.9.png%29%20denote%20the%20number%20of%20streets%20leading%20in%20%20%20%20%20%20East-West%20and%20North-South%20direction%2C%20respectively.%5Cn%5CnThe%20second%20line%20contains%20two%20integers%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.10.png%29%20and%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.11.png%29%20%28%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.12.png%29%2C%20%20%20%20%20%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.13.png%29%29.%5Cn%5CnThese%20represent%20the%20hideout%27s%20location%20-%20at%20the%20intersection%20%20%20%20%20%20of%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.14.png%29%20street%20leading%20in%20Nort%5Cu2026%5Cn%22%2C%22outputFormat%22%3A%22Your%20programme%20should%20write%20out%20the%20residue%20of%20the%20number%20of%20escape%20%20%20%20%20%20routes%20modulo%20%21%5B%5D%28http%3A%5C%2F%5C%2Fmain.edu.pl%5C%2Fimages%5C%2FOI15%5C%2Fuci-en-tex.26.png%29%20in%20the%20first%20and%20only%20line%20of%20the%20standard%20output.%5Cn%22%2C%22samples%22%3A%5B%5B%223%205%2010%5Cn4%202%5Cn%2B%2B%2B%2B%2B%5Cn%2B%2B%2A%2B%2B%5Cn%2B%2B%2B%2B%2A%5Cn%22%2C%222%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%2C1000%5D%2C%22memory%22%3A%5B128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%2C128000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22tags%22%3A%5B3%2C25%2C57%2C319%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A15%2C%22totalAccepted%22%3A9%2C%22pid%22%3A%22P3473%22%2C%22title%22%3A%22%5BPOI2008%5DUCI-The%20Great%20Escape%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22%5BPOI2008%5DUCI-The%20Great%20Escape%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>[POI2008]UCI-The Great Escape</h1>
<h2>题目描述</h2>
<div>Al Bytone, the infamous thief, plans a bank robbery.
He knows only too well that the moment he robs the bank a pursuit will be commenced. Unfortunately, Al Bytone is a poor driver and turning left causes him great trouble. This is why he tries to devise such an escape route that at each intersection he would either ride straight ahead or turn right. He is also aware that once he passes through any intersection, the police will come and remain there, waiting for him.
Therefore he may pass through any intersection at most once.
Furthermore, the police are always present at certain intersections, so Al Bytone will have to avoid these intersections as well (there's no police at the intersections near the bank and near Al Bytone's hideout.) Al Bytone is planning his escape route. To your great (and rather unpleasant) surprise, he paid you a visit and told to calculate the number of different escape routes leading from the bank to his hideout complying the aforementioned requirements. Needless to say, Al Bytone does not take 'no' as an answer...
The streets of Byteburg form a rectangular grid.
Every street runs either in the North-South or East-West direction, and every two non-parallel streets intersect.
The bank is situated to the south of the south-western-most intersection.
Al Bytone will start his great escape driving north.
Task Write a programme that:
reads from the standard input the location of hideout, descriptions of intersections with police and a positive integer ![](http://main.edu.pl/images/OI15/uci-en-tex.1.png), calculates the number of different escape routes leading from the bank to the hideout complying the aforementioned requirements, writes out to the standard output this number's residue modulo ![](http://main.edu.pl/images/OI15/uci-en-tex.2.png).
给一个n\*m 的地图，计算从(n,1) 到第 x 列的第y 行的路径条数 mod k ，走过的点不能再走，转弯只能向右转。
</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>There are three integers in the first line of the standard input, ![](http://main.edu.pl/images/OI15/uci-en-tex.3.png), ![](http://main.edu.pl/images/OI15/uci-en-tex.4.png) and ![](http://main.edu.pl/images/OI15/uci-en-tex.5.png) (![](http://main.edu.pl/images/OI15/uci-en-tex.6.png), ![](http://main.edu.pl/images/OI15/uci-en-tex.7.png)).
The numbers ![](http://main.edu.pl/images/OI15/uci-en-tex.8.png) and ![](http://main.edu.pl/images/OI15/uci-en-tex.9.png) denote the number of streets leading in East-West and North-South direction, respectively.
The second line contains two integers ![](http://main.edu.pl/images/OI15/uci-en-tex.10.png) and ![](http://main.edu.pl/images/OI15/uci-en-tex.11.png) (![](http://main.edu.pl/images/OI15/uci-en-tex.12.png), ![](http://main.edu.pl/images/OI15/uci-en-tex.13.png)).
These represent the hideout's location - at the intersection of ![](http://main.edu.pl/images/OI15/uci-en-tex.14.png) street leading in Nort…
</div>
<h3>输出格式</h3>
<br />
<div>Your programme should write out the residue of the number of escape routes modulo ![](http://main.edu.pl/images/OI15/uci-en-tex.26.png) in the first and only line of the standard output.
</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 5 10
4 2
+++++
++*++
++++*
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
</code></pre>
</article>
</div>
</div>
</body>
</html>
