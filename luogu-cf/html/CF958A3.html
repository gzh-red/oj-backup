<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Death Stars (hard) - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573399768:hp60fpNqpeqN5CFB+oB6UtJKitIj07lI4258Fmdksn0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22The%20stardate%20is%202015%2C%20and%20Death%20Stars%20are%20bigger%20than%20ever%21%20This%20time%2C%20two%20rebel%20spies%20have%20yet%20again%20given%20Heidi%20two%20maps%20with%20the%20possible%20locations%20of%20the%20Death%20Stars.%5Cn%5CnHeidi%20has%20now%20received%20two%20maps%20with%20possible%20locations%20of%20%24%20N%20%24%20Death%20Stars.%20She%20knows%20that%20each%20of%20the%20maps%20is%20possibly%20corrupted%2C%20and%20may%20contain%20some%20stars%20that%20are%20not%20Death%20Stars.%20Furthermore%2C%20each%20of%20the%20maps%20was%20created%20from%20a%20different%20point%20of%20view.%20Hence%2C%20stars%20that%20are%20shown%20in%20one%20of%20the%20maps%20are%20rotated%20and%20translated%20with%20respect%20to%20the%20other%20map.%20Now%20Heidi%20wants%20to%20find%20out%20which%20of%20the%20stars%20shown%20in%20both%20maps%20are%20actually%20Death%20Stars%2C%20and%20the%20correspondence%20between%20the%20Death%20Stars%20on%20the%20two%20maps.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20an%20integer%20%24%20N%20%24%20%28%20%24%201000%3C%3DN%3C%3D50000%20%24%20%29%20%5Cu2013%20the%20number%20of%20Death%20Stars.%20The%20second%20line%20of%20the%20input%20contains%20an%20integer%20%24%20N_%7B1%7D%20%24%20%28%20%24%20N%3C%3DN_%7B1%7D%3C%3D1.5%5Cu00b7N%20%24%20%29%20%5Cu2013%20the%20number%20of%20stars%20in%20the%20first%20map.%20The%20next%20%24%20N_%7B1%7D%20%24%20lines%20specify%20the%20coordinates%20of%20the%20stars%20in%20the%20first%20map.%20The%20%24%20i%20%24%20-th%20line%20contains%20two%20space-separated%20floating-point%20numbers%20%24%20x_%7Bi%7D%20%24%20and%20%24%20y_%7Bi%7D%20%24%20with%20two%20decimal%20digits%20of%20precision%20each%2C%20representing%20the%20coordinates%20of%20the%20%24%20i%20%24%20-th%20star%20in%20the%20first%20map.%5Cn%5CnThe%20next%20line%20of%20the%20input%20contains%20an%20integer%20%24%20N_%7B2%7D%20%24%20%28%20%24%20N%3C%3DN_%7B2%7D%3C%3D1.5%5Cu00b7N%20%24%20%29%20%5Cu2013%20the%20number%20of%20stars%20in%20the%20second%20map.%20The%20next%20%24%20N_%7B2%7D%20%24%20lines%20contain%20locations%20of%20the%20stars%20in%20the%20second%20map%2C%20given%20in%20the%20same%20format%20as%20for%20the%20first%20map.%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22The%20tests%20are%20generated%20in%20the%20following%20way%3A%5Cn%5Cn-%20The%20number%20of%20Death%20Stars%20%24%20N%20%24%20is%20pre-selected%20in%20some%20way.%5Cn-%20The%20numbers%20of%20stars%20on%20the%20first%20and%20on%20the%20second%20map%2C%20%24%20N_%7B1%7D%20%24%20and%20%24%20N_%7B2%7D%20%24%20%2C%20are%20selected%20uniformly%20at%20random%20between%20%24%201.0%5Cu00d7N%20%24%20and%20%24%201.5%5Cu00d7N%20%24%20.%5Cn-%20%24%20N%20%24%20Death%20Stars%20are%20generated%20at%20random%2C%20with%20coordinates%20between%20%24%20-10000%20%24%20and%20%24%2010000%20%24%20.%5Cn-%20Additional%20%24%20N_%7B1%7D-N%20%24%20and%20%24%20N2-N%20%24%20stars%20for%20the%20first%20and%20for%20the%20second%20map%20respectively%20are%20generated%20in%20the%20same%20way.%5Cn-%20A%20translation%20vector%20%24%20%28dx%2Cdy%29%20%24%20is%20generated%2C%20with%20%24%20dx%20%24%20and%20%24%20dy%20%24%20selected%20uniformly%20at%20random%20between%20%24%20-10000%20%24%20and%20%24%2010000%20%24%20.%20Each%20point%20in%20the%20first%20map%20is%20translated%20by%20%24%20%28dx%2Cdy%29%20%24%20.%5Cn-%20A%20rotation%20angle%20%24%20%5Cu03b8%20%24%20is%20generated%2C%20with%20%24%20%5Cu03b8%20%24%20selected%20uniformly%20at%20random%20between%20%24%200%20%24%20and%20%24%202%5Cu03c0%20%24%20.%20Each%20point%20in%20the%20first%20map%20is%20rotated%20by%20an%20angle%20of%20%24%20%5Cu03b8%20%24%20around%20the%20origin.%5Cn-%20Translations%20and%20rotations%20for%20the%20second%20map%20are%20generated%20and%20applied%20in%20the%20same%20way.%5Cn-%20The%20order%20of%20points%20is%20randomly%20permuted%20for%20both%20maps.%5Cn-%20The%20test%20case%20is%20saved%2C%20with%20each%20point%20written%20with%20two%20decimal%20digits%20of%20precision.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B7000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F958%5C%2FA3%22%2C%22id%22%3A%22958A3%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF958A3%22%2C%22title%22%3A%22Death%20Stars%20%28hard%29%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Death%20Stars%20%28hard%29%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Death Stars (hard)</h1>
<h2>题目描述</h2>
<div>The stardate is 2015, and Death Stars are bigger than ever! This time, two rebel spies have yet again given Heidi two maps with the possible locations of the Death Stars.
Heidi has now received two maps with possible locations of $ N $ Death Stars. She knows that each of the maps is possibly corrupted, and may contain some stars that are not Death Stars. Furthermore, each of the maps was created from a different point of view. Hence, stars that are shown in one of the maps are rotated and translated with respect to the other map. Now Heidi wants to find out which of the stars shown in both maps are actually Death Stars, and the correspondence between the Death Stars on the two maps.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains an integer $ N $ ( $ 1000<=N<=50000 $ ) – the number of Death Stars. The second line of the input contains an integer $ N_{1} $ ( $ N<=N_{1}<=1.5·N $ ) – the number of stars in the first map. The next $ N_{1} $ lines specify the coordinates of the stars in the first map. The $ i $ -th line contains two space-separated floating-point numbers $ x_{i} $ and $ y_{i} $ with two decimal digits of precision each, representing the coordinates of the $ i $ -th star in the first map.
The next line of the input contains an integer $ N_{2} $ ( $ N<=N_{2}<=1.5·N $ ) – the number of stars in the second map. The next $ N_{2} $ lines contain locations of the stars in the second map, given in the same format as for the first map.</div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
<h2>说明</h2>
<div>The tests are generated in the following way:
- The number of Death Stars $ N $ is pre-selected in some way.
- The numbers of stars on the first and on the second map, $ N_{1} $ and $ N_{2} $ , are selected uniformly at random between $ 1.0×N $ and $ 1.5×N $ .
- $ N $ Death Stars are generated at random, with coordinates between $ -10000 $ and $ 10000 $ .
- Additional $ N_{1}-N $ and $ N2-N $ stars for the first and for the second map respectively are generated in the same way.
- A translation vector $ (dx,dy) $ is generated, with $ dx $ and $ dy $ selected uniformly at random between $ -10000 $ and $ 10000 $ . Each point in the first map is translated by $ (dx,dy) $ .
- A rotation angle $ θ $ is generated, with $ θ $ selected uniformly at random between $ 0 $ and $ 2π $ . Each point in the first map is rotated by an angle of $ θ $ around the origin.
- Translations and rotations for the second map are generated and applied in the same way.
- The order of points is randomly permuted for both maps.
- The test case is saved, with each point written with two decimal digits of precision.</div>
</article>
</div>
</div>
</body>
</html>
