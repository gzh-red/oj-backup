<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Report - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573396233:FnFuPvc1X5BIALCxsYwn7EZT2KjlZdaDXi8K+IxlFYQ=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Each%20month%20Blake%20gets%20the%20report%20containing%20main%20economic%20indicators%20of%20the%20company%20%5C%22Blake%20Technologies%5C%22.%20There%20are%20%24%20n%20%24%20commodities%20produced%20by%20the%20company.%20For%20each%20of%20them%20there%20is%20exactly%20one%20integer%20in%20the%20final%20report%2C%20that%20denotes%20corresponding%20revenue.%20Before%20the%20report%20gets%20to%20Blake%2C%20it%20passes%20through%20the%20hands%20of%20%24%20m%20%24%20managers.%20Each%20of%20them%20may%20reorder%20the%20elements%20in%20some%20order.%20Namely%2C%20the%20%24%20i%20%24%20-th%20manager%20either%20sorts%20first%20%24%20r_%7Bi%7D%20%24%20numbers%20in%20non-descending%20or%20non-ascending%20order%20and%20then%20passes%20the%20report%20to%20the%20manager%20%24%20i%2B1%20%24%20%2C%20or%20directly%20to%20Blake%20%28if%20this%20manager%20has%20number%20%24%20i%3Dm%20%24%20%29.%5Cn%5CnEmployees%20of%20the%20%5C%22Blake%20Technologies%5C%22%20are%20preparing%20the%20report%20right%20now.%20You%20know%20the%20initial%20sequence%20%24%20a_%7Bi%7D%20%24%20of%20length%20%24%20n%20%24%20and%20the%20description%20of%20each%20manager%2C%20that%20is%20value%20%24%20r_%7Bi%7D%20%24%20and%20his%20favourite%20order.%20You%20are%20asked%20to%20speed%20up%20the%20process%20and%20determine%20how%20the%20final%20report%20will%20look%20like.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%3C%3Dn%2Cm%3C%3D200000%20%24%20%29%20%5Cu2014%20the%20number%20of%20commodities%20in%20the%20report%20and%20the%20number%20of%20managers%2C%20respectively.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_%7Bi%7D%20%24%20%28%20%24%20%7Ca_%7Bi%7D%7C%3C%3D10%5E%7B9%7D%20%24%20%29%20%5Cu2014%20the%20initial%20report%20before%20it%20gets%20to%20the%20first%20manager.%5Cn%5CnThen%20follow%20%24%20m%20%24%20lines%20with%20the%20descriptions%20of%20the%20operations%20managers%20are%20going%20to%20perform.%20The%20%24%20i%20%24%20-th%20of%20these%20lines%20contains%20two%20integers%20%24%20t_%7Bi%7D%20%24%20and%20%24%20r_%7Bi%7D%20%24%20%28%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF631C%5C%2F2b47eb89ee7b6063f7a48e9fc1ad20b107383eb0.png%29%2C%20%24%201%3C%3Dr_%7Bi%7D%3C%3Dn%20%24%20%29%2C%20meaning%20that%20the%20%24%20i%20%24%20-th%20manager%20sorts%20the%20first%20%24%20r_%7Bi%7D%20%24%20numbers%20either%20in%20the%20non-descending%20%28if%20%24%20t_%7Bi%7D%3D1%20%24%20%29%20or%20non-ascending%20%28if%20%24%20t_%7Bi%7D%3D2%20%24%20%29%20order.%22%2C%22outputFormat%22%3A%22Print%20%24%20n%20%24%20integers%20%5Cu2014%20the%20final%20report%2C%20which%20will%20be%20passed%20to%20Blake%20by%20manager%20number%20%24%20m%20%24%20.%22%2C%22samples%22%3A%5B%5B%223%201%5Cn1%202%203%5Cn2%202%5Cn%22%2C%222%201%203%20%22%5D%2C%5B%224%202%5Cn1%202%204%203%5Cn2%203%5Cn1%202%5Cn%22%2C%222%204%201%203%20%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20the%20initial%20report%20looked%20like%3A%201%202%203.%20After%20the%20first%20manager%20the%20first%20two%20numbers%20were%20transposed%3A%202%201%203.%20The%20report%20got%20to%20Blake%20in%20this%20form.%5Cn%5CnIn%20the%20second%20sample%20the%20original%20report%20was%20like%20this%3A%201%202%204%203.%20After%20the%20first%20manager%20the%20report%20changed%20to%3A%204%202%201%203.%20After%20the%20second%20manager%20the%20report%20changed%20to%3A%202%204%201%203.%20This%20report%20was%20handed%20over%20to%20Blake.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F631%5C%2FC%22%2C%22id%22%3A%22631C%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu5b9an%5Cu4e2a%5Cu6574%5Cu6570%5Cu7ec4%5Cu6210%5Cu7684%5Cu5e8f%5Cu5217%5Cu548cm%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cu7ed9%5Cu5b9ati%5Cu548cri%5Cuff0c%5Cu64cd%5Cu4f5c%5Cu5206%5Cu4e3a%5Cu4e24%5Cu79cd%5Cuff1a%5Cr%5Cn-%20ti%5Cu4e3a1%5Cuff0c%5Cu5219%5Cu5c06%5Cu524dri%5Cu4e2a%5Cu6570%5Cu6309%5Cu7167%5Cu8fde%5Cu7eed%5Cu4e0d%5Cu51cf%5Cu5e8f%5Cuff08%5Cu4ece%5Cu5c0f%5Cu5230%5Cu5927%5Cuff09%5Cu6392%5Cu5217%5Cuff1b%5Cr%5Cn-%20ti%5Cu4e3a2%5Cuff0c%5Cu5219%5Cu5c06%5Cu524dri%5Cu4e2a%5Cu6570%5Cu6309%5Cu7167%5Cu8fde%5Cu7eed%5Cu4e0d%5Cu589e%5Cu5e8f%5Cuff08%5Cu4ece%5Cu5927%5Cu5230%5Cu5c0f%5Cuff09%5Cu6392%5Cu5217%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu6c42m%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu8fc7%5Cu540e%5Cu7684%5Cu5e8f%5Cu5217%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A26%2C%22totalAccepted%22%3A10%2C%22pid%22%3A%22CF631C%22%2C%22title%22%3A%22Report%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Report%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Report</h1>
<h2>题意翻译</h2>
<div>给定n个整数组成的序列和m个操作，每个操作给定ti和ri，操作分为两种：
- ti为1，则将前ri个数按照连续不减序（从小到大）排列；
- ti为2，则将前ri个数按照连续不增序（从大到小）排列。
求m次操作过后的序列。</div>
<h2>题目描述</h2>
<div>Each month Blake gets the report containing main economic indicators of the company "Blake Technologies". There are $ n $ commodities produced by the company. For each of them there is exactly one integer in the final report, that denotes corresponding revenue. Before the report gets to Blake, it passes through the hands of $ m $ managers. Each of them may reorder the elements in some order. Namely, the $ i $ -th manager either sorts first $ r_{i} $ numbers in non-descending or non-ascending order and then passes the report to the manager $ i+1 $ , or directly to Blake (if this manager has number $ i=m $ ).
Employees of the "Blake Technologies" are preparing the report right now. You know the initial sequence $ a_{i} $ of length $ n $ and the description of each manager, that is value $ r_{i} $ and his favourite order. You are asked to speed up the process and determine how the final report will look like.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains two integers $ n $ and $ m $ ( $ 1<=n,m<=200000 $ ) — the number of commodities in the report and the number of managers, respectively.
The second line contains $ n $ integers $ a_{i} $ ( $ |a_{i}|<=10^{9} $ ) — the initial report before it gets to the first manager.
Then follow $ m $ lines with the descriptions of the operations managers are going to perform. The $ i $ -th of these lines contains two integers $ t_{i} $ and $ r_{i} $ (![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF631C/2b47eb89ee7b6063f7a48e9fc1ad20b107383eb0.png), $ 1<=r_{i}<=n $ ), meaning that the $ i $ -th manager sorts the first $ r_{i} $ numbers either in the non-descending (if $ t_{i}=1 $ ) or non-ascending (if $ t_{i}=2 $ ) order.</div>
<h3>输出格式</h3>
<br />
<div>Print $ n $ integers — the final report, which will be passed to Blake by manager number $ m $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 1
1 2 3
2 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2 1 3 </code></pre>
<h3>输入样例 #2</h3>
<pre><code>4 2
1 2 4 3
2 3
1 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>2 4 1 3 </code></pre>
<h2>说明</h2>
<div>In the first sample, the initial report looked like: 1 2 3. After the first manager the first two numbers were transposed: 2 1 3. The report got to Blake in this form.
In the second sample the original report was like this: 1 2 4 3. After the first manager the report changed to: 4 2 1 3. After the second manager the report changed to: 2 4 1 3. This report was handed over to Blake.</div>
</article>
</div>
</div>
</body>
</html>
