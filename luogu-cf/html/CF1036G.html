<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Sources and Sinks - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573400755:Xi1NH5fEe+mmNTcrsdPaPlkIXDTFctTMVrzjIKoNE8I=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22You%20are%20given%20an%20acyclic%20directed%20graph%2C%20consisting%20of%20%24%20n%20%24%20vertices%20and%20%24%20m%20%24%20edges.%20The%20graph%20contains%20no%20multiple%20edges%20and%20no%20self-loops.%5Cn%5CnThe%20vertex%20is%20called%20a%20source%20if%20it%20has%20no%20incoming%20edges.%20The%20vertex%20is%20called%20a%20sink%20if%20it%20has%20no%20outgoing%20edges.%20These%20definitions%20imply%20that%20some%20vertices%20can%20be%20both%20source%20and%20sink.%5Cn%5CnThe%20number%20of%20sources%20in%20the%20given%20graph%20is%20equal%20to%20the%20number%20of%20sinks%20in%20it%2C%20and%20each%20of%20these%20numbers%20doesn%27t%20exceed%20%24%2020%20%24%20.%5Cn%5CnThe%20following%20algorithm%20is%20applied%20to%20the%20graph%3A%5Cn%5Cn1.%20if%20the%20graph%20has%20no%20sources%20and%20sinks%20then%20quit%3B%5Cn2.%20choose%20arbitrary%20source%20%24%20s%20%24%20%2C%20arbitrary%20sink%20%24%20t%20%24%20%2C%20add%20an%20edge%20from%20%24%20t%20%24%20to%20%24%20s%20%24%20to%20the%20graph%20and%20go%20to%20step%20%24%201%20%24%20%28that%20operation%20pops%20%24%20s%20%24%20out%20of%20sources%20and%20%24%20t%20%24%20out%20of%20sinks%29.%20Note%20that%20%24%20s%20%24%20and%20%24%20t%20%24%20may%20be%20the%20same%20vertex%2C%20then%20a%20self-loop%20is%20added.%5Cn%5CnAt%20the%20end%20you%20check%20if%20the%20graph%20becomes%20strongly%20connected%20%28that%20is%2C%20any%20vertex%20is%20reachable%20from%20any%20other%20vertex%29.%5Cn%5CnYour%20task%20is%20to%20check%20that%20the%20graph%20becomes%20strongly%20connected%20no%20matter%20the%20choice%20of%20sources%20and%20sinks%20on%20the%20second%20step%20of%20the%20algorithm.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%20%5C%5Cle%20n%2C%20m%20%5C%5Cle%2010%5E6%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertices%20and%20the%20number%20of%20edges%20in%20the%20graph%2C%20respectively.%5Cn%5CnEach%20of%20the%20next%20%24%20m%20%24%20lines%20contains%20two%20integers%20%24%20v_i%2C%20u_i%20%24%20%28%20%24%201%20%5C%5Cle%20v_i%2C%20u_i%20%5C%5Cle%20n%20%24%20%2C%20%24%20v_i%20%5C%5Cne%20u_i%20%24%20%29%20%5Cu2014%20the%20description%20of%20the%20%24%20i%20%24%20-th%20edge%20of%20the%20original%20graph.%5Cn%5CnIt%20is%20guaranteed%20that%20the%20number%20of%20sources%20and%20the%20number%20of%20sinks%20in%20the%20graph%20are%20the%20same%20and%20they%20don%27t%20exceed%20%24%2020%20%24%20.%20It%20is%20guaranteed%20that%20the%20given%20graph%20contains%20no%20multiple%20edges.%20It%20is%20guaranteed%20that%20the%20graph%20contains%20no%20cycles.%22%2C%22outputFormat%22%3A%22Print%20%5C%22YES%5C%22%20if%20the%20graph%20becomes%20strongly%20connected%20no%20matter%20the%20choice%20of%20sources%20and%20sinks%20on%20the%20second%20step%20of%20the%20algorithm.%20Otherwise%20print%20%5C%22NO%5C%22.%22%2C%22samples%22%3A%5B%5B%223%201%5Cn1%202%5Cn%22%2C%22NO%5Cn%22%5D%2C%5B%223%203%5Cn1%202%5Cn1%203%5Cn2%203%5Cn%22%2C%22YES%5Cn%22%5D%2C%5B%224%204%5Cn1%202%5Cn1%203%5Cn4%202%5Cn4%203%5Cn%22%2C%22YES%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B7000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1036%5C%2FG%22%2C%22id%22%3A%221036G%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A15%2C%22totalAccepted%22%3A4%2C%22pid%22%3A%22CF1036G%22%2C%22title%22%3A%22Sources%20and%20Sinks%22%2C%22difficulty%22%3A4%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Sources%20and%20Sinks%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Sources and Sinks</h1>
<h2>题目描述</h2>
<div>You are given an acyclic directed graph, consisting of $ n $ vertices and $ m $ edges. The graph contains no multiple edges and no self-loops.
The vertex is called a source if it has no incoming edges. The vertex is called a sink if it has no outgoing edges. These definitions imply that some vertices can be both source and sink.
The number of sources in the given graph is equal to the number of sinks in it, and each of these numbers doesn't exceed $ 20 $ .
The following algorithm is applied to the graph:
1. if the graph has no sources and sinks then quit;
2. choose arbitrary source $ s $ , arbitrary sink $ t $ , add an edge from $ t $ to $ s $ to the graph and go to step $ 1 $ (that operation pops $ s $ out of sources and $ t $ out of sinks). Note that $ s $ and $ t $ may be the same vertex, then a self-loop is added.
At the end you check if the graph becomes strongly connected (that is, any vertex is reachable from any other vertex).
Your task is to check that the graph becomes strongly connected no matter the choice of sources and sinks on the second step of the algorithm.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 1 \le n, m \le 10^6 $ ) — the number of vertices and the number of edges in the graph, respectively.
Each of the next $ m $ lines contains two integers $ v_i, u_i $ ( $ 1 \le v_i, u_i \le n $ , $ v_i \ne u_i $ ) — the description of the $ i $ -th edge of the original graph.
It is guaranteed that the number of sources and the number of sinks in the graph are the same and they don't exceed $ 20 $ . It is guaranteed that the given graph contains no multiple edges. It is guaranteed that the graph contains no cycles.</div>
<h3>输出格式</h3>
<br />
<div>Print "YES" if the graph becomes strongly connected no matter the choice of sources and sinks on the second step of the algorithm. Otherwise print "NO".</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 1
1 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>NO
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>3 3
1 2
1 3
2 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>YES
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>4 4
1 2
1 3
4 2
4 3
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>YES
</code></pre>
</article>
</div>
</div>
</body>
</html>
