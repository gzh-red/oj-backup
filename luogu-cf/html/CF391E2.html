<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Three Trees - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573393623:CugI+8qrWxfm5wnCYS4PmemT5q9EYQd4SowefN6om6g=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22This%20problem%20consists%20of%20two%20subproblems%3A%20for%20solving%20subproblem%20E1%20you%20will%20receive%2011%20points%2C%20and%20for%20solving%20subproblem%20E2%20you%20will%20receive%2013%20points.%5Cn%5CnA%20tree%20is%20an%20undirected%20connected%20graph%20containing%20no%20cycles.%20The%20distance%20between%20two%20nodes%20in%20an%20unweighted%20tree%20is%20the%20minimum%20number%20of%20edges%20that%20have%20to%20be%20traversed%20to%20get%20from%20one%20node%20to%20another.%5Cn%5CnYou%20are%20given%203%20trees%20that%20have%20to%20be%20united%20into%20a%20single%20tree%20by%20adding%20two%20edges%20between%20these%20trees.%20Each%20of%20these%20edges%20can%20connect%20any%20pair%20of%20nodes%20from%20two%20trees.%20After%20the%20trees%20are%20connected%2C%20the%20distances%20between%20all%20unordered%20pairs%20of%20nodes%20in%20the%20united%20tree%20should%20be%20computed.%20What%20is%20the%20maximum%20possible%20value%20of%20the%20sum%20of%20these%20distances%3F%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20three%20space-separated%20integers%20%24%20n_%7B1%7D%20%24%20%2C%20%24%20n_%7B2%7D%20%24%20%2C%20%24%20n_%7B3%7D%20%24%20%5Cu2014%20the%20number%20of%20vertices%20in%20the%20first%2C%20second%2C%20and%20third%20trees%2C%20respectively.%20The%20following%20%24%20n_%7B1%7D-1%20%24%20lines%20describe%20the%20first%20tree.%20Each%20of%20these%20lines%20describes%20an%20edge%20in%20the%20first%20tree%20and%20contains%20a%20pair%20of%20integers%20separated%20by%20a%20single%20space%20%5Cu2014%20the%20numeric%20labels%20of%20vertices%20connected%20by%20the%20edge.%20The%20following%20%24%20n_%7B2%7D-1%20%24%20lines%20describe%20the%20second%20tree%20in%20the%20same%20fashion%2C%20and%20the%20%24%20n_%7B3%7D-1%20%24%20lines%20after%20that%20similarly%20describe%20the%20third%20tree.%20The%20vertices%20in%20each%20tree%20are%20numbered%20with%20consecutive%20integers%20starting%20with%20%24%201%20%24%20.%5Cn%5CnThe%20problem%20consists%20of%20two%20subproblems.%20The%20subproblems%20have%20different%20constraints%20on%20the%20input.%20You%20will%20get%20some%20score%20for%20the%20correct%20submission%20of%20the%20subproblem.%20The%20description%20of%20the%20subproblems%20follows.%5Cn%5Cn-%20In%20subproblem%20E1%20%2811%20points%29%2C%20the%20number%20of%20vertices%20in%20each%20tree%20will%20be%20between%20%24%201%20%24%20and%20%24%201000%20%24%20%2C%20inclusive.%5Cn-%20In%20subproblem%20E2%20%2813%20points%29%2C%20the%20number%20of%20vertices%20in%20each%20tree%20will%20be%20between%20%24%201%20%24%20and%20%24%20100000%20%24%20%2C%20inclusive.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20number%20%5Cu2014%20the%20maximum%20possible%20sum%20of%20distances%20between%20all%20pairs%20of%20nodes%20in%20the%20united%20tree.%22%2C%22samples%22%3A%5B%5B%222%202%203%5Cn1%202%5Cn1%202%5Cn1%202%5Cn2%203%5Cn%22%2C%2256%5Cn%22%5D%2C%5B%225%201%204%5Cn1%202%5Cn2%205%5Cn3%204%5Cn4%202%5Cn1%202%5Cn1%203%5Cn1%204%5Cn%22%2C%22151%5Cn%22%5D%5D%2C%22hint%22%3A%22Consider%20the%20first%20test%20case.%20There%20are%20two%20trees%20composed%20of%20two%20nodes%2C%20and%20one%20tree%20with%20three%20nodes.%20The%20maximum%20possible%20answer%20is%20obtained%20if%20the%20trees%20are%20connected%20in%20a%20single%20chain%20of%207%20vertices.%5Cn%5CnIn%20the%20second%20test%20case%2C%20a%20possible%20choice%20of%20new%20edges%20to%20obtain%20the%20maximum%20answer%20is%20the%20following%3A%5Cn%5Cn-%20Connect%20node%203%20from%20the%20first%20tree%20to%20node%201%20from%20the%20second%20tree%3B%5Cn-%20Connect%20node%202%20from%20the%20third%20tree%20to%20node%201%20from%20the%20second%20tree.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F391%5C%2FE2%22%2C%22id%22%3A%22391E2%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF391E2%22%2C%22title%22%3A%22Three%20Trees%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Three%20Trees%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Three Trees</h1>
<h2>题目描述</h2>
<div>This problem consists of two subproblems: for solving subproblem E1 you will receive 11 points, and for solving subproblem E2 you will receive 13 points.
A tree is an undirected connected graph containing no cycles. The distance between two nodes in an unweighted tree is the minimum number of edges that have to be traversed to get from one node to another.
You are given 3 trees that have to be united into a single tree by adding two edges between these trees. Each of these edges can connect any pair of nodes from two trees. After the trees are connected, the distances between all unordered pairs of nodes in the united tree should be computed. What is the maximum possible value of the sum of these distances?</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains three space-separated integers $ n_{1} $ , $ n_{2} $ , $ n_{3} $ — the number of vertices in the first, second, and third trees, respectively. The following $ n_{1}-1 $ lines describe the first tree. Each of these lines describes an edge in the first tree and contains a pair of integers separated by a single space — the numeric labels of vertices connected by the edge. The following $ n_{2}-1 $ lines describe the second tree in the same fashion, and the $ n_{3}-1 $ lines after that similarly describe the third tree. The vertices in each tree are numbered with consecutive integers starting with $ 1 $ .
The problem consists of two subproblems. The subproblems have different constraints on the input. You will get some score for the correct submission of the subproblem. The description of the subproblems follows.
- In subproblem E1 (11 points), the number of vertices in each tree will be between $ 1 $ and $ 1000 $ , inclusive.
- In subproblem E2 (13 points), the number of vertices in each tree will be between $ 1 $ and $ 100000 $ , inclusive.</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer number — the maximum possible sum of distances between all pairs of nodes in the united tree.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 2 3
1 2
1 2
1 2
2 3
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>56
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5 1 4
1 2
2 5
3 4
4 2
1 2
1 3
1 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>151
</code></pre>
<h2>说明</h2>
<div>Consider the first test case. There are two trees composed of two nodes, and one tree with three nodes. The maximum possible answer is obtained if the trees are connected in a single chain of 7 vertices.
In the second test case, a possible choice of new edges to obtain the maximum answer is the following:
- Connect node 3 from the first tree to node 1 from the second tree;
- Connect node 2 from the third tree to node 1 from the second tree.</div>
</article>
</div>
</div>
</body>
</html>
