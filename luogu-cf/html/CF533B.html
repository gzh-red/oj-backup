<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Work Group - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395164:99yvsLqSmAxMN40NxHYBHmFVOUJhA7TzoGK+/+6oW1Q=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22One%20Big%20Software%20Company%20has%20%24%20n%20%24%20employees%20numbered%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20The%20director%20is%20assigned%20number%20%24%201%20%24%20.%20Every%20employee%20of%20the%20company%20except%20the%20director%20has%20exactly%20one%20immediate%20superior.%20The%20director%2C%20of%20course%2C%20doesn%27t%20have%20a%20superior.%5Cn%5CnWe%20will%20call%20person%20%24%20a%20%24%20a%20subordinates%20of%20another%20person%20%24%20b%20%24%20%2C%20if%20either%20%24%20b%20%24%20is%20an%20immediate%20supervisor%20of%20%24%20a%20%24%20%2C%20or%20the%20immediate%20supervisor%20of%20%24%20a%20%24%20is%20a%20subordinate%20to%20person%20%24%20b%20%24%20.%20In%20particular%2C%20subordinates%20of%20the%20head%20are%20all%20other%20employees%20of%20the%20company.%5Cn%5CnTo%20solve%20achieve%20an%20Important%20Goal%20we%20need%20to%20form%20a%20workgroup.%20Every%20person%20has%20some%20efficiency%2C%20expressed%20by%20a%20positive%20integer%20%24%20a_%7Bi%7D%20%24%20%2C%20where%20%24%20i%20%24%20is%20the%20person%27s%20number.%20The%20efficiency%20of%20the%20workgroup%20is%20defined%20as%20the%20total%20efficiency%20of%20all%20the%20people%20included%20in%20it.%5Cn%5CnThe%20employees%20of%20the%20big%20software%20company%20are%20obsessed%20with%20modern%20ways%20of%20work%20process%20organization.%20Today%20pair%20programming%20is%20at%20the%20peak%20of%20popularity%2C%20so%20the%20workgroup%20should%20be%20formed%20with%20the%20following%20condition.%20Each%20person%20entering%20the%20workgroup%20should%20be%20able%20to%20sort%20all%20of%20his%20subordinates%20who%20are%20also%20in%20the%20workgroup%20into%20pairs.%20In%20other%20words%2C%20for%20each%20of%20the%20members%20of%20the%20workgroup%20the%20number%20of%20his%20subordinates%20within%20the%20workgroup%20should%20be%20even.%5Cn%5CnYour%20task%20is%20to%20determine%20the%20maximum%20possible%20efficiency%20of%20the%20workgroup%20formed%20at%20observing%20the%20given%20condition.%20Any%20person%20including%20the%20director%20of%20company%20can%20enter%20the%20workgroup.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D2%5Cu00b710%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20workers%20of%20the%20Big%20Software%20Company.%5Cn%5CnThen%20%24%20n%20%24%20lines%20follow%2C%20describing%20the%20company%20employees.%20The%20%24%20i%20%24%20-th%20line%20contains%20two%20integers%20%24%20p_%7Bi%7D%2Ca_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20the%20person%20who%20is%20the%20%24%20i%20%24%20-th%20employee%27s%20immediate%20superior%20and%20%24%20i%20%24%20-th%20employee%27s%20efficiency.%20For%20the%20director%20%24%20p_%7B1%7D%3D-1%20%24%20%2C%20for%20all%20other%20people%20the%20condition%20%24%201%3C%3Dp_%7Bi%7D%26lt%3Bi%20%24%20is%20fulfilled.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20maximum%20possible%20efficiency%20of%20the%20workgroup.%22%2C%22samples%22%3A%5B%5B%227%5Cn-1%203%5Cn1%202%5Cn1%201%5Cn1%204%5Cn4%205%5Cn4%203%5Cn5%202%5Cn%22%2C%2217%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20sample%20test%20the%20most%20effective%20way%20is%20to%20make%20a%20workgroup%20from%20employees%20number%20%24%201%2C2%2C4%2C5%2C6%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F533%5C%2FB%22%2C%22id%22%3A%22533B%22%7D%2C%22translation%22%3A%22%5Cu516c%5Cu53f8%5Cu6709n%5Cu4e2a%5Cu4eba%5Cuff0c1%5Cu662f%5Cu603b%5Cu88c1%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu4eba%5Cu6709%5Cu4e00%5Cu4e2a%5Cu76f4%5Cu63a5%5Cu4e0a%5Cu53f8%5Cu3002%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu4eba%5Cu6709%5Cu4e00%5Cu4e2a%5Cu6743%5Cu503c%5Cuff0c%5Cu8981%5Cu6c42%5Cu627e%5Cu4e00%5Cu4e2a%5Cu96c6%5Cu5408%5Cuff0c%5Cu4f7f%5Cu96c6%5Cu5408%5Cu4e2d%5Cu6240%5Cu6709%5Cu4eba%5Cu6743%5Cu503c%5Cu4e4b%5Cu548c%5Cu6700%5Cu5927%5Cu3002%5Cu5176%5Cu4e2d%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu4eba%5Cu7684%5Cu4e0b%5Cu5c5e%5Cuff08%5Cu76f4%5Cu63a5%5Cuff0c%5Cu95f4%5Cu63a5%5Cuff09%5Cu603b%5Cu6570%5Cu90fd%5Cu5fc5%5Cu987b%5Cu662f%5Cu5076%5Cu6570%5Cu3002%5Cu8f93%5Cu51fa%5Cu6700%5Cu5927%5Cu6743%5Cu503c%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A35%2C%22totalAccepted%22%3A14%2C%22pid%22%3A%22CF533B%22%2C%22title%22%3A%22Work%20Group%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Work%20Group%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Work Group</h1>
<h2>题意翻译</h2>
<div>公司有n个人，1是总裁，每个人有一个直接上司。每一个人有一个权值，要求找一个集合，使集合中所有人权值之和最大。其中每一个人的下属（直接，间接）总数都必须是偶数。输出最大权值。</div>
<h2>题目描述</h2>
<div>One Big Software Company has $ n $ employees numbered from $ 1 $ to $ n $ . The director is assigned number $ 1 $ . Every employee of the company except the director has exactly one immediate superior. The director, of course, doesn't have a superior.
We will call person $ a $ a subordinates of another person $ b $ , if either $ b $ is an immediate supervisor of $ a $ , or the immediate supervisor of $ a $ is a subordinate to person $ b $ . In particular, subordinates of the head are all other employees of the company.
To solve achieve an Important Goal we need to form a workgroup. Every person has some efficiency, expressed by a positive integer $ a_{i} $ , where $ i $ is the person's number. The efficiency of the workgroup is defined as the total efficiency of all the people included in it.
The employees of the big software company are obsessed with modern ways of work process organization. Today pair programming is at the peak of popularity, so the workgroup should be formed with the following condition. Each person entering the workgroup should be able to sort all of his subordinates who are also in the workgroup into pairs. In other words, for each of the members of the workgroup the number of his subordinates within the workgroup should be even.
Your task is to determine the maximum possible efficiency of the workgroup formed at observing the given condition. Any person including the director of company can enter the workgroup.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains integer $ n $ ( $ 1<=n<=2·10^{5} $ ) — the number of workers of the Big Software Company.
Then $ n $ lines follow, describing the company employees. The $ i $ -th line contains two integers $ p_{i},a_{i} $ ( $ 1<=a_{i}<=10^{5} $ ) — the number of the person who is the $ i $ -th employee's immediate superior and $ i $ -th employee's efficiency. For the director $ p_{1}=-1 $ , for all other people the condition $ 1<=p_{i}&lt;i $ is fulfilled.</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the maximum possible efficiency of the workgroup.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>7
-1 3
1 2
1 1
1 4
4 5
4 3
5 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>17
</code></pre>
<h2>说明</h2>
<div>In the sample test the most effective way is to make a workgroup from employees number $ 1,2,4,5,6 $ .</div>
</article>
</div>
</div>
</body>
</html>
