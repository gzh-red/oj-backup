<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Financiers Game - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573397161:/1GhMpkqWJpz1C0qXGk0blnzrHAAvElUu1BcEiHPejM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22This%20problem%20has%20unusual%20memory%20constraint.%5Cn%5CnAt%20evening%2C%20Igor%20and%20Zhenya%20the%20financiers%20became%20boring%2C%20so%20they%20decided%20to%20play%20a%20game.%20They%20prepared%20%24%20n%20%24%20papers%20with%20the%20income%20of%20some%20company%20for%20some%20time%20periods.%20Note%20that%20the%20income%20can%20be%20positive%2C%20zero%20or%20negative.%5Cn%5CnIgor%20and%20Zhenya%20placed%20the%20papers%20in%20a%20row%20and%20decided%20to%20take%20turns%20making%20moves.%20Igor%20will%20take%20the%20papers%20from%20the%20left%20side%2C%20Zhenya%20will%20take%20the%20papers%20from%20the%20right%20side.%20Igor%20goes%20first%20and%20takes%20%24%201%20%24%20or%20%24%202%20%24%20%28on%20his%20choice%29%20papers%20from%20the%20left.%20Then%2C%20on%20each%20turn%20a%20player%20can%20take%20%24%20k%20%24%20or%20%24%20k%2B1%20%24%20papers%20from%20his%20side%20if%20the%20opponent%20took%20exactly%20%24%20k%20%24%20papers%20in%20the%20previous%20turn.%20Players%20can%27t%20skip%20moves.%20The%20game%20ends%20when%20there%20are%20no%20papers%20left%2C%20or%20when%20some%20of%20the%20players%20can%27t%20make%20a%20move.%5Cn%5CnYour%20task%20is%20to%20determine%20the%20difference%20between%20the%20sum%20of%20incomes%20on%20the%20papers%20Igor%20took%20and%20the%20sum%20of%20incomes%20on%20the%20papers%20Zhenya%20took%2C%20assuming%20both%20players%20play%20optimally.%20Igor%20wants%20to%20maximize%20the%20difference%2C%20Zhenya%20wants%20to%20minimize%20it.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20single%20positive%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D4000%20%24%20%29%20%5Cu2014%20the%20number%20of%20papers.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%20%24%20%28%20%24%20-10%5E%7B5%7D%3C%3Da_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29%2C%20where%20%24%20a_%7Bi%7D%20%24%20is%20the%20income%20on%20the%20%24%20i%20%24%20-th%20paper%20from%20the%20left.%22%2C%22outputFormat%22%3A%22Print%20the%20difference%20between%20the%20sum%20of%20incomes%20on%20the%20papers%20Igor%20took%20and%20the%20sum%20of%20incomes%20on%20the%20papers%20Zhenya%20took%2C%20assuming%20both%20players%20play%20optimally.%20Igor%20wants%20to%20maximize%20the%20difference%2C%20Zhenya%20wants%20to%20minimize%20it.%22%2C%22samples%22%3A%5B%5B%223%5Cn1%203%201%5Cn%22%2C%224%5Cn%22%5D%2C%5B%225%5Cn-1%20-2%20-1%20-2%20-1%5Cn%22%2C%220%5Cn%22%5D%2C%5B%224%5Cn-4%20-2%204%205%5Cn%22%2C%22-13%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20example%20it%27s%20profitable%20for%20Igor%20to%20take%20two%20papers%20from%20the%20left%20to%20have%20the%20sum%20of%20the%20incomes%20equal%20to%20%24%204%20%24%20.%20Then%20Zhenya%20wouldn%27t%20be%20able%20to%20make%20a%20move%20since%20there%20would%20be%20only%20one%20paper%2C%20and%20he%20would%20be%20able%20to%20take%20only%20%24%202%20%24%20or%20%24%203%20%24%20..%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F729%5C%2FF%22%2C%22id%22%3A%22729F%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A42%2C%22totalAccepted%22%3A10%2C%22pid%22%3A%22CF729F%22%2C%22title%22%3A%22Financiers%20Game%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A127068%2C%22title%22%3A%22%5Cu7edd%5Cu671b%5Cu4e86%5Cuff0c%5Cuff0c%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu6211CE%5Cu4e86%5Cuff0c%5Cu660e%5Cu660e%5Cu5185%5Cu5b58%5Cu6ca1%5Cu7206%5Cu554a%22%2C%22forum%22%3A%7B%22id%22%3A9730%2C%22name%22%3A%22CF729F%20Financiers%20Game%22%2C%22slug%22%3A%22CF729F%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Financiers%20Game%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Financiers Game</h1>
<h2>题目描述</h2>
<div>This problem has unusual memory constraint.
At evening, Igor and Zhenya the financiers became boring, so they decided to play a game. They prepared $ n $ papers with the income of some company for some time periods. Note that the income can be positive, zero or negative.
Igor and Zhenya placed the papers in a row and decided to take turns making moves. Igor will take the papers from the left side, Zhenya will take the papers from the right side. Igor goes first and takes $ 1 $ or $ 2 $ (on his choice) papers from the left. Then, on each turn a player can take $ k $ or $ k+1 $ papers from his side if the opponent took exactly $ k $ papers in the previous turn. Players can't skip moves. The game ends when there are no papers left, or when some of the players can't make a move.
Your task is to determine the difference between the sum of incomes on the papers Igor took and the sum of incomes on the papers Zhenya took, assuming both players play optimally. Igor wants to maximize the difference, Zhenya wants to minimize it.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains single positive integer $ n $ ( $ 1<=n<=4000 $ ) — the number of papers.
The second line contains $ n $ integers $ a_{1},a_{2},...,a_{n} $ ( $ -10^{5}<=a_{i}<=10^{5} $ ), where $ a_{i} $ is the income on the $ i $ -th paper from the left.</div>
<h3>输出格式</h3>
<br />
<div>Print the difference between the sum of incomes on the papers Igor took and the sum of incomes on the papers Zhenya took, assuming both players play optimally. Igor wants to maximize the difference, Zhenya wants to minimize it.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
1 3 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>4
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5
-1 -2 -1 -2 -1
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>0
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>4
-4 -2 4 5
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>-13
</code></pre>
<h2>说明</h2>
<div>In the first example it's profitable for Igor to take two papers from the left to have the sum of the incomes equal to $ 4 $ . Then Zhenya wouldn't be able to make a move since there would be only one paper, and he would be able to take only $ 2 $ or $ 3 $ ..</div>
</article>
</div>
</div>
</body>
</html>
