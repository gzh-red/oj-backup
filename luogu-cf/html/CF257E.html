<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Greedy Elevator - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573392120:ceJCUVtOxIn78VM0ZH/c/bFL3Qw9mfVNkgXuWNnqC5Q=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22The%20%24%20m%20%24%20-floor%20%24%20%28m%3E1%29%20%24%20office%20of%20international%20corporation%20CodeForces%20has%20the%20advanced%20elevator%20control%20system%20established.%20It%20works%20as%20follows.%5Cn%5CnAll%20office%20floors%20are%20sequentially%20numbered%20with%20integers%20from%201%20to%20%24%20m%20%24%20.%20At%20time%20%24%20t%3D0%20%24%20%2C%20the%20elevator%20is%20on%20the%20first%20floor%2C%20the%20elevator%20is%20empty%20and%20nobody%20is%20waiting%20for%20the%20elevator%20on%20other%20floors.%20Next%2C%20at%20times%20%24%20t_%7Bi%7D%20%24%20%24%20%28t_%7Bi%7D%3E0%29%20%24%20people%20come%20to%20the%20elevator.%20For%20simplicity%2C%20we%20assume%20that%20one%20person%20uses%20the%20elevator%20only%20once%20during%20the%20reported%20interval.%20For%20every%20person%20we%20know%20three%20parameters%3A%20the%20time%20at%20which%20the%20person%20comes%20to%20the%20elevator%2C%20the%20floor%20on%20which%20the%20person%20is%20initially%2C%20and%20the%20floor%20to%20which%20he%20wants%20to%20go.%5Cn%5CnThe%20movement%20of%20the%20elevator%20between%20the%20floors%20is%20as%20follows.%20At%20time%20%24%20t%20%24%20%28%20%24%20t%3E%3D0%20%24%20%2C%20%24%20t%20%24%20is%20an%20integer%29%20the%20elevator%20is%20always%20at%20some%20floor.%20First%20the%20elevator%20releases%20all%20people%20who%20are%20in%20the%20elevator%20and%20want%20to%20get%20to%20the%20current%20floor.%20Then%20it%20lets%20in%20all%20the%20people%20waiting%20for%20the%20elevator%20on%20this%20floor.%20If%20a%20person%20comes%20to%20the%20elevator%20exactly%20at%20time%20%24%20t%20%24%20%2C%20then%20he%20has%20enough%20time%20to%20get%20into%20it.%20We%20can%20assume%20that%20all%20of%20these%20actions%20%28going%20in%20or%20out%20from%20the%20elevator%29%20are%20made%20instantly.%20After%20that%20the%20elevator%20decides%2C%20which%20way%20to%20move%20and%20at%20time%20%24%20%28t%2B1%29%20%24%20the%20elevator%20gets%20to%20the%20selected%20floor.%5Cn%5CnThe%20elevator%20selects%20the%20direction%20of%20moving%20by%20the%20following%20algorithm.%5Cn%5Cn-%20If%20the%20elevator%20is%20empty%20and%20at%20the%20current%20time%20no%20one%20is%20waiting%20for%20the%20elevator%20on%20any%20floor%2C%20then%20the%20elevator%20remains%20at%20the%20current%20floor.%5Cn-%20Otherwise%2C%20let%27s%20assume%20that%20the%20elevator%20is%20on%20the%20floor%20number%20%24%20x%20%24%20%24%20%281%3C%3Dx%3C%3Dm%29%20%24%20.%20Then%20elevator%20calculates%20the%20directions%27%20%5C%22priorities%5C%22%20%24%20p_%7Bup%7D%20%24%20and%20%24%20p_%7Bdown%7D%20%24%20%3A%20%24%20p_%7Bup%7D%20%24%20is%20the%20sum%20of%20the%20number%20of%20people%20waiting%20for%20the%20elevator%20on%20the%20floors%20with%20numbers%20greater%20than%20%24%20x%20%24%20%2C%20and%20the%20number%20of%20people%20in%20the%20elevator%2C%20who%20want%20to%20get%20to%20the%20floors%20with%20the%20numbers%20greater%20than%20%24%20x%20%24%20%3B%20%24%20p_%7Bdown%7D%20%24%20is%20the%20sum%20of%20the%20number%20of%20people%20waiting%20for%20the%20elevator%20on%20the%20floors%20with%20numbers%20less%20than%20%24%20x%20%24%20%2C%20and%20the%20number%20of%20people%20in%20the%20elevator%2C%20who%20want%20to%20get%20to%20the%20floors%20with%20the%20numbers%20less%20than%20%24%20x%20%24%20.%20If%20%24%20p_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20%2C%20then%20the%20elevator%20goes%20one%20floor%20above%20the%20current%20one%20%28that%20is%2C%20from%20floor%20%24%20x%20%24%20to%20floor%20%24%20x%2B1%20%24%20%29%2C%20otherwise%20the%20elevator%20goes%20one%20floor%20below%20the%20current%20one%20%28that%20is%2C%20from%20floor%20%24%20x%20%24%20to%20floor%20%24%20x-1%20%24%20%29.%5Cn%5CnYour%20task%20is%20to%20simulate%20the%20work%20of%20the%20elevator%20and%20for%20each%20person%20to%20tell%20the%20time%20when%20the%20elevator%20will%20get%20to%20the%20floor%20this%20person%20needs.%20Please%20note%20that%20the%20elevator%20is%20large%20enough%20to%20accommodate%20all%20the%20people%20at%20once.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20space-separated%20integers%3A%20%24%20n%2Cm%5C%5C%20%281%3C%3Dn%3C%3D10%5E%7B5%7D%2C2%3C%3Dm%3C%3D10%5E%7B5%7D%29%20%24%20%5Cu2014%20the%20number%20of%20people%20and%20floors%20in%20the%20building%2C%20correspondingly.%5Cn%5CnNext%20%24%20n%20%24%20lines%20each%20contain%20three%20space-separated%20integers%3A%20%24%20t_%7Bi%7D%2Cs_%7Bi%7D%2Cf_%7Bi%7D%5C%5C%20%281%3C%3Dt_%7Bi%7D%3C%3D10%5E%7B9%7D%2C1%3C%3Ds_%7Bi%7D%2Cf_%7Bi%7D%3C%3Dm%2Cs_%7Bi%7D%5Cu2260f_%7Bi%7D%29%20%24%20%5Cu2014%20the%20time%20when%20the%20%24%20i%20%24%20-th%20person%20begins%20waiting%20for%20the%20elevator%2C%20the%20floor%20number%2C%20where%20the%20%24%20i%20%24%20-th%20person%20was%20initially%20located%2C%20and%20the%20number%20of%20the%20floor%2C%20where%20he%20wants%20to%20go.%22%2C%22outputFormat%22%3A%22Print%20%24%20n%20%24%20lines.%20In%20the%20%24%20i%20%24%20-th%20line%20print%20a%20single%20number%20%5Cu2014%20the%20moment%20of%20time%2C%20when%20the%20%24%20i%20%24%20-th%20person%20gets%20to%20the%20floor%20he%20needs.%20The%20people%20are%20numbered%20in%20the%20order%2C%20in%20which%20they%20are%20given%20in%20the%20input.%5Cn%5CnPlease%20don%27t%20use%20the%20%25lld%20specifier%20to%20read%20or%20write%2064-bit%20integers%20in%20%5Cu0421%2B%2B.%20It%20is%20preferred%20to%20use%20the%20cin%2C%20cout%20streams%20or%20the%20%25I64d%20specifier.%22%2C%22samples%22%3A%5B%5B%223%2010%5Cn1%202%207%5Cn3%206%205%5Cn3%204%208%5Cn%22%2C%227%5Cn11%5Cn8%5Cn%22%5D%2C%5B%222%2010%5Cn1%202%205%5Cn7%204%205%5Cn%22%2C%225%5Cn9%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%20the%20elevator%20worked%20as%20follows%3A%5Cn%5Cn-%20%24%20t%3D1%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%201%20%24%20.%20The%20elevator%20is%20empty.%20The%20floor%20number%20%24%202%20%24%20has%20one%20person%20waiting.%20%24%20p_%7Bup%7D%3D1%2B0%3D1%2Cp_%7Bdown%7D%3D0%2B0%3D0%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%202%20%24%20.%5Cn-%20%24%20t%3D2%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%202%20%24%20.%20One%20person%20enters%20the%20elevator%2C%20he%20wants%20to%20go%20to%20the%20floor%20number%20%24%207%20%24%20.%20%24%20p_%7Bup%7D%3D0%2B1%3D1%2Cp_%7Bdown%7D%3D0%2B0%3D0%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%203%20%24%20.%5Cn-%20%24%20t%3D3%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%203%20%24%20.%20There%20is%20one%20person%20in%20the%20elevator%2C%20he%20wants%20to%20go%20to%20floor%20%24%207%20%24%20.%20The%20floors%20number%20%24%204%20%24%20and%20%24%206%20%24%20have%20two%20people%20waiting%20for%20the%20elevator.%20%24%20p_%7Bup%7D%3D2%2B1%3D3%2Cp_%7Bdown%7D%3D0%2B0%3D0%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%204%20%24%20.%5Cn-%20%24%20t%3D4%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%204%20%24%20.%20There%20is%20one%20person%20in%20the%20elevator%20who%20wants%20to%20go%20to%20the%20floor%20number%20%24%207%20%24%20.%20One%20person%20goes%20into%20the%20elevator%2C%20he%20wants%20to%20get%20to%20the%20floor%20number%20%24%208%20%24%20.%20The%20floor%20number%20%24%206%20%24%20has%20one%20man%20waiting.%20%24%20p_%7Bup%7D%3D1%2B2%3D3%2Cp_%7Bdown%7D%3D0%2B0%3D0%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%205%20%24%20.%5Cn-%20%24%20t%3D5%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%205%20%24%20.%20There%20are%20two%20people%20in%20the%20elevator%2C%20they%20want%20to%20get%20to%20the%20floors%20number%20%24%207%20%24%20and%20%24%208%20%24%20%2C%20correspondingly.%20There%20is%20one%20person%20waiting%20for%20the%20elevator%20on%20the%20floor%20number%20%24%206%20%24%20.%20%24%20p_%7Bup%7D%3D1%2B2%3D3%2Cp_%7Bdown%7D%3D0%2B0%3D0%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%206%20%24%20.%5Cn-%20%24%20t%3D6%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%206%20%24%20.%20There%20are%20two%20people%20in%20the%20elevator%2C%20they%20want%20to%20get%20to%20the%20floors%20number%20%24%207%20%24%20and%20%24%208%20%24%20%2C%20correspondingly.%20One%20man%20enters%20the%20elevator%2C%20he%20wants%20to%20get%20to%20the%20floor%20number%20%24%205%20%24%20.%20%24%20p_%7Bup%7D%3D0%2B2%3D2%2Cp_%7Bdown%7D%3D0%2B1%3D1%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%207%20%24%20.%5Cn-%20%24%20t%3D7%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%207%20%24%20.%20One%20person%20leaves%20the%20elevator%2C%20this%20person%20wanted%20to%20get%20to%20the%20floor%20number%20%24%207%20%24%20.%20There%20are%20two%20people%20in%20the%20elevator%2C%20they%20want%20to%20get%20to%20the%20floors%20with%20numbers%20%24%208%20%24%20and%20%24%205%20%24%20%2C%20correspondingly.%20%24%20p_%7Bup%7D%3D0%2B1%3D1%2Cp_%7Bdown%7D%3D0%2B1%3D1%2Cp_%7Bup%7D%3E%3Dp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%208%20%24%20.%5Cn-%20%24%20t%3D8%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%208%20%24%20.%20One%20person%20leaves%20the%20elevator%2C%20this%20person%20wanted%20to%20go%20to%20the%20floor%20number%20%24%208%20%24%20.%20There%20is%20one%20person%20in%20the%20elevator%2C%20he%20wants%20to%20go%20to%20the%20floor%20number%20%24%205%20%24%20.%20%24%20p_%7Bup%7D%3D0%2B0%3D0%2Cp_%7Bdown%7D%3D0%2B1%3D1%2Cp_%7Bup%7D%3Cp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%207%20%24%20.%5Cn-%20%24%20t%3D9%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%207%20%24%20.%20There%20is%20one%20person%20in%20the%20elevator%2C%20this%20person%20wants%20to%20get%20to%20the%20floor%20number%20%24%205%20%24%20.%20%24%20p_%7Bup%7D%3D0%2B0%3D0%2Cp_%7Bdown%7D%3D0%2B1%3D1%2Cp_%7Bup%7D%3Cp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%206%20%24%20.%5Cn-%20%24%20t%3D10%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%206%20%24%20.%20There%20is%20one%20person%20in%20the%20elevator%2C%20he%20wants%20to%20get%20to%20the%20floor%20number%20%24%205%20%24%20.%20%24%20p_%7Bup%7D%3D0%2B0%3D0%2Cp_%7Bdown%7D%3D0%2B1%3D1%2Cp_%7Bup%7D%3Cp_%7Bdown%7D%20%24%20.%20So%20the%20elevator%20goes%20to%20the%20floor%20number%20%24%205%20%24%20.%5Cn-%20%24%20t%3D11%20%24%20.%20The%20elevator%20is%20on%20the%20floor%20number%20%24%205%20%24%20.%20One%20person%20leaves%20the%20elevator%2C%20this%20person%20initially%20wanted%20to%20get%20to%20the%20floor%20number%20%24%205%20%24%20.%20The%20elevator%20is%20empty%20and%20nobody%20needs%20it%2C%20so%20the%20elevator%20remains%20at%20the%20floor%20number%20%24%205%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F257%5C%2FE%22%2C%22id%22%3A%22257E%22%7D%2C%22translation%22%3A%22%5Cu4f60%5Cu9700%5Cu8981%5Cu6a21%5Cu62df%5Cu4e00%5Cu4e2a%5Cu7535%5Cu68af%5Cu7684%5Cu8fc7%5Cu7a0b%20%20%5Cn%5Cu603b%5Cu5171%5Cu6709%24n%24%20%5Cu4e2a%5Cu4e8b%5Cu4ef6%5Cuff0c%5Cu7b2c%24i%24%20%5Cu4e2a%5Cu4e8b%5Cu4ef6%5Cu8868%5Cu793a%5Cu65f6%5Cu523b%24t_i%24%20%5Cu4f1a%5Cu6709%5Cu4e00%5Cu4e2a%5Cu4eba%5Cu5728%24s_i%24%20%5Cu7b49%5Cu7535%5Cu68af%5Cu8981%5Cu5230%24f_i%24%20%20%20%5Cn%5Cu7535%5Cu68af0%5Cu65f6%5Cu523b%5Cu5728%5Cu7b2c%5Cu4e00%5Cu5c42%5Cuff0c%5Cu4e00%5Cu5171%5Cu6709%24m%24%20%5Cu5c42%5Cuff08%5Cu8fdb%5Cu51fa%5Cu7535%5Cu68af%5Cu4e0d%5Cu8017%5Cu65f6%5Cuff09%20%20%5Cn%5Cu6bcf%5Cu4e00%5Cu79d2%5Cuff0c%5Cu82e5%5Cu6ca1%5Cu6709%5Cu4eba%5Cu5750%5Cu7535%5Cu68af%5Cu6216%5Cu7b49%5Cu7535%5Cu68af%5Cuff0c%5Cu7535%5Cu68af%5Cu4f1a%5Cu505c%5Cu4f4f%5Cu3002%20%20%5Cn%5Cu5426%5Cu5219%5Cuff0c%5Cu82e5%5Cu7535%5Cu68af%5Cu5728%24x%24%20%5Cu5c42%5Cuff0c%5Cu4ee4%24p_%7Bup%7D%24%20%5Cu8868%5Cu793a%5Cu7535%5Cu68af%5Cu4e2d%5Cu8981%5Cu5230%5Cu7f16%5Cu53f7%5Cu6bd4%5Cn%24x%24%20%5Cu5927%5Cu7684%5Cu697c%5Cu5c42%5Cu7684%5Cu4eba%5Cu548c%5Cu5f53%5Cu524d%5Cu65f6%5Cu523b%24t%24%20%5Cu5728%5Cu7f16%5Cu53f7%5Cu6bd4%24x%24%20%5Cu5927%5Cu7684%5Cu697c%5Cu5c42%5Cu7b49%5Cu7535%5Cu68af%5Cu7684%5Cu4eba%5Cu7684%5Cu603b%5Cu6570%2C%24p_%7Bdown%7D%24%20%5Cu8868%5Cu793a%5Cu7535%5Cu68af%5Cu4e2d%5Cu8981%5Cu5230%5Cu7f16%5Cu53f7%5Cu6bd4%24x%24%20%5Cu5c0f%5Cu7684%5Cu697c%5Cu5c42%5Cu7684%5Cu4eba%5Cu548c%5Cu5f53%5Cu524d%5Cu65f6%5Cu523b%24t%24%20%5Cu5728%5Cu7f16%5Cu53f7%5Cu6bd4%24x%24%20%5Cu5c0f%5Cu7684%5Cu697c%5Cu5c42%5Cu7b49%5Cu7535%5Cu68af%5Cu7684%5Cu4eba%5Cu7684%5Cu603b%5Cu6570%5Cu3002%20%20%5Cn%5Cu5982%5Cu679c%24p_%7Bup%7D%5C%5Cgeq%20p_%7Bdown%7D%24%20%2C%5Cu90a3%5Cu4e48%5Cu7535%5Cu68af%5Cu5728%5Cu65f6%5Cu523b%24t%2B1%24%20%5Cu56de%5Cu5230%5Cu697c%5Cu5c42%24x%2B1%24%20%5Cuff0c%5Cu5426%5Cu5219%5Cu5230%24x-1%24%20%20%20%5Cn%5Cu8f93%5Cu51fa%5Cu6bcf%5Cu4e2a%5Cu4eba%5Cu5230%5Cu76ee%5Cu7684%5Cu5730%5Cu7684%5Cu65f6%5Cu523b%20%20%5Cn%5CnTranslated%20by%20Fheiwn%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A5%2C%22totalAccepted%22%3A2%2C%22pid%22%3A%22CF257E%22%2C%22title%22%3A%22Greedy%20Elevator%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A32528%2C%22title%22%3A%22%5Cu9898%5Cu610f%22%2C%22forum%22%3A%7B%22id%22%3A11578%2C%22name%22%3A%22CF257E%20Greedy%20Elevator%22%2C%22slug%22%3A%22CF257E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Greedy%20Elevator%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573295103;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Greedy Elevator</h1>
<h2>题意翻译</h2>
<div>你需要模拟一个电梯的过程
总共有$n$ 个事件，第$i$ 个事件表示时刻$t_i$ 会有一个人在$s_i$ 等电梯要到$f_i$
电梯0时刻在第一层，一共有$m$ 层（进出电梯不耗时）
每一秒，若没有人坐电梯或等电梯，电梯会停住。
否则，若电梯在$x$ 层，令$p_{up}$ 表示电梯中要到编号比
$x$ 大的楼层的人和当前时刻$t$ 在编号比$x$ 大的楼层等电梯的人的总数,$p_{down}$ 表示电梯中要到编号比$x$ 小的楼层的人和当前时刻$t$ 在编号比$x$ 小的楼层等电梯的人的总数。
如果$p_{up}\geq p_{down}$ ,那么电梯在时刻$t+1$ 回到楼层$x+1$ ，否则到$x-1$
输出每个人到目的地的时刻
Translated by Fheiwn</div>
<h2>题目描述</h2>
<div>The $ m $ -floor $ (m>1) $ office of international corporation CodeForces has the advanced elevator control system established. It works as follows.
All office floors are sequentially numbered with integers from 1 to $ m $ . At time $ t=0 $ , the elevator is on the first floor, the elevator is empty and nobody is waiting for the elevator on other floors. Next, at times $ t_{i} $ $ (t_{i}>0) $ people come to the elevator. For simplicity, we assume that one person uses the elevator only once during the reported interval. For every person we know three parameters: the time at which the person comes to the elevator, the floor on which the person is initially, and the floor to which he wants to go.
The movement of the elevator between the floors is as follows. At time $ t $ ( $ t>=0 $ , $ t $ is an integer) the elevator is always at some floor. First the elevator releases all people who are in the elevator and want to get to the current floor. Then it lets in all the people waiting for the elevator on this floor. If a person comes to the elevator exactly at time $ t $ , then he has enough time to get into it. We can assume that all of these actions (going in or out from the elevator) are made instantly. After that the elevator decides, which way to move and at time $ (t+1) $ the elevator gets to the selected floor.
The elevator selects the direction of moving by the following algorithm.
- If the elevator is empty and at the current time no one is waiting for the elevator on any floor, then the elevator remains at the current floor.
- Otherwise, let's assume that the elevator is on the floor number $ x $ $ (1<=x<=m) $ . Then elevator calculates the directions' "priorities" $ p_{up} $ and $ p_{down} $ : $ p_{up} $ is the sum of the number of people waiting for the elevator on the floors with numbers greater than $ x $ , and the number of people in the elevator, who want to get to the floors with the numbers greater than $ x $ ; $ p_{down} $ is the sum of the number of people waiting for the elevator on the floors with numbers less than $ x $ , and the number of people in the elevator, who want to get to the floors with the numbers less than $ x $ . If $ p_{up}>=p_{down} $ , then the elevator goes one floor above the current one (that is, from floor $ x $ to floor $ x+1 $ ), otherwise the elevator goes one floor below the current one (that is, from floor $ x $ to floor $ x-1 $ ).
Your task is to simulate the work of the elevator and for each person to tell the time when the elevator will get to the floor this person needs. Please note that the elevator is large enough to accommodate all the people at once.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two space-separated integers: $ n,m\ (1<=n<=10^{5},2<=m<=10^{5}) $ — the number of people and floors in the building, correspondingly.
Next $ n $ lines each contain three space-separated integers: $ t_{i},s_{i},f_{i}\ (1<=t_{i}<=10^{9},1<=s_{i},f_{i}<=m,s_{i}≠f_{i}) $ — the time when the $ i $ -th person begins waiting for the elevator, the floor number, where the $ i $ -th person was initially located, and the number of the floor, where he wants to go.</div>
<h3>输出格式</h3>
<br />
<div>Print $ n $ lines. In the $ i $ -th line print a single number — the moment of time, when the $ i $ -th person gets to the floor he needs. The people are numbered in the order, in which they are given in the input.
Please don't use the %lld specifier to read or write 64-bit integers in С++. It is preferred to use the cin, cout streams or the %I64d specifier.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 10
1 2 7
3 6 5
3 4 8
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>7
11
8
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2 10
1 2 5
7 4 5
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>5
9
</code></pre>
<h2>说明</h2>
<div>In the first sample the elevator worked as follows:
- $ t=1 $ . The elevator is on the floor number $ 1 $ . The elevator is empty. The floor number $ 2 $ has one person waiting. $ p_{up}=1+0=1,p_{down}=0+0=0,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 2 $ .
- $ t=2 $ . The elevator is on the floor number $ 2 $ . One person enters the elevator, he wants to go to the floor number $ 7 $ . $ p_{up}=0+1=1,p_{down}=0+0=0,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 3 $ .
- $ t=3 $ . The elevator is on the floor number $ 3 $ . There is one person in the elevator, he wants to go to floor $ 7 $ . The floors number $ 4 $ and $ 6 $ have two people waiting for the elevator. $ p_{up}=2+1=3,p_{down}=0+0=0,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 4 $ .
- $ t=4 $ . The elevator is on the floor number $ 4 $ . There is one person in the elevator who wants to go to the floor number $ 7 $ . One person goes into the elevator, he wants to get to the floor number $ 8 $ . The floor number $ 6 $ has one man waiting. $ p_{up}=1+2=3,p_{down}=0+0=0,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 5 $ .
- $ t=5 $ . The elevator is on the floor number $ 5 $ . There are two people in the elevator, they want to get to the floors number $ 7 $ and $ 8 $ , correspondingly. There is one person waiting for the elevator on the floor number $ 6 $ . $ p_{up}=1+2=3,p_{down}=0+0=0,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 6 $ .
- $ t=6 $ . The elevator is on the floor number $ 6 $ . There are two people in the elevator, they want to get to the floors number $ 7 $ and $ 8 $ , correspondingly. One man enters the elevator, he wants to get to the floor number $ 5 $ . $ p_{up}=0+2=2,p_{down}=0+1=1,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 7 $ .
- $ t=7 $ . The elevator is on the floor number $ 7 $ . One person leaves the elevator, this person wanted to get to the floor number $ 7 $ . There are two people in the elevator, they want to get to the floors with numbers $ 8 $ and $ 5 $ , correspondingly. $ p_{up}=0+1=1,p_{down}=0+1=1,p_{up}>=p_{down} $ . So the elevator goes to the floor number $ 8 $ .
- $ t=8 $ . The elevator is on the floor number $ 8 $ . One person leaves the elevator, this person wanted to go to the floor number $ 8 $ . There is one person in the elevator, he wants to go to the floor number $ 5 $ . $ p_{up}=0+0=0,p_{down}=0+1=1,p_{up}<p_{down} $ . So the elevator goes to the floor number $ 7 $ . - $ t=9 $ . The elevator is on the floor number $ 7 $ . There is one person in the elevator, this person wants to get to the floor number $ 5 $ . $ p_{up}=0+0=0,p_{down}=0+1=1,p_{up}<p_{down} $ . So the elevator goes to the floor number $ 6 $ . - $ t=10 $ . The elevator is on the floor number $ 6 $ . There is one person in the elevator, he wants to get to the floor number $ 5 $ . $ p_{up}=0+0=0,p_{down}=0+1=1,p_{up}<p_{down} $ . So the elevator goes to the floor number $ 5 $ . - $ t=11 $ . The elevator is on the floor number $ 5 $ . One person leaves the elevator, this person initially wanted to get to the floor number $ 5 $ . The elevator is empty and nobody needs it, so the elevator remains at the floor number $ 5 $ .</div>
</article>
</div>
</div>
</body>
</html>
