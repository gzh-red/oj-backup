<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Hanoi Factory - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573397780:WPxAr9h6LqPR9Wbt69Huf4HJYKI0DBawXQPEj3DpId0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Of%20course%20you%20have%20heard%20the%20famous%20task%20about%20Hanoi%20Towers%2C%20but%20did%20you%20know%20that%20there%20is%20a%20special%20factory%20producing%20the%20rings%20for%20this%20wonderful%20game%3F%20Once%20upon%20a%20time%2C%20the%20ruler%20of%20the%20ancient%20Egypt%20ordered%20the%20workers%20of%20Hanoi%20Factory%20to%20create%20as%20high%20tower%20as%20possible.%20They%20were%20not%20ready%20to%20serve%20such%20a%20strange%20order%20so%20they%20had%20to%20create%20this%20new%20tower%20using%20already%20produced%20rings.%5Cn%5CnThere%20are%20%24%20n%20%24%20rings%20in%20factory%27s%20stock.%20The%20%24%20i%20%24%20-th%20ring%20has%20inner%20radius%20%24%20a_%7Bi%7D%20%24%20%2C%20outer%20radius%20%24%20b_%7Bi%7D%20%24%20and%20height%20%24%20h_%7Bi%7D%20%24%20.%20The%20goal%20is%20to%20select%20some%20subset%20of%20rings%20and%20arrange%20them%20such%20that%20the%20following%20conditions%20are%20satisfied%3A%5Cn%5Cn-%20Outer%20radiuses%20form%20a%20non-increasing%20sequence%2C%20i.e.%20one%20can%20put%20the%20%24%20j%20%24%20-th%20ring%20on%20the%20%24%20i%20%24%20-th%20ring%20only%20if%20%24%20b_%7Bj%7D%3C%3Db_%7Bi%7D%20%24%20.%5Cn-%20Rings%20should%20not%20fall%20one%20into%20the%20the%20other.%20That%20means%20one%20can%20place%20ring%20%24%20j%20%24%20on%20the%20ring%20%24%20i%20%24%20only%20if%20%24%20b_%7Bj%7D%3Ea_%7Bi%7D%20%24%20.%5Cn-%20The%20total%20height%20of%20all%20rings%20used%20should%20be%20maximum%20possible.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D100000%20%24%20%29%20%5Cu2014%20the%20number%20of%20rings%20in%20factory%27s%20stock.%5Cn%5CnThe%20%24%20i%20%24%20-th%20of%20the%20next%20%24%20n%20%24%20lines%20contains%20three%20integers%20%24%20a_%7Bi%7D%20%24%20%2C%20%24%20b_%7Bi%7D%20%24%20and%20%24%20h_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%2Cb_%7Bi%7D%2Ch_%7Bi%7D%3C%3D10%5E%7B9%7D%20%24%20%2C%20%24%20b_%7Bi%7D%3Ea_%7Bi%7D%20%24%20%29%20%5Cu2014%20inner%20radius%2C%20outer%20radius%20and%20the%20height%20of%20the%20%24%20i%20%24%20-th%20ring%20respectively.%22%2C%22outputFormat%22%3A%22Print%20one%20integer%20%5Cu2014%20the%20maximum%20height%20of%20the%20tower%20that%20can%20be%20obtained.%22%2C%22samples%22%3A%5B%5B%223%5Cn1%205%201%5Cn2%206%202%5Cn3%207%203%5Cn%22%2C%226%5Cn%22%5D%2C%5B%224%5Cn1%202%201%5Cn1%203%203%5Cn4%206%202%5Cn5%207%201%5Cn%22%2C%224%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20the%20optimal%20solution%20is%20to%20take%20all%20the%20rings%20and%20put%20them%20on%20each%20other%20in%20order%20%24%203%20%24%20%2C%20%24%202%20%24%20%2C%20%24%201%20%24%20.%5Cn%5CnIn%20the%20second%20sample%2C%20one%20can%20put%20the%20ring%20%24%203%20%24%20on%20the%20ring%20%24%204%20%24%20and%20get%20the%20tower%20of%20height%20%24%203%20%24%20%2C%20or%20put%20the%20ring%20%24%201%20%24%20on%20the%20ring%20%24%202%20%24%20and%20get%20the%20tower%20of%20height%20%24%204%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F777%5C%2FE%22%2C%22id%22%3A%22777E%22%7D%2C%22translation%22%3A%22%5Cu4f60%5Cu80af%5Cu5b9a%5Cu542c%5Cu8bf4%5Cu8fc7%5Cu8457%5Cu540d%5Cu7684%5Cu6e38%5Cu620f%5Cu6c49%5Cu8bfa%5Cu5854%5Cu5427%5Cuff0c%5Cu4f46%5Cu662f%5Cu4f60%5Cu77e5%5Cu9053%5Cu6709%5Cu4e00%5Cu4e2a%5Cu795e%5Cu5947%5Cu7684%5Cu5de5%5Cu5382%5Cu4e13%5Cu95e8%5Cu5236%5Cu9020%5Cu8fd9%5Cu79cd%5Cu6e38%5Cu620f%5Cu5854%5Cu4e0a%5Cu7684%5Cu73af%5Cu5417%5Cuff1f%5Cu5f88%5Cu4e45%5Cu4e4b%5Cu524d%5Cuff0c%5Cu53e4%5Cu57c3%5Cu53ca%5Cu7684%5Cu88c1%5Cu5b9a%5Cu8005%5Cu547d%5Cu4ee4%5Cu201c%5Cu6c49%5Cu8bfa%5Cu5de5%5Cu5382%5Cu201d%5Cuff08%5Cu4e0a%5Cu6587%5Cu63d0%5Cu5230%5Cu7684%5Cu5de5%5Cu5382%5Cuff09%5Cu7684%5Cu5de5%5Cu4eba%5Cu5236%5Cu9020%5Cu4e00%5Cu5ea7%5Cu5c3d%5Cu53ef%5Cu80fd%5Cu9ad8%5Cu7684%5Cu6c49%5Cu8bfa%5Cu5854%5Cuff0c%5Cu800c%5Cu4ed6%5Cu4eec%5Cu6ca1%5Cu6709%5Cu505a%5Cu597d%5Cu51c6%5Cu5907%5Cu53bb%5Cu6267%5Cu884c%5Cu8fd9%5Cu6837%5Cu4e00%5Cu4e2a%5Cu5947%5Cu602a%5Cu7684%5Cu547d%5Cu4ee4%5Cuff0c%5Cu6240%5Cu4ee5%5Cu4ed6%5Cu4eec%5Cu4e0d%5Cu5f97%5Cu4e0d%5Cu7528%5Cu5df2%5Cu7ecf%5Cu9020%5Cu597d%5Cu7684%5Cu73af%5Cu3002%5Cn%5Cu5de5%5Cu5382%5Cu50a8%5Cu5907%5Cu6709%24n%24%5Cu4e2a%5Cu73af%5Cuff0c%5Cu5176%5Cu5185%5Cu5f84%5Cu4e3a%24a_i%24%5Cuff0c%5Cu5916%5Cu5f84%5Cu4e3a%24b_i%24%5Cuff0c%5Cu9ad8%5Cu5ea6%5Cu4e3a%24h_i%24%5Cu3002%5Cu8981%5Cu6c42%5Cu73af%5Cu7684%5Cu653e%5Cu7f6e%5Cu6761%5Cu4ef6%5Cu5982%5Cu4e0b%5Cuff1a%5Cn-%20%20%20%20%5Cu5854%5Cu7684%5Cu5916%5Cu534a%5Cu5f84%5Cu4ece%5Cu4e0b%5Cu81f3%5Cu4e0a%5Cu4e3a%5Cu975e%5Cu9012%5Cu589e%5Cu5e8f%5Cu5217%5Cuff0c%5Cu5373%5Cu8d8a%5Cu4e0b%5Cu9762%5Cu7684%5Cu73af%5Cu5916%5Cu5f84%5Cu4e0d%5Cu80fd%5Cu5c0f%5Cu4e8e%5Cu4e0a%5Cu9762%5Cu7684%5Cu73af%5Cn-%20%20%20%20%5Cu73af%5Cu4e0d%5Cu80fd%5Cu6389%5Cu4e0b%5Cu6765%5Cuff0c%5Cu5373%5Cu76f8%5Cu90bb%5Cu4e24%5Cu73af%5Cu4e0a%5Cu65b9%5Cu7684%5Cu73af%5Cu7684%5Cu5916%5Cu5f84%5Cu4e0d%5Cu80fd%5Cu5c0f%5Cu4e8e%5Cu4e0b%5Cu9762%5Cu7684%5Cu73af%5Cu7684%5Cu5185%5Cu5f84%5Cn-%20%20%20%20%5Cu5854%5Cu7684%5Cu9ad8%5Cu5ea6%5Cu5fc5%5Cu987b%5Cu6700%5Cu5927%5Cn%23%20%5Cu8f93%5Cu5165%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cn%5Cu7b2c%241%24%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6570%24n%24%5Cuff0c%5Cu4ee3%5Cu8868%5Cu73af%5Cu7684%5Cu6570%5Cu91cf%5Cn%5Cu7b2c%242%24~%24n-1%24%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c3%5Cu4e2a%5Cu6570%24a_i%2Cb_i%2Ch_i%24%5Cu4ee3%5Cu8868%5Cu73af%5Cu7684%5Cu5185%5Cu5f84%5Cuff0c%5Cu5916%5Cu5f84%5Cuff0c%5Cu9ad8%5Cu5ea6%5Cn%23%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu4ee3%5Cu8868%5Cu5854%5Cu7684%5Cu6700%5Cu5927%5Cu9ad8%5Cu5ea6%5Cn%5Cu6837%5Cu4f8b%5Cu53ca%5Cu6570%5Cu636e%5Cu8303%5Cu56f4%5Cu89c1%5Cu539f%5Cu6587%5Cn%5CnTranslated%20by%20Venus%22%2C%22tags%22%3A%5B111%2C113%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A96%2C%22totalAccepted%22%3A37%2C%22pid%22%3A%22CF777E%22%2C%22title%22%3A%22Hanoi%20Factory%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A32449%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A9478%2C%22name%22%3A%22CF777E%20Hanoi%20Factory%22%2C%22slug%22%3A%22CF777E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3327%22%2C%22title%22%3A%22%5BSDOI2015%5D%5Cu7ea6%5Cu6570%5Cu4e2a%5Cu6570%5Cu548c%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF635A%22%2C%22title%22%3A%22Orchestra%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF547B%22%2C%22title%22%3A%22Mike%20and%20Feet%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF293B%22%2C%22title%22%3A%22Distinct%20Paths%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF992E%22%2C%22title%22%3A%22Nastya%20and%20King-Shamans%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Hanoi%20Factory%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Hanoi Factory</h1>
<h2>题意翻译</h2>
<div>你肯定听说过著名的游戏汉诺塔吧，但是你知道有一个神奇的工厂专门制造这种游戏塔上的环吗？很久之前，古埃及的裁定者命令“汉诺工厂”（上文提到的工厂）的工人制造一座尽可能高的汉诺塔，而他们没有做好准备去执行这样一个奇怪的命令，所以他们不得不用已经造好的环。
工厂储备有$n$个环，其内径为$a_i$，外径为$b_i$，高度为$h_i$。要求环的放置条件如下：
- 塔的外半径从下至上为非递增序列，即越下面的环外径不能小于上面的环
- 环不能掉下来，即相邻两环上方的环的外径不能小于下面的环的内径
- 塔的高度必须最大
# 输入输出格式
## 输入格式
第$1$行一个数$n$，代表环的数量
第$2$~$n-1$行，每行3个数$a_i,b_i,h_i$代表环的内径，外径，高度
## 输出格式
一个整数，代表塔的最大高度
样例及数据范围见原文
Translated by Venus</div>
<h2>题目描述</h2>
<div>Of course you have heard the famous task about Hanoi Towers, but did you know that there is a special factory producing the rings for this wonderful game? Once upon a time, the ruler of the ancient Egypt ordered the workers of Hanoi Factory to create as high tower as possible. They were not ready to serve such a strange order so they had to create this new tower using already produced rings.
There are $ n $ rings in factory's stock. The $ i $ -th ring has inner radius $ a_{i} $ , outer radius $ b_{i} $ and height $ h_{i} $ . The goal is to select some subset of rings and arrange them such that the following conditions are satisfied:
- Outer radiuses form a non-increasing sequence, i.e. one can put the $ j $ -th ring on the $ i $ -th ring only if $ b_{j}<=b_{i} $ .
- Rings should not fall one into the the other. That means one can place ring $ j $ on the ring $ i $ only if $ b_{j}>a_{i} $ .
- The total height of all rings used should be maximum possible.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains a single integer $ n $ ( $ 1<=n<=100000 $ ) — the number of rings in factory's stock.
The $ i $ -th of the next $ n $ lines contains three integers $ a_{i} $ , $ b_{i} $ and $ h_{i} $ ( $ 1<=a_{i},b_{i},h_{i}<=10^{9} $ , $ b_{i}>a_{i} $ ) — inner radius, outer radius and the height of the $ i $ -th ring respectively.</div>
<h3>输出格式</h3>
<br />
<div>Print one integer — the maximum height of the tower that can be obtained.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
1 5 1
2 6 2
3 7 3
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>6
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4
1 2 1
1 3 3
4 6 2
5 7 1
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>4
</code></pre>
<h2>说明</h2>
<div>In the first sample, the optimal solution is to take all the rings and put them on each other in order $ 3 $ , $ 2 $ , $ 1 $ .
In the second sample, one can put the ring $ 3 $ on the ring $ 4 $ and get the tower of height $ 3 $ , or put the ring $ 1 $ on the ring $ 2 $ and get the tower of height $ 4 $ .</div>
</article>
</div>
</div>
</body>
</html>
