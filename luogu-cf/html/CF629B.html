<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Far Relative’s Problem - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573396173:FL8/kXMMK537ouY4vcK7G5/+YsnZ3zuS5mlxoJgFgXA=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Famil%20Door%20wants%20to%20celebrate%20his%20birthday%20with%20his%20friends%20from%20Far%20Far%20Away.%20He%20has%20%24%20n%20%24%20friends%20and%20each%20of%20them%20can%20come%20to%20the%20party%20in%20a%20specific%20range%20of%20days%20of%20the%20year%20from%20%24%20a_%7Bi%7D%20%24%20to%20%24%20b_%7Bi%7D%20%24%20.%20Of%20course%2C%20Famil%20Door%20wants%20to%20have%20as%20many%20friends%20celebrating%20together%20with%20him%20as%20possible.%5Cn%5CnFar%20cars%20are%20as%20weird%20as%20Far%20Far%20Away%20citizens%2C%20so%20they%20can%20only%20carry%20two%20people%20of%20opposite%20gender%2C%20that%20is%20exactly%20one%20male%20and%20one%20female.%20However%2C%20Far%20is%20so%20far%20from%20here%20that%20no%20other%20transportation%20may%20be%20used%20to%20get%20to%20the%20party.%5Cn%5CnFamil%20Door%20should%20select%20some%20day%20of%20the%20year%20and%20invite%20some%20of%20his%20friends%2C%20such%20that%20they%20all%20are%20available%20at%20this%20moment%20and%20the%20number%20of%20male%20friends%20invited%20is%20equal%20to%20the%20number%20of%20female%20friends%20invited.%20Find%20the%20maximum%20number%20of%20friends%20that%20may%20present%20at%20the%20party.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D5000%20%24%20%29%20%5Cu2014%20then%20number%20of%20Famil%20Door%27s%20friends.%5Cn%5CnThen%20follow%20%24%20n%20%24%20lines%2C%20that%20describe%20the%20friends.%20Each%20line%20starts%20with%20a%20capital%20letter%20%27F%27%20for%20female%20friends%20and%20with%20a%20capital%20letter%20%27M%27%20for%20male%20friends.%20Then%20follow%20two%20integers%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%3C%3Db_%7Bi%7D%3C%3D366%20%24%20%29%2C%20providing%20that%20the%20%24%20i%20%24%20-th%20friend%20can%20come%20to%20the%20party%20from%20day%20%24%20a_%7Bi%7D%20%24%20to%20day%20%24%20b_%7Bi%7D%20%24%20inclusive.%22%2C%22outputFormat%22%3A%22Print%20the%20maximum%20number%20of%20people%20that%20may%20come%20to%20Famil%20Door%27s%20party.%22%2C%22samples%22%3A%5B%5B%224%5CnM%20151%20307%5CnF%20343%20352%5CnF%20117%20145%5CnM%2024%20128%5Cn%22%2C%222%5Cn%22%5D%2C%5B%226%5CnM%20128%20130%5CnF%20128%20131%5CnF%20131%20140%5CnF%20131%20141%5CnM%20131%20200%5CnM%20140%20200%5Cn%22%2C%224%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20friends%20%24%203%20%24%20and%20%24%204%20%24%20can%20come%20on%20any%20day%20in%20range%20%24%20%5B117%2C128%5D%20%24%20.%5Cn%5CnIn%20the%20second%20sample%2C%20friends%20with%20indices%20%24%203%20%24%20%2C%20%24%204%20%24%20%2C%20%24%205%20%24%20and%20%24%206%20%24%20can%20come%20on%20day%20%24%20140%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F629%5C%2FB%22%2C%22id%22%3A%22629B%22%7D%2C%22translation%22%3A%22Problem%5Cr%5Cn%5Cu5c0f%5Cu767d%5Cu60f3%5Cu57282019%5Cu5e74%5Cu9080%5Cu8bf7%5Cu4ed6%5Cu7684%5Cu597d%5Cu53cb%5Cu53c2%5Cu52a0%5Cu4e00%5Cu6b21%5Cu805a%5Cu4f1a%5Cuff0c%5Cu5177%5Cu4f53%5Cu54ea%5Cu4e00%5Cu5929%5Cu672a%5Cu786e%5Cu5b9a%5Cuff0c%5Cu4f46%5Cu662f%5Cu5df2%5Cu77e5%5Cu7b2ci%5Cu4e2a%5Cu670b%5Cu53cb%5Cu7684%5Cu6027%5Cu522b%5Cuff0c%5Cu4e14%5Cu8be5%5Cu670b%5Cu53cb%5Cu5728%5Cu7b2ca%5Cu200bi%5Cu200b%5Cu5230b%5Cu200bi%5Cu8fd9%5Cu51e0%5Cu5929%5Cu6709%5Cu65f6%5Cu95f4%5Cu53c2%5Cu52a0%28%5Cu5305%5Cu542ba%5Cu200bi%5Cu548cb%5Cu200bi%29%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5c0f%5Cu767d%5Cu5e0c%5Cu671b%5Cu53c2%5Cu52a0%5Cu7684%5Cu670b%5Cu53cb%5Cu7684%5Cu7537%5Cu5973%5Cu6570%5Cu91cf%5Cu521a%5Cu597d%5Cu76f8%5Cu7b49%5Cuff0c%5Cu4e14%5Cu80fd%5Cu53c2%5Cu52a0%5Cu7684%5Cu4eba%5Cu6570%5Cu8d8a%5Cu591a%5Cu8d8a%5Cu597d%5Cu3002%5Cr%5Cn%5Cu5f53%5Cu7136%5Cu4e3a%5Cu4e86%5Cu7537%5Cu5973%5Cu4eba%5Cu6570%5Cu76f8%5Cu7b49%5Cuff0c%5Cu4ed6%5Cu4e5f%5Cu53ef%5Cu4ee5%5Cu5a49%5Cu62d2%5Cu5176%5Cu4e2d%5Cu7684%5Cu67d0%5Cu4e9b%5Cu4eba%5Cu3002%5Cu8bf7%5Cu8ba1%5Cu7b97%5Cu6700%5Cu591a%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu670b%5Cu53cb%5Cu53ef%5Cu4ee5%5Cu53c2%5Cu52a0%5Cu3002%5Cr%5Cn%5Cr%5CnInput%20Data%5Cr%5Cn%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cuff1a%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570n%5Cuff0c%5Cu8868%5Cu793a%5Cu670b%5Cu53cb%5Cu7684%5Cu6570%5Cu91cf%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765n%5Cu884c%5Cuff0c%5Cu5206%5Cu522b%5Cu662f%5Cu4e00%5Cu4e2a%5Cu5b57%5Cu7b26%5Cu2018F%5Cu2019%5Cu6216%5Cu8005%5Cu2018M%5Cu2019%5Cuff0c%5Cu5206%5Cu522b%5Cu8868%5Cu793a%5Cu5973%5Cu548c%5Cu7537%5Cuff1b%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu5206%5Cu522b%5Cu8868%5Cu793aa%5Cu200bi%5Cu548cb%5Cu200bi%5Cu3002%5Cr%5Cn%5Cr%5CnOutput%20Data%5Cr%5Cn%5Cr%5Cn%5Cu8f93%5Cu51fa%5Cu5171%5Cu4e00%5Cu4e2a%5Cu6570%5Cuff0c%5Cu8868%5Cu793a%5Cu5728%5Cu7537%5Cu5973%5Cu6570%5Cu91cf%5Cu76f8%5Cu7b49%5Cu7684%5Cu60c5%5Cu51b5%5Cu4e0b%5Cuff0c%5Cu6700%5Cu591a%5Cu53ef%5Cu4ee5%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu670b%5Cu53cb%5Cu53c2%5Cu52a0%5Cu6d3e%5Cu5bf9%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A48%2C%22totalAccepted%22%3A28%2C%22pid%22%3A%22CF629B%22%2C%22title%22%3A%22Far%20Relative%5Cu2019s%20Problem%22%2C%22difficulty%22%3A2%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A47942%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%5Cuff08%5Cu5927%5Cu610f%5Cuff09%22%2C%22forum%22%3A%7B%22id%22%3A10122%2C%22name%22%3A%22CF629B%20Far%20Relative%5Cu2019s%20Problem%22%2C%22slug%22%3A%22CF629B%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Far%20Relative%5Cu2019s%20Problem%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Far Relative’s Problem</h1>
<h2>题意翻译</h2>
<div>Problem
小白想在2019年邀请他的好友参加一次聚会，具体哪一天未确定，但是已知第i个朋友的性别，且该朋友在第a​i​到b​i这几天有时间参加(包含a​i和b​i)。
小白希望参加的朋友的男女数量刚好相等，且能参加的人数越多越好。
当然为了男女人数相等，他也可以婉拒其中的某些人。请计算最多有多少个朋友可以参加。
Input Data
第一行：一个整数n，表示朋友的数量。
接下来n行，分别是一个字符‘F’或者‘M’，分别表示女和男；两个整数，分别表示a​i和b​i。
Output Data
输出共一个数，表示在男女数量相等的情况下，最多可以有多少个朋友参加派对。</div>
<h2>题目描述</h2>
<div>Famil Door wants to celebrate his birthday with his friends from Far Far Away. He has $ n $ friends and each of them can come to the party in a specific range of days of the year from $ a_{i} $ to $ b_{i} $ . Of course, Famil Door wants to have as many friends celebrating together with him as possible.
Far cars are as weird as Far Far Away citizens, so they can only carry two people of opposite gender, that is exactly one male and one female. However, Far is so far from here that no other transportation may be used to get to the party.
Famil Door should select some day of the year and invite some of his friends, such that they all are available at this moment and the number of male friends invited is equal to the number of female friends invited. Find the maximum number of friends that may present at the party.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains a single integer $ n $ ( $ 1<=n<=5000 $ ) — then number of Famil Door's friends.
Then follow $ n $ lines, that describe the friends. Each line starts with a capital letter 'F' for female friends and with a capital letter 'M' for male friends. Then follow two integers $ a_{i} $ and $ b_{i} $ ( $ 1<=a_{i}<=b_{i}<=366 $ ), providing that the $ i $ -th friend can come to the party from day $ a_{i} $ to day $ b_{i} $ inclusive.</div>
<h3>输出格式</h3>
<br />
<div>Print the maximum number of people that may come to Famil Door's party.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
M 151 307
F 343 352
F 117 145
M 24 128
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>6
M 128 130
F 128 131
F 131 140
F 131 141
M 131 200
M 140 200
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>4
</code></pre>
<h2>说明</h2>
<div>In the first sample, friends $ 3 $ and $ 4 $ can come on any day in range $ [117,128] $ .
In the second sample, friends with indices $ 3 $ , $ 4 $ , $ 5 $ and $ 6 $ can come on day $ 140 $ .</div>
</article>
</div>
</div>
</body>
</html>
