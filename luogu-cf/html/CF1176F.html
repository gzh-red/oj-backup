<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Destroy it! - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573402643:XQrB/4f4rmcWQ24ZThU0rHoVn+UxgGgjuf9ny1VHSeg=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22You%20are%20playing%20a%20computer%20card%20game%20called%20Splay%20the%20Sire.%20Currently%20you%20are%20struggling%20to%20defeat%20the%20final%20boss%20of%20the%20game.%5Cn%5CnThe%20boss%20battle%20consists%20of%20%24%20n%20%24%20turns.%20During%20each%20turn%2C%20you%20will%20get%20several%20cards.%20Each%20card%20has%20two%20parameters%3A%20its%20cost%20%24%20c_i%20%24%20and%20damage%20%24%20d_i%20%24%20.%20You%20may%20play%20some%20of%20your%20cards%20during%20each%20turn%20in%20some%20sequence%20%28you%20choose%20the%20cards%20and%20the%20exact%20order%20they%20are%20played%29%2C%20as%20long%20as%20the%20total%20cost%20of%20the%20cards%20you%20play%20during%20the%20turn%20does%20not%20exceed%20%24%203%20%24%20.%20After%20playing%20some%20%28possibly%20zero%29%20cards%2C%20you%20end%20your%20turn%2C%20and%20all%20cards%20you%20didn%27t%20play%20are%20discarded.%20Note%20that%20you%20can%20use%20each%20card%20at%20most%20once.%5Cn%5CnYour%20character%20has%20also%20found%20an%20artifact%20that%20boosts%20the%20damage%20of%20some%20of%20your%20actions%3A%20every%20%24%2010%20%24%20-th%20card%20you%20play%20deals%20double%20damage.%5Cn%5CnWhat%20is%20the%20maximum%20possible%20damage%20you%20can%20deal%20during%20%24%20n%20%24%20turns%3F%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20one%20integer%20%24%20n%20%24%20%28%20%24%201%20%5C%5Cle%20n%20%5C%5Cle%202%20%5C%5Ccdot%2010%5E5%20%24%20%29%20%5Cu2014%20the%20number%20of%20turns.%5Cn%5CnThen%20%24%20n%20%24%20blocks%20of%20input%20follow%2C%20the%20%24%20i%20%24%20-th%20block%20representing%20the%20cards%20you%20get%20during%20the%20%24%20i%20%24%20-th%20turn.%5Cn%5CnEach%20block%20begins%20with%20a%20line%20containing%20one%20integer%20%24%20k_i%20%24%20%28%20%24%201%20%5C%5Cle%20k_i%20%5C%5Cle%202%20%5C%5Ccdot%2010%5E5%20%24%20%29%20%5Cu2014%20the%20number%20of%20cards%20you%20get%20during%20%24%20i%20%24%20-th%20turn.%20Then%20%24%20k_i%20%24%20lines%20follow%2C%20each%20containing%20two%20integers%20%24%20c_j%20%24%20and%20%24%20d_j%20%24%20%28%20%24%201%20%5C%5Cle%20c_j%20%5C%5Cle%203%20%24%20%2C%20%24%201%20%5C%5Cle%20d_j%20%5C%5Cle%2010%5E9%20%24%20%29%20%5Cu2014%20the%20parameters%20of%20the%20corresponding%20card.%5Cn%5CnIt%20is%20guaranteed%20that%20%24%20%5C%5Csum%20%5C%5Climits_%7Bi%20%3D%201%7D%5E%7Bn%7D%20k_i%20%5C%5Cle%202%20%5C%5Ccdot%2010%5E5%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20one%20integer%20%5Cu2014%20the%20maximum%20damage%20you%20may%20deal.%22%2C%22samples%22%3A%5B%5B%22%5Cn5%5Cn3%5Cn1%206%5Cn1%207%5Cn1%205%5Cn2%5Cn1%204%5Cn1%203%5Cn3%5Cn1%2010%5Cn3%205%5Cn2%203%5Cn3%5Cn1%2015%5Cn2%204%5Cn1%2010%5Cn1%5Cn1%20100%5Cn%22%2C%22%5Cn263%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20example%20test%20the%20best%20course%20of%20action%20is%20as%20follows%3A%5Cn%5CnDuring%20the%20first%20turn%2C%20play%20all%20three%20cards%20in%20any%20order%20and%20deal%20%24%2018%20%24%20damage.%5Cn%5CnDuring%20the%20second%20turn%2C%20play%20both%20cards%20and%20deal%20%24%207%20%24%20damage.%5Cn%5CnDuring%20the%20third%20turn%2C%20play%20the%20first%20and%20the%20third%20card%20and%20deal%20%24%2013%20%24%20damage.%5Cn%5CnDuring%20the%20fourth%20turn%2C%20play%20the%20first%20and%20the%20third%20card%20and%20deal%20%24%2025%20%24%20damage.%5Cn%5CnDuring%20the%20fifth%20turn%2C%20play%20the%20only%20card%2C%20which%20will%20deal%20double%20damage%20%28%20%24%20200%20%24%20%29.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1176%5C%2FF%22%2C%22id%22%3A%221176F%22%7D%2C%22translation%22%3A%22%5Cu4f60%5Cu6b63%5Cu5728%5Cu73a9%5Cu4e00%5Cu6b3e%5Cu53eb%5Cu505aSplay%20the%20Sire%5Cu7684%5Cu7535%5Cu8111%5Cu6e38%5Cu620f%5Cu3002%5Cu4f60%5Cu73b0%5Cu5728%5Cu9762%5Cu5bf9%5Cu7684%5Cu662f%5Cu6700%5Cu540e%5Cu7684boss%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4f60%5Cu9700%5Cu8981%5Cu8fdb%5Cu884c%24n%24%5Cu8f6e%5Cu6e38%5Cu620f%5Cu3002%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e00%5Cu8f6e%5Cuff0c%5Cu4f60%5Cu90fd%5Cu4f1a%5Cu5f97%5Cu5230%5Cu82e5%5Cu5e72%5Cu5f20%5Cu5361%5Cu7247%5Cuff0c%5Cu5176%5Cu4e2d%5Cu7b2c%24i%24%5Cu5f20%5Cu5361%5Cu7247%5Cu7684%5Cu82b1%5Cu8d39%5Cu662f%24c_i%24%5Cuff0c%5Cu9020%5Cu6210%5Cu7684%5Cu4f24%5Cu5bb3%5Cu662f%24d_i%24%5Cu3002%5Cu4f60%5Cu53ef%5Cu4ee5%5Cu4ece%5Cu4e2d%5Cu9009%5Cu62e9%5Cu4e00%5Cu90e8%5Cu5206%5Cu5361%5Cu7247%5Cuff0c%5Cu4ee5%5Cu4efb%5Cu610f%5Cu987a%5Cu5e8f%5Cu6253%5Cu51fa%5Cu53bb%5Cuff0c%5Cu6ee1%5Cu8db3%5Cu8fd9%5Cu4e9b%5Cu5361%5Cu7247%5Cu7684%5Cu82b1%5Cu8d39%5Cu4e4b%5Cu548c%5Cu4e0d%5Cu8d85%5Cu8fc7%243%24%5Cu3002%5Cu6bcf%5Cu4e00%5Cu5f20%5Cu5361%5Cu7247%5Cu53ea%5Cu80fd%5Cu5728%5Cu672c%5Cu8f6e%5Cu4f7f%5Cu7528%5Cuff0c%5Cu6ca1%5Cu6709%5Cu4f7f%5Cu7528%5Cu8fc7%5Cu7684%5Cu5361%5Cu7247%5Cu4f5c%5Cu5e9f%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4f60%5Cu8fd8%5Cu53d1%5Cu73b0%5Cuff0c%5Cu6bcf%2410%24%5Cu6b21%5Cu653b%5Cu51fb%5Cu5c31%5Cu4f1a%5Cu6709%5Cu4e00%5Cu6b21%5Cu66b4%5Cu51fb%5Cuff0c%5Cu66b4%5Cu51fb%5Cu4f24%5Cu5bb3%5Cu7ffb%5Cu500d%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu73b0%5Cu5728%5Cu4f60%5Cu9700%5Cu8981%5Cu6c42%5Cu51fa%5Cuff0c%24n%24%5Cu8f6e%5Cu540e%5Cu4f60%5Cu80fd%5Cu9020%5Cu6210%5Cu7684%5Cu6700%5Cu5927%5Cu4f24%5Cu5bb3%5Cu662f%5Cu591a%5Cu5c11%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A69%2C%22totalAccepted%22%3A25%2C%22pid%22%3A%22CF1176F%22%2C%22title%22%3A%22Destroy%20it%21%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22CF1165E%22%2C%22title%22%3A%22Two%20Arrays%20and%20Sum%20of%20Functions%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1165D%22%2C%22title%22%3A%22Almost%20All%20Divisors%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1176E%22%2C%22title%22%3A%22Cover%20it%21%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1176D%22%2C%22title%22%3A%22Recover%20it%21%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1179C%22%2C%22title%22%3A%22Serge%20and%20Dining%20Room%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Destroy%20it%21%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Destroy it!</h1>
<h2>题意翻译</h2>
<div>你正在玩一款叫做Splay the Sire的电脑游戏。你现在面对的是最后的boss。
你需要进行$n$轮游戏。对于每一轮，你都会得到若干张卡片，其中第$i$张卡片的花费是$c_i$，造成的伤害是$d_i$。你可以从中选择一部分卡片，以任意顺序打出去，满足这些卡片的花费之和不超过$3$。每一张卡片只能在本轮使用，没有使用过的卡片作废。
你还发现，每$10$次攻击就会有一次暴击，暴击伤害翻倍。
现在你需要求出，$n$轮后你能造成的最大伤害是多少。</div>
<h2>题目描述</h2>
<div>You are playing a computer card game called Splay the Sire. Currently you are struggling to defeat the final boss of the game.
The boss battle consists of $ n $ turns. During each turn, you will get several cards. Each card has two parameters: its cost $ c_i $ and damage $ d_i $ . You may play some of your cards during each turn in some sequence (you choose the cards and the exact order they are played), as long as the total cost of the cards you play during the turn does not exceed $ 3 $ . After playing some (possibly zero) cards, you end your turn, and all cards you didn't play are discarded. Note that you can use each card at most once.
Your character has also found an artifact that boosts the damage of some of your actions: every $ 10 $ -th card you play deals double damage.
What is the maximum possible damage you can deal during $ n $ turns?</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains one integer $ n $ ( $ 1 \le n \le 2 \cdot 10^5 $ ) — the number of turns.
Then $ n $ blocks of input follow, the $ i $ -th block representing the cards you get during the $ i $ -th turn.
Each block begins with a line containing one integer $ k_i $ ( $ 1 \le k_i \le 2 \cdot 10^5 $ ) — the number of cards you get during $ i $ -th turn. Then $ k_i $ lines follow, each containing two integers $ c_j $ and $ d_j $ ( $ 1 \le c_j \le 3 $ , $ 1 \le d_j \le 10^9 $ ) — the parameters of the corresponding card.
It is guaranteed that $ \sum \limits_{i = 1}^{n} k_i \le 2 \cdot 10^5 $ .</div>
<h3>输出格式</h3>
<br />
<div>Print one integer — the maximum damage you may deal.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>
5
3
1 6
1 7
1 5
2
1 4
1 3
3
1 10
3 5
2 3
3
1 15
2 4
1 10
1
1 100
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>
263
</code></pre>
<h2>说明</h2>
<div>In the example test the best course of action is as follows:
During the first turn, play all three cards in any order and deal $ 18 $ damage.
During the second turn, play both cards and deal $ 7 $ damage.
During the third turn, play the first and the third card and deal $ 13 $ damage.
During the fourth turn, play the first and the third card and deal $ 25 $ damage.
During the fifth turn, play the only card, which will deal double damage ( $ 200 $ ).</div>
</article>
</div>
</div>
</body>
</html>
