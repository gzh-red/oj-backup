<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Median Smoothing - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395739:rz6zAoIYupFyAWGmSQvytBND/MLeHagtvQjFeO/2Ovc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22A%20schoolboy%20named%20Vasya%20loves%20reading%20books%20on%20programming%20and%20mathematics.%20He%20has%20recently%20read%20an%20encyclopedia%20article%20that%20described%20the%20method%20of%20median%20smoothing%20%28or%20median%20filter%29%20and%20its%20many%20applications%20in%20science%20and%20engineering.%20Vasya%20liked%20the%20idea%20of%20the%20method%20very%20much%2C%20and%20he%20decided%20to%20try%20it%20in%20practice.%5Cn%5CnApplying%20the%20simplest%20variant%20of%20median%20smoothing%20to%20the%20sequence%20of%20numbers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%20%24%20will%20result%20a%20new%20sequence%20%24%20b_%7B1%7D%2Cb_%7B2%7D%2C...%2Cb_%7Bn%7D%20%24%20obtained%20by%20the%20following%20algorithm%3A%5Cn%5Cn-%20%24%20b_%7B1%7D%3Da_%7B1%7D%20%24%20%2C%20%24%20b_%7Bn%7D%3Da_%7Bn%7D%20%24%20%2C%20that%20is%2C%20the%20first%20and%20the%20last%20number%20of%20the%20new%20sequence%20match%20the%20corresponding%20numbers%20of%20the%20original%20sequence.%5Cn-%20For%20%24%20i%3D2%2C...%2Cn-1%20%24%20value%20%24%20b_%7Bi%7D%20%24%20is%20equal%20to%20the%20median%20of%20three%20values%20%24%20a_%7Bi-1%7D%20%24%20%2C%20%24%20a_%7Bi%7D%20%24%20and%20%24%20a_%7Bi%2B1%7D%20%24%20.%5Cn%5CnThe%20median%20of%20a%20set%20of%20three%20numbers%20is%20the%20number%20that%20goes%20on%20the%20second%20place%2C%20when%20these%20three%20numbers%20are%20written%20in%20the%20non-decreasing%20order.%20For%20example%2C%20the%20median%20of%20the%20set%205%2C%201%2C%202%20is%20number%202%2C%20and%20the%20median%20of%20set%201%2C%200%2C%201%20is%20equal%20to%201.%5Cn%5CnIn%20order%20to%20make%20the%20task%20easier%2C%20Vasya%20decided%20to%20apply%20the%20method%20to%20sequences%20consisting%20of%20zeros%20and%20ones%20only.%5Cn%5CnHaving%20made%20the%20procedure%20once%2C%20Vasya%20looked%20at%20the%20resulting%20sequence%20and%20thought%3A%20what%20if%20I%20apply%20the%20algorithm%20to%20it%20once%20again%2C%20and%20then%20apply%20it%20to%20the%20next%20result%2C%20and%20so%20on%3F%20Vasya%20tried%20a%20couple%20of%20examples%20and%20found%20out%20that%20after%20some%20number%20of%20median%20smoothing%20algorithm%20applications%20the%20sequence%20can%20stop%20changing.%20We%20say%20that%20the%20sequence%20is%20stable%2C%20if%20it%20does%20not%20change%20when%20the%20median%20smoothing%20is%20applied%20to%20it.%5Cn%5CnNow%20Vasya%20wonders%2C%20whether%20the%20sequence%20always%20eventually%20becomes%20stable.%20He%20asks%20you%20to%20write%20a%20program%20that%2C%20given%20a%20sequence%20of%20zeros%20and%20ones%2C%20will%20determine%20whether%20it%20ever%20becomes%20stable.%20Moreover%2C%20if%20it%20ever%20becomes%20stable%2C%20then%20you%20should%20determine%20what%20will%20it%20look%20like%20and%20how%20many%20times%20one%20needs%20to%20apply%20the%20median%20smoothing%20algorithm%20to%20initial%20sequence%20in%20order%20to%20obtain%20a%20stable%20one.%22%2C%22inputFormat%22%3A%22The%20first%20input%20line%20of%20the%20input%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%203%3C%3Dn%3C%3D500000%20%24%20%29%20%5Cu2014%20the%20length%20of%20the%20initial%20sequence.%5Cn%5CnThe%20next%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%20%24%20%28%20%24%20a_%7Bi%7D%3D0%20%24%20or%20%24%20a_%7Bi%7D%3D1%20%24%20%29%2C%20giving%20the%20initial%20sequence%20itself.%22%2C%22outputFormat%22%3A%22If%20the%20sequence%20will%20never%20become%20stable%2C%20print%20a%20single%20number%20%24%20-1%20%24%20.%5Cn%5CnOtherwise%2C%20first%20print%20a%20single%20integer%20%5Cu2014%20the%20minimum%20number%20of%20times%20one%20needs%20to%20apply%20the%20median%20smoothing%20algorithm%20to%20the%20initial%20sequence%20before%20it%20becomes%20is%20stable.%20In%20the%20second%20line%20print%20%24%20n%20%24%20numbers%20separated%20by%20a%20space%20%5Cu2014%20the%20resulting%20sequence%20itself.%22%2C%22samples%22%3A%5B%5B%224%5Cn0%200%201%201%5Cn%22%2C%220%5Cn0%200%201%201%5Cn%22%5D%2C%5B%225%5Cn0%201%200%201%200%5Cn%22%2C%222%5Cn0%200%200%200%200%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20second%20sample%20the%20stabilization%20occurs%20in%20two%20steps%3A%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF590A%5C%2F5bd3f3d0dd3c1c3678cb51eb45fc423ee7c29674.png%29%2C%20and%20the%20sequence%20%24%2000000%20%24%20is%20obviously%20stable.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F590%5C%2FA%22%2C%22id%22%3A%22590A%22%7D%2C%22translation%22%3A%22%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cr%5Cn%5Cu6700%5Cu7b80%5Cu5355%5Cu7684%5Cu4e2d%5Cu503c%5Cu6ee4%5Cu6ce2%5Cu662f%5Cu5bf9%5Cu4e00%5Cu4e2a%5Cu5e8f%5Cu5217%20%24a_1%2Ca_2%2C%5Cu2026%2Ca_n%24%20%5Cuff0c%5Cu8f6c%5Cu6362%5Cu4e3a%5Cu4e00%5Cu4e2a%5Cu65b0%5Cu7684%5Cu5e8f%5Cu5217%20%24b_1%2Cb_2%2C%5Cu2026%2Cb_n%24%20%5Cuff0c%5Cu89c4%5Cu5219%5Cu5982%5Cu4e0b%5Cuff1a%5Cr%5Cn%5Cr%5Cn-%20%24b_1%3Da_1%2Cb_n%3Da_n%24%20%5Cuff0c%5Cu5373%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu548c%5Cu6700%5Cu540e%5Cu4e00%5Cu4e2a%5Cu5143%5Cu7d20%5Cu4e0d%5Cu53d8%5Cu3002%5Cr%5Cn-%20%24b_i%281%3Ci%3Cn%29%24%20%5Cu4e3a%20%24a_%7Bi-1%7D%2Ca_i%2Ca_%7Bi%2B1%7D%24%20%5Cu7684%5Cu4e2d%5Cu4f4d%5Cu6570%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu6c42%5Cu5bf9%5Cu4e8e%5Cu4e00%5Cu4e2a%5Cu5e8f%5Cu5217%20%24a%24%20%5Cuff0c%5Cu5b83%5Cu7ecf%5Cu8fc7%5Cu51e0%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu4f1a%5Cu53d8%5Cu6210%5Cu201c%5Cu7a33%5Cu5b9a%5Cu7684%5Cu201d%5Cuff0c%5Cu6216%5Cu8005%5Cu6c38%5Cu8fdc%5Cu7a33%5Cu5b9a%5Cu4e0d%5Cu4e86%5Cu3002%5Cr%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%20%24n%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu5e8f%5Cu5217%5Cu7684%5Cu957f%5Cu5ea6%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%5Cu4e00%5Cu884c%20%24n%24%20%5Cu4e2a%5Cu6574%5Cu6570%20%24a_1%2Ca_2%2C%5Cu2026%2Ca_n%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu539f%5Cu5e8f%5Cu5217%5Cu3002%5Cr%5Cn%23%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu5047%5Cu5982%5Cu8be5%5Cu5e8f%5Cu5217%5Cu6c38%5Cu8fdc%5Cu4e5f%5Cu4e0d%5Cu4f1a%5Cu7a33%5Cu5b9a%5Cuff0c%5Cu5219%5Cu8f93%5Cu51fa%20%24-1%24%20%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5426%5Cu5219%5Cu8f93%5Cu51fa%5Cuff0c%5Cu4e00%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu8868%5Cu793a%5Cu9700%5Cu8981%5Cu591a%5Cu5c11%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu539f%5Cu5e8f%5Cu5217%5Cu624d%5Cu4f1a%5Cu7a33%5Cu5b9a%5Cuff0c%5Cu5e76%5Cu5728%5Cu4e0b%5Cu4e00%5Cu884c%5Cu8f93%5Cu51fa%5Cu6700%5Cu7ec8%5Cu7a33%5Cu5b9a%5Cu7684%5Cu5e8f%5Cu5217%5Cu3002%5Cr%5Cn%23%23%20%5Cu8bf4%5Cu660e%5Cr%5Cn%23%23%23%20%5Cu6837%5Cu4f8b%5Cu89e3%5Cu91ca%5Cr%5Cn%5Cu7ecf%5Cu8fc7%5Cu4e24%5Cu6b21%5Cu64cd%5Cu4f5c%5Cuff1a%2401010%5C%5Clongrightarrow00100%5C%5Clongrightarrow00000%24%20%5Cuff0c%2400000%24%20%5Cu663e%5Cu7136%5Cu662f%5Cu7a33%5Cu5b9a%5Cu7684%5Cu5e8f%5Cu5217%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%20%2425%24%25%20%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24n%3C%3D10%24%20%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%20%2450%24%25%20%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24n%3C%3D1000%24%20%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%20%2425%24%25%20%5Cu7684%5Cu6570%5Cu636e%5Cuff0c%24n%3C%3D500000%24%20%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A65%2C%22totalAccepted%22%3A28%2C%22pid%22%3A%22CF590A%22%2C%22title%22%3A%22Median%20Smoothing%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2602%22%2C%22title%22%3A%22%5BZJOI2010%5D%5Cu6570%5Cu5b57%5Cu8ba1%5Cu6570%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF196A%22%2C%22title%22%3A%22Lexicographically%20Maximum%20Subsequence%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF75B%22%2C%22title%22%3A%22Facetook%20Priority%20Wall%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22P4430%22%2C%22title%22%3A%22%5Cu5c0f%5Cu7334%5Cu6253%5Cu67b6%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4900%22%2C%22title%22%3A%22%5Cu98df%5Cu5802%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Median%20Smoothing%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Median Smoothing</h1>
<h2>题意翻译</h2>
<div># 题目描述
最简单的中值滤波是对一个序列 $a_1,a_2,…,a_n$ ，转换为一个新的序列 $b_1,b_2,…,b_n$ ，规则如下：
- $b_1=a_1,b_n=a_n$ ，即第一个和最后一个元素不变。
- $b_i(1<i<n)$ 为 $a_{i-1},a_i,a_{i+1}$ 的中位数。 求对于一个序列 $a$ ，它经过几次操作会变成“稳定的”，或者永远稳定不了。 ## 输入格式 第一行一个整数 $n$ ，表示序列的长度。 接下来一行 $n$ 个整数 $a_1,a_2,…,a_n$ ，表示原序列。 ## 输出格式 假如该序列永远也不会稳定，则输出 $-1$ 。 否则输出，一行一个整数，表示需要多少次操作原序列才会稳定，并在下一行输出最终稳定的序列。 ## 说明 ### 样例解释 经过两次操作：$01010\longrightarrow00100\longrightarrow00000$ ，$00000$ 显然是稳定的序列。 对于 $25$% 的数据，$n<=10$ 。 对于 $50$% 的数据，$n<=1000$ 。 对于 $25$% 的数据，$n<=500000$ 。</div>
<h2>题目描述</h2>
<div>A schoolboy named Vasya loves reading books on programming and mathematics. He has recently read an encyclopedia article that described the method of median smoothing (or median filter) and its many applications in science and engineering. Vasya liked the idea of the method very much, and he decided to try it in practice.
Applying the simplest variant of median smoothing to the sequence of numbers $ a_{1},a_{2},...,a_{n} $ will result a new sequence $ b_{1},b_{2},...,b_{n} $ obtained by the following algorithm:
- $ b_{1}=a_{1} $ , $ b_{n}=a_{n} $ , that is, the first and the last number of the new sequence match the corresponding numbers of the original sequence.
- For $ i=2,...,n-1 $ value $ b_{i} $ is equal to the median of three values $ a_{i-1} $ , $ a_{i} $ and $ a_{i+1} $ .
The median of a set of three numbers is the number that goes on the second place, when these three numbers are written in the non-decreasing order. For example, the median of the set 5, 1, 2 is number 2, and the median of set 1, 0, 1 is equal to 1.
In order to make the task easier, Vasya decided to apply the method to sequences consisting of zeros and ones only.
Having made the procedure once, Vasya looked at the resulting sequence and thought: what if I apply the algorithm to it once again, and then apply it to the next result, and so on? Vasya tried a couple of examples and found out that after some number of median smoothing algorithm applications the sequence can stop changing. We say that the sequence is stable, if it does not change when the median smoothing is applied to it.
Now Vasya wonders, whether the sequence always eventually becomes stable. He asks you to write a program that, given a sequence of zeros and ones, will determine whether it ever becomes stable. Moreover, if it ever becomes stable, then you should determine what will it look like and how many times one needs to apply the median smoothing algorithm to initial sequence in order to obtain a stable one.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first input line of the input contains a single integer $ n $ ( $ 3<=n<=500000 $ ) — the length of the initial sequence.
The next line contains $ n $ integers $ a_{1},a_{2},...,a_{n} $ ( $ a_{i}=0 $ or $ a_{i}=1 $ ), giving the initial sequence itself.</div>
<h3>输出格式</h3>
<br />
<div>If the sequence will never become stable, print a single number $ -1 $ .
Otherwise, first print a single integer — the minimum number of times one needs to apply the median smoothing algorithm to the initial sequence before it becomes is stable. In the second line print $ n $ numbers separated by a space — the resulting sequence itself.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
0 0 1 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>0
0 0 1 1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5
0 1 0 1 0
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>2
0 0 0 0 0
</code></pre>
<h2>说明</h2>
<div>In the second sample the stabilization occurs in two steps: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF590A/5bd3f3d0dd3c1c3678cb51eb45fc423ee7c29674.png), and the sequence $ 00000 $ is obviously stable.</div>
</article>
</div>
</div>
</body>
</html>
