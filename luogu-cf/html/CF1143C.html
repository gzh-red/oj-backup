<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Queen - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573402169:iQ7mqKIsvfrjm0iMGHHhCChzzIdljQwHSyik5QabDRc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22You%20are%20given%20a%20rooted%20tree%20with%20vertices%20numerated%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20A%20tree%20is%20a%20connected%20graph%20without%20cycles.%20A%20rooted%20tree%20has%20a%20special%20vertex%20named%20root.%5Cn%5CnAncestors%20of%20the%20vertex%20%24%20i%20%24%20are%20all%20vertices%20on%20the%20path%20from%20the%20root%20to%20the%20vertex%20%24%20i%20%24%20%2C%20except%20the%20vertex%20%24%20i%20%24%20itself.%20The%20parent%20of%20the%20vertex%20%24%20i%20%24%20is%20the%20nearest%20to%20the%20vertex%20%24%20i%20%24%20ancestor%20of%20%24%20i%20%24%20.%20Each%20vertex%20is%20a%20child%20of%20its%20parent.%20In%20the%20given%20tree%20the%20parent%20of%20the%20vertex%20%24%20i%20%24%20is%20the%20vertex%20%24%20p_i%20%24%20.%20For%20the%20root%2C%20the%20value%20%24%20p_i%20%24%20is%20%24%20-1%20%24%20.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1143C%5C%2F767631fbfbd5e834691c335a1beebc4c83722771.png%29An%20example%20of%20a%20tree%20with%20%24%20n%3D8%20%24%20%2C%20the%20root%20is%20vertex%20%24%205%20%24%20.%20The%20parent%20of%20the%20vertex%20%24%202%20%24%20is%20vertex%20%24%203%20%24%20%2C%20the%20parent%20of%20the%20vertex%20%24%201%20%24%20is%20vertex%20%24%205%20%24%20.%20The%20ancestors%20of%20the%20vertex%20%24%206%20%24%20are%20vertices%20%24%204%20%24%20and%20%24%205%20%24%20%2C%20the%20ancestors%20of%20the%20vertex%20%24%207%20%24%20are%20vertices%20%24%208%20%24%20%2C%20%24%203%20%24%20and%20%24%205%20%24%20You%20noticed%20that%20some%20vertices%20do%20not%20respect%20others.%20In%20particular%2C%20if%20%24%20c_i%20%3D%201%20%24%20%2C%20then%20the%20vertex%20%24%20i%20%24%20does%20not%20respect%20any%20of%20its%20ancestors%2C%20and%20if%20%24%20c_i%20%3D%200%20%24%20%2C%20it%20respects%20all%20of%20them.%5Cn%5CnYou%20decided%20to%20delete%20vertices%20from%20the%20tree%20one%20by%20one.%20On%20each%20step%20you%20select%20such%20a%20non-root%20vertex%20that%20it%20does%20not%20respect%20its%20parent%20and%20none%20of%20its%20children%20respects%20it.%20If%20there%20are%20several%20such%20vertices%2C%20you%20select%20the%20one%20with%20the%20smallest%20number.%20When%20you%20delete%20this%20vertex%20%24%20v%20%24%20%2C%20all%20children%20of%20%24%20v%20%24%20become%20connected%20with%20the%20parent%20of%20%24%20v%20%24%20.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1143C%5C%2Ffa2af41e1e599c9e51ca9e3edafbee94d578e807.png%29An%20example%20of%20deletion%20of%20the%20vertex%20%24%207%20%24%20.Once%20there%20are%20no%20vertices%20matching%20the%20criteria%20for%20deletion%2C%20you%20stop%20the%20process.%20Print%20the%20order%20in%20which%20you%20will%20delete%20the%20vertices.%20Note%20that%20this%20order%20is%20unique.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%201%20%5C%5Cle%20n%20%5C%5Cle%2010%5E5%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertices%20in%20the%20tree.%5Cn%5CnThe%20next%20%24%20n%20%24%20lines%20describe%20the%20tree%3A%20the%20%24%20i%20%24%20-th%20line%20contains%20two%20integers%20%24%20p_i%20%24%20and%20%24%20c_i%20%24%20%28%20%24%201%20%5C%5Cle%20p_i%20%5C%5Cle%20n%20%24%20%2C%20%24%200%20%5C%5Cle%20c_i%20%5C%5Cle%201%20%24%20%29%2C%20where%20%24%20p_i%20%24%20is%20the%20parent%20of%20the%20vertex%20%24%20i%20%24%20%2C%20and%20%24%20c_i%20%3D%200%20%24%20%2C%20if%20the%20vertex%20%24%20i%20%24%20respects%20its%20parents%2C%20and%20%24%20c_i%20%3D%201%20%24%20%2C%20if%20the%20vertex%20%24%20i%20%24%20does%20not%20respect%20any%20of%20its%20parents.%20The%20root%20of%20the%20tree%20has%20%24%20-1%20%24%20instead%20of%20the%20parent%20index%2C%20also%2C%20%24%20c_i%3D0%20%24%20for%20the%20root.%20It%20is%20guaranteed%20that%20the%20values%20%24%20p_i%20%24%20define%20a%20rooted%20tree%20with%20%24%20n%20%24%20vertices.%22%2C%22outputFormat%22%3A%22In%20case%20there%20is%20at%20least%20one%20vertex%20to%20delete%2C%20print%20the%20only%20line%20containing%20the%20indices%20of%20the%20vertices%20you%20will%20delete%20in%20the%20order%20you%20delete%20them.%20Otherwise%20print%20a%20single%20integer%20%24%20-1%20%24%20.%22%2C%22samples%22%3A%5B%5B%22%5Cn5%5Cn3%201%5Cn1%201%5Cn-1%200%5Cn2%201%5Cn3%200%5Cn%22%2C%22%5Cn1%202%204%20%5Cn%22%5D%2C%5B%22%5Cn5%5Cn-1%200%5Cn1%201%5Cn1%201%5Cn2%200%5Cn3%200%5Cn%22%2C%22%5Cn-1%5Cn%22%5D%2C%5B%22%5Cn8%5Cn2%201%5Cn-1%200%5Cn1%200%5Cn1%201%5Cn1%201%5Cn4%200%5Cn5%201%5Cn7%200%5Cn%22%2C%22%5Cn5%20%5Cn%22%5D%5D%2C%22hint%22%3A%22The%20deletion%20process%20in%20the%20first%20example%20is%20as%20follows%20%28see%20the%20picture%20below%2C%20the%20vertices%20with%20%24%20c_i%3D1%20%24%20are%20in%20yellow%29%3A%5Cn%5Cn-%20first%20you%20will%20delete%20the%20vertex%20%24%201%20%24%20%2C%20because%20it%20does%20not%20respect%20ancestors%20and%20all%20its%20children%20%28the%20vertex%20%24%202%20%24%20%29%20do%20not%20respect%20it%2C%20and%20%24%201%20%24%20is%20the%20smallest%20index%20among%20such%20vertices%3B%5Cn-%20the%20vertex%20%24%202%20%24%20will%20be%20connected%20with%20the%20vertex%20%24%203%20%24%20after%20deletion%3B%5Cn-%20then%20you%20will%20delete%20the%20vertex%20%24%202%20%24%20%2C%20because%20it%20does%20not%20respect%20ancestors%20and%20all%20its%20children%20%28the%20only%20vertex%20%24%204%20%24%20%29%20do%20not%20respect%20it%3B%5Cn-%20the%20vertex%20%24%204%20%24%20will%20be%20connected%20with%20the%20vertex%20%24%203%20%24%20%3B%5Cn-%20then%20you%20will%20delete%20the%20vertex%20%24%204%20%24%20%2C%20because%20it%20does%20not%20respect%20ancestors%20and%20all%20its%20children%20%28there%20are%20none%29%20do%20not%20respect%20it%20%28%5Bvacuous%20truth%5D%28https%3A%5C%2F%5C%2Fen.wikipedia.org%5C%2Fwiki%5C%2FVacuous_truth%29%29%3B%5Cn-%20you%20will%20just%20delete%20the%20vertex%20%24%204%20%24%20%3B%5Cn-%20there%20are%20no%20more%20vertices%20to%20delete.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1143C%5C%2Febd0eb4e79b93258618d042cf4204608334ae632.png%29In%20the%20second%20example%20you%20don%27t%20need%20to%20delete%20any%20vertex%3A%5Cn%5Cn-%20vertices%20%24%202%20%24%20and%20%24%203%20%24%20have%20children%20that%20respect%20them%3B%5Cn-%20vertices%20%24%204%20%24%20and%20%24%205%20%24%20respect%20ancestors.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1143C%5C%2F301d90419aa6803a28893c2a81f56219871e0793.png%29In%20the%20third%20example%20the%20tree%20will%20change%20this%20way%3A%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1143C%5C%2F7676abdd5b6383c016cad416ee32ca622873b718.png%29%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1143%5C%2FC%22%2C%22id%22%3A%221143C%22%7D%2C%22translation%22%3A%22%5Cu6709n%5Cu4e2a%5Cu8282%5Cu70b9%5Cuff0c%5Cu8f93%5Cu5165n%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6570%5Cu5b57a%2Cb%5Cuff0c%5Cu8868%5Cu793aa%5Cu662fi%5Cu7684%5Cu7236%5Cu8282%5Cu70b9%5Cuff0c%5Cu82e5b%5Cu4e3a1%5Cu5219%5Cu6b64%5Cu8282%5Cu70b9%5Cu4e0d%5Cu5c0a%5Cu91cd%5Cu7236%5Cu8282%5Cu70b9%5Cuff0cb%5Cu4e3a%5Cu5219%5Cu5c0a%5Cu91cd%5Cu7236%5Cu8282%5Cu70b9%5Cuff0c%5Cu4ece%5Cu5c0f%5Cu5230%5Cu5927%5Cu8f93%5Cu51fa%5Cu4e0d%5Cu5c0a%5Cu91cd%5Cu7236%5Cu8282%5Cu70b9%5Cu4e14%5Cu5b50%5Cu8282%5Cu70b9%5Cu90fd%5Cu4e0d%5Cu5c0a%5Cu91cd%5Cu5b83%5Cu7684%5Cu8282%5Cu70b9%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A39%2C%22totalAccepted%22%3A26%2C%22pid%22%3A%22CF1143C%22%2C%22title%22%3A%22Queen%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Queen%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Queen</h1>
<h2>题意翻译</h2>
<div>有n个节点，输入n行，每行两个数字a,b，表示a是i的父节点，若b为1则此节点不尊重父节点，b为则尊重父节点，从小到大输出不尊重父节点且子节点都不尊重它的节点。</div>
<h2>题目描述</h2>
<div>You are given a rooted tree with vertices numerated from $ 1 $ to $ n $ . A tree is a connected graph without cycles. A rooted tree has a special vertex named root.
Ancestors of the vertex $ i $ are all vertices on the path from the root to the vertex $ i $ , except the vertex $ i $ itself. The parent of the vertex $ i $ is the nearest to the vertex $ i $ ancestor of $ i $ . Each vertex is a child of its parent. In the given tree the parent of the vertex $ i $ is the vertex $ p_i $ . For the root, the value $ p_i $ is $ -1 $ .
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1143C/767631fbfbd5e834691c335a1beebc4c83722771.png)An example of a tree with $ n=8 $ , the root is vertex $ 5 $ . The parent of the vertex $ 2 $ is vertex $ 3 $ , the parent of the vertex $ 1 $ is vertex $ 5 $ . The ancestors of the vertex $ 6 $ are vertices $ 4 $ and $ 5 $ , the ancestors of the vertex $ 7 $ are vertices $ 8 $ , $ 3 $ and $ 5 $ You noticed that some vertices do not respect others. In particular, if $ c_i = 1 $ , then the vertex $ i $ does not respect any of its ancestors, and if $ c_i = 0 $ , it respects all of them.
You decided to delete vertices from the tree one by one. On each step you select such a non-root vertex that it does not respect its parent and none of its children respects it. If there are several such vertices, you select the one with the smallest number. When you delete this vertex $ v $ , all children of $ v $ become connected with the parent of $ v $ .
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1143C/fa2af41e1e599c9e51ca9e3edafbee94d578e807.png)An example of deletion of the vertex $ 7 $ .Once there are no vertices matching the criteria for deletion, you stop the process. Print the order in which you will delete the vertices. Note that this order is unique.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains a single integer $ n $ ( $ 1 \le n \le 10^5 $ ) — the number of vertices in the tree.
The next $ n $ lines describe the tree: the $ i $ -th line contains two integers $ p_i $ and $ c_i $ ( $ 1 \le p_i \le n $ , $ 0 \le c_i \le 1 $ ), where $ p_i $ is the parent of the vertex $ i $ , and $ c_i = 0 $ , if the vertex $ i $ respects its parents, and $ c_i = 1 $ , if the vertex $ i $ does not respect any of its parents. The root of the tree has $ -1 $ instead of the parent index, also, $ c_i=0 $ for the root. It is guaranteed that the values $ p_i $ define a rooted tree with $ n $ vertices.</div>
<h3>输出格式</h3>
<br />
<div>In case there is at least one vertex to delete, print the only line containing the indices of the vertices you will delete in the order you delete them. Otherwise print a single integer $ -1 $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>
5
3 1
1 1
-1 0
2 1
3 0
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>
1 2 4 
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>
5
-1 0
1 1
1 1
2 0
3 0
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>
-1
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>
8
2 1
-1 0
1 0
1 1
1 1
4 0
5 1
7 0
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>
5 
</code></pre>
<h2>说明</h2>
<div>The deletion process in the first example is as follows (see the picture below, the vertices with $ c_i=1 $ are in yellow):
- first you will delete the vertex $ 1 $ , because it does not respect ancestors and all its children (the vertex $ 2 $ ) do not respect it, and $ 1 $ is the smallest index among such vertices;
- the vertex $ 2 $ will be connected with the vertex $ 3 $ after deletion;
- then you will delete the vertex $ 2 $ , because it does not respect ancestors and all its children (the only vertex $ 4 $ ) do not respect it;
- the vertex $ 4 $ will be connected with the vertex $ 3 $ ;
- then you will delete the vertex $ 4 $ , because it does not respect ancestors and all its children (there are none) do not respect it ([vacuous truth](https://en.wikipedia.org/wiki/Vacuous_truth));
- you will just delete the vertex $ 4 $ ;
- there are no more vertices to delete.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1143C/ebd0eb4e79b93258618d042cf4204608334ae632.png)In the second example you don't need to delete any vertex:
- vertices $ 2 $ and $ 3 $ have children that respect them;
- vertices $ 4 $ and $ 5 $ respect ancestors.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1143C/301d90419aa6803a28893c2a81f56219871e0793.png)In the third example the tree will change this way:
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1143C/7676abdd5b6383c016cad416ee32ca622873b718.png)</div>
</article>
</div>
</div>
</body>
</html>
