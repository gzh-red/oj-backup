<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Wizard&#039;s Tour - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573398749:ZVLymQamgleK7xUZKM0m3UkvBDFx6EnAbM/PSD2FD+o=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22All%20Berland%20residents%20are%20waiting%20for%20an%20unprecedented%20tour%20of%20wizard%20in%20his%20Blue%20Helicopter%20over%20the%20cities%20of%20Berland%21%5Cn%5CnIt%20is%20well-known%20that%20there%20are%20%24%20n%20%24%20cities%20in%20Berland%2C%20some%20pairs%20of%20which%20are%20connected%20by%20bidirectional%20roads.%20Each%20pair%20of%20cities%20is%20connected%20by%20no%20more%20than%20one%20road.%20It%20is%20not%20guaranteed%20that%20the%20road%20network%20is%20connected%2C%20i.e.%20it%20is%20possible%20that%20you%20can%27t%20reach%20some%20city%20from%20some%20other.%5Cn%5CnThe%20tour%20will%20contain%20several%20episodes.%20In%20each%20of%20the%20episodes%3A%5Cn%5Cn-%20the%20wizard%20will%20disembark%20at%20some%20city%20%24%20x%20%24%20from%20the%20Helicopter%3B%5Cn-%20he%20will%20give%20a%20performance%20and%20show%20a%20movie%20for%20free%20at%20the%20city%20%24%20x%20%24%20%3B%5Cn-%20he%20will%20drive%20to%20some%20neighboring%20city%20%24%20y%20%24%20using%20a%20road%3B%5Cn-%20he%20will%20give%20a%20performance%20and%20show%20a%20movie%20for%20free%20at%20the%20city%20%24%20y%20%24%20%3B%5Cn-%20he%20will%20drive%20to%20some%20neighboring%20to%20%24%20y%20%24%20city%20%24%20z%20%24%20%3B%5Cn-%20he%20will%20give%20a%20performance%20and%20show%20a%20movie%20for%20free%20at%20the%20city%20%24%20z%20%24%20%3B%5Cn-%20he%20will%20embark%20the%20Helicopter%20and%20fly%20away%20from%20the%20city%20%24%20z%20%24%20.%5Cn%5CnIt%20is%20known%20that%20the%20wizard%20doesn%27t%20like%20to%20use%20roads%2C%20so%20he%20agrees%20to%20use%20each%20road%20at%20most%20once%20%28regardless%20of%20direction%29.%20In%20other%20words%2C%20for%20road%20between%20%24%20a%20%24%20and%20%24%20b%20%24%20he%20only%20can%20drive%20once%20from%20%24%20a%20%24%20to%20%24%20b%20%24%20%2C%20or%20drive%20once%20from%20%24%20b%20%24%20to%20%24%20a%20%24%20%2C%20or%20do%20not%20use%20this%20road%20at%20all.%5Cn%5CnThe%20wizards%20wants%20to%20plan%20as%20many%20episodes%20as%20possible%20without%20violation%20the%20above%20rules.%20Help%20the%20wizard%21%5Cn%5CnPlease%20note%20that%20the%20wizard%20can%20visit%20the%20same%20city%20multiple%20times%2C%20the%20restriction%20is%20on%20roads%20only.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20%2C%20%24%20m%20%24%20%28%20%24%201%3C%3Dn%3C%3D2%5Cu00b710%5E%7B5%7D%20%24%20%2C%20%24%200%3C%3Dm%3C%3D2%5Cu00b710%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20cities%20and%20the%20number%20of%20roads%20in%20Berland%2C%20respectively.%5Cn%5CnThe%20roads%20description%20follow%2C%20one%20in%20each%20line.%20Each%20description%20is%20a%20pair%20of%20two%20integers%20%24%20a_%7Bi%7D%2Cb_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%2Cb_%7Bi%7D%3C%3Dn%20%24%20%2C%20%24%20a_%7Bi%7D%5Cu2260b_%7Bi%7D%20%24%20%29%2C%20where%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20are%20the%20ids%20of%20the%20cities%20connected%20by%20the%20%24%20i%20%24%20-th%20road.%20It%20is%20guaranteed%20that%20there%20are%20no%20two%20roads%20connecting%20the%20same%20pair%20of%20cities.%20Every%20road%20is%20bidirectional.%20The%20cities%20are%20numbered%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%5Cn%5CnIt%20is%20possible%20that%20the%20road%20network%20in%20Berland%20is%20not%20connected.%22%2C%22outputFormat%22%3A%22In%20the%20first%20line%20print%20%24%20w%20%24%20%5Cu2014%20the%20maximum%20possible%20number%20of%20episodes.%20The%20next%20%24%20w%20%24%20lines%20should%20contain%20the%20episodes%20in%20format%20%24%20x%20%24%20%2C%20%24%20y%20%24%20%2C%20%24%20z%20%24%20%5Cu2014%20the%20three%20integers%20denoting%20the%20ids%20of%20the%20cities%20in%20the%20order%20of%20the%20wizard%27s%20visits.%22%2C%22samples%22%3A%5B%5B%224%205%5Cn1%202%5Cn3%202%5Cn2%204%5Cn3%204%5Cn4%201%5Cn%22%2C%222%5Cn1%204%202%5Cn4%203%202%5Cn%22%5D%2C%5B%225%208%5Cn5%203%5Cn1%202%5Cn4%205%5Cn5%201%5Cn2%205%5Cn4%203%5Cn1%204%5Cn3%202%5Cn%22%2C%224%5Cn1%204%205%5Cn2%203%204%5Cn1%205%203%5Cn5%202%201%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F858%5C%2FF%22%2C%22id%22%3A%22858F%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu5b9a%5Cu4e00%5Cu5f20%20%24n%24%20%5Cu4e2a%5Cu70b9%20%24m%24%20%5Cu6761%5Cu8fb9%5Cu7684%5Cu65e0%5Cu5411%5Cu56fe%5Cuff0c%5Cu6bcf%5Cu6761%5Cu8fb9%5Cu8fde%5Cu63a5%5Cu4e24%5Cu4e2a%5Cu9876%5Cu70b9%5Cuff0c%5Cu4fdd%5Cu8bc1%5Cu65e0%5Cu91cd%5Cu8fb9%5Cu81ea%5Cu73af%5Cuff0c%5Cu4e0d%5Cu4fdd%5Cu8bc1%5Cu8fde%5Cu901a%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4f60%5Cu60f3%5Cu5728%5Cu8fd9%5Cu5f20%5Cu56fe%5Cu4e0a%5Cu8fdb%5Cu884c%5Cu82e5%5Cu5e72%5Cu6b21%5Cu65c5%5Cu6e38%5Cuff0c%5Cu6bcf%5Cu6b21%5Cu65c5%5Cu6e38%5Cu53ef%5Cu4ee5%5Cu4efb%5Cu9009%5Cu4e00%5Cu4e2a%5Cu70b9%20%24x%24%20%5Cu4f5c%5Cu4e3a%5Cu8d77%5Cu70b9%5Cuff0c%5Cu518d%5Cu8d70%5Cu5230%5Cu4e00%5Cu4e2a%5Cu4e0e%20%24x%24%20%5Cu76f4%5Cu63a5%5Cu6709%5Cu8fb9%5Cu76f8%5Cu8fde%5Cu7684%5Cu70b9%20%24y%24%5Cuff0c%5Cu518d%5Cu8d70%5Cu5230%5Cu4e00%5Cu4e2a%5Cu4e0e%20%24y%24%20%5Cu76f4%5Cu63a5%5Cu6709%5Cu8fb9%5Cu76f8%5Cu8fde%5Cu7684%5Cu70b9%20%24z%24%20%5Cu5e76%5Cu7ed3%5Cu675f%5Cu672c%5Cu6b21%5Cu65c5%5Cu6e38%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4f5c%5Cu4e3a%5Cu4e00%5Cu4e2a%5Cu65c5%5Cu6e38%5Cu7231%5Cu597d%5Cu8005%5Cuff0c%5Cu4f60%5Cu4e0d%5Cu5e0c%5Cu671b%5Cu7ecf%5Cu8fc7%5Cu4efb%5Cu610f%5Cu4e00%5Cu6761%5Cu8fb9%5Cu8d85%5Cu8fc7%5Cu4e00%5Cu6b21%5Cuff0c%5Cu6ce8%5Cu610f%5Cu4e00%5Cu6761%5Cu8fb9%5Cu4e0d%5Cu80fd%5Cu5373%5Cu6b63%5Cu5411%5Cu8d70%5Cu4e00%5Cu6b21%5Cu53c8%5Cu53cd%5Cu5411%5Cu8d70%5Cu4e00%5Cu6b21%5Cuff0c%5Cu6ce8%5Cu610f%5Cu70b9%5Cu53ef%5Cu4ee5%5Cu7ecf%5Cu8fc7%5Cu591a%5Cu6b21%5Cuff0c%5Cu5728%5Cu6ee1%5Cu8db3%5Cu6b64%5Cu6761%5Cu4ef6%5Cu4e0b%5Cuff0c%5Cu4f60%5Cu5e0c%5Cu671b%5Cu8fdb%5Cu884c%5Cu5c3d%5Cu53ef%5Cu80fd%5Cu591a%5Cu6b21%5Cu7684%5Cu65c5%5Cu6e38%5Cuff0c%5Cu8bf7%5Cu8ba1%5Cu7b97%5Cu51fa%5Cu6700%5Cu591a%5Cu80fd%5Cu8fdb%5Cu884c%5Cu7684%5Cu65c5%5Cu6e38%5Cu6b21%5Cu6570%5Cu5e76%5Cu8f93%5Cu51fa%5Cu4efb%5Cu610f%5Cu4e00%5Cu79cd%5Cu65b9%5Cu6848%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A93%2C%22totalAccepted%22%3A45%2C%22pid%22%3A%22CF858F%22%2C%22title%22%3A%22Wizard%27s%20Tour%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3303%22%2C%22title%22%3A%22%5BSDOI2013%5D%5Cu6dd8%5Cu91d1%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22SP10264%22%2C%22title%22%3A%22METEORS%20-%20Meteors%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22SP%22%7D%2C%7B%22pid%22%3A%22AT1984%22%2C%22title%22%3A%22Wide%20Swap%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22AT%22%7D%2C%7B%22pid%22%3A%22P5021%22%2C%22title%22%3A%22%5Cu8d5b%5Cu9053%5Cu4fee%5Cu5efa%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF1207A%22%2C%22title%22%3A%22There%20Are%20Two%20Types%20Of%20Burgers%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Wizard%27s%20Tour%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Wizard&#039;s Tour</h1>
<h2>题意翻译</h2>
<div>给定一张 $n$ 个点 $m$ 条边的无向图，每条边连接两个顶点，保证无重边自环，不保证连通。
你想在这张图上进行若干次旅游，每次旅游可以任选一个点 $x$ 作为起点，再走到一个与 $x$ 直接有边相连的点 $y$，再走到一个与 $y$ 直接有边相连的点 $z$ 并结束本次旅游。
作为一个旅游爱好者，你不希望经过任意一条边超过一次，注意一条边不能即正向走一次又反向走一次，注意点可以经过多次，在满足此条件下，你希望进行尽可能多次的旅游，请计算出最多能进行的旅游次数并输出任意一种方案。</div>
<h2>题目描述</h2>
<div>All Berland residents are waiting for an unprecedented tour of wizard in his Blue Helicopter over the cities of Berland!
It is well-known that there are $ n $ cities in Berland, some pairs of which are connected by bidirectional roads. Each pair of cities is connected by no more than one road. It is not guaranteed that the road network is connected, i.e. it is possible that you can't reach some city from some other.
The tour will contain several episodes. In each of the episodes:
- the wizard will disembark at some city $ x $ from the Helicopter;
- he will give a performance and show a movie for free at the city $ x $ ;
- he will drive to some neighboring city $ y $ using a road;
- he will give a performance and show a movie for free at the city $ y $ ;
- he will drive to some neighboring to $ y $ city $ z $ ;
- he will give a performance and show a movie for free at the city $ z $ ;
- he will embark the Helicopter and fly away from the city $ z $ .
It is known that the wizard doesn't like to use roads, so he agrees to use each road at most once (regardless of direction). In other words, for road between $ a $ and $ b $ he only can drive once from $ a $ to $ b $ , or drive once from $ b $ to $ a $ , or do not use this road at all.
The wizards wants to plan as many episodes as possible without violation the above rules. Help the wizard!
Please note that the wizard can visit the same city multiple times, the restriction is on roads only.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ , $ m $ ( $ 1<=n<=2·10^{5} $ , $ 0<=m<=2·10^{5} $ ) — the number of cities and the number of roads in Berland, respectively.
The roads description follow, one in each line. Each description is a pair of two integers $ a_{i},b_{i} $ ( $ 1<=a_{i},b_{i}<=n $ , $ a_{i}≠b_{i} $ ), where $ a_{i} $ and $ b_{i} $ are the ids of the cities connected by the $ i $ -th road. It is guaranteed that there are no two roads connecting the same pair of cities. Every road is bidirectional. The cities are numbered from $ 1 $ to $ n $ .
It is possible that the road network in Berland is not connected.</div>
<h3>输出格式</h3>
<br />
<div>In the first line print $ w $ — the maximum possible number of episodes. The next $ w $ lines should contain the episodes in format $ x $ , $ y $ , $ z $ — the three integers denoting the ids of the cities in the order of the wizard's visits.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 5
1 2
3 2
2 4
3 4
4 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
1 4 2
4 3 2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5 8
5 3
1 2
4 5
5 1
2 5
4 3
1 4
3 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>4
1 4 5
2 3 4
1 5 3
5 2 1
</code></pre>
</article>
</div>
</div>
</body>
</html>
