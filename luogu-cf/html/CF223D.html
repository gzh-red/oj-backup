<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Spider - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573391841:yPtnHPYXykZ9X4D9f2wD34wtA/JWxu9PF7G7T6UxUFE=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22A%20plane%20contains%20a%20not%20necessarily%20convex%20polygon%20without%20self-intersections%2C%20consisting%20of%20%24%20n%20%24%20vertexes%2C%20numbered%20from%201%20to%20%24%20n%20%24%20.%20There%20is%20a%20spider%20sitting%20on%20the%20border%20of%20the%20polygon%2C%20the%20spider%20can%20move%20like%20that%3A%5Cn%5Cn1.%20Transfer.%20The%20spider%20moves%20from%20the%20point%20%24%20p_%7B1%7D%20%24%20with%20coordinates%20%24%20%28x_%7B1%7D%2Cy_%7B1%7D%29%20%24%20%2C%20lying%20on%20the%20polygon%20border%2C%20to%20the%20point%20%24%20p_%7B2%7D%20%24%20with%20coordinates%20%24%20%28x_%7B2%7D%2Cy_%7B2%7D%29%20%24%20%2C%20also%20lying%20on%20the%20border.%20The%20spider%20can%27t%20go%20beyond%20the%20polygon%20border%20as%20it%20transfers%2C%20that%20is%2C%20the%20spider%27s%20path%20from%20point%20%24%20p_%7B1%7D%20%24%20to%20point%20%24%20p_%7B2%7D%20%24%20goes%20along%20the%20polygon%20border.%20It%27s%20up%20to%20the%20spider%20to%20choose%20the%20direction%20of%20walking%20round%20the%20polygon%20border%20%28clockwise%20or%20counterclockwise%29.%5Cn2.%20Descend.%20The%20spider%20moves%20from%20point%20%24%20p_%7B1%7D%20%24%20with%20coordinates%20%24%20%28x_%7B1%7D%2Cy_%7B1%7D%29%20%24%20to%20point%20%24%20p_%7B2%7D%20%24%20with%20coordinates%20%24%20%28x_%7B2%7D%2Cy_%7B2%7D%29%20%24%20%2C%20at%20that%20points%20%24%20p_%7B1%7D%20%24%20and%20%24%20p_%7B2%7D%20%24%20must%20lie%20on%20one%20vertical%20straight%20line%20%28%20%24%20x_%7B1%7D%3Dx_%7B2%7D%20%24%20%29%2C%20point%20%24%20p_%7B1%7D%20%24%20must%20be%20not%20lower%20than%20point%20%24%20p_%7B2%7D%20%24%20%28%20%24%20y_%7B1%7D%3E%3Dy_%7B2%7D%20%24%20%29%20and%20segment%20%24%20p_%7B1%7Dp_%7B2%7D%20%24%20mustn%27t%20have%20points%2C%20located%20strictly%20outside%20the%20polygon%20%28specifically%2C%20the%20segment%20can%20have%20common%20points%20with%20the%20border%29.%5Cn%5CnInitially%20the%20spider%20is%20located%20at%20the%20polygon%20vertex%20with%20number%20%24%20s%20%24%20.%20Find%20the%20length%20of%20the%20shortest%20path%20to%20the%20vertex%20number%20%24%20t%20%24%20%2C%20consisting%20of%20transfers%20and%20descends.%20The%20distance%20is%20determined%20by%20the%20usual%20Euclidean%20metric%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF223D%5C%2Fd3ce90fe413df39b4f0232d7dab269112efea291.png%29.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20integer%20%24%20n%20%24%20%28%20%24%203%3C%3Dn%3C%3D10%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertexes%20of%20the%20given%20polygon.%20Next%20%24%20n%20%24%20lines%20contain%20two%20space-separated%20integers%20each%20%5Cu2014%20the%20coordinates%20of%20the%20polygon%20vertexes.%20The%20vertexes%20are%20listed%20in%20the%20counter-clockwise%20order.%20The%20coordinates%20of%20the%20polygon%20vertexes%20do%20not%20exceed%20%24%2010%5E%7B4%7D%20%24%20in%20their%20absolute%20value.%5Cn%5CnThe%20last%20line%20contains%20two%20space-separated%20integers%20%24%20s%20%24%20and%20%24%20t%20%24%20%28%20%24%201%3C%3Ds%2Ct%3C%3Dn%20%24%20%29%20%5Cu2014%20the%20start%20and%20the%20end%20vertexes%20of%20the%20sought%20shortest%20way.%5Cn%5CnConsider%20the%20polygon%20vertexes%20numbered%20in%20the%20order%20they%20are%20given%20in%20the%20input%2C%20that%20is%2C%20the%20coordinates%20of%20the%20first%20vertex%20are%20located%20on%20the%20second%20line%20of%20the%20input%20and%20the%20coordinates%20of%20the%20%24%20n%20%24%20-th%20vertex%20are%20on%20the%20%24%20%28n%2B1%29%20%24%20-th%20line.%20It%20is%20guaranteed%20that%20the%20given%20polygon%20is%20simple%2C%20that%20is%2C%20it%20contains%20no%20self-intersections%20or%20self-tangencies.%22%2C%22outputFormat%22%3A%22In%20the%20output%20print%20a%20single%20real%20number%20%5Cu2014%20the%20length%20of%20the%20shortest%20way%20from%20vertex%20%24%20s%20%24%20to%20vertex%20%24%20t%20%24%20.%20The%20answer%20is%20considered%20correct%2C%20if%20its%20absolute%20or%20relative%20error%20does%20not%20exceed%20%24%2010%5E%7B-6%7D%20%24%20.%22%2C%22samples%22%3A%5B%5B%224%5Cn0%200%5Cn1%200%5Cn1%201%5Cn0%201%5Cn1%204%5Cn%22%2C%221.000000000000000000e%2B000%5Cn%22%5D%2C%5B%224%5Cn0%200%5Cn1%201%5Cn0%202%5Cn-1%201%5Cn3%203%5Cn%22%2C%220.000000000000000000e%2B000%5Cn%22%5D%2C%5B%225%5Cn0%200%5Cn5%200%5Cn1%204%5Cn0%202%5Cn2%201%5Cn3%201%5Cn%22%2C%225.650281539872884700e%2B000%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%20the%20spider%20transfers%20along%20the%20side%20that%20connects%20vertexes%201%20and%204.%5Cn%5CnIn%20the%20second%20sample%20the%20spider%20doesn%27t%20have%20to%20transfer%20anywhere%2C%20so%20the%20distance%20equals%20zero.%5Cn%5CnIn%20the%20third%20sample%20the%20best%20strategy%20for%20the%20spider%20is%20to%20transfer%20from%20vertex%203%20to%20point%20%282%2C3%29%2C%20descend%20to%20point%20%282%2C1%29%2C%20and%20then%20transfer%20to%20vertex%201.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F223%5C%2FD%22%2C%22id%22%3A%22223D%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF223D%22%2C%22title%22%3A%22Spider%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Spider%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Spider</h1>
<h2>题目描述</h2>
<div>A plane contains a not necessarily convex polygon without self-intersections, consisting of $ n $ vertexes, numbered from 1 to $ n $ . There is a spider sitting on the border of the polygon, the spider can move like that:
1. Transfer. The spider moves from the point $ p_{1} $ with coordinates $ (x_{1},y_{1}) $ , lying on the polygon border, to the point $ p_{2} $ with coordinates $ (x_{2},y_{2}) $ , also lying on the border. The spider can't go beyond the polygon border as it transfers, that is, the spider's path from point $ p_{1} $ to point $ p_{2} $ goes along the polygon border. It's up to the spider to choose the direction of walking round the polygon border (clockwise or counterclockwise).
2. Descend. The spider moves from point $ p_{1} $ with coordinates $ (x_{1},y_{1}) $ to point $ p_{2} $ with coordinates $ (x_{2},y_{2}) $ , at that points $ p_{1} $ and $ p_{2} $ must lie on one vertical straight line ( $ x_{1}=x_{2} $ ), point $ p_{1} $ must be not lower than point $ p_{2} $ ( $ y_{1}>=y_{2} $ ) and segment $ p_{1}p_{2} $ mustn't have points, located strictly outside the polygon (specifically, the segment can have common points with the border).
Initially the spider is located at the polygon vertex with number $ s $ . Find the length of the shortest path to the vertex number $ t $ , consisting of transfers and descends. The distance is determined by the usual Euclidean metric ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF223D/d3ce90fe413df39b4f0232d7dab269112efea291.png).</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains integer $ n $ ( $ 3<=n<=10^{5} $ ) — the number of vertexes of the given polygon. Next $ n $ lines contain two space-separated integers each — the coordinates of the polygon vertexes. The vertexes are listed in the counter-clockwise order. The coordinates of the polygon vertexes do not exceed $ 10^{4} $ in their absolute value.
The last line contains two space-separated integers $ s $ and $ t $ ( $ 1<=s,t<=n $ ) — the start and the end vertexes of the sought shortest way.
Consider the polygon vertexes numbered in the order they are given in the input, that is, the coordinates of the first vertex are located on the second line of the input and the coordinates of the $ n $ -th vertex are on the $ (n+1) $ -th line. It is guaranteed that the given polygon is simple, that is, it contains no self-intersections or self-tangencies.</div>
<h3>输出格式</h3>
<br />
<div>In the output print a single real number — the length of the shortest way from vertex $ s $ to vertex $ t $ . The answer is considered correct, if its absolute or relative error does not exceed $ 10^{-6} $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
0 0
1 0
1 1
0 1
1 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1.000000000000000000e+000
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4
0 0
1 1
0 2
-1 1
3 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>0.000000000000000000e+000
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>5
0 0
5 0
1 4
0 2
2 1
3 1
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>5.650281539872884700e+000
</code></pre>
<h2>说明</h2>
<div>In the first sample the spider transfers along the side that connects vertexes 1 and 4.
In the second sample the spider doesn't have to transfer anywhere, so the distance equals zero.
In the third sample the best strategy for the spider is to transfer from vertex 3 to point (2,3), descend to point (2,1), and then transfer to vertex 1.</div>
</article>
</div>
</div>
</body>
</html>
