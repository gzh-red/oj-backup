<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Zuma - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395920:VHOXhofCJr2S/9cHHzjJZdbad9dIB3C1cT5iNr6VF9c=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Genos%20recently%20installed%20the%20game%20Zuma%20on%20his%20phone.%20In%20Zuma%20there%20exists%20a%20line%20of%20%24%20n%20%24%20gemstones%2C%20the%20%24%20i%20%24%20-th%20of%20which%20has%20color%20%24%20c_%7Bi%7D%20%24%20.%20The%20goal%20of%20the%20game%20is%20to%20destroy%20all%20the%20gemstones%20in%20the%20line%20as%20quickly%20as%20possible.%5Cn%5CnIn%20one%20second%2C%20Genos%20is%20able%20to%20choose%20exactly%20one%20continuous%20substring%20of%20colored%20gemstones%20that%20is%20a%20palindrome%20and%20remove%20it%20from%20the%20line.%20After%20the%20substring%20is%20removed%2C%20the%20remaining%20gemstones%20shift%20to%20form%20a%20solid%20line%20again.%20What%20is%20the%20minimum%20number%20of%20seconds%20needed%20to%20destroy%20the%20entire%20line%3F%5Cn%5CnLet%20us%20remind%2C%20that%20the%20string%20%28or%20substring%29%20is%20called%20palindrome%2C%20if%20it%20reads%20same%20backwards%20or%20forward.%20In%20our%20case%20this%20means%20the%20color%20of%20the%20first%20gemstone%20is%20equal%20to%20the%20color%20of%20the%20last%20one%2C%20the%20color%20of%20the%20second%20gemstone%20is%20equal%20to%20the%20color%20of%20the%20next%20to%20last%20and%20so%20on.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D500%20%24%20%29%20%5Cu2014%20the%20number%20of%20gemstones.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20space-separated%20integers%2C%20the%20%24%20i%20%24%20-th%20of%20which%20is%20%24%20c_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dc_%7Bi%7D%3C%3Dn%20%24%20%29%20%5Cu2014%20the%20color%20of%20the%20%24%20i%20%24%20-th%20gemstone%20in%20a%20line.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20minimum%20number%20of%20seconds%20needed%20to%20destroy%20the%20entire%20line.%22%2C%22samples%22%3A%5B%5B%223%5Cn1%202%201%5Cn%22%2C%221%5Cn%22%5D%2C%5B%223%5Cn1%202%203%5Cn%22%2C%223%5Cn%22%5D%2C%5B%227%5Cn1%204%204%202%203%202%201%5Cn%22%2C%222%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20Genos%20can%20destroy%20the%20entire%20line%20in%20one%20second.%5Cn%5CnIn%20the%20second%20sample%2C%20Genos%20can%20only%20destroy%20one%20gemstone%20at%20a%20time%2C%20so%20destroying%20three%20gemstones%20takes%20three%20seconds.%5Cn%5CnIn%20the%20third%20sample%2C%20to%20achieve%20the%20optimal%20time%20of%20two%20seconds%2C%20destroy%20palindrome%204%204%20first%20and%20then%20destroy%20palindrome%201%202%203%202%201.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F607%5C%2FB%22%2C%22id%22%3A%22607B%22%7D%2C%22translation%22%3A%22%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cn%5CnGenos%5Cu6700%5Cu8fd1%5Cu5728%5Cu4ed6%5Cu7684%5Cu624b%5Cu673a%5Cu4e0a%5Cu4e0b%5Cu8f7d%5Cu4e86%5Cu7956%5Cu739b%5Cu6e38%5Cu620f%5Cu3002%5Cu5728%5Cu7956%5Cu739b%5Cu6e38%5Cu620f%5Cu91cc%5Cuff0c%5Cu5b58%5Cu5728n%5Cu4e2a%5Cu4e00%5Cu884c%5Cu7684%5Cu5b9d%5Cu77f3%5Cuff0c%5Cu7b2ci%5Cu4e2a%5Cu5b9d%5Cu77f3%5Cu7684%5Cu989c%5Cu8272%5Cu662fCi%20%5Cu3002%5Cu8fd9%5Cu4e2a%5Cu6e38%5Cu620f%5Cu7684%5Cu76ee%5Cu6807%5Cu662f%5Cu5c3d%5Cu5feb%5Cu7684%5Cu6d88%5Cu706d%5Cu4e00%5Cu884c%5Cu4e2d%5Cu6240%5Cu6709%5Cu7684%5Cu5b9d%5Cu77f3%5Cu3002%20%5Cu5728%5Cu4e00%5Cu79d2%5Cu949f%5Cuff0cGenos%5Cu80fd%5Cu5f88%5Cu5feb%5Cu7684%5Cu6311%5Cu9009%5Cu51fa%5Cu8fd9%5Cu4e9b%5Cu6709%5Cu989c%5Cu8272%5Cu7684%5Cu5b9d%5Cu77f3%5Cu4e2d%5Cu7684%5Cu4e00%5Cu4e2a%5Cu56de%5Cu6587%5Cu7684%5Cuff0c%5Cu8fde%5Cu7eed%5Cu7684%5Cu5b50%5Cu4e32%5Cuff0c%5Cu5e76%5Cu5c06%5Cu8fd9%5Cu4e2a%5Cu5b50%5Cu4e32%5Cu79fb%5Cu9664%5Cu3002%5Cu6bcf%5Cu5f53%5Cu4e00%5Cu4e2a%5Cu5b50%5Cu4e32%5Cu88ab%5Cu5220%5Cu9664%5Cu540e%5Cuff0c%5Cu5269%5Cu4f59%5Cu7684%5Cu5b9d%5Cu77f3%5Cu5c06%5Cu8fde%5Cu63a5%5Cu5728%5Cu4e00%5Cu8d77%5Cuff0c%5Cu5f62%5Cu6210%5Cu4e00%5Cu4e2a%5Cu65b0%5Cu7684%5Cu884c%5Cu5217%5Cu3002%5Cu4f60%5Cu7684%5Cu4efb%5Cu52a1%5Cu662f%5Cuff1a%5Cu6c42%5Cu51fa%5Cu628a%5Cu6574%5Cu4e2a%5Cu5b9d%5Cu77f3%5Cu4e32%5Cu90fd%5Cu79fb%5Cu9664%5Cu7684%5Cu6700%5Cu77ed%5Cu65f6%5Cu95f4%5Cu3002%20%5Cu8ba9%5Cu6211%5Cu4eec%5Cu7ed9%5Cu4f60%5Cu4e00%5Cu4e2a%5Cu63d0%5Cu793a%5Cuff1a%5Cu5982%5Cu679c%5Cu4e00%5Cu4e2a%5Cu4e32%5Cu6b63%5Cu7740%5Cu8bfb%5Cu6216%5Cu5012%5Cu7740%5Cu8bfb%5Cu90fd%5Cu4e00%5Cu6837%5Cuff0c%5Cu90a3%5Cu4e48%5Cu8fd9%5Cu4e2a%5Cu4e32%5Cuff08%5Cu6216%5Cu5b50%5Cu4e32%5Cuff09%5Cu53eb%5Cu56de%5Cu6587%5Cu4e32%5Cu3002%5Cu5728%5Cu6211%5Cu4eec%5Cu8fd9%5Cu9053%5Cu9898%5Cu4e2d%5Cuff0c%5Cu201c%5Cu56de%5Cu6587%5Cu201d%5Cu6307%5Cu8fd9%5Cu4e2a%5Cu5b9d%5Cu77f3%5Cu4e32%5Cu4e2d%5Cu7684%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu7684%5Cu989c%5Cu8272%5Cu7b49%5Cu4e8e%5Cu6700%5Cu540e%5Cu4e00%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu7684%5Cu989c%5Cu8272%5Cuff0c%5Cu7b2c%5Cu4e8c%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu7684%5Cu989c%5Cu8272%5Cu7b49%5Cu4e8e%5Cu5012%5Cu6570%5Cu7b2c%5Cu4e8c%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu7684%5Cu989c%5Cu8272%5Cuff0c%5Cu7b49%5Cu7b49%5Cu3002%5Cn%5Cu8f93%5Cu5165%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cuff1a%5Cn%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570n%281%3C%3Dn%3C%3D500%29%20%5Cu2014%5Cu2014%5Cu5b9d%5Cu77f3%5Cu4e32%5Cu7684%5Cu957f%5Cu5ea6%5Cu3002%20%5Cu7b2c%5Cu4e8c%5Cu884c%5Cu5305%5Cu542bn%5Cu4e2a%5Cu88ab%5Cu7a7a%5Cu683c%5Cu5206%5Cu5f00%5Cu7684%5Cu6574%5Cu6570%5Cuff0c%5Cu7b2ci%281%3C%3Di%3C%3Dn%29%20%5Cu4e2a%5Cu8868%5Cu793a%5Cu8fd9%5Cu884c%5Cu4e2d%5Cu7b2ci%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu7684%5Cu989c%5Cu8272%5Cu3002%5Cn%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cuff1a%5Cn%5Cn%5Cu8f93%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu628a%5Cu8fd9%5Cu884c%5Cu73e0%5Cu5b50%5Cu79fb%5Cu9664%5Cu7684%5Cu6700%5Cu77ed%5Cu65f6%5Cu95f4%5Cu3002%20%28%5Cu6837%5Cu4f8b%5Cu7565%29%5Cn%5Cu8bf4%5Cu660e%5Cuff1a%5Cn%5Cn%5Cu5728%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu4f8b%5Cu5b50%5Cu4e2d%5Cuff0cGenos%5Cu53ef%5Cu4ee5%5Cu5728%5Cu4e00%5Cu79d2%5Cu949f%5Cu5c31%5Cu628a%5Cu8fd9%5Cu884c%5Cu73e0%5Cu5b50%5Cu5168%5Cu90e8%5Cu79fb%5Cu8d70%5Cu3002%20%5Cu5728%5Cu7b2c%5Cu4e8c%5Cu4e2a%5Cu4f8b%5Cu5b50%5Cu4e2d%5Cuff0cGenos%5Cu4e00%5Cu6b21%5Cu53ea%5Cu80fd%5Cu79fb%5Cu8d70%5Cu4e00%5Cu4e2a%5Cu73e0%5Cu5b50%5Cuff0c%5Cu6240%5Cu4ee5%5Cu79fb%5Cu8d70%5Cu4e09%5Cu4e2a%5Cu73e0%5Cu5b50%5Cu82b1%5Cu8d39%5Cu4ed6%5Cu4e09%5Cu79d2%5Cu3002%20%5Cu5728%5Cu7b2c%5Cu4e09%5Cu4e2a%5Cu4f8b%5Cu5b50%5Cu4e2d%5Cuff0c%5Cu4e3a%5Cu4e86%5Cu8fbe%5Cu52302%5Cu79d2%5Cu7684%5Cu6700%5Cu5feb%5Cu65f6%5Cu95f4%5Cuff0c%5Cu5148%5Cu79fb%5Cu9664%5Cu56de%5Cu6587%5Cu4e324%204%2C%5Cu518d%5Cu79fb%5Cu9664%5Cu56de%5Cu6587%5Cu4e321%202%203%202%201%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%40Administrator2004%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B2%2C4%2C129%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A353%2C%22totalAccepted%22%3A165%2C%22pid%22%3A%22CF607B%22%2C%22title%22%3A%22Zuma%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22CF626F%22%2C%22title%22%3A%22Group%20Projects%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF161D%22%2C%22title%22%3A%22Distance%20in%20Tree%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF149D%22%2C%22title%22%3A%22Coloring%20Brackets%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF10D%22%2C%22title%22%3A%22LCIS%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF983C%22%2C%22title%22%3A%22Elevator%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Zuma%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Zuma</h1>
<h2>题意翻译</h2>
<div>题目描述
Genos最近在他的手机上下载了祖玛游戏。在祖玛游戏里，存在n个一行的宝石，第i个宝石的颜色是Ci 。这个游戏的目标是尽快的消灭一行中所有的宝石。 在一秒钟，Genos能很快的挑选出这些有颜色的宝石中的一个回文的，连续的子串，并将这个子串移除。每当一个子串被删除后，剩余的宝石将连接在一起，形成一个新的行列。你的任务是：求出把整个宝石串都移除的最短时间。 让我们给你一个提示：如果一个串正着读或倒着读都一样，那么这个串（或子串）叫回文串。在我们这道题中，“回文”指这个宝石串中的第一个珠子的颜色等于最后一个珠子的颜色，第二个珠子的颜色等于倒数第二个珠子的颜色，等等。
输入输出格式
输入格式：
第一行包含一个整数n(1<=n<=500) ——宝石串的长度。 第二行包含n个被空格分开的整数，第i(1<=i<=n) 个表示这行中第i个珠子的颜色。
输出格式：
输出一个整数，把这行珠子移除的最短时间。 (样例略)
说明：
在第一个例子中，Genos可以在一秒钟就把这行珠子全部移走。 在第二个例子中，Genos一次只能移走一个珠子，所以移走三个珠子花费他三秒。 在第三个例子中，为了达到2秒的最快时间，先移除回文串4 4,再移除回文串1 2 3 2 1。
感谢@Administrator2004 提供的翻译</div>
<h2>题目描述</h2>
<div>Genos recently installed the game Zuma on his phone. In Zuma there exists a line of $ n $ gemstones, the $ i $ -th of which has color $ c_{i} $ . The goal of the game is to destroy all the gemstones in the line as quickly as possible.
In one second, Genos is able to choose exactly one continuous substring of colored gemstones that is a palindrome and remove it from the line. After the substring is removed, the remaining gemstones shift to form a solid line again. What is the minimum number of seconds needed to destroy the entire line?
Let us remind, that the string (or substring) is called palindrome, if it reads same backwards or forward. In our case this means the color of the first gemstone is equal to the color of the last one, the color of the second gemstone is equal to the color of the next to last and so on.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input contains a single integer $ n $ ( $ 1<=n<=500 $ ) — the number of gemstones.
The second line contains $ n $ space-separated integers, the $ i $ -th of which is $ c_{i} $ ( $ 1<=c_{i}<=n $ ) — the color of the $ i $ -th gemstone in a line.</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the minimum number of seconds needed to destroy the entire line.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
1 2 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>3
1 2 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>3
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>7
1 4 4 2 3 2 1
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>2
</code></pre>
<h2>说明</h2>
<div>In the first sample, Genos can destroy the entire line in one second.
In the second sample, Genos can only destroy one gemstone at a time, so destroying three gemstones takes three seconds.
In the third sample, to achieve the optimal time of two seconds, destroy palindrome 4 4 first and then destroy palindrome 1 2 3 2 1.</div>
</article>
</div>
</div>
</body>
</html>
