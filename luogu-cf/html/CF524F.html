<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>And Yet Another Bracket Sequence - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395079:SleZqcKq+Ej7UO3rTSTXA8KeWK6WUXTqHlFNLtPb4DM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Polycarpus%20has%20a%20finite%20sequence%20of%20opening%20and%20closing%20brackets.%20In%20order%20not%20to%20fall%20asleep%20in%20a%20lecture%2C%20Polycarpus%20is%20having%20fun%20with%20his%20sequence.%20He%20is%20able%20to%20perform%20two%20operations%3A%5Cn%5Cn-%20adding%20any%20bracket%20in%20any%20position%20%28in%20the%20beginning%2C%20the%20end%2C%20or%20between%20any%20two%20existing%20brackets%29%3B%5Cn-%20cyclic%20shift%20%5Cu2014%20moving%20the%20last%20bracket%20from%20the%20end%20of%20the%20sequence%20to%20the%20beginning.%5Cn%5CnPolycarpus%20can%20apply%20any%20number%20of%20operations%20to%20his%20sequence%20and%20adding%20a%20cyclic%20shift%20in%20any%20order.%20As%20a%20result%2C%20he%20wants%20to%20get%20the%20correct%20bracket%20sequence%20of%20the%20minimum%20possible%20length.%20If%20there%20are%20several%20such%20sequences%2C%20Polycarpus%20is%20interested%20in%20the%20lexicographically%20smallest%20one.%20Help%20him%20find%20such%20a%20sequence.%5Cn%5CnAcorrect%20bracket%20sequence%20is%20a%20sequence%20of%20opening%20and%20closing%20brackets%2C%20from%20which%20you%20can%20get%20a%20correct%20arithmetic%20expression%20by%20adding%20characters%20%5C%221%5C%22%20and%20%5C%22%2B%5C%22%20.%20Each%20opening%20bracket%20must%20correspond%20to%20a%20closed%20one.%20For%20example%2C%20the%20sequences%20%5C%22%28%28%29%29%28%29%5C%22%2C%20%5C%22%28%29%5C%22%2C%20%5C%22%28%28%29%28%28%29%29%29%5C%22%20are%20correct%20and%20%5C%22%29%28%5C%22%2C%20%5C%22%28%28%29%5C%22%20and%20%5C%22%28%28%29%29%29%28%5C%22%20are%20not.%5Cn%5CnThe%20sequence%20%24%20a_%7B1%7D%20%24%20%24%20a_%7B2%7D...%5C%5C%20a_%7Bn%7D%20%24%20is%20lexicographically%20smaller%20than%20sequence%20%24%20b_%7B1%7D%20%24%20%24%20b_%7B2%7D...%5C%5C%20b_%7Bn%7D%20%24%20%2C%20if%20there%20is%20such%20number%20%24%20i%20%24%20from%20%24%201%20%24%20to%20%24%20n%20%24%20%2C%20that%20%24%20a_%7Bk%7D%3Db_%7Bk%7D%20%24%20for%20%24%201%3C%3Dk%26lt%3Bi%20%24%20and%20%24%20a_%7Bi%7D%26lt%3Bb_%7Bi%7D%20%24%20.%20Consider%20that%20%5C%22%28%5C%22%20%24%20%26lt%3B%20%24%20%5C%22%29%5C%22.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20Polycarpus%27s%20sequence%20consisting%20of%20characters%20%5C%22%28%5C%22%20and%20%5C%22%29%5C%22.%20The%20length%20of%20a%20line%20is%20from%20%24%201%20%24%20to%20%24%201000000%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20a%20correct%20bracket%20sequence%20of%20the%20minimum%20length%20that%20Polycarpus%20can%20obtain%20by%20his%20operations.%20If%20there%20are%20multiple%20such%20sequences%2C%20print%20the%20lexicographically%20minimum%20one.%22%2C%22samples%22%3A%5B%5B%22%28%29%28%28%29%29%5Cn%22%2C%22%28%28%29%29%28%29%22%5D%2C%5B%22%28%29%28%5Cn%22%2C%22%28%28%29%29%22%5D%5D%2C%22hint%22%3A%22The%20sequence%20in%20the%20first%20example%20is%20already%20correct%2C%20but%20to%20get%20the%20lexicographically%20minimum%20answer%2C%20you%20need%20to%20perform%20four%20cyclic%20shift%20operations.%20In%20the%20second%20example%20you%20need%20to%20add%20a%20closing%20parenthesis%20between%20the%20second%20and%20third%20brackets%20and%20make%20a%20cyclic%20shift.%20You%20can%20first%20make%20the%20shift%2C%20and%20then%20add%20the%20bracket%20at%20the%20end.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B5000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F524%5C%2FF%22%2C%22id%22%3A%22524F%22%7D%2C%22translation%22%3A%22%5Cu6709%5Cu4e00%5Cu4e2a%5Cu62ec%5Cu53f7%5Cu5e8f%5Cu5217%5Cuff08%5Cu4e0d%5Cu4fdd%5Cu8bc1%5Cu5408%5Cu6cd5%5Cuff09%5Cuff0c%5Cu4f60%5Cu80fd%5Cu591f%5Cu8fdb%5Cu884c%5Cu4ee5%5Cu4e0b%5Cu4e24%5Cu4e2a%5Cu64cd%5Cu4f5c%3A%5Cr%5Cn%5Cr%5Cn1.%20%5Cu5728%5Cu4efb%5Cu610f%5Cu4f4d%5Cu7f6e%5Cu63d2%5Cu5165%5Cu4e00%5Cu4e2a%5Cu5de6%5Cu62ec%5Cu53f7%5Cu6216%5Cu8005%5Cu53f3%5Cu62ec%5Cu53f7%3B%5Cr%5Cn%5Cr%5Cn2.%20%5Cu5c06%5Cu5e8f%5Cu5217%5Cu6700%5Cu672b%5Cu7684%5Cu62ec%5Cu53f7%5Cu79fb%5Cu5230%5Cu6700%5Cu524d%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu7ecf%5Cu8fc7%5Cu82e5%5Cu5e72%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu540e%5Cuff0c%5Cu5f97%5Cu5230%5Cu7684%2A%2A%5Cu6700%5Cu77ed%2A%2A%5Cu7684%2A%2A%5Cu5408%5Cu6cd5%2A%2A%5Cu62ec%5Cu53f7%5Cu5e8f%5Cu5217%5Cu662f%5Cu4ec0%5Cu4e48%5Cuff1f%5Cu82e5%5Cu591a%5Cu89e3%5Cuff0c%5Cu8f93%5Cu51fa%2A%2A%5Cu5b57%5Cu5178%5Cu5e8f%5Cu6700%5Cu5c0f%2A%2A%5Cu7684%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cuff08%60%27%28%27%60%3C%60%27%29%27%60%5Cuff09%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A26%2C%22totalAccepted%22%3A7%2C%22pid%22%3A%22CF524F%22%2C%22title%22%3A%22And%20Yet%20Another%20Bracket%20Sequence%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22And%20Yet%20Another%20Bracket%20Sequence%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>And Yet Another Bracket Sequence</h1>
<h2>题意翻译</h2>
<div>有一个括号序列（不保证合法），你能够进行以下两个操作:
1. 在任意位置插入一个左括号或者右括号;
2. 将序列最末的括号移到最前。
经过若干次操作后，得到的**最短**的**合法**括号序列是什么？若多解，输出**字典序最小**的。
（`'('`<`')'`）</div>
<h2>题目描述</h2>
<div>Polycarpus has a finite sequence of opening and closing brackets. In order not to fall asleep in a lecture, Polycarpus is having fun with his sequence. He is able to perform two operations:
- adding any bracket in any position (in the beginning, the end, or between any two existing brackets);
- cyclic shift — moving the last bracket from the end of the sequence to the beginning.
Polycarpus can apply any number of operations to his sequence and adding a cyclic shift in any order. As a result, he wants to get the correct bracket sequence of the minimum possible length. If there are several such sequences, Polycarpus is interested in the lexicographically smallest one. Help him find such a sequence.
Acorrect bracket sequence is a sequence of opening and closing brackets, from which you can get a correct arithmetic expression by adding characters "1" and "+" . Each opening bracket must correspond to a closed one. For example, the sequences "(())()", "()", "(()(()))" are correct and ")(", "(()" and "(()))(" are not.
The sequence $ a_{1} $ $ a_{2}...\ a_{n} $ is lexicographically smaller than sequence $ b_{1} $ $ b_{2}...\ b_{n} $ , if there is such number $ i $ from $ 1 $ to $ n $ , that $ a_{k}=b_{k} $ for $ 1<=k&lt;i $ and $ a_{i}&lt;b_{i} $ . Consider that "(" $ &lt; $ ")".</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains Polycarpus's sequence consisting of characters "(" and ")". The length of a line is from $ 1 $ to $ 1000000 $ .</div>
<h3>输出格式</h3>
<br />
<div>Print a correct bracket sequence of the minimum length that Polycarpus can obtain by his operations. If there are multiple such sequences, print the lexicographically minimum one.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>()(())
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>(())()</code></pre>
<h3>输入样例 #2</h3>
<pre><code>()(
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>(())</code></pre>
<h2>说明</h2>
<div>The sequence in the first example is already correct, but to get the lexicographically minimum answer, you need to perform four cyclic shift operations. In the second example you need to add a closing parenthesis between the second and third brackets and make a cyclic shift. You can first make the shift, and then add the bracket at the end.</div>
</article>
</div>
</div>
</body>
</html>
