<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Python Indentation - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573399258:gHWuF8UZLsGfDYBIf5+h6iQxa8rLUeQASCrTUR+eDn8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22In%20Python%2C%20code%20blocks%20don%27t%20have%20explicit%20begin%5C%2Fend%20or%20curly%20braces%20to%20mark%20beginning%20and%20end%20of%20the%20block.%20Instead%2C%20code%20blocks%20are%20defined%20by%20indentation.%5Cn%5CnWe%20will%20consider%20an%20extremely%20simplified%20subset%20of%20Python%20with%20only%20two%20types%20of%20statements.%5Cn%5CnSimple%20statements%20are%20written%20in%20a%20single%20line%2C%20one%20per%20line.%20An%20example%20of%20a%20simple%20statement%20is%20assignment.%5Cn%5CnFor%20statements%20are%20compound%20statements%3A%20they%20contain%20one%20or%20several%20other%20statements.%20For%20statement%20consists%20of%20a%20header%20written%20in%20a%20separate%20line%20which%20starts%20with%20%5C%22for%5C%22%20prefix%2C%20and%20loop%20body.%20Loop%20body%20is%20a%20block%20of%20statements%20indented%20one%20level%20further%20than%20the%20header%20of%20the%20loop.%20Loop%20body%20can%20contain%20both%20types%20of%20statements.%20Loop%20body%20can%27t%20be%20empty.%5Cn%5CnYou%20are%20given%20a%20sequence%20of%20statements%20without%20indentation.%20Find%20the%20number%20of%20ways%20in%20which%20the%20statements%20can%20be%20indented%20to%20form%20a%20valid%20Python%20program.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20a%20single%20integer%20%24%20N%20%24%20%28%20%24%201%3C%3DN%3C%3D5000%20%24%20%29%20%5Cu2014%20the%20number%20of%20commands%20in%20the%20program.%20%24%20N%20%24%20lines%20of%20the%20program%20follow%2C%20each%20line%20describing%20a%20single%20command.%20Each%20command%20is%20either%20%5C%22f%5C%22%20%28denoting%20%5C%22for%20statement%5C%22%29%20or%20%5C%22s%5C%22%20%28%5C%22simple%20statement%5C%22%29.%20It%20is%20guaranteed%20that%20the%20last%20line%20is%20a%20simple%20statement.%22%2C%22outputFormat%22%3A%22Output%20one%20line%20containing%20an%20integer%20-%20the%20number%20of%20ways%20the%20given%20sequence%20of%20statements%20can%20be%20indented%20modulo%20%24%2010%5E%7B9%7D%2B7%20%24%20.%22%2C%22samples%22%3A%5B%5B%224%5Cns%5Cnf%5Cnf%5Cns%5Cn%22%2C%221%5Cn%22%5D%2C%5B%224%5Cnf%5Cns%5Cnf%5Cns%5Cn%22%2C%222%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20test%20case%2C%20there%20is%20only%20one%20way%20to%20indent%20the%20program%3A%20the%20second%20for%20statement%20must%20be%20part%20of%20the%20body%20of%20the%20first%20one.%5Cn%5Cn%60%3Cbr%3E%3C%5C%2Fbr%3Esimple%20statement%3Cbr%3E%3C%5C%2Fbr%3Efor%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20for%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20%20%20%20%20simple%20statement%3Cbr%3E%3C%5C%2Fbr%3E%60In%20the%20second%20test%20case%2C%20there%20are%20two%20ways%20to%20indent%20the%20program%3A%20the%20second%20for%20statement%20can%20either%20be%20part%20of%20the%20first%20one%27s%20body%20or%20a%20separate%20statement%20following%20the%20first%20one.%5Cn%5Cn%60%3Cbr%3E%3C%5C%2Fbr%3Efor%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20simple%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20for%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20%20%20%20%20simple%20statement%3Cbr%3E%3C%5C%2Fbr%3E%60or%5Cn%5Cn%60%3Cbr%3E%3C%5C%2Fbr%3Efor%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20simple%20statement%3Cbr%3E%3C%5C%2Fbr%3Efor%20statement%3Cbr%3E%3C%5C%2Fbr%3E%20%20%20%20simple%20statement%3Cbr%3E%3C%5C%2Fbr%3E%60%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F909%5C%2FC%22%2C%22id%22%3A%22909C%22%7D%2C%22translation%22%3A%22CF909C%20Python%5Cu7684%5Cu7f29%5Cu8fdb%20%5CnPython%5Cu7684%5Cu4ee3%5Cu7801%5Cu4e2d%5Cu4e0d%5Cu9700%5Cu8981%5Cu5199begin%5Cu3001end%5Cu6216%5Cu8005%5Cu5927%5Cu62ec%5Cu53f7%5Cu53bb%5Cu6807%5Cu8bb0%5Cu5f00%5Cu5934%5Cu6216%5Cu7ed3%5Cu5c3e%5Cu3002%5Cn%5Cu6211%5Cu4eec%5Cu5c06%5Cu8003%5Cu8651%5Cu4e00%5Cu79cdPython%5Cu975e%5Cu5e38%5Cu7b80%5Cu5316%5Cu7684%5Cu5b50%5Cu96c6%5Cuff0c%5Cu5b83%5Cu7684%5Cu8bed%5Cu53e5%5Cu53ea%5Cu6709%5Cu4e24%5Cu79cd%5Cu7c7b%5Cu578b%5Cu3002%20%5Cn%5Cu6bcf%5Cu884c%5Cu53ea%5Cu5199%5Cu4e00%5Cu4e2a%5Cu7b80%5Cu5355%5Cu8bed%5Cu53e5%5Cuff0c%5Cu6bd4%5Cu5982%5Cu8d4b%5Cu503c%5Cu3002%5CnFor%5Cu8bed%5Cu53e5%5Cu662f%5Cu4e00%5Cu4e2a%5Cu8f83%5Cu590d%5Cu6742%5Cu7684%5Cu8bed%5Cu53e5%5Cuff0c%5Cu4ed6%5Cu4eec%5Cu53ef%5Cu80fd%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu6216%5Cu591a%5Cu4e2a%5Cu5176%5Cu4ed6%5Cu7684%5Cu8bed%5Cu53e5%5Cu3002%5CnFor%5Cu8bed%5Cu53e5%5Cu7531%5Cu4e00%5Cu4e2a%5Cu5355%5Cu72ec%5Cu7684%5Cu884c%5Cu7ec4%5Cu6210%5Cuff0c%5Cu4ee5%5Cu201cFor%5Cu201d%5Cu524d%5Cu7f00%5Cu548c%5Cu5faa%5Cu73af%5Cu4f53%5Cu5f00%5Cu5934%5Cu3002%5Cn%5Cu5faa%5Cu73af%5Cu4f53%5Cu662f%5Cu4e00%5Cu4e2a%5Cu8bed%5Cu53e5%5Cu5757%5Cuff0c%5Cu6bd4%5Cu5faa%5Cu73af%5Cu5934%5Cu7f29%5Cu8fdb%5Cu4e00%5Cu7ea7%5Cu3002%5Cn%5Cu5faa%5Cu73af%5Cu4f53%5Cu53ef%5Cu4ee5%5Cu5305%5Cu542b%5Cu8fd9%5Cu4e24%5Cu79cd%5Cu7c7b%5Cu578b%5Cu7684%5Cu8bed%5Cu53e5%5Cu3002%5Cu5faa%5Cu73af%5Cu4f53%5Cu4e0d%5Cu80fd%5Cu4e3a%5Cu7a7a%5Cu3002%5Cn%5Cu7ed9%5Cu4f60%5Cu4e00%5Cu4e2a%5Cu6ca1%5Cu6709%5Cu7f29%5Cu8fdb%5Cu7684%5Cu5e8f%5Cu5217%5Cuff0c%5Cu6c42%5Cu6709%5Cu591a%5Cu5c11%5Cu79cd%5Cu65b9%5Cu5f0f%5Cu6dfb%5Cu52a0%5Cu7f29%5Cu8fdb%5Cu53ef%5Cu4ee5%5Cu5f62%5Cu6210%5Cu4e00%5Cu4e2a%5Cu5b8c%5Cu6574%5Cu7684Python%5Cu4ee3%5Cu7801%5Cu3002%5Cn%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cuff1a%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cuff1aN%5Cn%5Cu63a5%5Cu4e0b%5Cu6765N%5Cu884c%5Cu6bcf%5Cu884c%5Cu4e00%5Cu4e2a%5Cu5b57%5Cu7b26f%28for%5Cu8bed%5Cu53e5%29%5Cu6216s%28%5Cu7b80%5Cu5355%5Cu8bed%5Cu53e5%29%5Cu3002%5Cn%5Cu4fdd%5Cu8bc1%5Cu6700%5Cu540e%5Cu4e00%5Cu884c%5Cu4e00%5Cu5b9a%5Cu662fs%28%5Cu7b80%5Cu5355%5Cu8bed%5Cu53e5%29%5Cu3002%20%5Cn%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cuff1a%5Cn%5Cu8f93%5Cu51fa%5Cu65b9%5Cu6848%5Cu6570%5Cuff0c%5Cu7b54%5Cu6848%5Cu5bf910%5E9%2B7%5Cu53d6%5Cu6a21%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%402016c01%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A97%2C%22totalAccepted%22%3A33%2C%22pid%22%3A%22CF909C%22%2C%22title%22%3A%22Python%20Indentation%22%2C%22difficulty%22%3A4%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A33532%2C%22title%22%3A%22CF909C%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A8942%2C%22name%22%3A%22CF909C%20Python%20Indentation%22%2C%22slug%22%3A%22CF909C%22%7D%7D%2C%7B%22id%22%3A33049%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A8942%2C%22name%22%3A%22CF909C%20Python%20Indentation%22%2C%22slug%22%3A%22CF909C%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2015%22%2C%22title%22%3A%22%5Cu4e8c%5Cu53c9%5Cu82f9%5Cu679c%5Cu6811%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2357%22%2C%22title%22%3A%22%5Cu5b88%5Cu5893%5Cu4eba%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2627%22%2C%22title%22%3A%22%5Cu4fee%5Cu526a%5Cu8349%5Cu576a%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2883%22%2C%22title%22%3A%22%5BUSACO07MAR%5D%5Cu725b%5Cu4ea4%5Cu901aCow%20Traffic%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF954E%22%2C%22title%22%3A%22Water%20Taps%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Python%20Indentation%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Python Indentation</h1>
<h2>题意翻译</h2>
<div>CF909C Python的缩进
Python的代码中不需要写begin、end或者大括号去标记开头或结尾。
我们将考虑一种Python非常简化的子集，它的语句只有两种类型。
每行只写一个简单语句，比如赋值。
For语句是一个较复杂的语句，他们可能包含一个或多个其他的语句。
For语句由一个单独的行组成，以“For”前缀和循环体开头。
循环体是一个语句块，比循环头缩进一级。
循环体可以包含这两种类型的语句。循环体不能为空。
给你一个没有缩进的序列，求有多少种方式添加缩进可以形成一个完整的Python代码。
输入格式：
第一行：N
接下来N行每行一个字符f(for语句)或s(简单语句)。
保证最后一行一定是s(简单语句)。
输出格式：
输出方案数，答案对10^9+7取模。
感谢@2016c01 提供的翻译</div>
<h2>题目描述</h2>
<div>In Python, code blocks don't have explicit begin/end or curly braces to mark beginning and end of the block. Instead, code blocks are defined by indentation.
We will consider an extremely simplified subset of Python with only two types of statements.
Simple statements are written in a single line, one per line. An example of a simple statement is assignment.
For statements are compound statements: they contain one or several other statements. For statement consists of a header written in a separate line which starts with "for" prefix, and loop body. Loop body is a block of statements indented one level further than the header of the loop. Loop body can contain both types of statements. Loop body can't be empty.
You are given a sequence of statements without indentation. Find the number of ways in which the statements can be indented to form a valid Python program.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains a single integer $ N $ ( $ 1<=N<=5000 $ ) — the number of commands in the program. $ N $ lines of the program follow, each line describing a single command. Each command is either "f" (denoting "for statement") or "s" ("simple statement"). It is guaranteed that the last line is a simple statement.</div>
<h3>输出格式</h3>
<br />
<div>Output one line containing an integer - the number of ways the given sequence of statements can be indented modulo $ 10^{9}+7 $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
s
f
f
s
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4
f
s
f
s
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>2
</code></pre>
<h2>说明</h2>
<div>In the first test case, there is only one way to indent the program: the second for statement must be part of the body of the first one.
`<br></br>simple statement<br></br>for statement<br></br> for statement<br></br> simple statement<br></br>`In the second test case, there are two ways to indent the program: the second for statement can either be part of the first one's body or a separate statement following the first one.
`<br></br>for statement<br></br> simple statement<br></br> for statement<br></br> simple statement<br></br>`or
`<br></br>for statement<br></br> simple statement<br></br>for statement<br></br> simple statement<br></br>`</div>
</article>
</div>
</div>
</body>
</html>
