<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>A and B and Lecture Rooms - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395015:VmU7BOSjOjwdQqWSgTzcgE1YY9rkw0HS1Lud4h2hAeA=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22A%20and%20B%20are%20preparing%20themselves%20for%20programming%20contests.%5Cn%5CnThe%20University%20where%20A%20and%20B%20study%20is%20a%20set%20of%20rooms%20connected%20by%20corridors.%20Overall%2C%20the%20University%20has%20%24%20n%20%24%20rooms%20connected%20by%20%24%20n-1%20%24%20corridors%20so%20that%20you%20can%20get%20from%20any%20room%20to%20any%20other%20one%20by%20moving%20along%20the%20corridors.%20The%20rooms%20are%20numbered%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%5Cn%5CnEvery%20day%20%5Cu0410%20and%20B%20write%20contests%20in%20some%20rooms%20of%20their%20university%2C%20and%20after%20each%20contest%20they%20gather%20together%20in%20the%20same%20room%20and%20discuss%20problems.%20A%20and%20B%20want%20the%20distance%20from%20the%20rooms%20where%20problems%20are%20discussed%20to%20the%20rooms%20where%20contests%20are%20written%20to%20be%20equal.%20The%20distance%20between%20two%20rooms%20is%20the%20number%20of%20edges%20on%20the%20shortest%20path%20between%20them.%5Cn%5CnAs%20they%20write%20contests%20in%20new%20rooms%20every%20day%2C%20they%20asked%20you%20to%20help%20them%20find%20the%20number%20of%20possible%20rooms%20to%20discuss%20problems%20for%20each%20of%20the%20following%20%24%20m%20%24%20days.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D10%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20rooms%20in%20the%20University.%5Cn%5CnThe%20next%20%24%20n-1%20%24%20lines%20describe%20the%20corridors.%20The%20%24%20i%20%24%20-th%20of%20these%20lines%20%28%20%24%201%3C%3Di%3C%3Dn-1%20%24%20%29%20contains%20two%20integers%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%2Cb_%7Bi%7D%3C%3Dn%20%24%20%29%2C%20showing%20that%20the%20%24%20i%20%24%20-th%20corridor%20connects%20rooms%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20.%5Cn%5CnThe%20next%20line%20contains%20integer%20%24%20m%20%24%20%28%20%24%201%3C%3Dm%3C%3D10%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20queries.%5Cn%5CnNext%20%24%20m%20%24%20lines%20describe%20the%20queries.%20The%20%24%20j%20%24%20-th%20of%20these%20lines%20%28%20%24%201%3C%3Dj%3C%3Dm%20%24%20%29%20contains%20two%20integers%20%24%20x_%7Bj%7D%20%24%20and%20%24%20y_%7Bj%7D%20%24%20%28%20%24%201%3C%3Dx_%7Bj%7D%2Cy_%7Bj%7D%3C%3Dn%20%24%20%29%20that%20means%20that%20on%20the%20%24%20j%20%24%20-th%20day%20A%20will%20write%20the%20contest%20in%20the%20room%20%24%20x_%7Bj%7D%20%24%20%2C%20B%20will%20write%20in%20the%20room%20%24%20y_%7Bj%7D%20%24%20.%22%2C%22outputFormat%22%3A%22In%20the%20%24%20i%20%24%20-th%20%28%20%24%201%3C%3Di%3C%3Dm%20%24%20%29%20line%20print%20the%20number%20of%20rooms%20that%20are%20equidistant%20from%20the%20rooms%20where%20A%20and%20B%20write%20contest%20on%20the%20%24%20i%20%24%20-th%20day.%22%2C%22samples%22%3A%5B%5B%224%5Cn1%202%5Cn1%203%5Cn2%204%5Cn1%5Cn2%203%5Cn%22%2C%221%5Cn%22%5D%2C%5B%224%5Cn1%202%5Cn2%203%5Cn2%204%5Cn2%5Cn1%202%5Cn1%203%5Cn%22%2C%220%5Cn2%5Cn%22%5D%5D%2C%22hint%22%3A%22in%20the%20first%20sample%20there%20is%20only%20one%20room%20at%20the%20same%20distance%20from%20rooms%20number%202%20and%203%20%5Cu2014%20room%20number%201.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F519%5C%2FE%22%2C%22id%22%3A%22519E%22%7D%2C%22translation%22%3A%22%23%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5CnA%5Cu548cB%5Cu5728%5Cu51c6%5Cu5907%5Cu53c2%5Cu52a0%5Cu7f16%5Cu7a0b%5Cu6bd4%5Cu8d5b%5Cu3002%5Cn%5CnA%5Cu548cB%5Cu5b66%5Cu4e60%5Cu7684%5Cu5927%5Cu5b66%5Cu7684%5Cu623f%5Cu95f4%5Cu7531%5Cu8d70%5Cu5eca%5Cu8fde%5Cu63a5%5Cu3002%5Cu5927%5Cu5b66%5Cu4e00%5Cu5171%5Cu6709%24n%24%20%5Cu4e2a%5Cu623f%5Cu95f4%5Cuff0c%5Cu7531%24n-1%24%20%5Cu6761%5Cu8d70%5Cu5eca%5Cu8fde%5Cu63a5%5Cuff0c%5Cu623f%5Cu95f4%5Cu7684%5Cu7f16%5Cu53f7%5Cu662f%5Cu4ece%241%24%20%5Cu5230%24n%24%20%5Cu7684%5Cu6570%5Cu5b57%5Cu7f16%5Cu53f7%5Cu3002%5Cn%5CnA%5Cu548cB%5Cu5728%5Cu5927%5Cu5b66%5Cu7684%5Cu67d0%5Cu4e9b%5Cu623f%5Cu95f4%5Cu91cc%5Cu8fdb%5Cu884c%5Cu6bd4%5Cu8d5b%5Cu3002%5Cu5728%5Cu6bcf%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu4e4b%5Cu540e%5Cuff0c%5Cu4ed6%5Cu4eec%5Cu4f1a%5Cu4e00%5Cu8d77%5Cu5728%5Cu4e00%5Cu4e2a%5Cu623f%5Cu95f4%5Cu91cc%5Cu8ba8%5Cu8bba%5Cu95ee%5Cu9898%5Cu3002A%5Cu548cB%5Cu5e0c%5Cu671b%5Cu8fd9%5Cu4e2a%5Cu8ba8%5Cu8bba%5Cu95ee%5Cu9898%5Cu7684%5Cu623f%5Cu95f4%5Cu5230%5Cu5206%5Cu522b%5Cu4ed6%5Cu4eec%5Cu4e24%5Cu4e2a%5Cu4eba%5Cu6bd4%5Cu8d5b%5Cu623f%5Cu95f4%5Cu7684%5Cu8ddd%5Cu79bb%5Cu76f8%5Cu7b49%5Cu3002%5Cu4e24%5Cu4e2a%5Cu623f%5Cu95f4%5Cu4e4b%5Cu95f4%5Cu7684%5Cu8ddd%5Cu79bb%5Cu6307%5Cu4ed6%5Cu4eec%5Cu4e4b%5Cu95f4%5Cu6700%5Cu77ed%5Cu8def%5Cu7684%5Cu8fb9%5Cu6570%5Cu3002%5Cn%5Cn%5Cu56e0%5Cu4e3aA%5Cu548cB%5Cu6bcf%5Cu5929%5Cu90fd%5Cu5728%5Cu4e0d%5Cu4e00%5Cu6837%5Cu7684%5Cu623f%5Cu95f4%5Cu91cc%5Cu6bd4%5Cu8d5b%5Cuff0c%5Cu6240%5Cu4ee5%5Cu4ed6%5Cu4eec%5Cu8bf7%5Cu6c42%5Cu4f60%5Cu544a%5Cu8bc9%5Cu4ed6%5Cu4eec%5Cu5728%5Cu63a5%5Cu4e0b%5Cu6765%5Cu6bd4%5Cu8d5b%5Cu7684%24m%24%20%5Cu5929%5Cu91cc%5Cu53ef%5Cu4ee5%5Cu7528%5Cu6765%5Cu8ba8%5Cu8bba%5Cu95ee%5Cu9898%5Cu7684%5Cu623f%5Cu95f4%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cuff1f%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%23%23%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu5305%5Cu62ec%5Cu6574%5Cu6570%24n%24%20%5Cuff0c%5Cu5176%5Cu4e2d%24%281%3C%3Dn%3C%3D10%5E5%29%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu623f%5Cu95f4%5Cu6570%5Cu91cf%5Cu3002%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%5Cu7684%24n-1%24%20%5Cu884c%5Cu63cf%5Cu8ff0%5Cu6240%5Cu6709%5Cu7684%5Cu8d70%5Cu5eca%5Cu3002%5Cu8fd9%24n-1%24%20%5Cu884c%5Cu4e2d%5Cu7684%5Cu7b2c%24i%24%20%5Cu884c%5Cu5305%5Cu62ec%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%24a_i%24%20%5Cu548c%24b_i%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu7b2c%24i%24%20%5Cu6761%5Cu8d70%5Cu5eca%5Cu8fde%5Cu63a5%5Cu4e86%5Cu623f%5Cu95f4%24a_i%24%20%5Cu548c%24b_i%24%20%5Cu3002%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%5Cu7684%5Cu4e00%5Cu884c%5Cu8f93%5Cu5165%5Cu6bd4%5Cu8d5b%5Cu7684%5Cu5929%5Cu6570%24m%281%3C%3Dm%3C%3D10%5E5%29%24%20%5Cu3002%5Cn%5Cn%5Cu518d%5Cu63a5%5Cu4e0b%5Cu6765%5Cu7684%24m%24%20%5Cu884c%5Cuff0c%5Cu7b2c%24j%24%20%5Cu884c%5Cu5305%5Cu542b%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%24x_j%24%20%5Cu548c%24y_j%281%3C%3Dx_j%2Cy_j%3C%3Dn%29%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu6bd4%5Cu8d5b%5Cu7684%5Cu7b2c%24j%24%20%5Cu5929A%5Cu5c06%5Cu5728%24x_j%24%20%5Cu623f%5Cu95f4%5Cu6bd4%5Cu8d5b%5Cuff0cB%5Cu5c06%5Cu5728%24y_j%24%20%5Cu623f%5Cu95f4%5Cu6bd4%5Cu8d5b%5Cu3002%5Cn%23%23%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%5Cu5728%5Cu7b2c%24i%281%3C%3Di%3C%3Dm%29%24%20%5Cu884c%5Cu8f93%5Cu51fa%5Cu5f53%5Cu5929%5Cu5206%5Cu522b%5Cu5230A%5Cu3001B%5Cu6bd4%5Cu8d5b%5Cu7684%5Cu623f%5Cu95f4%5Cu8ddd%5Cu79bb%5Cu76f8%5Cu7b49%5Cu7684%5Cu623f%5Cu95f4%5Cu6570%5Cu91cf%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%40lonelysir%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B43%2C211%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A749%2C%22totalAccepted%22%3A222%2C%22pid%22%3A%22CF519E%22%2C%22title%22%3A%22A%20and%20B%20and%20Lecture%20Rooms%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A49134%2C%22title%22%3A%22%5Cu521a%5Cu5b66C%2B%2B%2C%5Cu65e2%5Cu4e0d%5Cu662f%5Cu7537%5Cu751f%5Cu4e5f%5Cu4e0d%5Cu662f%5Cu5973%5Cu751f%5Cuff0cLCA%5Cu6c42%5Cu5927%5Cu4f6c%5Cu6311%5Cu9519%22%2C%22forum%22%3A%7B%22id%22%3A10586%2C%22name%22%3A%22CF519E%20A%20and%20B%20and%20Lecture%20Rooms%22%2C%22slug%22%3A%22CF519E%22%7D%7D%2C%7B%22id%22%3A48843%2C%22title%22%3A%22%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu7b2c7%5Cu4e2a%5Cu70b9%5Cu4f1aMLE%5Cu554a%5Cuff0c%5Cu6c42%5Cu5927%5Cu4f6c%5Cu6307%5Cu70b9%22%2C%22forum%22%3A%7B%22id%22%3A10586%2C%22name%22%3A%22CF519E%20A%20and%20B%20and%20Lecture%20Rooms%22%2C%22slug%22%3A%22CF519E%22%7D%7D%2C%7B%22id%22%3A48840%2C%22title%22%3A%22%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu7b2c7%5Cu4e2a%5Cu70b9%5Cu4f1aMLE%5Cu554a%5Cuff0c%5Cu6c42%5Cu5927%5Cu4f6c%5Cu6307%5Cu70b9%22%2C%22forum%22%3A%7B%22id%22%3A10586%2C%22name%22%3A%22CF519E%20A%20and%20B%20and%20Lecture%20Rooms%22%2C%22slug%22%3A%22CF519E%22%7D%7D%2C%7B%22id%22%3A34940%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A10586%2C%22name%22%3A%22CF519E%20A%20and%20B%20and%20Lecture%20Rooms%22%2C%22slug%22%3A%22CF519E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22CF700B%22%2C%22title%22%3A%22Connecting%20Universities%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF689D%22%2C%22title%22%3A%22Friends%20and%20Subsequences%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF609E%22%2C%22title%22%3A%22Minimum%20spanning%20tree%20for%20each%20edge%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF593D%22%2C%22title%22%3A%22Happy%20Tree%20Party%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1051F%22%2C%22title%22%3A%22The%20Shortest%20Statement%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22A%20and%20B%20and%20Lecture%20Rooms%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>A and B and Lecture Rooms</h1>
<h2>题意翻译</h2>
<div>## 题目描述
A和B在准备参加编程比赛。
A和B学习的大学的房间由走廊连接。大学一共有$n$ 个房间，由$n-1$ 条走廊连接，房间的编号是从$1$ 到$n$ 的数字编号。
A和B在大学的某些房间里进行比赛。在每场比赛之后，他们会一起在一个房间里讨论问题。A和B希望这个讨论问题的房间到分别他们两个人比赛房间的距离相等。两个房间之间的距离指他们之间最短路的边数。
因为A和B每天都在不一样的房间里比赛，所以他们请求你告诉他们在接下来比赛的$m$ 天里可以用来讨论问题的房间有多少个？
## 输入输出格式
### 输入格式
第一行包括整数$n$ ，其中$(1<=n<=10^5)$ ，表示房间数量。
接下来的$n-1$ 行描述所有的走廊。这$n-1$ 行中的第$i$ 行包括两个整数$a_i$ 和$b_i$ ，表示第$i$ 条走廊连接了房间$a_i$ 和$b_i$ 。
接下来的一行输入比赛的天数$m(1<=m<=10^5)$ 。
再接下来的$m$ 行，第$j$ 行包含两个整数$x_j$ 和$y_j(1<=x_j,y_j<=n)$ ，表示比赛的第$j$ 天A将在$x_j$ 房间比赛，B将在$y_j$ 房间比赛。
### 输出格式
在第$i(1<=i<=m)$ 行输出当天分别到A、B比赛的房间距离相等的房间数量。
感谢@lonelysir 提供的翻译</div>
<h2>题目描述</h2>
<div>A and B are preparing themselves for programming contests.
The University where A and B study is a set of rooms connected by corridors. Overall, the University has $ n $ rooms connected by $ n-1 $ corridors so that you can get from any room to any other one by moving along the corridors. The rooms are numbered from $ 1 $ to $ n $ .
Every day А and B write contests in some rooms of their university, and after each contest they gather together in the same room and discuss problems. A and B want the distance from the rooms where problems are discussed to the rooms where contests are written to be equal. The distance between two rooms is the number of edges on the shortest path between them.
As they write contests in new rooms every day, they asked you to help them find the number of possible rooms to discuss problems for each of the following $ m $ days.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains integer $ n $ ( $ 1<=n<=10^{5} $ ) — the number of rooms in the University.
The next $ n-1 $ lines describe the corridors. The $ i $ -th of these lines ( $ 1<=i<=n-1 $ ) contains two integers $ a_{i} $ and $ b_{i} $ ( $ 1<=a_{i},b_{i}<=n $ ), showing that the $ i $ -th corridor connects rooms $ a_{i} $ and $ b_{i} $ .
The next line contains integer $ m $ ( $ 1<=m<=10^{5} $ ) — the number of queries.
Next $ m $ lines describe the queries. The $ j $ -th of these lines ( $ 1<=j<=m $ ) contains two integers $ x_{j} $ and $ y_{j} $ ( $ 1<=x_{j},y_{j}<=n $ ) that means that on the $ j $ -th day A will write the contest in the room $ x_{j} $ , B will write in the room $ y_{j} $ .</div>
<h3>输出格式</h3>
<br />
<div>In the $ i $ -th ( $ 1<=i<=m $ ) line print the number of rooms that are equidistant from the rooms where A and B write contest on the $ i $ -th day.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
1 2
1 3
2 4
1
2 3
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4
1 2
2 3
2 4
2
1 2
1 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>0
2
</code></pre>
<h2>说明</h2>
<div>in the first sample there is only one room at the same distance from rooms number 2 and 3 — room number 1.</div>
</article>
</div>
</div>
</body>
</html>
