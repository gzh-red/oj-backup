<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Verifying Kingdom - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573397709:pdnCHybtkPYNLb7vh0CXnkq/Bm2hTeBF0LupFx1QMVY=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22This%20is%20an%20interactive%20problem.%5Cn%5CnThe%20judge%20has%20a%20hidden%20rooted%20full%20binary%20tree%20with%20%24%20n%20%24%20leaves.%20A%20full%20binary%20tree%20is%20one%20where%20every%20node%20has%20either%20%24%200%20%24%20or%20%24%202%20%24%20children.%20The%20nodes%20with%20%24%200%20%24%20children%20are%20called%20the%20leaves%20of%20the%20tree.%20Since%20this%20is%20a%20full%20binary%20tree%2C%20there%20are%20exactly%20%24%202n-1%20%24%20nodes%20in%20the%20tree.%20The%20leaves%20of%20the%20judge%27s%20tree%20has%20labels%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20You%20would%20like%20to%20reconstruct%20a%20tree%20that%20is%20isomorphic%20to%20the%20judge%27s%20tree.%20To%20do%20this%2C%20you%20can%20ask%20some%20questions.%5Cn%5CnA%20question%20consists%20of%20printing%20the%20label%20of%20three%20distinct%20leaves%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2Ca_%7B3%7D%20%24%20.%20Let%20the%20depth%20of%20a%20node%20be%20the%20shortest%20distance%20from%20the%20node%20to%20the%20root%20of%20the%20tree.%20Let%20%24%20LCA%28a%2Cb%29%20%24%20denote%20the%20node%20with%20maximum%20depth%20that%20is%20a%20common%20ancestor%20of%20the%20nodes%20%24%20a%20%24%20and%20%24%20b%20%24%20.%5Cn%5CnConsider%20%24%20X%3DLCA%28a_%7B1%7D%2Ca_%7B2%7D%29%2CY%3DLCA%28a_%7B2%7D%2Ca_%7B3%7D%29%2CZ%3DLCA%28a_%7B3%7D%2Ca_%7B1%7D%29%20%24%20.%20The%20judge%20will%20tell%20you%20which%20one%20of%20%24%20X%2CY%2CZ%20%24%20has%20the%20maximum%20depth.%20Note%2C%20this%20pair%20is%20uniquely%20determined%20since%20the%20tree%20is%20a%20binary%20tree%3B%20there%20can%27t%20be%20any%20ties.%5Cn%5CnMore%20specifically%2C%20if%20%24%20X%20%24%20%28or%20%24%20Y%20%24%20%2C%20%24%20Z%20%24%20respectively%29%20maximizes%20the%20depth%2C%20the%20judge%20will%20respond%20with%20the%20string%20%5C%22X%5C%22%20%28or%20%5C%22Y%5C%22%2C%20%5C%22Z%5C%22%20respectively%29.%5Cn%5CnYou%20may%20only%20ask%20at%20most%20%24%2010%5Cu00b7n%20%24%20questions.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20will%20contain%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%203%3C%3Dn%3C%3D1000%20%24%20%29%20%5Cu2014%20the%20number%20of%20leaves%20in%20the%20tree.%22%2C%22outputFormat%22%3A%22To%20print%20the%20final%20answer%2C%20print%20out%20the%20string%20%5C%22-1%5C%22%20on%20its%20own%20line.%20Then%2C%20the%20next%20line%20should%20contain%20%24%202n-1%20%24%20integers.%20The%20%24%20i%20%24%20-th%20integer%20should%20be%20the%20parent%20of%20the%20%24%20i%20%24%20-th%20node%2C%20or%20-1%2C%20if%20it%20is%20the%20root.%5Cn%5CnYour%20answer%20will%20be%20judged%20correct%20if%20your%20output%20is%20isomorphic%20to%20the%20judge%27s%20tree.%20In%20particular%2C%20the%20labels%20of%20the%20leaves%20do%20not%20need%20to%20be%20labeled%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20Here%2C%20isomorphic%20means%20that%20there%20exists%20a%20permutation%20%24%20%5Cu03c0%20%24%20such%20that%20node%20%24%20i%20%24%20is%20the%20parent%20of%20node%20%24%20j%20%24%20in%20the%20judge%20tree%20if%20and%20only%20node%20%24%20%5Cu03c0%28i%29%20%24%20is%20the%20parent%20of%20node%20%24%20%5Cu03c0%28j%29%20%24%20in%20your%20tree.%5Cn%5CnInteraction%5Cn%5CnTo%20ask%20a%20question%2C%20print%20out%20three%20distinct%20integers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2Ca_%7B3%7D%20%24%20.%20These%20integers%20should%20be%20between%20%24%201%20%24%20and%20%24%20n%20%24%20%2C%20inclusive.%5Cn%5CnThe%20judge%20will%20respond%20with%20a%20single%20character%2C%20either%20%5C%22X%5C%22%2C%20%5C%22Y%5C%22%2C%20%5C%22Z%5C%22.%5Cn%5CnIf%20the%20string%20is%20%5C%22X%5C%22%20%28or%20%5C%22Y%5C%22%2C%20%5C%22Z%5C%22%20respectively%29%2C%20that%20means%20the%20pair%20%24%20%28a_%7B1%7D%2Ca_%7B2%7D%29%20%24%20%28or%20%24%20%28a_%7B2%7D%2Ca_%7B3%7D%29%20%24%20%2C%20%24%20%28a_%7B3%7D%2Ca_%7B1%7D%29%20%24%20respectively%29%20has%20the%20deepest%20%24%20LCA%20%24%20among%20the%20three%20pairs.%5Cn%5CnYou%20may%20only%20ask%20a%20question%20at%20most%20%24%2010%5Cu00b7n%20%24%20times%2C%20otherwise%2C%20you%20will%20get%20Wrong%20Answer.%5Cn%5CnWhen%20you%20are%20ready%20to%20answer%2C%20print%20out%20a%20single%20integer%20%5C%22-1%5C%22%20on%20its%20own%20line.%20The%20next%20line%20should%20contain%20%24%202n-1%20%24%20integers.%20The%20%24%20i%20%24%20-th%20integer%20should%20be%20the%20parent%20of%20the%20%24%20i%20%24%20-th%20node%2C%20or%20-1%2C%20if%20it%20is%20the%20root.%20Do%20not%20forget%20to%20flush%20the%20final%20answer%20as%20well.%20Printing%20the%20answer%20does%20not%20count%20as%20asking%20a%20question.%5Cn%5CnYou%20will%20get%20Wrong%20Answer%20verdict%20if%5Cn%5Cn-%20Your%20question%20or%20answers%20are%20not%20in%20the%20format%20described%20in%20this%20statement.%5Cn-%20You%20ask%20strictly%20more%20than%20%24%2010%5Cu00b7n%20%24%20questions.%5Cn-%20Your%20question%20contains%20duplicate%20indices.%5Cn-%20Your%20final%20answer%20is%20not%20isomorphic%20to%20the%20judge%20tree.%5Cn%5CnYou%20will%20get%20Idleness%20Limit%20Exceeded%20if%20you%20don%27t%20print%20anything%20or%20if%20you%20forget%20to%20flush%20the%20output%2C%20including%20for%20the%20final%20answer%20%28more%20info%20about%20flushing%20output%20below%29.%5Cn%5CnTo%20flush%20you%20can%20use%20%28just%20after%20printing%20an%20integer%20and%20end-of-line%29%3A%5Cn%5Cn-%20fflush%28stdout%29%20in%20C%2B%2B%3B%5Cn-%20System.out.flush%28%29%20in%20Java%3B%5Cn-%20stdout.flush%28%29%20in%20Python%3B%5Cn-%20flush%28output%29%20in%20Pascal%3B%5Cn-%20See%20the%20documentation%20for%20other%20languages.%5Cn%5CnIf%20at%20any%20moment%20your%20program%20reads%20-1%20as%20an%20answer%2C%20it%20should%20immediately%20exit%20normally%20%28for%20example%2C%20by%20calling%20exit%280%29%29.%20You%20will%20get%20Wrong%20Answer%20in%20this%20case%2C%20it%20means%20that%20you%20made%20more%20queries%20than%20allowed%2C%20or%20made%20an%20invalid%20query.%20If%20you%20ignore%20this%2C%20you%20can%20get%20other%20verdicts%20since%20your%20program%20will%20continue%20to%20read%20from%20a%20closed%20stream.%5Cn%5CnHacking%20To%20hack%20someone%2C%20use%20the%20following%20format%5Cn%5Cn%60%3Cbr%3E%3C%5C%2Fbr%3En%3Cbr%3E%3C%5C%2Fbr%3Ep_1%20p_2%20...%20p_%7B2n-1%7D%3Cbr%3E%3C%5C%2Fbr%3E%60This%20denotes%20a%20tree%20where%20the%20parent%20of%20the%20%24%20i%20%24%20-th%20node%20is%20%24%20p_%7Bi%7D%20%24%20%28%20%24%20p_%7Bi%7D%3D-1%20%24%20or%20%24%20n%26lt%3Bp_%7Bi%7D%3C%3D2n-1%20%24%20%29.%20If%20%24%20p_%7Bi%7D%20%24%20is%20equal%20to%20-1%2C%20then%20node%20%24%20i%20%24%20is%20the%20root.%20This%20input%20must%20describe%20a%20valid%20full%20rooted%20binary%20tree.%5Cn%5CnOf%20course%2C%20contestant%20programs%20will%20not%20be%20able%20to%20see%20this%20input.%22%2C%22samples%22%3A%5B%5B%225%5CnX%5CnZ%5CnY%5CnY%5CnX%3Cspan%20class%3D%5C%22tex-font-style-tt%5C%22%3E%3C%5C%2Fspan%3E%5Cn%22%2C%221%204%202%5Cn1%202%204%5Cn2%204%201%5Cn2%203%205%5Cn2%204%203%5Cn-1%5Cn-1%201%201%202%202%203%203%206%206%5Cn%22%5D%5D%2C%22hint%22%3A%22For%20the%20first%20sample%2C%20the%20judge%20has%20the%20hidden%20tree%3A%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF772E%5C%2F550dc6e0659ebed108890308ec1e94d047e35b62.png%29%5Cn%5CnHere%20is%20a%20more%20readable%20format%20of%20the%20interaction%3A%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF772E%5C%2F9ddbd13f110ece8cef510a2c9dbb4b4a4e303a41.png%29%20The%20last%20line%20can%20also%20be%208%206%209%208%209%207%20-1%206%207.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F772%5C%2FE%22%2C%22id%22%3A%22772E%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A32%2C%22totalAccepted%22%3A7%2C%22pid%22%3A%22CF772E%22%2C%22title%22%3A%22Verifying%20Kingdom%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Verifying%20Kingdom%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Verifying Kingdom</h1>
<h2>题目描述</h2>
<div>This is an interactive problem.
The judge has a hidden rooted full binary tree with $ n $ leaves. A full binary tree is one where every node has either $ 0 $ or $ 2 $ children. The nodes with $ 0 $ children are called the leaves of the tree. Since this is a full binary tree, there are exactly $ 2n-1 $ nodes in the tree. The leaves of the judge's tree has labels from $ 1 $ to $ n $ . You would like to reconstruct a tree that is isomorphic to the judge's tree. To do this, you can ask some questions.
A question consists of printing the label of three distinct leaves $ a_{1},a_{2},a_{3} $ . Let the depth of a node be the shortest distance from the node to the root of the tree. Let $ LCA(a,b) $ denote the node with maximum depth that is a common ancestor of the nodes $ a $ and $ b $ .
Consider $ X=LCA(a_{1},a_{2}),Y=LCA(a_{2},a_{3}),Z=LCA(a_{3},a_{1}) $ . The judge will tell you which one of $ X,Y,Z $ has the maximum depth. Note, this pair is uniquely determined since the tree is a binary tree; there can't be any ties.
More specifically, if $ X $ (or $ Y $ , $ Z $ respectively) maximizes the depth, the judge will respond with the string "X" (or "Y", "Z" respectively).
You may only ask at most $ 10·n $ questions.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input will contain a single integer $ n $ ( $ 3<=n<=1000 $ ) — the number of leaves in the tree.</div>
<h3>输出格式</h3>
<br />
<div>To print the final answer, print out the string "-1" on its own line. Then, the next line should contain $ 2n-1 $ integers. The $ i $ -th integer should be the parent of the $ i $ -th node, or -1, if it is the root.
Your answer will be judged correct if your output is isomorphic to the judge's tree. In particular, the labels of the leaves do not need to be labeled from $ 1 $ to $ n $ . Here, isomorphic means that there exists a permutation $ π $ such that node $ i $ is the parent of node $ j $ in the judge tree if and only node $ π(i) $ is the parent of node $ π(j) $ in your tree.
Interaction
To ask a question, print out three distinct integers $ a_{1},a_{2},a_{3} $ . These integers should be between $ 1 $ and $ n $ , inclusive.
The judge will respond with a single character, either "X", "Y", "Z".
If the string is "X" (or "Y", "Z" respectively), that means the pair $ (a_{1},a_{2}) $ (or $ (a_{2},a_{3}) $ , $ (a_{3},a_{1}) $ respectively) has the deepest $ LCA $ among the three pairs.
You may only ask a question at most $ 10·n $ times, otherwise, you will get Wrong Answer.
When you are ready to answer, print out a single integer "-1" on its own line. The next line should contain $ 2n-1 $ integers. The $ i $ -th integer should be the parent of the $ i $ -th node, or -1, if it is the root. Do not forget to flush the final answer as well. Printing the answer does not count as asking a question.
You will get Wrong Answer verdict if
- Your question or answers are not in the format described in this statement.
- You ask strictly more than $ 10·n $ questions.
- Your question contains duplicate indices.
- Your final answer is not isomorphic to the judge tree.
You will get Idleness Limit Exceeded if you don't print anything or if you forget to flush the output, including for the final answer (more info about flushing output below).
To flush you can use (just after printing an integer and end-of-line):
- fflush(stdout) in C++;
- System.out.flush() in Java;
- stdout.flush() in Python;
- flush(output) in Pascal;
- See the documentation for other languages.
If at any moment your program reads -1 as an answer, it should immediately exit normally (for example, by calling exit(0)). You will get Wrong Answer in this case, it means that you made more queries than allowed, or made an invalid query. If you ignore this, you can get other verdicts since your program will continue to read from a closed stream.
Hacking To hack someone, use the following format
`<br></br>n<br></br>p_1 p_2 ... p_{2n-1}<br></br>`This denotes a tree where the parent of the $ i $ -th node is $ p_{i} $ ( $ p_{i}=-1 $ or $ n&lt;p_{i}<=2n-1 $ ). If $ p_{i} $ is equal to -1, then node $ i $ is the root. This input must describe a valid full rooted binary tree.
Of course, contestant programs will not be able to see this input.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5
X
Z
Y
Y
X&lt;span class=&quot;tex-font-style-tt&quot;&gt;&lt;/span&gt;
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1 4 2
1 2 4
2 4 1
2 3 5
2 4 3
-1
-1 1 1 2 2 3 3 6 6
</code></pre>
<h2>说明</h2>
<div>For the first sample, the judge has the hidden tree:
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF772E/550dc6e0659ebed108890308ec1e94d047e35b62.png)
Here is a more readable format of the interaction:
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF772E/9ddbd13f110ece8cef510a2c9dbb4b4a4e303a41.png) The last line can also be 8 6 9 8 9 7 -1 6 7.</div>
</article>
</div>
</div>
</body>
</html>
