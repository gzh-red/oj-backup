<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Little Elephant and Broken Sorting - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573392126:xeP7KR3jzhU1/ZHWO1HsarVYOIbuILxRB13Hl/rYM5A=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22The%20Little%20Elephant%20loves%20permutations%20of%20integers%20from%20%24%201%20%24%20to%20%24%20n%20%24%20very%20much.%20But%20most%20of%20all%20he%20loves%20sorting%20them.%20To%20sort%20a%20permutation%2C%20the%20Little%20Elephant%20repeatedly%20swaps%20some%20elements.%20As%20a%20result%2C%20he%20must%20receive%20a%20permutation%20%24%201%2C2%2C3%2C...%2Cn%20%24%20.%5Cn%5CnThis%20time%20the%20Little%20Elephant%20has%20permutation%20%24%20p_%7B1%7D%2Cp_%7B2%7D%2C...%2Cp_%7Bn%7D%20%24%20.%20Its%20sorting%20program%20needs%20to%20make%20exactly%20%24%20m%20%24%20moves%2C%20during%20the%20%24%20i%20%24%20-th%20move%20it%20swaps%20elements%20that%20are%20at%20that%20moment%20located%20at%20the%20%24%20a_%7Bi%7D%20%24%20-th%20and%20the%20%24%20b_%7Bi%7D%20%24%20-th%20positions.%20But%20the%20Little%20Elephant%27s%20sorting%20program%20happened%20to%20break%20down%20and%20now%20on%20every%20step%20it%20can%20equiprobably%20either%20do%20nothing%20or%20swap%20the%20required%20elements.%5Cn%5CnNow%20the%20Little%20Elephant%20doesn%27t%20even%20hope%20that%20the%20program%20will%20sort%20the%20permutation%2C%20but%20he%20still%20wonders%3A%20if%20he%20runs%20the%20program%20and%20gets%20some%20permutation%2C%20how%20much%20will%20the%20result%20of%20sorting%20resemble%20the%20sorted%20one%3F%20For%20that%20help%20the%20Little%20Elephant%20find%20the%20mathematical%20expectation%20of%20the%20number%20of%20permutation%20inversions%20after%20all%20moves%20of%20the%20program%20are%20completed.%5Cn%5CnWe%27ll%20call%20a%20pair%20of%20integers%20%24%20i%2Cj%20%24%20%24%20%281%3C%3Di%3Cj%3C%3Dn%29%20%24%20an%20inversion%20in%20permutatuon%20%24%20p_%7B1%7D%2Cp_%7B2%7D%2C...%2Cp_%7Bn%7D%20%24%20%2C%20if%20the%20following%20inequality%20holds%3A%20%24%20p_%7Bi%7D%3Ep_%7Bj%7D%20%24%20.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%24%20%281%3C%3Dn%2Cm%3C%3D1000%2Cn%3E1%29%20%24%20%5Cu2014%20the%20permutation%20size%20and%20the%20number%20of%20moves.%20The%20second%20line%20contains%20%24%20n%20%24%20distinct%20integers%2C%20not%20exceeding%20%24%20n%20%24%20%5Cu2014%20the%20initial%20permutation.%20Next%20%24%20m%20%24%20lines%20each%20contain%20two%20integers%3A%20the%20%24%20i%20%24%20-th%20line%20contains%20integers%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20%24%20%281%3C%3Da_%7Bi%7D%2Cb_%7Bi%7D%3C%3Dn%2Ca_%7Bi%7D%5Cu2260b_%7Bi%7D%29%20%24%20%5Cu2014%20the%20positions%20of%20elements%20that%20were%20changed%20during%20the%20%24%20i%20%24%20-th%20move.%22%2C%22outputFormat%22%3A%22In%20the%20only%20line%20print%20a%20single%20real%20number%20%5Cu2014%20the%20answer%20to%20the%20problem.%20The%20answer%20will%20be%20considered%20correct%20if%20its%20relative%20or%20absolute%20error%20does%20not%20exceed%20%24%2010%5E%7B-6%7D%20%24%20.%22%2C%22samples%22%3A%5B%5B%222%201%5Cn1%202%5Cn1%202%5Cn%22%2C%220.500000000%5Cn%22%5D%2C%5B%224%203%5Cn1%203%202%204%5Cn1%202%5Cn2%203%5Cn1%204%5Cn%22%2C%223.000000000%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F258%5C%2FD%22%2C%22id%22%3A%22258D%22%7D%2C%22translation%22%3A%22%5Cu9898%5Cu610f%5Cn%5Cn%5Cu6709%5Cu4e00%5Cu4e2a%241%20%5C%5Csim%20n%24%5Cu7684%5Cu6392%5Cu5217%5Cuff0c%5Cu4f1a%5Cu8fdb%5Cu884cm%5Cu6b21%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu64cd%5Cu4f5c%5Cu4e3a%5Cu4ea4%5Cu6362a%2Cb%5Cu3002%5Cu6bcf%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu90fd%5Cu6709%2450%5C%5C%25%24%5Cu7684%5Cu6982%5Cu7387%5Cu8fdb%5Cu884c%5Cu3002%5Cn%5Cu6570%5Cu636e%5Cu8303%5Cu56f4%5Cn%5Cn%5Cu6c42%5Cu8fdb%5Cu884cm%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu4ee5%5Cu540e%5Cu7684%5Cu671f%5Cu671b%5Cu9006%5Cu5e8f%5Cu5bf9%5Cu4e2a%5Cu6570%5Cu3002%5Cn%5Cn%24n%2Cm%20%5C%5Cle%201000%24%5Cn%5CnTranslated%20by%20Youngsc%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A149%2C%22totalAccepted%22%3A97%2C%22pid%22%3A%22CF258D%22%2C%22title%22%3A%22Little%20Elephant%20and%20Broken%20Sorting%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A32379%2C%22title%22%3A%22Translation%22%2C%22forum%22%3A%7B%22id%22%3A11574%2C%22name%22%3A%22CF258D%20Little%20Elephant%20and%20Broken%20Sorting%22%2C%22slug%22%3A%22CF258D%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3478%22%2C%22title%22%3A%22%5BPOI2008%5DSTA-Station%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4109%22%2C%22title%22%3A%22%5BHEOI2015%5D%5Cu5b9a%5Cu4ef7%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF528D%22%2C%22title%22%3A%22Fuzzy%20Search%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF961G%22%2C%22title%22%3A%22Partitions%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22P4931%22%2C%22title%22%3A%22%5Cu60c5%5Cu4fa3%5Cuff1f%5Cu7ed9%5Cu6211%5Cu70e7%5Cu4e86%5Cuff01%5Cuff08%5Cu52a0%5Cu5f3a%5Cu7248%5Cuff09%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Little%20Elephant%20and%20Broken%20Sorting%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Little Elephant and Broken Sorting</h1>
<h2>题意翻译</h2>
<div>题意
有一个$1 \sim n$的排列，会进行m次操作，操作为交换a,b。每次操作都有$50\%$的概率进行。
数据范围
求进行m次操作以后的期望逆序对个数。
$n,m \le 1000$
Translated by Youngsc</div>
<h2>题目描述</h2>
<div>The Little Elephant loves permutations of integers from $ 1 $ to $ n $ very much. But most of all he loves sorting them. To sort a permutation, the Little Elephant repeatedly swaps some elements. As a result, he must receive a permutation $ 1,2,3,...,n $ .
This time the Little Elephant has permutation $ p_{1},p_{2},...,p_{n} $ . Its sorting program needs to make exactly $ m $ moves, during the $ i $ -th move it swaps elements that are at that moment located at the $ a_{i} $ -th and the $ b_{i} $ -th positions. But the Little Elephant's sorting program happened to break down and now on every step it can equiprobably either do nothing or swap the required elements.
Now the Little Elephant doesn't even hope that the program will sort the permutation, but he still wonders: if he runs the program and gets some permutation, how much will the result of sorting resemble the sorted one? For that help the Little Elephant find the mathematical expectation of the number of permutation inversions after all moves of the program are completed.
We'll call a pair of integers $ i,j $ $ (1<=i<j<=n) $ an inversion in permutatuon $ p_{1},p_{2},...,p_{n} $ , if the following inequality holds: $ p_{i}>p_{j} $ .</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ $ (1<=n,m<=1000,n>1) $ — the permutation size and the number of moves. The second line contains $ n $ distinct integers, not exceeding $ n $ — the initial permutation. Next $ m $ lines each contain two integers: the $ i $ -th line contains integers $ a_{i} $ and $ b_{i} $ $ (1<=a_{i},b_{i}<=n,a_{i}≠b_{i}) $ — the positions of elements that were changed during the $ i $ -th move.</div>
<h3>输出格式</h3>
<br />
<div>In the only line print a single real number — the answer to the problem. The answer will be considered correct if its relative or absolute error does not exceed $ 10^{-6} $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 1
1 2
1 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>0.500000000
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4 3
1 3 2 4
1 2
2 3
1 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>3.000000000
</code></pre>
</article>
</div>
</div>
</body>
</html>
