<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Yura and Developers - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395327:WRPn+CUKcHUn62mEd1T9te/qs2qvpMI/W51NQKYhX60=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Yura%20has%20a%20team%20of%20%24%20k%20%24%20developers%20and%20a%20list%20of%20%24%20n%20%24%20tasks%20numbered%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20Yura%20is%20going%20to%20choose%20some%20tasks%20to%20be%20done%20this%20week.%20Due%20to%20strange%20Looksery%20habits%20the%20numbers%20of%20chosen%20tasks%20should%20be%20a%20segment%20of%20consecutive%20integers%20containing%20no%20less%20than%202%20numbers%2C%20i.%20e.%20a%20sequence%20of%20form%20%24%20l%2Cl%2B1%2C...%2Cr%20%24%20for%20some%20%24%201%3C%3Dl%26lt%3Br%3C%3Dn%20%24%20.%5Cn%5CnEvery%20task%20%24%20i%20%24%20has%20an%20integer%20number%20%24%20a_%7Bi%7D%20%24%20associated%20with%20it%20denoting%20how%20many%20man-hours%20are%20required%20to%20complete%20the%20%24%20i%20%24%20-th%20task.%20Developers%20are%20not%20self-confident%20at%20all%2C%20and%20they%20are%20actually%20afraid%20of%20difficult%20tasks.%20Knowing%20that%2C%20Yura%20decided%20to%20pick%20up%20a%20hardest%20task%20%28the%20one%20that%20takes%20the%20biggest%20number%20of%20man-hours%20to%20be%20completed%2C%20among%20several%20hardest%20tasks%20with%20same%20difficulty%20level%20he%20chooses%20arbitrary%20one%29%20and%20complete%20it%20on%20his%20own.%20So%2C%20if%20tasks%20with%20numbers%20%24%20%5Bl%2Cr%5D%20%24%20are%20chosen%20then%20the%20developers%20are%20left%20with%20%24%20r-l%20%24%20tasks%20to%20be%20done%20by%20themselves.%5Cn%5CnEvery%20developer%20can%20spend%20any%20integer%20amount%20of%20hours%20over%20any%20task%2C%20but%20when%20they%20are%20done%20with%20the%20whole%20assignment%20there%20should%20be%20exactly%20%24%20a_%7Bi%7D%20%24%20man-hours%20spent%20over%20the%20%24%20i%20%24%20-th%20task.%5Cn%5CnThe%20last%2C%20but%20not%20the%20least%20problem%20with%20developers%20is%20that%20one%20gets%20angry%20if%20he%20works%20more%20than%20another%20developer.%20A%20set%20of%20tasks%20%24%20%5Bl%2Cr%5D%20%24%20is%20considered%20good%20if%20it%20is%20possible%20to%20find%20such%20a%20distribution%20of%20work%20that%20allows%20to%20complete%20all%20the%20tasks%20and%20to%20have%20every%20developer%20working%20for%20the%20same%20amount%20of%20time%20%28amount%20of%20work%20performed%20by%20Yura%20doesn%27t%20matter%20for%20other%20workers%20as%20well%20as%20for%20him%29.%5Cn%5CnFor%20example%2C%20let%27s%20suppose%20that%20Yura%20have%20chosen%20tasks%20with%20following%20difficulties%3A%20%24%20a%3D%5B1%2C2%2C3%2C4%5D%20%24%20%2C%20and%20he%20has%20three%20developers%20in%20his%20disposal.%20He%20takes%20the%20hardest%20fourth%20task%20to%20finish%20by%20himself%2C%20and%20the%20developers%20are%20left%20with%20tasks%20with%20difficulties%20%24%20%5B1%2C2%2C3%5D%20%24%20.%20If%20the%20first%20one%20spends%20an%20hour%20on%20the%20first%20task%20and%20an%20hour%20on%20the%20third%20one%2C%20the%20second%20developer%20spends%20two%20hours%20on%20the%20second%20task%20and%20the%20third%20developer%20spends%20two%20hours%20on%20the%20third%20task%2C%20then%20they%20are%20done%2C%20since%20every%20developer%20worked%20exactly%20for%20two%20hours%20and%20every%20task%20has%20been%20worked%20over%20for%20the%20required%20amount%20of%20time.%20As%20another%20example%2C%20if%20the%20first%20task%20required%20two%20hours%20instead%20of%20one%20to%20be%20completed%20then%20it%20would%20be%20impossible%20to%20assign%20the%20tasks%20in%20a%20way%20described%20above.%5Cn%5CnBesides%20work%2C%20Yura%20is%20fond%20of%20problem%20solving.%20He%20wonders%20how%20many%20pairs%20%24%20%28l%2Cr%29%20%24%20%28%20%24%201%3C%3Dl%26lt%3Br%3C%3Dn%20%24%20%29%20exists%20such%20that%20a%20segment%20%24%20%5Bl%2Cr%5D%20%24%20is%20good%3F%20Yura%20has%20already%20solved%20this%20problem%2C%20but%20he%20has%20no%20time%20to%20write%20the%20code.%20Please%2C%20help%20Yura%20and%20implement%20the%20solution%20for%20this%20problem.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20contains%20two%20positive%20integers%3A%20%24%20n%20%24%20and%20%24%20k%20%24%20%24%20%281%3C%3Dn%3C%3D300000%2C1%3C%3Dk%3C%3D1000000%29%20%24%20%2C%20the%20number%20of%20tasks%20in%20the%20list%20and%20the%20number%20of%20developers%20in%20Yura%27s%20disposal.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%3C%3D10%5E%7B9%7D%20%24%20%29.%22%2C%22outputFormat%22%3A%22Output%20a%20single%20integer%20%5Cu2014%20the%20number%20of%20pairs%20%24%20%28l%2Cr%29%20%24%20satisfying%20the%20conditions%20from%20the%20statement.%22%2C%22samples%22%3A%5B%5B%224%203%5Cn1%202%203%204%5Cn%22%2C%223%5Cn%22%5D%2C%5B%224%202%5Cn4%204%207%204%5Cn%22%2C%226%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%20there%20are%20three%20good%20segments%3A%5Cn%5Cn1.%20%24%20%5B1%3B3%5D%20%24%20%5Cu2014%20the%20hardest%20task%20requires%20%24%203%20%24%20man-hours%2C%20so%20there%20are%20tasks%20left%20that%20require%20%24%201%20%24%20and%20%24%202%20%24%20man-hours.%20A%20solution%20is%20to%20make%20first%20developer%20work%20on%20the%20first%20task%20for%20an%20hour%2C%20while%20second%20and%20third%20developers%20work%20on%20the%20second%20task.%20Each%20developer%20works%20exactly%20one%20hour.%5Cn2.%20%24%20%5B1%3B4%5D%20%24%20%5Cu2014%20the%20hardest%20task%20requires%20%24%204%20%24%20man-hours%2C%20so%20there%20are%20tasks%20left%20that%20require%20%24%201%20%24%20%2C%20%24%202%20%24%20and%20%24%203%20%24%20man-hours.%20If%20the%20first%20developer%20spends%20an%20hour%20on%20the%20first%20task%20and%20an%20hour%20on%20the%20third%20one%2C%20the%20second%20developer%20spends%20two%20hours%20on%20the%20second%20task%20and%20the%20third%20developer%20spends%20two%20hours%20on%20the%20third%20task%2C%20then%20they%20are%20done%2C%20since%20every%20developer%20worked%20exactly%20for%20two%20hours.%5Cn3.%20%24%20%5B3%3B4%5D%20%24%20%5Cu2014%20the%20hardest%20task%20requires%20%24%204%20%24%20man-hours%2C%20so%20there%20is%20only%20one%20task%20left%20that%20requires%20%24%203%20%24%20man-hours.%20A%20solution%20is%20to%20make%20each%20developer%20work%20for%20an%20hour.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F549%5C%2FF%22%2C%22id%22%3A%22549F%22%7D%2C%22translation%22%3A%22%5Cu6709%5Cu4e00%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu4e3a%24n%24%5Cu7684%5Cu6570%5Cu7ec4%24a%24%5Cuff0c%5Cu73b0%5Cu5728%5Cu8981%5Cu627e%5Cu4e00%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu81f3%5Cu5c11%5Cu4e3a%242%24%5Cu7684%5Cu5b50%5Cu6bb5%5Cu3002%5Cn%5Cn%5Cu8981%5Cu6c42%5Cu8fd9%5Cu4e00%5Cu5b50%5Cu6bb5%5Cu7684%5Cu548c%5Cu51cf%5Cu53bb%5Cu6700%5Cu5927%5Cu503c%5Cuff0c%5Cu5bf9%24k%24%5Cu53d6%5Cu4f59%5Cu7ed3%5Cu679c%5Cu4e3a0%5Cu3002%5Cn%5Cu95ee%5Cu8fd9%5Cu6837%5Cu7684%5Cu5b50%5Cu6bb5%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu3002%5Cn%5Cn%241%5Cu2264n%5Cu22643%2A10%5E5%24%5Cn%5Cn%241%5Cu2264k%5Cu226410%5E6%24%5Cn%5Cn%241%5Cu2264a_i%5Cu226410%5E9%24%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A53%2C%22totalAccepted%22%3A28%2C%22pid%22%3A%22CF549F%22%2C%22title%22%3A%22Yura%20and%20Developers%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A65790%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A10468%2C%22name%22%3A%22CF549F%20Yura%20and%20Developers%22%2C%22slug%22%3A%22CF549F%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3583%22%2C%22title%22%3A%22%5BPOI2015%5DKWA%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF888E%22%2C%22title%22%3A%22Maximum%20Subsequence%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF875D%22%2C%22title%22%3A%22High%20Cry%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF827D%22%2C%22title%22%3A%22Best%20Edge%20Weight%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF521D%22%2C%22title%22%3A%22Shop%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Yura%20and%20Developers%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Yura and Developers</h1>
<h2>题意翻译</h2>
<div>有一个长度为$n$的数组$a$，现在要找一个长度至少为$2$的子段。
要求这一子段的和减去最大值，对$k$取余结果为0。
问这样的子段有多少个。
$1≤n≤3*10^5$
$1≤k≤10^6$
$1≤a_i≤10^9$</div>
<h2>题目描述</h2>
<div>Yura has a team of $ k $ developers and a list of $ n $ tasks numbered from $ 1 $ to $ n $ . Yura is going to choose some tasks to be done this week. Due to strange Looksery habits the numbers of chosen tasks should be a segment of consecutive integers containing no less than 2 numbers, i. e. a sequence of form $ l,l+1,...,r $ for some $ 1<=l&lt;r<=n $ .
Every task $ i $ has an integer number $ a_{i} $ associated with it denoting how many man-hours are required to complete the $ i $ -th task. Developers are not self-confident at all, and they are actually afraid of difficult tasks. Knowing that, Yura decided to pick up a hardest task (the one that takes the biggest number of man-hours to be completed, among several hardest tasks with same difficulty level he chooses arbitrary one) and complete it on his own. So, if tasks with numbers $ [l,r] $ are chosen then the developers are left with $ r-l $ tasks to be done by themselves.
Every developer can spend any integer amount of hours over any task, but when they are done with the whole assignment there should be exactly $ a_{i} $ man-hours spent over the $ i $ -th task.
The last, but not the least problem with developers is that one gets angry if he works more than another developer. A set of tasks $ [l,r] $ is considered good if it is possible to find such a distribution of work that allows to complete all the tasks and to have every developer working for the same amount of time (amount of work performed by Yura doesn't matter for other workers as well as for him).
For example, let's suppose that Yura have chosen tasks with following difficulties: $ a=[1,2,3,4] $ , and he has three developers in his disposal. He takes the hardest fourth task to finish by himself, and the developers are left with tasks with difficulties $ [1,2,3] $ . If the first one spends an hour on the first task and an hour on the third one, the second developer spends two hours on the second task and the third developer spends two hours on the third task, then they are done, since every developer worked exactly for two hours and every task has been worked over for the required amount of time. As another example, if the first task required two hours instead of one to be completed then it would be impossible to assign the tasks in a way described above.
Besides work, Yura is fond of problem solving. He wonders how many pairs $ (l,r) $ ( $ 1<=l&lt;r<=n $ ) exists such that a segment $ [l,r] $ is good? Yura has already solved this problem, but he has no time to write the code. Please, help Yura and implement the solution for this problem.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input contains two positive integers: $ n $ and $ k $ $ (1<=n<=300000,1<=k<=1000000) $ , the number of tasks in the list and the number of developers in Yura's disposal.
The second line contains $ n $ integers $ a_{i} $ ( $ 1<=a_{i}<=10^{9} $ ).</div>
<h3>输出格式</h3>
<br />
<div>Output a single integer — the number of pairs $ (l,r) $ satisfying the conditions from the statement.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 3
1 2 3 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4 2
4 4 7 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>6
</code></pre>
<h2>说明</h2>
<div>In the first sample there are three good segments:
1. $ [1;3] $ — the hardest task requires $ 3 $ man-hours, so there are tasks left that require $ 1 $ and $ 2 $ man-hours. A solution is to make first developer work on the first task for an hour, while second and third developers work on the second task. Each developer works exactly one hour.
2. $ [1;4] $ — the hardest task requires $ 4 $ man-hours, so there are tasks left that require $ 1 $ , $ 2 $ and $ 3 $ man-hours. If the first developer spends an hour on the first task and an hour on the third one, the second developer spends two hours on the second task and the third developer spends two hours on the third task, then they are done, since every developer worked exactly for two hours.
3. $ [3;4] $ — the hardest task requires $ 4 $ man-hours, so there is only one task left that requires $ 3 $ man-hours. A solution is to make each developer work for an hour.</div>
</article>
</div>
</div>
</body>
</html>
