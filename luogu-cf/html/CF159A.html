<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Friends or Not - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573391268:V8/GBnZ/X8whqn3lCU1w3ObxNDH/POHFOwimLWuDcTg=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Polycarpus%20has%20a%20hobby%20%5Cu2014%20he%20develops%20an%20unusual%20social%20network.%20His%20work%20is%20almost%20completed%2C%20and%20there%20is%20only%20one%20more%20module%20to%20implement%20%5Cu2014%20the%20module%20which%20determines%20friends.%20Oh%20yes%2C%20in%20this%20social%20network%20one%20won%27t%20have%20to%20add%20friends%20manually%21%20Pairs%20of%20friends%20are%20deduced%20in%20the%20following%20way.%20Let%27s%20assume%20that%20user%20%24%20A%20%24%20sent%20user%20%24%20B%20%24%20a%20message%20at%20time%20%24%20t_%7B1%7D%20%24%20%2C%20and%20user%20%24%20B%20%24%20sent%20user%20%24%20A%20%24%20a%20message%20at%20time%20%24%20t_%7B2%7D%20%24%20.%20If%20%24%200%26lt%3Bt_%7B2%7D-t_%7B1%7D%3C%3Dd%20%24%20%2C%20then%20user%20%24%20B%20%24%20%27s%20message%20was%20an%20answer%20to%20user%20%24%20A%20%24%20%27s%20one.%20Users%20%24%20A%20%24%20and%20%24%20B%20%24%20are%20considered%20to%20be%20friends%20if%20%24%20A%20%24%20answered%20at%20least%20one%20%24%20B%20%24%20%27s%20message%20or%20%24%20B%20%24%20answered%20at%20least%20one%20%24%20A%20%24%20%27s%20message.%5Cn%5CnYou%20are%20given%20the%20log%20of%20messages%20in%20chronological%20order%20and%20a%20number%20%24%20d%20%24%20.%20Find%20all%20pairs%20of%20users%20who%20will%20be%20considered%20to%20be%20friends.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20d%20%24%20%28%20%24%201%3C%3Dn%2Cd%3C%3D1000%20%24%20%29.%20The%20next%20%24%20n%20%24%20lines%20contain%20the%20messages%20log.%20The%20%24%20i%20%24%20-th%20line%20contains%20one%20line%20of%20the%20log%20formatted%20as%20%5C%22%20%24%20A_%7Bi%7D%20%24%20%24%20B_%7Bi%7D%20%24%20%24%20t_%7Bi%7D%20%24%20%5C%22%20%28without%20the%20quotes%29%2C%20which%20means%20that%20user%20%24%20A_%7Bi%7D%20%24%20sent%20a%20message%20to%20user%20%24%20B_%7Bi%7D%20%24%20at%20time%20%24%20t_%7Bi%7D%20%24%20%28%20%24%201%3C%3Di%3C%3Dn%20%24%20%29.%20%24%20A_%7Bi%7D%20%24%20and%20%24%20B_%7Bi%7D%20%24%20are%20non-empty%20strings%20at%20most%20%24%2020%20%24%20characters%20long%2C%20consisting%20of%20lowercase%20letters%20%28%27a%27%20...%20%27z%27%29%2C%20and%20%24%20t_%7Bi%7D%20%24%20is%20an%20integer%20%28%20%24%200%3C%3Dt_%7Bi%7D%3C%3D10000%20%24%20%29.%20It%20is%20guaranteed%20that%20the%20lines%20are%20given%20in%20non-decreasing%20order%20of%20%24%20t_%7Bi%7D%20%24%20%27s%20and%20that%20no%20user%20sent%20a%20message%20to%20himself.%20The%20elements%20in%20the%20lines%20are%20separated%20by%20single%20spaces.%22%2C%22outputFormat%22%3A%22In%20the%20first%20line%20print%20integer%20%24%20k%20%24%20%5Cu2014%20the%20number%20of%20pairs%20of%20friends.%20In%20the%20next%20%24%20k%20%24%20lines%20print%20pairs%20of%20friends%20as%20%5C%22%20%24%20A_%7Bi%7D%20%24%20%24%20B_%7Bi%7D%20%24%20%5C%22%20%28without%20the%20quotes%29.%20You%20can%20print%20users%20in%20pairs%20and%20the%20pairs%20themselves%20in%20any%20order.%20Each%20pair%20must%20be%20printed%20exactly%20once.%22%2C%22samples%22%3A%5B%5B%224%201%5Cnvasya%20petya%201%5Cnpetya%20vasya%202%5Cnanya%20ivan%202%5Cnivan%20anya%204%5Cn%22%2C%221%5Cnpetya%20vasya%5Cn%22%5D%2C%5B%221%201000%5Cna%20b%200%5Cn%22%2C%220%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%20test%20case%20Vasya%20and%20Petya%20are%20friends%20because%20their%20messages%27%20sending%20times%20are%20one%20second%20apart.%20Anya%20and%20Ivan%20are%20not%2C%20because%20their%20messages%27%20sending%20times%20differ%20by%20more%20than%20one%20second.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F159%5C%2FA%22%2C%22id%22%3A%22159A%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A1%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF159A%22%2C%22title%22%3A%22Friends%20or%20Not%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Friends%20or%20Not%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Friends or Not</h1>
<h2>题目描述</h2>
<div>Polycarpus has a hobby — he develops an unusual social network. His work is almost completed, and there is only one more module to implement — the module which determines friends. Oh yes, in this social network one won't have to add friends manually! Pairs of friends are deduced in the following way. Let's assume that user $ A $ sent user $ B $ a message at time $ t_{1} $ , and user $ B $ sent user $ A $ a message at time $ t_{2} $ . If $ 0&lt;t_{2}-t_{1}<=d $ , then user $ B $ 's message was an answer to user $ A $ 's one. Users $ A $ and $ B $ are considered to be friends if $ A $ answered at least one $ B $ 's message or $ B $ answered at least one $ A $ 's message.
You are given the log of messages in chronological order and a number $ d $ . Find all pairs of users who will be considered to be friends.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains two integers $ n $ and $ d $ ( $ 1<=n,d<=1000 $ ). The next $ n $ lines contain the messages log. The $ i $ -th line contains one line of the log formatted as " $ A_{i} $ $ B_{i} $ $ t_{i} $ " (without the quotes), which means that user $ A_{i} $ sent a message to user $ B_{i} $ at time $ t_{i} $ ( $ 1<=i<=n $ ). $ A_{i} $ and $ B_{i} $ are non-empty strings at most $ 20 $ characters long, consisting of lowercase letters ('a' ... 'z'), and $ t_{i} $ is an integer ( $ 0<=t_{i}<=10000 $ ). It is guaranteed that the lines are given in non-decreasing order of $ t_{i} $ 's and that no user sent a message to himself. The elements in the lines are separated by single spaces.</div>
<h3>输出格式</h3>
<br />
<div>In the first line print integer $ k $ — the number of pairs of friends. In the next $ k $ lines print pairs of friends as " $ A_{i} $ $ B_{i} $ " (without the quotes). You can print users in pairs and the pairs themselves in any order. Each pair must be printed exactly once.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 1
vasya petya 1
petya vasya 2
anya ivan 2
ivan anya 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
petya vasya
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>1 1000
a b 0
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>0
</code></pre>
<h2>说明</h2>
<div>In the first sample test case Vasya and Petya are friends because their messages' sending times are one second apart. Anya and Ivan are not, because their messages' sending times differ by more than one second.</div>
</article>
</div>
</div>
</body>
</html>
