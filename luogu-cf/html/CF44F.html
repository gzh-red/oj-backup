<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>BerPaint - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573390252:EwC2PDNC7U20p8Q0NsrayCNQ32ovw95UAPqfFj6yldA=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Anfisa%20the%20monkey%20got%20disappointed%20in%20word%20processors%20as%20they%20aren%27t%20good%20enough%20at%20reflecting%20all%20the%20range%20of%20her%20emotions%2C%20that%27s%20why%20she%20decided%20to%20switch%20to%20graphics%20editors.%20Having%20opened%20the%20BerPaint%2C%20she%20saw%20a%20white%20rectangle%20%24%20W%5Cu00d7H%20%24%20in%20size%20which%20can%20be%20painted%20on.%20First%20Anfisa%20learnt%20to%20navigate%20the%20drawing%20tool%20which%20is%20used%20to%20paint%20segments%20and%20quickly%20painted%20on%20that%20rectangle%20a%20certain%20number%20of%20black-colored%20segments.%20The%20resulting%20picture%20didn%27t%20seem%20bright%20enough%20to%20Anfisa%2C%20that%27s%20why%20she%20turned%20her%20attention%20to%20the%20%5C%22fill%5C%22%20tool%20which%20is%20used%20to%20find%20a%20point%20on%20the%20rectangle%20to%20paint%20and%20choose%20a%20color%2C%20after%20which%20all%20the%20area%20which%20is%20the%20same%20color%20as%20the%20point%20it%20contains%2C%20is%20completely%20painted%20the%20chosen%20color.%20Having%20applied%20the%20fill%20several%20times%2C%20Anfisa%20expressed%20her%20emotions%20completely%20and%20stopped%20painting.%20Your%20task%20is%20by%20the%20information%20on%20the%20painted%20segments%20and%20applied%20fills%20to%20find%20out%20for%20every%20color%20the%20total%20area%20of%20the%20areas%20painted%20this%20color%20after%20all%20the%20fills.%22%2C%22inputFormat%22%3A%22The%20first%20input%20line%20has%20two%20integers%20%24%20W%20%24%20and%20%24%20H%20%24%20%28%20%24%203%3C%3DW%2CH%3C%3D10%5E%7B4%7D%20%24%20%29%20%5Cu2014%20the%20sizes%20of%20the%20initially%20white%20rectangular%20painting%20area.%20The%20second%20line%20contains%20integer%20%24%20n%20%24%20%5Cu2014%20the%20number%20of%20black%20segments%20%28%20%24%200%3C%3Dn%3C%3D100%20%24%20%29.%20On%20the%20next%20%24%20n%20%24%20lines%20are%20described%20the%20segments%20themselves%2C%20each%20of%20which%20is%20given%20by%20coordinates%20of%20their%20endpoints%20%24%20x_%7B1%7D%2Cy_%7B1%7D%2Cx_%7B2%7D%2Cy_%7B2%7D%20%24%20%28%20%24%200%26lt%3Bx_%7B1%7D%2Cx_%7B2%7D%26lt%3BW%2C0%26lt%3By_%7B1%7D%2Cy_%7B2%7D%26lt%3BH%20%24%20%29.%20All%20segments%20have%20non-zero%20length.%20The%20next%20line%20contains%20preset%20number%20of%20fills%20%24%20m%20%24%20%28%20%24%200%3C%3Dm%3C%3D100%20%24%20%29.%20Each%20of%20the%20following%20%24%20m%20%24%20lines%20defines%20the%20fill%20operation%20in%20the%20form%20of%20%5C%22%20%24%20x%20%24%20%24%20y%20%24%20%24%20color%20%24%20%5C%22%2C%20where%20%24%20%28x%2Cy%29%20%24%20are%20the%20coordinates%20of%20the%20chosen%20point%20%28%20%24%200%26lt%3Bx%26lt%3BW%2C0%26lt%3By%26lt%3BH%20%24%20%29%2C%20and%20%24%20color%20%24%20%5Cu2014%20a%20line%20of%20lowercase%20Latin%20letters%20from%201%20to%2015%20symbols%20in%20length%2C%20determining%20the%20color.%20All%20coordinates%20given%20in%20the%20input%20are%20integers.%20Initially%20the%20rectangle%20is%20%5C%22white%5C%22%20in%20color%2C%20whereas%20the%20segments%20are%20drawn%20%5C%22black%5C%22%20in%20color.%22%2C%22outputFormat%22%3A%22For%20every%20color%20present%20in%20the%20final%20picture%20print%20on%20the%20single%20line%20the%20name%20of%20the%20color%20and%20the%20total%20area%20of%20areas%20painted%20that%20color%20with%20an%20accuracy%20of%20%24%2010%5E%7B-6%7D%20%24%20.%20Print%20the%20colors%20in%20any%20order.%22%2C%22samples%22%3A%5B%5B%224%205%5Cn6%5Cn1%201%201%203%5Cn1%203%203%203%5Cn3%203%203%201%5Cn3%201%201%201%5Cn1%203%203%201%5Cn1%201%203%203%5Cn2%5Cn2%201%20red%5Cn2%202%20blue%5Cn%22%2C%22blue%200.00000000%5Cnwhite%2020.00000000%5Cn%22%5D%2C%5B%225%205%5Cn5%5Cn1%201%202%202%5Cn2%202%204%202%5Cn4%202%204%204%5Cn4%204%202%204%5Cn2%204%202%202%5Cn2%5Cn3%203%20black%5Cn3%203%20green%5Cn%22%2C%22green%204.00000000%5Cnwhite%2021.00000000%5Cn%22%5D%2C%5B%227%204%5Cn9%5Cn1%202%202%203%5Cn2%203%203%202%5Cn3%202%202%201%5Cn2%201%201%202%5Cn3%202%204%202%5Cn4%202%205%203%5Cn5%203%206%202%5Cn6%202%205%201%5Cn5%201%204%202%5Cn2%5Cn2%202%20black%5Cn2%202%20red%5Cn%22%2C%22red%202.00000000%5Cnwhite%2026.00000000%5Cn%22%5D%5D%2C%22hint%22%3A%22Initially%20the%20black%20segments%20painted%20by%20Anfisa%20can%20also%20be%20painted%20a%20color%20if%20any%20of%20the%20chosen%20points%20lays%20on%20the%20segment.%20The%20segments%20have%20areas%20equal%20to%200.%20That%20is%20why%20if%20in%20the%20final%20picture%20only%20parts%20of%20segments%20is%20painted%20some%20color%2C%20then%20the%20area%2C%20painted%20the%20color%20is%20equal%20to%200.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B5000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F44%5C%2FF%22%2C%22id%22%3A%2244F%22%7D%2C%22translation%22%3A%22%5Cu7334%5Cu5b50Anfisa%5Cu5bf9%5Cu4e8e%5Cu6587%5Cu5b57%5Cu5904%5Cu7406%5Cu5668%5Cu5df2%5Cu7ecf%5Cu5931%5Cu671b%5Cu900f%5Cu9876%5Cu4e86%5Cuff0c%5Cu56e0%5Cu4e3a%5Cu5b83%5Cu4e0d%5Cu80fd%5Cu5f88%5Cu597d%5Cu53cd%5Cu5e94Anfisa%5Cu60c5%5Cu7eea%5Cu7684%5Cu6ce2%5Cu52a8%5Cu3002%20%5Cu8fd9%5Cu5c31%5Cu662f%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu5979%5Cu8981%5Cu5207%5Cu6362%5Cu5230%5Cu56fe%5Cu5f62%5Cu7f16%5Cu8f91%5Cu5668%5Cu6253%5Cu5f00%5Cu7f16%5Cu8f91%5Cu5668%5Cuff0c%5Cu5979%5Cu770b%5Cu5230%5Cu6709%5Cu4e00%5Cu4e2a%5Cu5c3a%5Cu5bf8%5Cu4e3aW%2AH%5Cu7684%5Cu7ed8%5Cu56fe%5Cu677f%5Cuff0c%20%5Cu8d77%5Cu521d%5Cu5979%5Cu5b66%5Cu4e60%5Cu4f7f%5Cu7528%5Cu753b%5Cu56fe%5Cu5de5%5Cu5177%5Cu6765%5Cu6d82%5Cu989c%5Cu6599%5Cu5757%5Cuff0c%5Cu5e76%5Cu5f88%5Cu5feb%5Cu5728%5Cu753b%5Cu677f%5Cu4e0a%5Cu753b%5Cu51fa%5Cu4e00%5Cu5b9a%5Cu6570%5Cu91cf%5Cu7684%5Cu989c%5Cu6599%5Cu5757%5Cuff0c%20%5Cu8fd9%5Cu4e9b%5Cu6700%5Cu7ec8%5Cu7684%5Cu56fe%5Cu50cf%5Cu5bf9Anfisa%5Cu6765%5Cu8bf4%5Cu4e0d%5Cu591f%5Cu660e%5Cu4eae%5Cuff0c%5Cu8fd9%5Cu4e5f%5Cu5c31%5Cu662f%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu5979%5Cu628a%5Cu6ce8%5Cu610f%5Cu529b%5Cu8f6c%5Cu5411%5Cu201c%5Cu586b%5Cu6d82%5Cu201d%5Cu5de5%5Cu5177%5Cu4e0a%5Cu3002%20%5Cu8fd9%5Cu662f%5Cu4e00%5Cu79cd%5Cu5728%5Cu753b%5Cu677f%5Cu4e0a%5Cu7ed8%5Cu753b%5Cu548c%5Cu9009%5Cu8272%5Cu7684%5Cu5de5%5Cu5177%5Cu5728%5Cu586b%5Cu5145%5Cu8fd9%5Cu5f20%5Cu56fe%5Cu597d%5Cu51e0%5Cu6b21%5Cu540e%5Cuff0cAnfisa%5Cu5b8c%5Cu5168%5Cu660e%5Cu767d%5Cu4e86%5Cu81ea%5Cu5df1%5Cu7684%5Cu60c5%5Cu611f%20%5Cu5e76%5Cu505c%5Cu6b62%5Cu4f5c%5Cu753b%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4f60%5Cu7684%5Cu4efb%5Cu52a1%5Cu662f%5Cu6839%5Cu636e%5Cu753b%5Cu4e0a%5Cu7684%5Cu989c%5Cu8272%5Cu4fe1%5Cu606f%5Cu6bb5%5Cu8ba1%5Cu7b97%5Cu51fa%5Cu6bcf%5Cu79cd%5Cu989c%5Cu8272%5Cu586b%5Cu5145%5Cu533a%5Cu57df%5Cu7684%5Cu603b%5Cu9762%5Cu79ef%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF44F%22%2C%22title%22%3A%22BerPaint%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A69379%2C%22title%22%3A%22%5Cu624b%5Cu52a8%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12489%2C%22name%22%3A%22CF44F%20BerPaint%22%2C%22slug%22%3A%22CF44F%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22BerPaint%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>BerPaint</h1>
<h2>题意翻译</h2>
<div>猴子Anfisa对于文字处理器已经失望透顶了，因为它不能很好反应Anfisa情绪的波动。 这就是为什么她要切换到图形编辑器打开编辑器，她看到有一个尺寸为W*H的绘图板， 起初她学习使用画图工具来涂颜料块，并很快在画板上画出一定数量的颜料块， 这些最终的图像对Anfisa来说不够明亮，这也就是为什么她把注意力转向“填涂”工具上。 这是一种在画板上绘画和选色的工具在填充这张图好几次后，Anfisa完全明白了自己的情感 并停止作画。
你的任务是根据画上的颜色信息段计算出每种颜色填充区域的总面积。</div>
<h2>题目描述</h2>
<div>Anfisa the monkey got disappointed in word processors as they aren't good enough at reflecting all the range of her emotions, that's why she decided to switch to graphics editors. Having opened the BerPaint, she saw a white rectangle $ W×H $ in size which can be painted on. First Anfisa learnt to navigate the drawing tool which is used to paint segments and quickly painted on that rectangle a certain number of black-colored segments. The resulting picture didn't seem bright enough to Anfisa, that's why she turned her attention to the "fill" tool which is used to find a point on the rectangle to paint and choose a color, after which all the area which is the same color as the point it contains, is completely painted the chosen color. Having applied the fill several times, Anfisa expressed her emotions completely and stopped painting. Your task is by the information on the painted segments and applied fills to find out for every color the total area of the areas painted this color after all the fills.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first input line has two integers $ W $ and $ H $ ( $ 3<=W,H<=10^{4} $ ) — the sizes of the initially white rectangular painting area. The second line contains integer $ n $ — the number of black segments ( $ 0<=n<=100 $ ). On the next $ n $ lines are described the segments themselves, each of which is given by coordinates of their endpoints $ x_{1},y_{1},x_{2},y_{2} $ ( $ 0&lt;x_{1},x_{2}&lt;W,0&lt;y_{1},y_{2}&lt;H $ ). All segments have non-zero length. The next line contains preset number of fills $ m $ ( $ 0<=m<=100 $ ). Each of the following $ m $ lines defines the fill operation in the form of " $ x $ $ y $ $ color $ ", where $ (x,y) $ are the coordinates of the chosen point ( $ 0&lt;x&lt;W,0&lt;y&lt;H $ ), and $ color $ — a line of lowercase Latin letters from 1 to 15 symbols in length, determining the color. All coordinates given in the input are integers. Initially the rectangle is "white" in color, whereas the segments are drawn "black" in color.</div>
<h3>输出格式</h3>
<br />
<div>For every color present in the final picture print on the single line the name of the color and the total area of areas painted that color with an accuracy of $ 10^{-6} $ . Print the colors in any order.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 5
6
1 1 1 3
1 3 3 3
3 3 3 1
3 1 1 1
1 3 3 1
1 1 3 3
2
2 1 red
2 2 blue
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>blue 0.00000000
white 20.00000000
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5 5
5
1 1 2 2
2 2 4 2
4 2 4 4
4 4 2 4
2 4 2 2
2
3 3 black
3 3 green
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>green 4.00000000
white 21.00000000
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>7 4
9
1 2 2 3
2 3 3 2
3 2 2 1
2 1 1 2
3 2 4 2
4 2 5 3
5 3 6 2
6 2 5 1
5 1 4 2
2
2 2 black
2 2 red
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>red 2.00000000
white 26.00000000
</code></pre>
<h2>说明</h2>
<div>Initially the black segments painted by Anfisa can also be painted a color if any of the chosen points lays on the segment. The segments have areas equal to 0. That is why if in the final picture only parts of segments is painted some color, then the area, painted the color is equal to 0.</div>
</article>
</div>
</div>
</body>
</html>
