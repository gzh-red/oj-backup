<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Feeling Good - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573403346:0GmnONmVa4PGpelGitrr9CxUbZeNq90BExyEIc26Nv0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Recently%20biologists%20came%20to%20a%20fascinating%20conclusion%20about%20how%20to%20find%20a%20chameleon%20mood.%20Consider%20chameleon%20body%20to%20be%20a%20rectangular%20table%20%24%20n%20%5C%5Ctimes%20m%20%24%20%2C%20each%20cell%20of%20which%20may%20be%20green%20or%20blue%20and%20may%20change%20between%20these%20two%20colors.%20We%20will%20denote%20as%20%24%20%28x%2C%20y%29%20%24%20%28%20%24%201%20%5C%5Cleq%20x%20%5C%5Cleq%20n%20%24%20%2C%20%24%201%20%5C%5Cleq%20y%20%5C%5Cleq%20m%20%24%20%29%20the%20cell%20in%20row%20%24%20x%20%24%20and%20column%20%24%20y%20%24%20.%5Cn%5CnLet%20us%20define%20a%20chameleon%20good%20mood%20certificate%20to%20be%20four%20cells%20which%20are%20corners%20of%20some%20subrectangle%20of%20the%20table%2C%20such%20that%20colors%20in%20opposite%20cells%20among%20these%20four%20are%20similar%2C%20and%20at%20the%20same%20time%20not%20all%20of%20the%20four%20cell%20colors%20are%20similar.%20Formally%2C%20it%20is%20a%20group%20of%20four%20cells%20%24%20%28x_1%2C%20y_1%29%20%24%20%2C%20%24%20%28x_1%2C%20y_2%29%20%24%20%2C%20%24%20%28x_2%2C%20y_1%29%20%24%20%2C%20%24%20%28x_2%2C%20y_2%29%20%24%20for%20some%20%24%201%20%5C%5Cleq%20x_1%20%3C%20x_2%20%5C%5Cleq%20n%20%24%20%2C%20%24%201%20%5C%5Cleq%20y_1%20%3C%20y_2%20%5C%5Cleq%20m%20%24%20%2C%20that%20colors%20of%20%24%20%28x_1%2C%20y_1%29%20%24%20and%20%24%20%28x_2%2C%20y_2%29%20%24%20coincide%20and%20colors%20of%20%24%20%28x_1%2C%20y_2%29%20%24%20and%20%24%20%28x_2%2C%20y_1%29%20%24%20coincide%2C%20but%20not%20all%20of%20the%20four%20cells%20share%20the%20same%20color.%20It%20was%20found%20that%20whenever%20such%20four%20cells%20are%20present%2C%20chameleon%20is%20in%20good%20mood%2C%20and%20vice%20versa%3A%20if%20there%20are%20no%20such%20four%20cells%2C%20chameleon%20is%20in%20bad%20mood.%5Cn%5CnYou%20are%20asked%20to%20help%20scientists%20write%20a%20program%20determining%20the%20mood%20of%20chameleon.%20Let%20us%20consider%20that%20initially%20all%20cells%20of%20chameleon%20are%20green.%20After%20that%20chameleon%20coloring%20may%20change%20several%20times.%20On%20one%20change%2C%20colors%20of%20contiguous%20segment%20of%20some%20table%20row%20are%20replaced%20with%20the%20opposite.%20Formally%2C%20each%20color%20change%20is%20defined%20by%20three%20integers%20%24%20a%20%24%20%2C%20%24%20l%20%24%20%2C%20%24%20r%20%24%20%28%20%24%201%20%5C%5Cleq%20a%20%5C%5Cleq%20n%20%24%20%2C%20%24%201%20%5C%5Cleq%20l%20%5C%5Cleq%20r%20%5C%5Cleq%20m%20%24%20%29.%20On%20such%20change%20colors%20of%20all%20cells%20%24%20%28a%2C%20b%29%20%24%20such%20that%20%24%20l%20%5C%5Cleq%20b%20%5C%5Cleq%20r%20%24%20are%20replaced%20with%20the%20opposite.%5Cn%5CnWrite%20a%20program%20that%20reports%20mood%20of%20the%20chameleon%20after%20each%20change.%20Additionally%2C%20if%20the%20chameleon%20mood%20is%20good%2C%20program%20should%20find%20out%20any%20four%20numbers%20%24%20x_1%20%24%20%2C%20%24%20y_1%20%24%20%2C%20%24%20x_2%20%24%20%2C%20%24%20y_2%20%24%20such%20that%20four%20cells%20%24%20%28x_1%2C%20y_1%29%20%24%20%2C%20%24%20%28x_1%2C%20y_2%29%20%24%20%2C%20%24%20%28x_2%2C%20y_1%29%20%24%20%2C%20%24%20%28x_2%2C%20y_2%29%20%24%20are%20the%20good%20mood%20certificate.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20contains%20three%20integers%20%24%20n%20%24%20%2C%20%24%20m%20%24%20%2C%20%24%20q%20%24%20%28%20%24%201%20%5C%5Cleq%20n%2C%20m%20%5C%5Cleq%202000%20%24%20%2C%20%24%201%20%5C%5Cleq%20q%20%5C%5Cleq%20500%5C%5C%2C000%20%24%20%29%2C%20the%20sizes%20of%20the%20table%20and%20the%20number%20of%20changes%20respectively.%5Cn%5CnEach%20of%20the%20following%20%24%20q%20%24%20lines%20contains%203%20integers%20%24%20a_i%20%24%20%2C%20%24%20l_i%20%24%20%2C%20%24%20r_i%20%24%20%28%20%24%201%20%5C%5Cleq%20a_i%20%5C%5Cleq%20n%20%24%20%2C%20%24%201%20%5C%5Cleq%20l_i%20%5C%5Cleq%20r_i%20%5C%5Cleq%20m%20%24%20%29%2C%20describing%20%24%20i%20%24%20-th%20coloring%20change.%22%2C%22outputFormat%22%3A%22Print%20%24%20q%20%24%20lines.%20In%20the%20%24%20i%20%24%20-th%20line%20report%20the%20chameleon%20mood%20after%20first%20%24%20i%20%24%20color%20changes%20for%20all%20%24%201%20%5C%5Cleq%20i%20%5C%5Cleq%20q%20%24%20.%5Cn%5CnIf%20chameleon%20is%20in%20bad%20mood%2C%20print%20the%20only%20integer%20%24%20-1%20%24%20.%5Cn%5CnOtherwise%2C%20print%20four%20integers%20%24%20x_1%20%24%20%2C%20%24%20y_1%20%24%20%2C%20%24%20x_2%20%24%20%2C%20%24%20y_2%20%24%20%28%20%24%201%20%5C%5Cleq%20x_1%20%3C%20x_2%20%5C%5Cleq%20n%20%24%20%2C%20%24%201%20%5C%5Cleq%20y_1%20%3C%20y_2%20%5C%5Cleq%20m%20%24%20%29%20such%20that%20four%20cells%20%24%20%28x_1%2C%20y_1%29%20%24%20%2C%20%24%20%28x_1%2C%20y_2%29%20%24%20%2C%20%24%20%28x_2%2C%20y_1%29%20%24%20%2C%20%24%20%28x_2%2C%20y_2%29%20%24%20are%20the%20good%20mood%20certificate.%20If%20there%20are%20several%20ways%20to%20choose%20such%20four%20integers%2C%20print%20any%20valid%20one.%22%2C%22samples%22%3A%5B%5B%22%5Cn2%202%206%5Cn1%201%201%5Cn2%202%202%5Cn2%201%201%5Cn1%202%202%5Cn2%202%202%5Cn1%201%201%5Cn%22%2C%22%5Cn-1%5Cn1%201%202%202%5Cn-1%5Cn-1%5Cn-1%5Cn1%201%202%202%5Cn%22%5D%2C%5B%22%5Cn4%203%209%5Cn2%202%203%5Cn4%201%202%5Cn2%201%203%5Cn3%202%202%5Cn3%201%203%5Cn1%202%202%5Cn4%202%203%5Cn1%201%203%5Cn3%201%203%5Cn%22%2C%22%5Cn-1%5Cn2%201%204%203%5Cn-1%5Cn2%201%203%202%5Cn3%202%204%203%5Cn1%201%202%202%5Cn1%201%202%202%5Cn-1%5Cn2%201%203%202%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1214%5C%2FG%22%2C%22id%22%3A%221214G%22%7D%2C%22translation%22%3A%22%5Cu672c%5Cu9898%5Cu7ffb%5Cu8bd1%5Cu6765%5Cu81ea%5Cu4e8e%40ljc20020730%5Cr%5Cn%5Cr%5Cn%5Cu6709%5Cu4e00%5Cu4e2a%24n%20%5C%5Ctimes%20m%24%5Cu7684%5Cu77e9%5Cu9635%24M%24%5Cuff0c%5Cu5176%5Cu5143%5Cu7d20%5Cu503c%5Cu4e3a%240%5C%2F1%24.%5Cr%5Cn%5Cr%5Cn%5Cu521d%5Cu59cb%5Cu6240%5Cu6709%5Cu5143%5Cu7d20%5Cu90fd%5Cu662f%240%24%5Cr%5Cn%5Cr%5Cn%5Cu6bcf%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu53ef%5Cu4ee5%5Cu7ffb%5Cu8f6c%5Cu7b2c%24a%24%5Cu884c%5Cu7684%5Cu7b2c%24i%20%5C%5Cin%5Bl%2Cr%5D%24%5Cu7684%5Cu6240%5Cu6709%5Cu5143%5Cu7d20%24M%5Ba%5D%5Bi%5D%24%5Cr%5Cn%5Cr%5Cn%5Cu6bcf%5Cu6b21%5Cu7ffb%5Cu8f6c%5Cu7ed3%5Cu675f%5Cu540e%5Cuff0c%5Cu8f93%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu77e9%5Cu5f62%5Cu5de6%5Cu4e0a%5Cu89d2%5Cu4e3a%24%28x1%2Cy1%29%24%5Cu53f3%5Cu4e0a%5Cu89d2%5Cu4e3a%24%28x2%2Cy2%29%24%5Cu4f7f%5Cu5f97%5Cu6ee1%5Cu8db3%5Cuff1a%5Cr%5Cn%5Cr%5Cn-%20%241%20%5C%5Cleq%20x1%20%3C%20x2%20%5C%5Cleq%20n%24%20%2C%20%241%20%5C%5Cleq%20y1%20%3C%20y2%20%5C%5Cleq%20m%24%5Cr%5Cn-%20%5Cu77e9%5Cu5f62%5Cu7684%5Cu56db%5Cu4e2a%5Cu89d2%5Cuff0c%5Cu540c%5Cu4fa7%5Cu5f02%5Cu8272%5Cuff0c%5Cu5bf9%5Cu89d2%5Cu540c%5Cu8272%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5982%5Cu679c%5Cu6ca1%5Cu6709%5Cu4efb%5Cu4f55%5Cu77e9%5Cu5f62%5Cu6ee1%5Cu8db3%5Cu6761%5Cu4ef6%5Cuff0c%5Cu5219%5Cu8f93%5Cu51fa%24-1%24%5Cr%5Cn%5Cr%5Cn%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A15%2C%22totalAccepted%22%3A6%2C%22pid%22%3A%22CF1214G%22%2C%22title%22%3A%22Feeling%20Good%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Feeling%20Good%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Feeling Good</h1>
<h2>题意翻译</h2>
<div>本题翻译来自于@ljc20020730
有一个$n \times m$的矩阵$M$，其元素值为$0/1$.
初始所有元素都是$0$
每次操作可以翻转第$a$行的第$i \in[l,r]$的所有元素$M[a][i]$
每次翻转结束后，输出一个矩形左上角为$(x1,y1)$右上角为$(x2,y2)$使得满足：
- $1 \leq x1 < x2 \leq n$ , $1 \leq y1 < y2 \leq m$
- 矩形的四个角，同侧异色，对角同色。
如果没有任何矩形满足条件，则输出$-1$
</div>
<h2>题目描述</h2>
<div>Recently biologists came to a fascinating conclusion about how to find a chameleon mood. Consider chameleon body to be a rectangular table $ n \times m $ , each cell of which may be green or blue and may change between these two colors. We will denote as $ (x, y) $ ( $ 1 \leq x \leq n $ , $ 1 \leq y \leq m $ ) the cell in row $ x $ and column $ y $ .
Let us define a chameleon good mood certificate to be four cells which are corners of some subrectangle of the table, such that colors in opposite cells among these four are similar, and at the same time not all of the four cell colors are similar. Formally, it is a group of four cells $ (x_1, y_1) $ , $ (x_1, y_2) $ , $ (x_2, y_1) $ , $ (x_2, y_2) $ for some $ 1 \leq x_1 < x_2 \leq n $ , $ 1 \leq y_1 < y_2 \leq m $ , that colors of $ (x_1, y_1) $ and $ (x_2, y_2) $ coincide and colors of $ (x_1, y_2) $ and $ (x_2, y_1) $ coincide, but not all of the four cells share the same color. It was found that whenever such four cells are present, chameleon is in good mood, and vice versa: if there are no such four cells, chameleon is in bad mood.
You are asked to help scientists write a program determining the mood of chameleon. Let us consider that initially all cells of chameleon are green. After that chameleon coloring may change several times. On one change, colors of contiguous segment of some table row are replaced with the opposite. Formally, each color change is defined by three integers $ a $ , $ l $ , $ r $ ( $ 1 \leq a \leq n $ , $ 1 \leq l \leq r \leq m $ ). On such change colors of all cells $ (a, b) $ such that $ l \leq b \leq r $ are replaced with the opposite.
Write a program that reports mood of the chameleon after each change. Additionally, if the chameleon mood is good, program should find out any four numbers $ x_1 $ , $ y_1 $ , $ x_2 $ , $ y_2 $ such that four cells $ (x_1, y_1) $ , $ (x_1, y_2) $ , $ (x_2, y_1) $ , $ (x_2, y_2) $ are the good mood certificate.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input contains three integers $ n $ , $ m $ , $ q $ ( $ 1 \leq n, m \leq 2000 $ , $ 1 \leq q \leq 500\,000 $ ), the sizes of the table and the number of changes respectively.
Each of the following $ q $ lines contains 3 integers $ a_i $ , $ l_i $ , $ r_i $ ( $ 1 \leq a_i \leq n $ , $ 1 \leq l_i \leq r_i \leq m $ ), describing $ i $ -th coloring change.</div>
<h3>输出格式</h3>
<br />
<div>Print $ q $ lines. In the $ i $ -th line report the chameleon mood after first $ i $ color changes for all $ 1 \leq i \leq q $ .
If chameleon is in bad mood, print the only integer $ -1 $ .
Otherwise, print four integers $ x_1 $ , $ y_1 $ , $ x_2 $ , $ y_2 $ ( $ 1 \leq x_1 < x_2 \leq n $ , $ 1 \leq y_1 < y_2 \leq m $ ) such that four cells $ (x_1, y_1) $ , $ (x_1, y_2) $ , $ (x_2, y_1) $ , $ (x_2, y_2) $ are the good mood certificate. If there are several ways to choose such four integers, print any valid one.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>
2 2 6
1 1 1
2 2 2
2 1 1
1 2 2
2 2 2
1 1 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>
-1
1 1 2 2
-1
-1
-1
1 1 2 2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>
4 3 9
2 2 3
4 1 2
2 1 3
3 2 2
3 1 3
1 2 2
4 2 3
1 1 3
3 1 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>
-1
2 1 4 3
-1
2 1 3 2
3 2 4 3
1 1 2 2
1 1 2 2
-1
2 1 3 2
</code></pre>
</article>
</div>
</div>
</body>
</html>
