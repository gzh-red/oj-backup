<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Azembler - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573390732:Zmk5xdph99pWhA65hx9lLrU1a+yXIWZK4S0qc2Xcons=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22After%20the%20Search%20Ultimate%20program%20that%20searched%20for%20strings%20in%20a%20text%20failed%2C%20Igor%20K.%20got%20to%20think%3A%20%5C%22Why%20on%20Earth%20does%20my%20program%20work%20so%20slowly%3F%5C%22%20As%20he%20double-checked%20his%20code%2C%20he%20said%3A%20%5C%22My%20code%20contains%20no%20errors%2C%20yet%20I%20know%20how%20we%20will%20improve%20Search%20Ultimate%21%5C%22%20and%20took%20a%20large%20book%20from%20the%20shelves.%20The%20book%20read%20%5C%22Azembler.%20Principally%20New%20Approach%5C%22.%5Cn%5CnHaving%20carefully%20thumbed%20through%20the%20book%2C%20Igor%20K.%20realised%20that%2C%20as%20it%20turns%20out%2C%20you%20can%20multiply%20the%20numbers%20dozens%20of%20times%20faster.%20%5C%22Search%20Ultimate%20will%20be%20faster%20than%20it%20has%20ever%20been%21%5C%22%20%5Cu2014%20the%20fellow%20shouted%20happily%20and%20set%20to%20work.%5Cn%5CnLet%20us%20now%20clarify%20what%20Igor%27s%20idea%20was.%20The%20thing%20is%20that%20the%20code%20that%20was%20generated%20by%20a%20compiler%20was%20far%20from%20perfect.%20Standard%20multiplying%20does%20work%20slower%20than%20with%20the%20trick%20the%20book%20mentioned.%5Cn%5CnThe%20Azembler%20language%20operates%20with%2026%20registers%20%28eax%2C%20ebx%2C%20...%2C%20ezx%29%20and%20two%20commands%3A%5Cn%5Cn-%20%5C%5C%5B%20%24%20x%20%24%20%5C%5C%5D%20%5Cu2014%20returns%20the%20value%20located%20in%20the%20address%20%24%20x%20%24%20.%20For%20example%2C%20%5C%5C%5Beax%5C%5C%5D%20returns%20the%20value%20that%20was%20located%20in%20the%20address%2C%20equal%20to%20the%20value%20in%20the%20register%20eax.%5Cn-%20lea%20%24%20x%20%24%20%2C%20%24%20y%20%24%20%5Cu2014%20assigns%20to%20the%20register%20%24%20x%20%24%20%2C%20indicated%20as%20the%20first%20operand%2C%20the%20second%20operand%27s%20address.%20Thus%2C%20for%20example%2C%20the%20%5C%22lea%20ebx%2C%20%5C%5C%5Beax%5C%5C%5D%5C%22%20command%20will%20write%20in%20the%20ebx%20register%20the%20content%20of%20the%20eax%20register%3A%20first%20the%20%5C%5C%5Beax%5C%5C%5D%20operation%20will%20be%20fulfilled%2C%20the%20result%20of%20it%20will%20be%20some%20value%20that%20lies%20in%20the%20address%20written%20in%20eax.%20But%20we%20do%20not%20need%20the%20value%20%5Cu2014%20the%20next%20operation%20will%20be%20lea%2C%20that%20will%20take%20the%20%5C%5C%5Beax%5C%5C%5D%20address%2C%20i.e.%2C%20the%20value%20in%20the%20eax%20register%2C%20and%20will%20write%20it%20in%20ebx.%5Cn%5CnOn%20the%20first%20thought%20the%20second%20operation%20seems%20meaningless%2C%20but%20as%20it%20turns%20out%2C%20it%20is%20acceptable%20to%20write%20the%20operation%20as%5Cn%5Cnlea%20ecx%2C%20%5C%5C%5Beax%20%2B%20ebx%5C%5C%5D%2C%5Cn%5Cnlea%20ecx%2C%20%5C%5C%5Bk%5C%5C%2Aeax%5C%5C%5D%5Cn%5Cnor%20even%5Cn%5Cnlea%20ecx%2C%20%5C%5C%5Bebx%20%2B%20k%5C%5C%2Aeax%5C%5C%5D%2C%5Cn%5Cnwhere%20k%20%3D%201%2C%202%2C%204%20or%208.%5Cn%5CnAs%20a%20result%2C%20the%20register%20ecx%20will%20be%20equal%20to%20the%20numbers%20eax%20%2B%20ebx%2C%20k%5C%5C%2Aeax%20and%20ebx%20%2B%20k%5C%5C%2Aeax%20correspondingly.%20However%2C%20such%20operation%20is%20fulfilled%20many%20times%2C%20dozens%20of%20times%20faster%20that%20the%20usual%20multiplying%20of%20numbers.%20And%20using%20several%20such%20operations%2C%20one%20can%20very%20quickly%20multiply%20some%20number%20by%20some%20other%20one.%20Of%20course%2C%20instead%20of%20eax%2C%20ebx%20and%20ecx%20you%20are%20allowed%20to%20use%20any%20registers.%5Cn%5CnFor%20example%2C%20let%20the%20eax%20register%20contain%20some%20number%20that%20we%20should%20multiply%20by%2041.%20It%20takes%20us%202%20lines%3A%5Cn%5Cnlea%20ebx%2C%20%5C%5C%5Beax%20%2B%204%5C%5C%2Aeax%5C%5C%5D%20%5C%2F%5C%2F%20now%20ebx%20%3D%205%5C%5C%2Aeax%5Cn%5Cnlea%20eax%2C%20%5C%5C%5Beax%20%2B%208%5C%5C%2Aebx%5C%5C%5D%20%5C%2F%5C%2F%20now%20eax%20%3D%20eax%20%2B%208%5C%5C%2Aebx%20%3D%2041%5C%5C%2Aeax%5Cn%5CnIgor%20K.%20got%20interested%20in%20the%20following%20question%3A%20what%20is%20the%20minimum%20number%20of%20lea%20operations%20needed%20to%20multiply%20by%20the%20given%20number%20%24%20n%20%24%20and%20how%20to%20do%20it%3F%20Your%20task%20is%20to%20help%20him.%5Cn%5CnConsider%20that%20at%20the%20initial%20moment%20of%20time%20eax%20contains%20a%20number%20that%20Igor%20K.%20was%20about%20to%20multiply%20by%20%24%20n%20%24%20%2C%20and%20the%20registers%20from%20ebx%20to%20ezx%20contain%20number%200.%20At%20the%20final%20moment%20of%20time%20the%20result%20can%20be%20located%20in%20any%20register.%22%2C%22inputFormat%22%3A%22The%20input%20data%20contain%20the%20only%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D255%20%24%20%29%2C%20which%20Igor%20K.%20is%20about%20to%20multiply.%22%2C%22outputFormat%22%3A%22On%20the%20first%20line%20print%20number%20%24%20p%20%24%20%2C%20which%20represents%20the%20minimum%20number%20of%20lea%20operations%2C%20needed%20to%20do%20that.%20Then%20print%20the%20program%20consisting%20of%20%24%20p%20%24%20commands%2C%20performing%20the%20operations.%20It%20is%20guaranteed%20that%20such%20program%20exists%20for%20any%20%24%20n%20%24%20from%201%20to%20255.%5Cn%5CnUse%20precisely%20the%20following%20format%20of%20commands%20%28here%20%24%20k%20%24%20is%20equal%20to%201%2C%202%2C%204%20or%208%2C%20and%20%24%20x%20%24%20%2C%20%24%20y%20%24%20and%20%24%20z%20%24%20are%20any%2C%20even%20coinciding%20registers%29%3A%5Cn%5Cnlea%20x%2C%20%5C%5C%5By%5C%5C%5D%5Cn%5Cnlea%20x%2C%20%5C%5C%5By%20%2B%20z%5C%5C%5D%5Cn%5Cnlea%20x%2C%20%5C%5C%5Bk%5C%5C%2Ay%5C%5C%5D%5Cn%5Cnlea%20x%2C%20%5C%5C%5By%20%2B%20k%5C%5C%2Az%5C%5C%5D%5Cn%5CnPlease%20note%20that%20extra%20spaces%20at%20the%20end%20of%20a%20command%20are%20unacceptable.%22%2C%22samples%22%3A%5B%5B%2241%5Cn%22%2C%222%5Cnlea%20ebx%2C%20%5Beax%20%2B%204%2Aeax%5D%5Cnlea%20ecx%2C%20%5Beax%20%2B%208%2Aebx%5D%5Cn%22%5D%2C%5B%222%5Cn%22%2C%221%5Cnlea%20ebx%2C%20%5Beax%20%2B%20eax%5D%5Cn%22%5D%2C%5B%224%5Cn%22%2C%221%5Cnlea%20ebx%2C%20%5B4%2Aeax%5D%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B5000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F93%5C%2FC%22%2C%22id%22%3A%2293C%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A29%2C%22totalAccepted%22%3A15%2C%22pid%22%3A%22CF93C%22%2C%22title%22%3A%22Azembler%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Azembler%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Azembler</h1>
<h2>题目描述</h2>
<div>After the Search Ultimate program that searched for strings in a text failed, Igor K. got to think: "Why on Earth does my program work so slowly?" As he double-checked his code, he said: "My code contains no errors, yet I know how we will improve Search Ultimate!" and took a large book from the shelves. The book read "Azembler. Principally New Approach".
Having carefully thumbed through the book, Igor K. realised that, as it turns out, you can multiply the numbers dozens of times faster. "Search Ultimate will be faster than it has ever been!" — the fellow shouted happily and set to work.
Let us now clarify what Igor's idea was. The thing is that the code that was generated by a compiler was far from perfect. Standard multiplying does work slower than with the trick the book mentioned.
The Azembler language operates with 26 registers (eax, ebx, ..., ezx) and two commands:
- \[ $ x $ \] — returns the value located in the address $ x $ . For example, \[eax\] returns the value that was located in the address, equal to the value in the register eax.
- lea $ x $ , $ y $ — assigns to the register $ x $ , indicated as the first operand, the second operand's address. Thus, for example, the "lea ebx, \[eax\]" command will write in the ebx register the content of the eax register: first the \[eax\] operation will be fulfilled, the result of it will be some value that lies in the address written in eax. But we do not need the value — the next operation will be lea, that will take the \[eax\] address, i.e., the value in the eax register, and will write it in ebx.
On the first thought the second operation seems meaningless, but as it turns out, it is acceptable to write the operation as
lea ecx, \[eax + ebx\],
lea ecx, \[k\*eax\]
or even
lea ecx, \[ebx + k\*eax\],
where k = 1, 2, 4 or 8.
As a result, the register ecx will be equal to the numbers eax + ebx, k\*eax and ebx + k\*eax correspondingly. However, such operation is fulfilled many times, dozens of times faster that the usual multiplying of numbers. And using several such operations, one can very quickly multiply some number by some other one. Of course, instead of eax, ebx and ecx you are allowed to use any registers.
For example, let the eax register contain some number that we should multiply by 41. It takes us 2 lines:
lea ebx, \[eax + 4\*eax\] // now ebx = 5\*eax
lea eax, \[eax + 8\*ebx\] // now eax = eax + 8\*ebx = 41\*eax
Igor K. got interested in the following question: what is the minimum number of lea operations needed to multiply by the given number $ n $ and how to do it? Your task is to help him.
Consider that at the initial moment of time eax contains a number that Igor K. was about to multiply by $ n $ , and the registers from ebx to ezx contain number 0. At the final moment of time the result can be located in any register.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input data contain the only integer $ n $ ( $ 1<=n<=255 $ ), which Igor K. is about to multiply.</div>
<h3>输出格式</h3>
<br />
<div>On the first line print number $ p $ , which represents the minimum number of lea operations, needed to do that. Then print the program consisting of $ p $ commands, performing the operations. It is guaranteed that such program exists for any $ n $ from 1 to 255.
Use precisely the following format of commands (here $ k $ is equal to 1, 2, 4 or 8, and $ x $ , $ y $ and $ z $ are any, even coinciding registers):
lea x, \[y\]
lea x, \[y + z\]
lea x, \[k\*y\]
lea x, \[y + k\*z\]
Please note that extra spaces at the end of a command are unacceptable.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>41
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
lea ebx, [eax + 4*eax]
lea ecx, [eax + 8*ebx]
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>1
lea ebx, [eax + eax]
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>4
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>1
lea ebx, [4*eax]
</code></pre>
</article>
</div>
</div>
</body>
</html>
