<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Balanced Binary Search Trees - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573403547:DmZCjAZNSMbltpzmR7yOouQiotSwv9pvmf0RchsPseM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Recall%20that%20a%20binary%20search%20tree%20is%20a%20rooted%20binary%20tree%2C%20whose%20nodes%20each%20store%20a%20key%20and%20each%20have%20at%20most%20two%20distinguished%20subtrees%2C%20left%20and%20right.%20The%20key%20in%20each%20node%20must%20be%20greater%20than%20any%20key%20stored%20in%20the%20left%20subtree%2C%20and%20less%20than%20any%20key%20stored%20in%20the%20right%20subtree.%5Cn%5CnThe%20depth%20of%20a%20vertex%20is%20the%20number%20of%20edges%20on%20the%20simple%20path%20from%20the%20vertex%20to%20the%20root.%20In%20particular%2C%20the%20depth%20of%20the%20root%20is%20%24%200%20%24%20.%5Cn%5CnLet%27s%20call%20a%20binary%20search%20tree%20perfectly%20balanced%20if%20there%20doesn%27t%20exist%20a%20binary%20search%20tree%20with%20the%20same%20number%20of%20vertices%20that%20has%20a%20strictly%20smaller%20sum%20of%20depths%20of%20its%20vertices.%5Cn%5CnLet%27s%20call%20a%20binary%20search%20tree%20with%20integer%20keys%20striped%20if%20both%20of%20the%20following%20conditions%20are%20satisfied%20for%20every%20vertex%20%24%20v%20%24%20%3A%5Cn%5Cn-%20If%20%24%20v%20%24%20has%20a%20left%20subtree%20whose%20root%20is%20%24%20u%20%24%20%2C%20then%20the%20parity%20of%20the%20key%20of%20%24%20v%20%24%20is%20different%20from%20the%20parity%20of%20the%20key%20of%20%24%20u%20%24%20.%5Cn-%20If%20%24%20v%20%24%20has%20a%20right%20subtree%20whose%20root%20is%20%24%20w%20%24%20%2C%20then%20the%20parity%20of%20the%20key%20of%20%24%20v%20%24%20is%20the%20same%20as%20the%20parity%20of%20the%20key%20of%20%24%20w%20%24%20.%5Cn%5CnYou%20are%20given%20a%20single%20integer%20%24%20n%20%24%20.%20Find%20the%20number%20of%20perfectly%20balanced%20striped%20binary%20search%20trees%20with%20%24%20n%20%24%20vertices%20that%20have%20distinct%20integer%20keys%20between%20%24%201%20%24%20and%20%24%20n%20%24%20%2C%20inclusive.%20Output%20this%20number%20modulo%20%24%20998%5C%5C%2C244%5C%5C%2C353%20%24%20.%22%2C%22inputFormat%22%3A%22The%20only%20line%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%201%20%5C%5Cle%20n%20%5C%5Cle%2010%5E6%20%24%20%29%2C%20denoting%20the%20required%20number%20of%20vertices.%22%2C%22outputFormat%22%3A%22Output%20the%20number%20of%20perfectly%20balanced%20striped%20binary%20search%20trees%20with%20%24%20n%20%24%20vertices%20and%20distinct%20integer%20keys%20between%20%24%201%20%24%20and%20%24%20n%20%24%20%2C%20inclusive%2C%20modulo%20%24%20998%5C%5C%2C244%5C%5C%2C353%20%24%20.%22%2C%22samples%22%3A%5B%5B%22%5Cn4%5Cn%22%2C%22%5Cn1%5Cn%22%5D%2C%5B%22%5Cn3%5Cn%22%2C%22%5Cn0%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20example%2C%20this%20is%20the%20only%20tree%20that%20satisfies%20the%20conditions%3A%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1237E%5C%2F4e380cf51a86e19e2f842af24fccbe15c0690783.png%29%5Cn%5CnIn%20the%20second%20example%2C%20here%20are%20various%20trees%20that%20don%27t%20satisfy%20some%20condition%3A%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF1237E%5C%2F2e8a40da0f5146c1c54bd64b0e3ffa3e8248274f.png%29%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1237%5C%2FE%22%2C%22id%22%3A%221237E%22%7D%2C%22translation%22%3A%22%24%5C%5Crm%20Soulist%24%5Cu95ee%5Cu60a8%5Cu6709%5Cu591a%5Cu5c11%5Cu68f5%5Cu70b9%5Cu6570%5Cu4e3a%24n%28n%5C%5Cle%2010%5E6%29%24%5Cu70b9%5Cu6743%5Cu4e3a%24%7B1%2C2%2C...%2Cn%7D%24%5Cu4e2d%5Cu7684%5Cu6570%5Cu7684%5Cu4e8c%5Cu53c9%5Cu641c%5Cu7d22%5Cu6811%5Cu6ee1%5Cu8db3%5Cuff1a%5Cr%5Cn%5Cr%5Cn%241.%29%3A%24%20%5Cu9664%5Cu4e86%5Cu6700%5Cu4e0b%5Cu9762%5Cu4e00%5Cu5c42%5Cu5916%5Cuff0c%5Cu6240%5Cu6709%5Cu5c42%5Cu90fd%5Cu662f%5Cu6ee1%5Cu7684%5Cuff1b%5Cr%5Cn%5Cr%5Cn%242.%29%3A%24%20%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e2a%5Cu70b9%5Cuff0c%5Cu5982%5Cu679c%5Cu5b83%5Cu6709%5Cu5de6%5Cu513f%5Cu5b50%5Cuff0c%5Cu90a3%5Cu4e48%5Cu5de6%5Cu513f%5Cu5b50%5Cu7684%5Cu70b9%5Cu6743%5Cu548c%5Cu5b83%5Cu7684%5Cu5947%5Cu5076%5Cu6027%5Cu4e0d%5Cu540c%5Cuff1b%5Cu5982%5Cu679c%5Cu5b83%5Cu6709%5Cu53f3%5Cu513f%5Cu5b50%5Cuff0c%5Cu90a3%5Cu4e48%5Cu53f3%5Cu513f%5Cu5b50%5Cu7684%5Cu70b9%5Cu6743%5Cu548c%5Cu5b83%5Cu7684%5Cu5947%5Cu5076%5Cu6027%5Cu76f8%5Cu540c%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu7b54%5Cu6848%5Cu5bf9%24998244353%24%5Cu53d6%5Cu6a21%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A38%2C%22totalAccepted%22%3A27%2C%22pid%22%3A%22CF1237E%22%2C%22title%22%3A%22Balanced%20Binary%20Search%20Trees%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Balanced%20Binary%20Search%20Trees%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Balanced Binary Search Trees</h1>
<h2>题意翻译</h2>
<div>$\rm Soulist$问您有多少棵点数为$n(n\le 10^6)$点权为${1,2,...,n}$中的数的二叉搜索树满足：
$1.):$ 除了最下面一层外，所有层都是满的；
$2.):$ 对于每个点，如果它有左儿子，那么左儿子的点权和它的奇偶性不同；如果它有右儿子，那么右儿子的点权和它的奇偶性相同。
答案对$998244353$取模</div>
<h2>题目描述</h2>
<div>Recall that a binary search tree is a rooted binary tree, whose nodes each store a key and each have at most two distinguished subtrees, left and right. The key in each node must be greater than any key stored in the left subtree, and less than any key stored in the right subtree.
The depth of a vertex is the number of edges on the simple path from the vertex to the root. In particular, the depth of the root is $ 0 $ .
Let's call a binary search tree perfectly balanced if there doesn't exist a binary search tree with the same number of vertices that has a strictly smaller sum of depths of its vertices.
Let's call a binary search tree with integer keys striped if both of the following conditions are satisfied for every vertex $ v $ :
- If $ v $ has a left subtree whose root is $ u $ , then the parity of the key of $ v $ is different from the parity of the key of $ u $ .
- If $ v $ has a right subtree whose root is $ w $ , then the parity of the key of $ v $ is the same as the parity of the key of $ w $ .
You are given a single integer $ n $ . Find the number of perfectly balanced striped binary search trees with $ n $ vertices that have distinct integer keys between $ 1 $ and $ n $ , inclusive. Output this number modulo $ 998\,244\,353 $ .</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The only line contains a single integer $ n $ ( $ 1 \le n \le 10^6 $ ), denoting the required number of vertices.</div>
<h3>输出格式</h3>
<br />
<div>Output the number of perfectly balanced striped binary search trees with $ n $ vertices and distinct integer keys between $ 1 $ and $ n $ , inclusive, modulo $ 998\,244\,353 $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>
4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>
1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>
3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>
0
</code></pre>
<h2>说明</h2>
<div>In the first example, this is the only tree that satisfies the conditions: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1237E/4e380cf51a86e19e2f842af24fccbe15c0690783.png)
In the second example, here are various trees that don't satisfy some condition: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1237E/2e8a40da0f5146c1c54bd64b0e3ffa3e8248274f.png)</div>
</article>
</div>
</div>
</body>
</html>
