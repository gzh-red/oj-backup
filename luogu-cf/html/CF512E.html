<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Fox And Polygon - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573394922:AisX6M7ApdBFCbuKFbTL7128SI0VrvYNW1qfUrFIVQc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Fox%20Ciel%20just%20designed%20a%20puzzle%20game%20called%20%5C%22Polygon%5C%22%21%20It%20is%20played%20using%20triangulations%20of%20a%20regular%20%24%20n%20%24%20-edge%20polygon.%20The%20goal%20is%20to%20transform%20one%20triangulation%20to%20another%20by%20some%20tricky%20rules.%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF512E%5C%2F9b9b9fefab3537d907c17350d789b68a582ea458.png%29Triangulation%20of%20an%20%24%20n%20%24%20-edge%20poylgon%20is%20a%20set%20of%20%24%20n-3%20%24%20diagonals%20satisfying%20the%20condition%20that%20no%20two%20diagonals%20share%20a%20common%20internal%20point.%5Cn%5CnFor%20example%2C%20the%20initial%20state%20of%20the%20game%20may%20look%20like%20%28a%29%20in%20above%20figure.%20And%20your%20goal%20may%20look%20like%20%28c%29.%20In%20each%20step%20you%20can%20choose%20a%20diagonal%20inside%20the%20polygon%20%28but%20not%20the%20one%20of%20edges%20of%20the%20polygon%29%20and%20flip%20this%20diagonal.%5Cn%5CnSuppose%20you%20are%20going%20to%20flip%20a%20diagonal%20%24%20a%5Cu2013b%20%24%20.%20There%20always%20exist%20two%20triangles%20sharing%20%24%20a%5Cu2013b%20%24%20as%20a%20side%2C%20let%27s%20denote%20them%20as%20%24%20a%5Cu2013b%5Cu2013c%20%24%20and%20%24%20a%5Cu2013b%5Cu2013d%20%24%20.%20As%20a%20result%20of%20this%20operation%2C%20the%20diagonal%20%24%20a%5Cu2013b%20%24%20is%20replaced%20by%20a%20diagonal%20%24%20c%5Cu2013d%20%24%20.%20It%20can%20be%20easily%20proven%20that%20after%20flip%20operation%20resulting%20set%20of%20diagonals%20is%20still%20a%20triangulation%20of%20the%20polygon.%5Cn%5CnSo%20in%20order%20to%20solve%20above%20case%2C%20you%20may%20first%20flip%20diagonal%20%24%206%5Cu20133%20%24%20%2C%20it%20will%20be%20replaced%20by%20diagonal%20%24%202%5Cu20134%20%24%20.%20Then%20you%20flip%20diagonal%20%24%206%5Cu20134%20%24%20and%20get%20figure%20%28c%29%20as%20result.%5Cn%5CnCiel%20just%20proved%20that%20for%20any%20starting%20and%20destination%20triangulations%20this%20game%20has%20a%20solution.%20She%20wants%20you%20to%20solve%20it%20in%20no%20more%20than%20%24%2020000%20%24%20steps%20for%20any%20puzzle%20satisfying%20%24%20n%3C%3D1000%20%24%20.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contain%20an%20integer%20%24%20n%20%24%20%28%20%24%204%3C%3Dn%3C%3D1000%20%24%20%29%2C%20number%20of%20edges%20of%20the%20regular%20polygon.%5Cn%5CnThen%20follows%20two%20groups%20of%20%24%20%28n-3%29%20%24%20lines%20describing%20the%20original%20triangulation%20and%20goal%20triangulation.%5Cn%5CnDescription%20of%20each%20triangulation%20consists%20of%20%24%20%28n-3%29%20%24%20lines.%20Each%20line%20contains%202%20integers%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20%28%20%24%201%3C%3Da_%7Bi%7D%2Cb_%7Bi%7D%3C%3Dn%20%24%20%29%2C%20describing%20a%20diagonal%20%24%20a_%7Bi%7D%5Cu2013b_%7Bi%7D%20%24%20.%5Cn%5CnIt%20is%20guaranteed%20that%20both%20original%20and%20goal%20triangulations%20are%20correct%20%28i.%20e.%20no%20two%20diagonals%20share%20a%20common%20internal%20point%20in%20both%20of%20these%20triangulations%29.%22%2C%22outputFormat%22%3A%22First%2C%20output%20an%20integer%20%24%20k%20%24%20%28%20%24%200%3C%3Dk%3C%3D20%2C000%20%24%20%29%3A%20number%20of%20steps.%5Cn%5CnThen%20output%20%24%20k%20%24%20lines%2C%20each%20containing%202%20integers%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20%3A%20the%20endpoints%20of%20a%20diagonal%20you%20are%20going%20to%20flip%20at%20step%20%24%20i%20%24%20.%20You%20may%20output%20%24%20a_%7Bi%7D%20%24%20and%20%24%20b_%7Bi%7D%20%24%20in%20any%20order.%5Cn%5CnIf%20there%20are%20several%20possible%20solutions%2C%20output%20any%20of%20them.%22%2C%22samples%22%3A%5B%5B%224%5Cn1%203%5Cn2%204%5Cn%22%2C%221%5Cn1%203%5Cn%22%5D%2C%5B%226%5Cn2%206%5Cn3%206%5Cn4%206%5Cn6%202%5Cn5%202%5Cn4%202%5Cn%22%2C%222%5Cn6%203%5Cn6%204%5Cn%22%5D%2C%5B%228%5Cn7%201%5Cn2%207%5Cn7%203%5Cn6%203%5Cn4%206%5Cn6%201%5Cn6%202%5Cn6%203%5Cn6%204%5Cn6%208%5Cn%22%2C%223%5Cn7%203%5Cn7%202%5Cn7%201%22%5D%5D%2C%22hint%22%3A%22Sample%20test%202%20is%20discussed%20above%20and%20shown%20on%20the%20picture.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F512%5C%2FE%22%2C%22id%22%3A%22512E%22%7D%2C%22translation%22%3A%22%23%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cr%5Cn%5Cu72d0%5Cu72f8Ciel%5Cu8bbe%5Cu8ba1%5Cu4e86%5Cu4e00%5Cu79cd%5Cu53eb%5Cu201c%5Cu591a%5Cu8fb9%5Cu5f62%5Cu201d%5Cu7684%5Cu667a%5Cu529b%5Cu6e38%5Cu620f%5Cuff01%5Cu5b83%5Cu662f%5Cu901a%5Cu8fc7%5Cu628a%5Cu4e00%5Cu4e2an%5Cu53d8%5Cu5f62%5Cu5206%5Cu6210%5Cu4e09%5Cu89d2%5Cu5f62%5Cu6765%5Cu8fdb%5Cu884c%5Cu7684%5Cu3002%5Cu76ee%5Cu6807%5Cu662f%5Cu901a%5Cu8fc7%5Cu4e00%5Cu4e9b%5Cu590d%5Cu6742%5Cu7684%5Cu89c4%5Cu5219%5Cu628a%5Cu4e00%5Cu79cd%5Cu5206%5Cu6cd5%5Cu8f6c%5Cu6362%5Cu6210%5Cu53e6%5Cu4e00%5Cu79cd%5Cu5206%5Cu6cd5%5Cu3002%5Cr%5Cn%5Cr%5Cnn%5Cu8fb9%5Cu5f62%5Cu7684%5Cu4e00%5Cu79cd%5Cu201c%5Cu5206%5Cu6cd5%5Cu201d%5Cu662fn%20-%203%5Cu6761%5Cu4e0d%5Cu76f8%5Cu4ea4%5Cu7684%5Cu5bf9%5Cu89d2%5Cu7ebf%5Cu6784%5Cu6210%5Cu7684%5Cu96c6%5Cu5408%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu6bcf%5Cu4e00%5Cu6b65%5Cu53ef%5Cu4ee5%5Cu9009%5Cu62e9%5Cu4e00%5Cu6761%5Cu5bf9%5Cu89d2%5Cu7ebf%5Cuff08%5Cu4f46%5Cu4e0d%5Cu80fd%5Cu662fn%5Cu8fb9%5Cu5f62%5Cu7684%5Cu8fb9%5Cuff09%5Cu7136%5Cu540e%5Cu7ffb%5Cu8f6c%5Cu8fd9%5Cu6761%5Cu5bf9%5Cu89d2%5Cu7ebf%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu4e00%5Cu6761%5Cu5bf9%5Cu89d2%5Cu7ebfAB%5Cuff0c%5Cu5047%5Cu8bbe%5Cu5b83%5Cu7684%5Cu4e24%5Cu8fb9%5Cu5206%5Cu522b%5Cu662f%5Cu4e09%5Cu89d2%5Cu5f62ABC%5Cu548c%5Cu4e09%5Cu89d2%5Cu5f62ABD%5Cu3002%5Cu201c%5Cu7ffb%5Cu8f6c%5Cu201d%5Cu5bf9%5Cu89d2%5Cu7ebfAB%5Cuff0c%5Cu5c31%5Cu662f%5Cu5220%5Cu9664%5Cu5bf9%5Cu89d2%5Cu7ebfAB%5Cuff0c%5Cu5e76%5Cu6dfb%5Cu52a0%5Cu5bf9%5Cu89d2%5Cu7ebfCD%5Cu3002%5Cr%5Cn%5Cr%5CnCiel%5Cu8bc1%5Cu660e%5Cu4e86%5Cu5bf9%5Cu4e8e%5Cu4efb%5Cu4f55%5Cu4e00%5Cu4e2a%5Cu8d77%5Cu70b9%5Cu548c%5Cu7ec8%5Cu70b9%5Cu90fd%5Cu6709%5Cu5408%5Cu6cd5%5Cu7684%5Cu7ffb%5Cu8f6c%5Cu65b9%5Cu5f0f%5Cuff0c%5Cu5979%5Cu60f3%5Cu8ba9%5Cu4f60%5Cu5bf9%5Cu4e8e%5Cu4efb%5Cu4f55%5Cu4e00%5Cu4e2an%20%3C%3D%201000%5Cu7684%5Cu5c40%5Cu9762%5Cuff0c%5Cu572820000%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu5185%5Cu5b8c%5Cu6210%5Cu3002%5Cr%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu662f%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570n%5Cuff0c%20%5Cu8868%5Cu793a%5Cu591a%5Cu8fb9%5Cu5f62%5Cu7684%5Cu8fb9%5Cu6570%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765n%20-%203%5Cu884c%5Cuff0c%20%5Cu6bcf%5Cu4e00%5Cu884c%5Cu6709%5Cu4e24%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570a%5Bi%5D%5Cuff0cb%5Bi%5D%2C%5Cu8868%5Cu793a%5Cu5f00%5Cu59cb%5Cu6709%5Cu5bf9%5Cu89d2%5Cu7ebfa%5Bi%5D-b%5Bi%5D%5Cu88ab%5Cu8fde%5Cu63a5%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765n%20-%203%5Cu884c%5Cuff0c%20%5Cu6bcf%5Cu4e00%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570A%5Bi%5D%2C%20B%5Bi%5D%5Cuff0c%5Cu8868%5Cu793a%5Cu76ee%5Cu6807%5Cu4e2d%5Cu5bf9%5Cu89d2%5Cu7ebfA%5Bi%5D-B%5Bi%5D%5Cu88ab%5Cu8fde%5Cu63a5%5Cr%5Cn%5Cr%5Cn%5Cu8f93%5Cu5165%5Cu4fdd%5Cu8bc1%5Cu5408%5Cu6cd5%5Cr%5Cn%23%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu9996%5Cu5148%5Cu8f93%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570k%5Cuff0c%5Cu8868%5Cu793a%5Cu9700%5Cu8981k%5Cu6b21%5Cu7ffb%5Cu8f6c%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765k%5Cu884c%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570a%5Bi%5D%2C%20b%5Bi%5D%5Cuff0c%5Cu8868%5Cu793a%5Cu7b2ci%5Cu6b21%5Cu7ffb%5Cu8f6c%5Cu5bf9%5Cu89d2%5Cu7ebfa%5Bi%5D-b%5Bi%5D%5Cuff0c%20%5Cu987a%5Cu5e8f%5Cu4efb%5Cu610f%5Cr%5Cn%5Cr%5Cn%5Cu5982%5Cu679c%5Cu6709%5Cu591a%5Cu91cd%5Cu64cd%5Cu4f5c%5Cu65b9%5Cu6cd5%5Cuff0c%20%5Cu53ea%5Cu9700%5Cu8f93%5Cu51fa%5Cu5176%5Cu4e2d%5Cu4e00%5Cu79cd%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A31%2C%22totalAccepted%22%3A20%2C%22pid%22%3A%22CF512E%22%2C%22title%22%3A%22Fox%20And%20Polygon%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Fox%20And%20Polygon%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Fox And Polygon</h1>
<h2>题意翻译</h2>
<div>## 题目描述
狐狸Ciel设计了一种叫“多边形”的智力游戏！它是通过把一个n变形分成三角形来进行的。目标是通过一些复杂的规则把一种分法转换成另一种分法。
n边形的一种“分法”是n - 3条不相交的对角线构成的集合。
每一步可以选择一条对角线（但不能是n边形的边）然后翻转这条对角线。
对于一条对角线AB，假设它的两边分别是三角形ABC和三角形ABD。“翻转”对角线AB，就是删除对角线AB，并添加对角线CD。
Ciel证明了对于任何一个起点和终点都有合法的翻转方式，她想让你对于任何一个n <= 1000的局面，在20000次操作内完成。
## 输入格式
第一行是一个整数n， 表示多边形的边数
接下来n - 3行， 每一行有两个正整数a[i]，b[i],表示开始有对角线a[i]-b[i]被连接。
接下来n - 3行， 每一行两个正整数A[i], B[i]，表示目标中对角线A[i]-B[i]被连接
输入保证合法
## 输出格式
首先输出一个整数k，表示需要k次翻转
接下来k行，每一行两个整数a[i], b[i]，表示第i次翻转对角线a[i]-b[i]， 顺序任意
如果有多重操作方法， 只需输出其中一种</div>
<h2>题目描述</h2>
<div>Fox Ciel just designed a puzzle game called "Polygon"! It is played using triangulations of a regular $ n $ -edge polygon. The goal is to transform one triangulation to another by some tricky rules.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF512E/9b9b9fefab3537d907c17350d789b68a582ea458.png)Triangulation of an $ n $ -edge poylgon is a set of $ n-3 $ diagonals satisfying the condition that no two diagonals share a common internal point.
For example, the initial state of the game may look like (a) in above figure. And your goal may look like (c). In each step you can choose a diagonal inside the polygon (but not the one of edges of the polygon) and flip this diagonal.
Suppose you are going to flip a diagonal $ a–b $ . There always exist two triangles sharing $ a–b $ as a side, let's denote them as $ a–b–c $ and $ a–b–d $ . As a result of this operation, the diagonal $ a–b $ is replaced by a diagonal $ c–d $ . It can be easily proven that after flip operation resulting set of diagonals is still a triangulation of the polygon.
So in order to solve above case, you may first flip diagonal $ 6–3 $ , it will be replaced by diagonal $ 2–4 $ . Then you flip diagonal $ 6–4 $ and get figure (c) as result.
Ciel just proved that for any starting and destination triangulations this game has a solution. She wants you to solve it in no more than $ 20000 $ steps for any puzzle satisfying $ n<=1000 $ .</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contain an integer $ n $ ( $ 4<=n<=1000 $ ), number of edges of the regular polygon.
Then follows two groups of $ (n-3) $ lines describing the original triangulation and goal triangulation.
Description of each triangulation consists of $ (n-3) $ lines. Each line contains 2 integers $ a_{i} $ and $ b_{i} $ ( $ 1<=a_{i},b_{i}<=n $ ), describing a diagonal $ a_{i}–b_{i} $ .
It is guaranteed that both original and goal triangulations are correct (i. e. no two diagonals share a common internal point in both of these triangulations).</div>
<h3>输出格式</h3>
<br />
<div>First, output an integer $ k $ ( $ 0<=k<=20,000 $ ): number of steps.
Then output $ k $ lines, each containing 2 integers $ a_{i} $ and $ b_{i} $ : the endpoints of a diagonal you are going to flip at step $ i $ . You may output $ a_{i} $ and $ b_{i} $ in any order.
If there are several possible solutions, output any of them.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
1 3
2 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
1 3
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>6
2 6
3 6
4 6
6 2
5 2
4 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>2
6 3
6 4
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>8
7 1
2 7
7 3
6 3
4 6
6 1
6 2
6 3
6 4
6 8
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>3
7 3
7 2
7 1</code></pre>
<h2>说明</h2>
<div>Sample test 2 is discussed above and shown on the picture.</div>
</article>
</div>
</div>
</body>
</html>
