<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Sergey and Subway - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573401090:JYVhioAPa8xSybArK9ICUIyvhaaI7Ex44TfBHRR4N8c=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Sergey%20Semyonovich%20is%20a%20mayor%20of%20a%20county%20city%20N%20and%20he%20used%20to%20spend%20his%20days%20and%20nights%20in%20thoughts%20of%20further%20improvements%20of%20Nkers%27%20lives.%20Unfortunately%20for%20him%2C%20anything%20and%20everything%20has%20been%20done%20already%2C%20and%20there%20are%20no%20more%20possible%20improvements%20he%20can%20think%20of%20during%20the%20day%20%28he%20now%20prefers%20to%20sleep%20at%20night%29.%20However%2C%20his%20assistants%20have%20found%20a%20solution%20and%20they%20now%20draw%20an%20imaginary%20city%20on%20a%20paper%20sheet%20and%20suggest%20the%20mayor%20can%20propose%20its%20improvements.%5Cn%5CnRight%20now%20he%20has%20a%20map%20of%20some%20imaginary%20city%20with%20%24%20n%20%24%20subway%20stations.%20Some%20stations%20are%20directly%20connected%20with%20tunnels%20in%20such%20a%20way%20that%20the%20whole%20map%20is%20a%20tree%20%28assistants%20were%20short%20on%20time%20and%20enthusiasm%29.%20It%20means%20that%20there%20exists%20exactly%20one%20simple%20path%20between%20each%20pair%20of%20station.%20We%20call%20a%20path%20simple%20if%20it%20uses%20each%20tunnel%20no%20more%20than%20once.%5Cn%5CnOne%20of%20Sergey%20Semyonovich%27s%20favorite%20quality%20objectives%20is%20the%20sum%20of%20all%20pairwise%20distances%20between%20every%20pair%20of%20stations.%20The%20distance%20between%20two%20stations%20is%20the%20minimum%20possible%20number%20of%20tunnels%20on%20a%20path%20between%20them.%5Cn%5CnSergey%20Semyonovich%20decided%20to%20add%20new%20tunnels%20to%20the%20subway%20map.%20In%20particular%2C%20he%20connected%20any%20two%20stations%20%24%20u%20%24%20and%20%24%20v%20%24%20that%20were%20not%20connected%20with%20a%20direct%20tunnel%20but%20share%20a%20common%20neighbor%2C%20i.e.%20there%20exists%20such%20a%20station%20%24%20w%20%24%20that%20the%20original%20map%20has%20a%20tunnel%20between%20%24%20u%20%24%20and%20%24%20w%20%24%20and%20a%20tunnel%20between%20%24%20w%20%24%20and%20%24%20v%20%24%20.%20You%20are%20given%20a%20task%20to%20compute%20the%20sum%20of%20pairwise%20distances%20between%20all%20pairs%20of%20stations%20in%20the%20new%20map.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%202%20%5C%5Cleq%20n%20%5C%5Cleq%20200%5C%5C%2C000%20%24%20%29%20%5Cu2014%20the%20number%20of%20subway%20stations%20in%20the%20imaginary%20city%20drawn%20by%20mayor%27s%20assistants.%20Each%20of%20the%20following%20%24%20n%20-%201%20%24%20lines%20contains%20two%20integers%20%24%20u_i%20%24%20and%20%24%20v_i%20%24%20%28%20%24%201%20%5C%5Cleq%20u_i%2C%20v_i%20%5C%5Cleq%20n%20%24%20%2C%20%24%20u_i%20%5C%5Cne%20v_i%20%24%20%29%2C%20meaning%20the%20station%20with%20these%20indices%20are%20connected%20with%20a%20direct%20tunnel.%5Cn%5CnIt%20is%20guaranteed%20that%20these%20%24%20n%20%24%20stations%20and%20%24%20n%20-%201%20%24%20tunnels%20form%20a%20tree.%22%2C%22outputFormat%22%3A%22Print%20one%20integer%20that%20is%20equal%20to%20the%20sum%20of%20distances%20between%20all%20pairs%20of%20stations%20after%20Sergey%20Semyonovich%20draws%20new%20tunnels%20between%20all%20pairs%20of%20stations%20that%20share%20a%20common%20neighbor%20in%20the%20original%20map.%22%2C%22samples%22%3A%5B%5B%224%5Cn1%202%5Cn1%203%5Cn1%204%5Cn%22%2C%226%5Cn%22%5D%2C%5B%224%5Cn1%202%5Cn2%203%5Cn3%204%5Cn%22%2C%227%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20in%20the%20new%20map%20all%20pairs%20of%20stations%20share%20a%20direct%20connection%2C%20so%20the%20sum%20of%20distances%20is%20%24%206%20%24%20.%5Cn%5CnIn%20the%20second%20sample%2C%20the%20new%20map%20has%20a%20direct%20tunnel%20between%20all%20pairs%20of%20stations%20except%20for%20the%20pair%20%24%20%281%2C%204%29%20%24%20.%20For%20these%20two%20stations%20the%20distance%20is%20%24%202%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1060%5C%2FE%22%2C%22id%22%3A%221060E%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu51fa%5Cu4e00%5Cu9897%24N%24%5Cu4e2a%5Cu8282%5Cu70b9%5Cu7684%5Cu6811%2C%5Cu73b0%5Cu5728%5Cu6211%5Cu4eec%2A%2A%5Cu5728%5Cu539f%5Cu56fe%5Cu4e2d%2A%2A%5Cu6bcf%5Cu4e2a%5Cu4e0d%5Cu76f4%5Cu63a5%5Cu8fde%5Cu8fb9%5Cu4f46%5Cu662f%5Cu4e2d%5Cu95f4%5Cu53ea%5Cu95f4%5Cu9694%5Cu4e00%5Cu4e2a%5Cu70b9%5Cu7684%5Cu4e24%5Cu4e2a%5Cu70b9%5Cu4e4b%5Cu95f4%5Cu8fde%5Cu4e00%5Cu6761%5Cu8fb9.%5Cr%5Cn%5Cr%5Cn%5Cu6bd4%5Cu5982%2A%2A%5Cu5728%5Cu539f%5Cu56fe%5Cu4e2d%2A%2A%24u%24%5Cu4e0e%24v%24%5Cu8fde%5Cu8fb9%2C%24v%24%5Cu4e0e%24w%24%5Cu8fde%5Cu8fb9%2C%5Cu4f46%5Cu662f%24u%24%5Cu4e0e%24w%24%5Cu4e0d%5Cu8fde%5Cu8fb9%2C%5Cu8fd9%5Cu65f6%5Cu5019%5Cu6211%5Cu4eec%5Cu5c31%5Cu9700%5Cu8981%5Cu8fde%5Cu4e00%5Cu6761%24u%24%5Cu4e0e%24v%24%5Cu7684%5Cu8fb9.%5Cr%5Cn%5Cr%5Cn%5Cu73b0%5Cu5728%5Cu6211%5Cu4eec%5Cu9700%5Cu8981%5Cu6c42%5Cu51fa%5Cu65b0%5Cu56fe%5Cu4e2d%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu70b9%5Cu5bf9%24%28i%2Cj%29%5C%5C%20%281%20%5C%5Cleq%20i%20%5C%5Cleq%20j%20%5C%5Cleq%20N%29%24%5Cu7684%5Cu7ecf%5Cu8fc7%5Cu7684%5Cu8fb9%5Cu6570%5Cu548c.%22%2C%22tags%22%3A%5B112%2C127%2C266%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A314%2C%22totalAccepted%22%3A197%2C%22pid%22%3A%22CF1060E%22%2C%22title%22%3A%22Sergey%20and%20Subway%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A87816%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%5Cu6709%5Cu95ee%5Cu9898%5Cu5417%5Cuff1f%22%2C%22forum%22%3A%7B%22id%22%3A30280%2C%22name%22%3A%22CF1060E%20Sergey%20and%20Subway%22%2C%22slug%22%3A%22CF1060E%22%7D%7D%2C%7B%22id%22%3A69548%2C%22title%22%3A%22%5Cu7591%5Cu95ee%22%2C%22forum%22%3A%7B%22id%22%3A30280%2C%22name%22%3A%22CF1060E%20Sergey%20and%20Subway%22%2C%22slug%22%3A%22CF1060E%22%7D%7D%2C%7B%22id%22%3A69484%2C%22title%22%3A%22%5Cu771f%5Cu8fc7%5Cu5206%22%2C%22forum%22%3A%7B%22id%22%3A30280%2C%22name%22%3A%22CF1060E%20Sergey%20and%20Subway%22%2C%22slug%22%3A%22CF1060E%22%7D%7D%2C%7B%22id%22%3A69392%2C%22title%22%3A%22%5Cu9898%5Cu76ee%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A30280%2C%22name%22%3A%22CF1060E%20Sergey%20and%20Subway%22%2C%22slug%22%3A%22CF1060E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3574%22%2C%22title%22%3A%22%5BPOI2014%5DFAR-FarmCraft%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF1060D%22%2C%22title%22%3A%22Social%20Circles%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1060C%22%2C%22title%22%3A%22Maximum%20Subrectangle%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1188A1%22%2C%22title%22%3A%22Add%20on%20a%20Tree%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1238F%22%2C%22title%22%3A%22The%20Maximum%20Subtree%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Sergey%20and%20Subway%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Sergey and Subway</h1>
<h2>题意翻译</h2>
<div>给出一颗$N$个节点的树,现在我们**在原图中**每个不直接连边但是中间只间隔一个点的两个点之间连一条边.
比如**在原图中**$u$与$v$连边,$v$与$w$连边,但是$u$与$w$不连边,这时候我们就需要连一条$u$与$v$的边.
现在我们需要求出新图中每一个点对$(i,j)\ (1 \leq i \leq j \leq N)$的经过的边数和.</div>
<h2>题目描述</h2>
<div>Sergey Semyonovich is a mayor of a county city N and he used to spend his days and nights in thoughts of further improvements of Nkers' lives. Unfortunately for him, anything and everything has been done already, and there are no more possible improvements he can think of during the day (he now prefers to sleep at night). However, his assistants have found a solution and they now draw an imaginary city on a paper sheet and suggest the mayor can propose its improvements.
Right now he has a map of some imaginary city with $ n $ subway stations. Some stations are directly connected with tunnels in such a way that the whole map is a tree (assistants were short on time and enthusiasm). It means that there exists exactly one simple path between each pair of station. We call a path simple if it uses each tunnel no more than once.
One of Sergey Semyonovich's favorite quality objectives is the sum of all pairwise distances between every pair of stations. The distance between two stations is the minimum possible number of tunnels on a path between them.
Sergey Semyonovich decided to add new tunnels to the subway map. In particular, he connected any two stations $ u $ and $ v $ that were not connected with a direct tunnel but share a common neighbor, i.e. there exists such a station $ w $ that the original map has a tunnel between $ u $ and $ w $ and a tunnel between $ w $ and $ v $ . You are given a task to compute the sum of pairwise distances between all pairs of stations in the new map.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains a single integer $ n $ ( $ 2 \leq n \leq 200\,000 $ ) — the number of subway stations in the imaginary city drawn by mayor's assistants. Each of the following $ n - 1 $ lines contains two integers $ u_i $ and $ v_i $ ( $ 1 \leq u_i, v_i \leq n $ , $ u_i \ne v_i $ ), meaning the station with these indices are connected with a direct tunnel.
It is guaranteed that these $ n $ stations and $ n - 1 $ tunnels form a tree.</div>
<h3>输出格式</h3>
<br />
<div>Print one integer that is equal to the sum of distances between all pairs of stations after Sergey Semyonovich draws new tunnels between all pairs of stations that share a common neighbor in the original map.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
1 2
1 3
1 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>6
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4
1 2
2 3
3 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>7
</code></pre>
<h2>说明</h2>
<div>In the first sample, in the new map all pairs of stations share a direct connection, so the sum of distances is $ 6 $ .
In the second sample, the new map has a direct tunnel between all pairs of stations except for the pair $ (1, 4) $ . For these two stations the distance is $ 2 $ .</div>
</article>
</div>
</div>
</body>
</html>
