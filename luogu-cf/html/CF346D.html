<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Robot Control - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573393076:gl6yO8xfmY8J1iRNOTRNQtrU72gmHdBRiE1XEwY7MZ0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22The%20boss%20of%20the%20Company%20of%20Robot%20is%20a%20cruel%20man.%20His%20motto%20is%20%5C%22Move%20forward%20Or%20Die%21%5C%22.%20And%20that%20is%20exactly%20what%20his%20company%27s%20product%20do.%20Look%20at%20the%20behavior%20of%20the%20company%27s%20robot%20when%20it%20is%20walking%20in%20the%20directed%20graph.%20This%20behavior%20has%20been%20called%20%5C%22Three%20Laws%20of%20Robotics%5C%22%3A%5Cn%5Cn-%20Law%201.%20The%20Robot%20will%20destroy%20itself%20when%20it%20visits%20a%20vertex%20of%20the%20graph%20which%20it%20has%20already%20visited.%5Cn-%20Law%202.%20The%20Robot%20will%20destroy%20itself%20when%20it%20has%20no%20way%20to%20go%20%28that%20is%20when%20it%20reaches%20a%20vertex%20whose%20out-degree%20is%20zero%29.%5Cn-%20Law%203.%20The%20Robot%20will%20move%20randomly%20when%20it%20has%20multiple%20ways%20to%20move%20%28that%20is%20when%20it%20reach%20a%20vertex%20whose%20out-degree%20is%20more%20than%20one%29.%20Of%20course%2C%20the%20robot%20can%20move%20only%20along%20the%20directed%20edges%20of%20the%20graph.%5Cn%5CnCan%20you%20imagine%20a%20robot%20behaving%20like%20that%3F%20That%27s%20why%20they%20are%20sold%20at%20a%20very%20low%20price%2C%20just%20for%20those%20who%20are%20short%20of%20money%2C%20including%20mzry1992%2C%20of%20course.%20mzry1992%20has%20such%20a%20robot%2C%20and%20she%20wants%20to%20move%20it%20from%20vertex%20%24%20s%20%24%20to%20vertex%20%24%20t%20%24%20in%20a%20directed%20graph%20safely%20without%20self-destruction.%20Luckily%2C%20she%20can%20send%20her%20robot%20special%20orders%20at%20each%20vertex.%20A%20special%20order%20shows%20the%20robot%20which%20way%20to%20move%2C%20if%20it%20has%20multiple%20ways%20to%20move%20%28to%20prevent%20random%20moving%20of%20the%20robot%20according%20to%20Law%203%29.%20When%20the%20robot%20reaches%20vertex%20%24%20t%20%24%20%2C%20mzry1992%20takes%20it%20off%20the%20graph%20immediately.%20So%20you%20can%20see%20that%2C%20as%20long%20as%20there%20exists%20a%20path%20from%20%24%20s%20%24%20to%20%24%20t%20%24%20%2C%20she%20can%20always%20find%20a%20way%20to%20reach%20the%20goal%20%28whatever%20the%20vertex%20%24%20t%20%24%20has%20the%20outdegree%20of%20zero%20or%20not%29.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF346D%5C%2F70cbc1b898581d5fe7e403c459e5024fa4aa2e72.png%29%20Sample%202%20However%2C%20sending%20orders%20is%20expensive%2C%20so%20your%20task%20is%20to%20find%20the%20minimum%20number%20of%20orders%20mzry1992%20needs%20to%20send%20in%20the%20worst%20case.%20Please%20note%20that%20mzry1992%20can%20give%20orders%20to%20the%20robot%20while%20it%20is%20walking%20on%20the%20graph.%20Look%20at%20the%20first%20sample%20to%20clarify%20that%20part%20of%20the%20problem.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D10%5E%7B6%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertices%20of%20the%20graph%2C%20and%20%24%20m%20%24%20%28%20%24%201%3C%3Dm%3C%3D10%5E%7B6%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20edges.%20Then%20%24%20m%20%24%20lines%20follow%2C%20each%20with%20two%20integers%20%24%20u_%7Bi%7D%20%24%20and%20%24%20v_%7Bi%7D%20%24%20%28%20%24%201%3C%3Du_%7Bi%7D%2Cv_%7Bi%7D%3C%3Dn%20%24%20%3B%20%24%20v_%7Bi%7D%5Cu2260u_%7Bi%7D%20%24%20%29%2C%20these%20integers%20denote%20that%20there%20is%20a%20directed%20edge%20from%20vertex%20%24%20u_%7Bi%7D%20%24%20to%20vertex%20%24%20v_%7Bi%7D%20%24%20.%20The%20last%20line%20contains%20two%20integers%20%24%20s%20%24%20and%20%24%20t%20%24%20%28%20%24%201%3C%3Ds%2Ct%3C%3Dn%20%24%20%29.%5Cn%5CnIt%20is%20guaranteed%20that%20there%20are%20no%20multiple%20edges%20and%20self-loops.%22%2C%22outputFormat%22%3A%22If%20there%20is%20a%20way%20to%20reach%20a%20goal%2C%20print%20the%20required%20minimum%20number%20of%20orders%20in%20the%20worst%20case.%20Otherwise%2C%20print%20-1.%22%2C%22samples%22%3A%5B%5B%224%206%5Cn1%202%5Cn2%201%5Cn1%203%5Cn3%201%5Cn2%204%5Cn3%204%5Cn1%204%5Cn%22%2C%221%5Cn%22%5D%2C%5B%224%205%5Cn1%202%5Cn2%201%5Cn1%203%5Cn2%204%5Cn3%204%5Cn1%204%5Cn%22%2C%221%5Cn%22%5D%5D%2C%22hint%22%3A%22Consider%20the%20first%20test%20sample.%20Initially%20the%20robot%20is%20on%20vertex%201.%20So%2C%20on%20the%20first%20step%20the%20robot%20can%20go%20to%20vertex%202%20or%203.%20No%20matter%20what%20vertex%20the%20robot%20chooses%2C%20mzry1992%20must%20give%20an%20order%20to%20the%20robot.%20This%20order%20is%20to%20go%20to%20vertex%204.%20If%20mzry1992%20doesn%27t%20give%20an%20order%20to%20the%20robot%20at%20vertex%202%20or%203%2C%20the%20robot%20can%20choose%20the%20%5C%22bad%5C%22%20outgoing%20edge%20%28return%20to%20vertex%201%29%20according%20Law%203.%20So%2C%20the%20answer%20is%20one.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B6000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F346%5C%2FD%22%2C%22id%22%3A%22346D%22%7D%2C%22translation%22%3A%22%2A%2ADescription%2A%2A%5Cr%5Cn%5Cr%5Cn%5Cu6709%5Cu4e00%5Cu4e2a%20N%20%5Cu4e2a%5Cu70b9%2C%20M%20%5Cu6761%5Cu8fb9%5Cu7684%5Cu6709%5Cu5411%5Cu56fe%2C%20%5Cu521d%5Cu59cb%5Cu6709%5Cu4e00%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu5728%201%20%5Cu53f7%5Cu70b9.%20%5Cu6bcf%5Cu4e2a%5Cu65f6%5Cu523b%2C%20%5Cu8fd9%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu4f1a%5Cu968f%5Cu673a%5Cu9009%5Cu62e9%5Cu4e00%5Cu6761%5Cu4ece%5Cu8be5%5Cu70b9%5Cu51fa%5Cu53d1%5Cu5730%5Cu8fb9%5Cu5e76%5Cu901a%5Cu8fc7.%5Cu5f53%5Cu673a%5Cu5668%5Cu4eba%5Cu5230%5Cu8fbe%5Cu70b9%20N%20%5Cu65f6%2C%20%5Cu5b83%5Cu5c31%5Cu4f1a%5Cu81ea%5Cu52a8%5Cu5173%5Cu95ed.%5Cr%5Cn%5Cr%5Cn%5Cu7136%5Cu800c%5Cu8fd9%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu5982%5Cu679c%5Cu5728%5Cu67d0%5Cu4e2a%5Cu65f6%5Cu523b%5Cu5230%5Cu8fbe%5Cu81ea%5Cu5df1%5Cu66fe%5Cu7ecf%5Cu5230%5Cu8fc7%5Cu7684%5Cu70b9%5Cu7684%5Cu8bdd%2C%5Cu5b83%5Cu5c31%5Cu4f1a%5Cu7206%5Cu70b8.%20%5Cu56e0%5Cu6b64%2C%20%5Cu4f60%5Cu51b3%5Cu5b9a%5Cu5bf9%5Cu673a%5Cu5668%5Cu4eba%5Cu5b9e%5Cu65bd%5Cu4e00%5Cu4e9b%5Cu547d%5Cu4ee4%2C%20%5Cu8ba9%5Cu5b83%5Cu5728%5Cu67d0%5Cu4e9b%5Cu65f6%5Cu5019%5Cu6309%5Cu7167%5Cu89c4%5Cu5b9a%5Cu7684%5Cu8fb9%5Cu8d70%2C%20%5Cu800c%5Cu975e%5Cu968f%5Cu673a%5Cu9009%5Cu62e9.%5Cr%5Cn%5Cu95ee%5Cu5bf9%5Cu673a%5Cu5668%5Cu4eba%5Cu6700%5Cu5c11%5Cu4f7f%5Cu7528%5Cu591a%5Cu5c11%5Cu6761%5Cu547d%5Cu4ee4%5Cu53ef%5Cu4ee5%5Cu8ba9%5Cu5b83%5Cu5b89%5Cu5168%5Cu5230%5Cu8fbe%5Cu70b9%20N.%5Cr%5Cn%5Cr%5Cn%2A%2AConstraints%2A%2A%5Cr%5CnN%2C%20M%20%5Cu2264%201e6%5Cr%5Cn%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A6%2C%22totalAccepted%22%3A3%2C%22pid%22%3A%22CF346D%22%2C%22title%22%3A%22Robot%20Control%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Robot%20Control%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Robot Control</h1>
<h2>题意翻译</h2>
<div>**Description**
有一个 N 个点, M 条边的有向图, 初始有一个机器人在 1 号点. 每个时刻, 这个机器人会随机选择一条从该点出发地边并通过.当机器人到达点 N 时, 它就会自动关闭.
然而这个机器人如果在某个时刻到达自己曾经到过的点的话,它就会爆炸. 因此, 你决定对机器人实施一些命令, 让它在某些时候按照规定的边走, 而非随机选择.
问对机器人最少使用多少条命令可以让它安全到达点 N.
**Constraints**
N, M ≤ 1e6
</div>
<h2>题目描述</h2>
<div>The boss of the Company of Robot is a cruel man. His motto is "Move forward Or Die!". And that is exactly what his company's product do. Look at the behavior of the company's robot when it is walking in the directed graph. This behavior has been called "Three Laws of Robotics":
- Law 1. The Robot will destroy itself when it visits a vertex of the graph which it has already visited.
- Law 2. The Robot will destroy itself when it has no way to go (that is when it reaches a vertex whose out-degree is zero).
- Law 3. The Robot will move randomly when it has multiple ways to move (that is when it reach a vertex whose out-degree is more than one). Of course, the robot can move only along the directed edges of the graph.
Can you imagine a robot behaving like that? That's why they are sold at a very low price, just for those who are short of money, including mzry1992, of course. mzry1992 has such a robot, and she wants to move it from vertex $ s $ to vertex $ t $ in a directed graph safely without self-destruction. Luckily, she can send her robot special orders at each vertex. A special order shows the robot which way to move, if it has multiple ways to move (to prevent random moving of the robot according to Law 3). When the robot reaches vertex $ t $ , mzry1992 takes it off the graph immediately. So you can see that, as long as there exists a path from $ s $ to $ t $ , she can always find a way to reach the goal (whatever the vertex $ t $ has the outdegree of zero or not).
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF346D/70cbc1b898581d5fe7e403c459e5024fa4aa2e72.png) Sample 2 However, sending orders is expensive, so your task is to find the minimum number of orders mzry1992 needs to send in the worst case. Please note that mzry1992 can give orders to the robot while it is walking on the graph. Look at the first sample to clarify that part of the problem.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ ( $ 1<=n<=10^{6} $ ) — the number of vertices of the graph, and $ m $ ( $ 1<=m<=10^{6} $ ) — the number of edges. Then $ m $ lines follow, each with two integers $ u_{i} $ and $ v_{i} $ ( $ 1<=u_{i},v_{i}<=n $ ; $ v_{i}≠u_{i} $ ), these integers denote that there is a directed edge from vertex $ u_{i} $ to vertex $ v_{i} $ . The last line contains two integers $ s $ and $ t $ ( $ 1<=s,t<=n $ ).
It is guaranteed that there are no multiple edges and self-loops.</div>
<h3>输出格式</h3>
<br />
<div>If there is a way to reach a goal, print the required minimum number of orders in the worst case. Otherwise, print -1.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 6
1 2
2 1
1 3
3 1
2 4
3 4
1 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4 5
1 2
2 1
1 3
2 4
3 4
1 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>1
</code></pre>
<h2>说明</h2>
<div>Consider the first test sample. Initially the robot is on vertex 1. So, on the first step the robot can go to vertex 2 or 3. No matter what vertex the robot chooses, mzry1992 must give an order to the robot. This order is to go to vertex 4. If mzry1992 doesn't give an order to the robot at vertex 2 or 3, the robot can choose the "bad" outgoing edge (return to vertex 1) according Law 3. So, the answer is one.</div>
</article>
</div>
</div>
</body>
</html>
