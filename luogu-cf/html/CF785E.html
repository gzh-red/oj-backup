<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Anton and Permutation - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573397850:NPpL0wFU/TWS2jmczfRgnUjg87Thv/AEhjqmJW5i4v4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Anton%20likes%20permutations%2C%20especially%20he%20likes%20to%20permute%20their%20elements.%20Note%20that%20a%20permutation%20of%20%24%20n%20%24%20elements%20is%20a%20sequence%20of%20numbers%20%24%20%7Ba_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%7D%20%24%20%2C%20in%20which%20every%20number%20from%20%24%201%20%24%20to%20%24%20n%20%24%20appears%20exactly%20once.%5Cn%5CnOne%20day%20Anton%20got%20a%20new%20permutation%20and%20started%20to%20play%20with%20it.%20He%20does%20the%20following%20operation%20%24%20q%20%24%20times%3A%20he%20takes%20two%20elements%20of%20the%20permutation%20and%20swaps%20these%20elements.%20After%20each%20operation%20he%20asks%20his%20friend%20Vanya%2C%20how%20many%20inversions%20there%20are%20in%20the%20new%20permutation.%20The%20number%20of%20inversions%20in%20a%20permutation%20is%20the%20number%20of%20distinct%20pairs%20%24%20%28i%2Cj%29%20%24%20such%20that%20%24%201%3C%3Di%3Cj%3C%3Dn%20%24%20and%20%24%20a_%7Bi%7D%3Ea_%7Bj%7D%20%24%20.%5Cn%5CnVanya%20is%20tired%20of%20answering%20Anton%27s%20silly%20questions.%20So%20he%20asked%20you%20to%20write%20a%20program%20that%20would%20answer%20these%20questions%20instead%20of%20him.%5Cn%5CnInitially%20Anton%27s%20permutation%20was%20%24%20%7B1%2C2%2C...%2Cn%7D%20%24%20%2C%20that%20is%20%24%20a_%7Bi%7D%3Di%20%24%20for%20all%20%24%20i%20%24%20such%20that%20%24%201%3C%3Di%3C%3Dn%20%24%20.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20q%20%24%20%24%20%281%3C%3Dn%3C%3D200000%2C1%3C%3Dq%3C%3D50000%29%20%24%20%5Cu2014%20the%20length%20of%20the%20permutation%20and%20the%20number%20of%20operations%20that%20Anton%20does.%5Cn%5CnEach%20of%20the%20following%20%24%20q%20%24%20lines%20of%20the%20input%20contains%20two%20integers%20%24%20l_%7Bi%7D%20%24%20and%20%24%20r_%7Bi%7D%20%24%20%24%20%281%3C%3Dl_%7Bi%7D%2Cr_%7Bi%7D%3C%3Dn%29%20%24%20%5Cu2014%20the%20indices%20of%20elements%20that%20Anton%20swaps%20during%20the%20%24%20i%20%24%20-th%20operation.%20Note%20that%20indices%20of%20elements%20that%20Anton%20swaps%20during%20the%20%24%20i%20%24%20-th%20operation%20can%20coincide.%20Elements%20in%20the%20permutation%20are%20numbered%20starting%20with%20one.%22%2C%22outputFormat%22%3A%22Output%20%24%20q%20%24%20lines.%20The%20%24%20i%20%24%20-th%20line%20of%20the%20output%20is%20the%20number%20of%20inversions%20in%20the%20Anton%27s%20permutation%20after%20the%20%24%20i%20%24%20-th%20operation.%22%2C%22samples%22%3A%5B%5B%225%204%5Cn4%205%5Cn2%204%5Cn2%205%5Cn2%202%5Cn%22%2C%221%5Cn4%5Cn3%5Cn3%5Cn%22%5D%2C%5B%222%201%5Cn2%201%5Cn%22%2C%221%5Cn%22%5D%2C%5B%226%207%5Cn1%204%5Cn3%205%5Cn2%203%5Cn3%203%5Cn3%206%5Cn2%201%5Cn5%201%5Cn%22%2C%225%5Cn6%5Cn7%5Cn7%5Cn10%5Cn11%5Cn8%5Cn%22%5D%5D%2C%22hint%22%3A%22Consider%20the%20first%20sample.%5Cn%5CnAfter%20the%20first%20Anton%27s%20operation%20the%20permutation%20will%20be%20%24%20%7B1%2C2%2C3%2C5%2C4%7D%20%24%20.%20There%20is%20only%20one%20inversion%20in%20it%3A%20%24%20%284%2C5%29%20%24%20.%5Cn%5CnAfter%20the%20second%20Anton%27s%20operation%20the%20permutation%20will%20be%20%24%20%7B1%2C5%2C3%2C2%2C4%7D%20%24%20.%20There%20are%20four%20inversions%3A%20%24%20%282%2C3%29%20%24%20%2C%20%24%20%282%2C4%29%20%24%20%2C%20%24%20%282%2C5%29%20%24%20and%20%24%20%283%2C4%29%20%24%20.%5Cn%5CnAfter%20the%20third%20Anton%27s%20operation%20the%20permutation%20will%20be%20%24%20%7B1%2C4%2C3%2C2%2C5%7D%20%24%20.%20There%20are%20three%20inversions%3A%20%24%20%282%2C3%29%20%24%20%2C%20%24%20%282%2C4%29%20%24%20and%20%24%20%283%2C4%29%20%24%20.%5Cn%5CnAfter%20the%20fourth%20Anton%27s%20operation%20the%20permutation%20doesn%27t%20change%2C%20so%20there%20are%20still%20three%20inversions.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B4000%5D%2C%22memory%22%3A%5B512000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F785%5C%2FE%22%2C%22id%22%3A%22785E%22%7D%2C%22translation%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu4e00%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu4e3a%20%24n%24%20%20%5Cu7684%5Cu5e8f%5Cu5217%5Cu8fdb%5Cu884c%20%24k%24%20%20%5Cu6b21%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu6bcf%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu90fd%5Cu662f%5Cu4ea4%5Cu6362%5Cu5e8f%5Cu5217%5Cu4e2d%5Cu7684%5Cu67d0%5Cu4e24%5Cu4e2a%5Cu6570%5Cu3002%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu56de%5Cu7b54%5Cu5f53%5Cu524d%5Cu5e8f%5Cu5217%5Cu4e2d%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu9006%5Cu5e8f%5Cu5bf9%5Cu3002%22%2C%22tags%22%3A%5B42%2C53%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A225%2C%22totalAccepted%22%3A77%2C%22pid%22%3A%22CF785E%22%2C%22title%22%3A%22Anton%20and%20Permutation%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A34349%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A9449%2C%22name%22%3A%22CF785E%20Anton%20and%20Permutation%22%2C%22slug%22%3A%22CF785E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P1975%22%2C%22title%22%3A%22%5B%5Cu56fd%5Cu5bb6%5Cu96c6%5Cu8bad%5Cu961f%5D%5Cu6392%5Cu961f%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3759%22%2C%22title%22%3A%22%5BTJOI2017%5D%5Cu4e0d%5Cu52e4%5Cu52b3%5Cu7684%5Cu56fe%5Cu4e66%5Cu7ba1%5Cu7406%5Cu5458%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3950%22%2C%22title%22%3A%22%5Cu90e8%5Cu843d%5Cu51b2%5Cu7a81%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF551E%22%2C%22title%22%3A%22GukiZ%20and%20GukiZiana%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF455D%22%2C%22title%22%3A%22Serega%20and%20Fun%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Anton%20and%20Permutation%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Anton and Permutation</h1>
<h2>题意翻译</h2>
<div>对于一个长度为 $n$ 的序列进行 $k$ 次操作，每次操作都是交换序列中的某两个数。对于每一个操作，回答当前序列中有多少个逆序对。</div>
<h2>题目描述</h2>
<div>Anton likes permutations, especially he likes to permute their elements. Note that a permutation of $ n $ elements is a sequence of numbers $ {a_{1},a_{2},...,a_{n}} $ , in which every number from $ 1 $ to $ n $ appears exactly once.
One day Anton got a new permutation and started to play with it. He does the following operation $ q $ times: he takes two elements of the permutation and swaps these elements. After each operation he asks his friend Vanya, how many inversions there are in the new permutation. The number of inversions in a permutation is the number of distinct pairs $ (i,j) $ such that $ 1<=i<j<=n $ and $ a_{i}>a_{j} $ .
Vanya is tired of answering Anton's silly questions. So he asked you to write a program that would answer these questions instead of him.
Initially Anton's permutation was $ {1,2,...,n} $ , that is $ a_{i}=i $ for all $ i $ such that $ 1<=i<=n $ .</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains two integers $ n $ and $ q $ $ (1<=n<=200000,1<=q<=50000) $ — the length of the permutation and the number of operations that Anton does.
Each of the following $ q $ lines of the input contains two integers $ l_{i} $ and $ r_{i} $ $ (1<=l_{i},r_{i}<=n) $ — the indices of elements that Anton swaps during the $ i $ -th operation. Note that indices of elements that Anton swaps during the $ i $ -th operation can coincide. Elements in the permutation are numbered starting with one.</div>
<h3>输出格式</h3>
<br />
<div>Output $ q $ lines. The $ i $ -th line of the output is the number of inversions in the Anton's permutation after the $ i $ -th operation.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5 4
4 5
2 4
2 5
2 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
4
3
3
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2 1
2 1
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>6 7
1 4
3 5
2 3
3 3
3 6
2 1
5 1
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>5
6
7
7
10
11
8
</code></pre>
<h2>说明</h2>
<div>Consider the first sample.
After the first Anton's operation the permutation will be $ {1,2,3,5,4} $ . There is only one inversion in it: $ (4,5) $ .
After the second Anton's operation the permutation will be $ {1,5,3,2,4} $ . There are four inversions: $ (2,3) $ , $ (2,4) $ , $ (2,5) $ and $ (3,4) $ .
After the third Anton's operation the permutation will be $ {1,4,3,2,5} $ . There are three inversions: $ (2,3) $ , $ (2,4) $ and $ (3,4) $ .
After the fourth Anton's operation the permutation doesn't change, so there are still three inversions.</div>
</article>
</div>
</div>
</body>
</html>
