<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Nastya Is Buying Lunch - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573402064:F/xhFOF8LDO1ZHvD6j5xSDEDa5Dk+3zrx9YE7ujB15A=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22At%20the%20big%20break%20Nastya%20came%20to%20the%20school%20dining%20room.%20There%20are%20%24%20n%20%24%20pupils%20in%20the%20school%2C%20numbered%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20Unfortunately%2C%20Nastya%20came%20pretty%20late%2C%20so%20that%20all%20pupils%20had%20already%20stood%20in%20the%20queue%2C%20i.e.%20Nastya%20took%20the%20last%20place%20in%20the%20queue.%20Of%20course%2C%20it%27s%20a%20little%20bit%20sad%20for%20Nastya%2C%20but%20she%20is%20not%20going%20to%20despond%20because%20some%20pupils%20in%20the%20queue%20can%20agree%20to%20change%20places%20with%20some%20other%20pupils.%5Cn%5CnFormally%2C%20there%20are%20some%20pairs%20%24%20u%20%24%20%2C%20%24%20v%20%24%20such%20that%20if%20the%20pupil%20with%20number%20%24%20u%20%24%20stands%20directly%20in%20front%20of%20the%20pupil%20with%20number%20%24%20v%20%24%20%2C%20Nastya%20can%20ask%20them%20and%20they%20will%20change%20places.%5Cn%5CnNastya%20asks%20you%20to%20find%20the%20maximal%20number%20of%20places%20in%20queue%20she%20can%20move%20forward.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%20%5C%5Cleq%20n%20%5C%5Cleq%203%20%5C%5Ccdot%2010%5E%7B5%7D%20%24%20%2C%20%24%200%20%5C%5Cleq%20m%20%5C%5Cleq%205%20%5C%5Ccdot%2010%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20pupils%20in%20the%20queue%20and%20number%20of%20pairs%20of%20pupils%20such%20that%20the%20first%20one%20agrees%20to%20change%20places%20with%20the%20second%20one%20if%20the%20first%20is%20directly%20in%20front%20of%20the%20second.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20p_1%20%24%20%2C%20%24%20p_2%20%24%20%2C%20...%2C%20%24%20p_n%20%24%20%5Cu2014%20the%20initial%20arrangement%20of%20pupils%20in%20the%20queue%2C%20from%20the%20queue%20start%20to%20its%20end%20%28%20%24%201%20%5C%5Cleq%20p_i%20%5C%5Cleq%20n%20%24%20%2C%20%24%20p%20%24%20is%20a%20permutation%20of%20integers%20from%20%24%201%20%24%20to%20%24%20n%20%24%20%29.%20In%20other%20words%2C%20%24%20p_i%20%24%20is%20the%20number%20of%20the%20pupil%20who%20stands%20on%20the%20%24%20i%20%24%20-th%20position%20in%20the%20queue.%5Cn%5CnThe%20%24%20i%20%24%20-th%20of%20the%20following%20%24%20m%20%24%20lines%20contains%20two%20integers%20%24%20u_i%20%24%20%2C%20%24%20v_i%20%24%20%28%20%24%201%20%5C%5Cleq%20u_i%2C%20v_i%20%5C%5Cleq%20n%2C%20u_i%20%5C%5Cneq%20v_i%20%24%20%29%2C%20denoting%20that%20the%20pupil%20with%20number%20%24%20u_i%20%24%20agrees%20to%20change%20places%20with%20the%20pupil%20with%20number%20%24%20v_i%20%24%20if%20%24%20u_i%20%24%20is%20directly%20in%20front%20of%20%24%20v_i%20%24%20.%20It%20is%20guaranteed%20that%20if%20%24%20i%20%5C%5Cneq%20j%20%24%20%2C%20than%20%24%20v_i%20%5C%5Cneq%20v_j%20%24%20or%20%24%20u_i%20%5C%5Cneq%20u_j%20%24%20.%20Note%20that%20it%20is%20possible%20that%20in%20some%20pairs%20both%20pupils%20agree%20to%20change%20places%20with%20each%20other.%5Cn%5CnNastya%20is%20the%20last%20person%20in%20the%20queue%2C%20i.e.%20the%20pupil%20with%20number%20%24%20p_n%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20number%20of%20places%20in%20queue%20she%20can%20move%20forward.%22%2C%22samples%22%3A%5B%5B%222%201%5Cn1%202%5Cn1%202%5Cn%22%2C%221%22%5D%2C%5B%223%203%5Cn3%201%202%5Cn1%202%5Cn3%201%5Cn3%202%5Cn%22%2C%222%22%5D%2C%5B%225%202%5Cn3%201%205%204%202%5Cn5%202%5Cn5%204%5Cn%22%2C%221%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20example%20Nastya%20can%20just%20change%20places%20with%20the%20first%20pupil%20in%20the%20queue.%5Cn%5CnOptimal%20sequence%20of%20changes%20in%20the%20second%20example%20is%5Cn%5Cn-%20change%20places%20for%20pupils%20with%20numbers%20%24%201%20%24%20and%20%24%203%20%24%20.%5Cn-%20change%20places%20for%20pupils%20with%20numbers%20%24%203%20%24%20and%20%24%202%20%24%20.%5Cn-%20change%20places%20for%20pupils%20with%20numbers%20%24%201%20%24%20and%20%24%202%20%24%20.%5Cn%5CnThe%20queue%20looks%20like%20%24%20%5B3%2C%201%2C%202%5D%20%24%20%2C%20then%20%24%20%5B1%2C%203%2C%202%5D%20%24%20%2C%20then%20%24%20%5B1%2C%202%2C%203%5D%20%24%20%2C%20and%20finally%20%24%20%5B2%2C%201%2C%203%5D%20%24%20after%20these%20operations.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1136%5C%2FD%22%2C%22id%22%3A%221136D%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu5b9a%5Cu4e00%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu4e3a%24n%24%5Cu7684%241-n%24%5Cu7684%5Cu5168%5Cu6392%5Cu5217%5Cuff0c%5Cu7b2c%24i%24%5Cu4e2a%5Cu6570%5Cu8868%5Cu793a%5Cu7ad9%5Cu5728%5Cu7b2c%24i%24%5Cu4f4d%5Cu7684%5Cu5b66%5Cu751f%5Cu7684%5Cu7f16%5Cu53f7%5Cr%5Cn%5Cr%5Cn%5Cu7ed9%5Cu5b9a%24m%24%5Cu5bf9%24%28u%2Cv%29%24%5Cuff0c%5Cu5982%5Cu679c%5Cu7f16%5Cu53f7%24u%24%5Cu7684%5Cu5b66%5Cu751f%5Cu5728%5Cu7f16%5Cu53f7%24v%24%5Cu7684%5Cu5b66%5Cu751f%5Cu524d%5Cu9762%5Cu4e00%5Cu4f4d%5Cuff0c%5Cu5219%5Cu53ef%5Cu4ee5%5Cu5c06%5Cu4ed6%5Cu4eec%5Cu7684%5Cu4f4d%5Cu7f6e%5Cu4e92%5Cu6362%5Cr%5Cn%5Cr%5Cn%5Cu95ee%5Cu6700%5Cu540e%5Cu4e00%5Cu4e2a%5Cu5b66%5Cu751f%5Cu80fd%5Cu5411%5Cu524d%5Cu79fb%5Cu52a8%5Cu591a%5Cu5c11%5Cu4f4d%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A64%2C%22totalAccepted%22%3A41%2C%22pid%22%3A%22CF1136D%22%2C%22title%22%3A%22Nastya%20Is%20Buying%20Lunch%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22CF1132G%22%2C%22title%22%3A%22Greedy%20Subsequences%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1136E%22%2C%22title%22%3A%22Nastya%20Hasn%27t%20Written%20a%20Legend%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1119D%22%2C%22title%22%3A%22Frets%20On%20Fire%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1175E%22%2C%22title%22%3A%22Minimal%20Segment%20Cover%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1187D%22%2C%22title%22%3A%22Subarray%20Sorting%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Nastya%20Is%20Buying%20Lunch%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Nastya Is Buying Lunch</h1>
<h2>题意翻译</h2>
<div>给定一个长度为$n$的$1-n$的全排列，第$i$个数表示站在第$i$位的学生的编号
给定$m$对$(u,v)$，如果编号$u$的学生在编号$v$的学生前面一位，则可以将他们的位置互换
问最后一个学生能向前移动多少位</div>
<h2>题目描述</h2>
<div>At the big break Nastya came to the school dining room. There are $ n $ pupils in the school, numbered from $ 1 $ to $ n $ . Unfortunately, Nastya came pretty late, so that all pupils had already stood in the queue, i.e. Nastya took the last place in the queue. Of course, it's a little bit sad for Nastya, but she is not going to despond because some pupils in the queue can agree to change places with some other pupils.
Formally, there are some pairs $ u $ , $ v $ such that if the pupil with number $ u $ stands directly in front of the pupil with number $ v $ , Nastya can ask them and they will change places.
Nastya asks you to find the maximal number of places in queue she can move forward.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 1 \leq n \leq 3 \cdot 10^{5} $ , $ 0 \leq m \leq 5 \cdot 10^{5} $ ) — the number of pupils in the queue and number of pairs of pupils such that the first one agrees to change places with the second one if the first is directly in front of the second.
The second line contains $ n $ integers $ p_1 $ , $ p_2 $ , ..., $ p_n $ — the initial arrangement of pupils in the queue, from the queue start to its end ( $ 1 \leq p_i \leq n $ , $ p $ is a permutation of integers from $ 1 $ to $ n $ ). In other words, $ p_i $ is the number of the pupil who stands on the $ i $ -th position in the queue.
The $ i $ -th of the following $ m $ lines contains two integers $ u_i $ , $ v_i $ ( $ 1 \leq u_i, v_i \leq n, u_i \neq v_i $ ), denoting that the pupil with number $ u_i $ agrees to change places with the pupil with number $ v_i $ if $ u_i $ is directly in front of $ v_i $ . It is guaranteed that if $ i \neq j $ , than $ v_i \neq v_j $ or $ u_i \neq u_j $ . Note that it is possible that in some pairs both pupils agree to change places with each other.
Nastya is the last person in the queue, i.e. the pupil with number $ p_n $ .</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the number of places in queue she can move forward.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 1
1 2
1 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1</code></pre>
<h3>输入样例 #2</h3>
<pre><code>3 3
3 1 2
1 2
3 1
3 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>2</code></pre>
<h3>输入样例 #3</h3>
<pre><code>5 2
3 1 5 4 2
5 2
5 4
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>1</code></pre>
<h2>说明</h2>
<div>In the first example Nastya can just change places with the first pupil in the queue.
Optimal sequence of changes in the second example is
- change places for pupils with numbers $ 1 $ and $ 3 $ .
- change places for pupils with numbers $ 3 $ and $ 2 $ .
- change places for pupils with numbers $ 1 $ and $ 2 $ .
The queue looks like $ [3, 1, 2] $ , then $ [1, 3, 2] $ , then $ [1, 2, 3] $ , and finally $ [2, 1, 3] $ after these operations.</div>
</article>
</div>
</div>
</body>
</html>
