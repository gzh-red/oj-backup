<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Andrew and Chemistry - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573397036:Ut2DsShuobDI5UPR0jdpdz97gTwOedZN6zMxICd+91E=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22During%20the%20chemistry%20lesson%20Andrew%20learned%20that%20the%20saturated%20hydrocarbons%20%28alkanes%29%20enter%20into%20radical%20chlorination%20reaction.%20Andrew%20is%20a%20very%20curious%20boy%2C%20so%20he%20wondered%20how%20many%20different%20products%20of%20the%20reaction%20may%20be%20forms%20for%20a%20given%20alkane.%20He%20managed%20to%20solve%20the%20task%20for%20small%20molecules%2C%20but%20for%20large%20ones%20he%20faced%20some%20difficulties%20and%20asks%20you%20to%20help.%5Cn%5CnFormally%2C%20you%20are%20given%20a%20tree%20consisting%20of%20%24%20n%20%24%20vertices%2C%20such%20that%20the%20degree%20of%20each%20vertex%20doesn%27t%20exceed%20%24%204%20%24%20.%20You%20have%20to%20count%20the%20number%20of%20distinct%20non-isomorphic%20trees%20that%20can%20be%20obtained%20by%20adding%20to%20this%20tree%20one%20new%20vertex%20and%20one%20new%20edge%2C%20such%20that%20the%20graph%20is%20still%20the%20tree%20and%20the%20degree%20of%20each%20vertex%20doesn%27t%20exceed%20%24%204%20%24%20.%5Cn%5CnTwo%20trees%20are%20isomorphic%20if%20there%20exists%20a%20bijection%20%24%20f%28v%29%20%24%20such%20that%20vertices%20%24%20u%20%24%20and%20%24%20v%20%24%20are%20connected%20by%20an%20edge%20if%20and%20only%20if%20vertices%20%24%20f%28v%29%20%24%20and%20%24%20f%28u%29%20%24%20are%20connected%20by%20an%20edge.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20an%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D100000%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertices%20in%20the%20tree.%5Cn%5CnThen%20follow%20%24%20n-1%20%24%20lines%20with%20edges%20descriptions.%20Each%20edge%20is%20given%20by%20two%20integers%20%24%20u_%7Bi%7D%20%24%20and%20%24%20v_%7Bi%7D%20%24%20%28%20%24%201%3C%3Du_%7Bi%7D%2Cv_%7Bi%7D%3C%3Dn%20%24%20%29%20%5Cu2014%20indices%20of%20vertices%20connected%20by%20an%20edge.%20It%27s%20guaranteed%20that%20the%20given%20graph%20is%20a%20tree%20and%20the%20degree%20of%20each%20vertex%20doesn%27t%20exceed%20%24%204%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20one%20integer%20%5Cu2014%20the%20answer%20to%20the%20question.%22%2C%22samples%22%3A%5B%5B%224%5Cn1%202%5Cn2%203%5Cn2%204%5Cn%22%2C%222%5Cn%22%5D%2C%5B%225%5Cn1%202%5Cn1%203%5Cn1%204%5Cn1%205%5Cn%22%2C%221%5Cn%22%5D%2C%5B%225%5Cn2%205%5Cn5%203%5Cn4%203%5Cn4%201%5Cn%22%2C%223%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20one%20can%20add%20new%20vertex%20to%20any%20existing%20vertex%2C%20but%20the%20trees%20we%20obtain%20by%20adding%20a%20new%20vertex%20to%20vertices%20%24%201%20%24%20%2C%20%24%203%20%24%20and%20%24%204%20%24%20are%20isomorphic%2C%20thus%20the%20answer%20is%20%24%202%20%24%20.%5Cn%5CnIn%20the%20second%20sample%2C%20one%20can%27t%20add%20new%20vertex%20to%20the%20first%20vertex%2C%20as%20its%20degree%20is%20already%20equal%20to%20four.%20Trees%2C%20obtained%20by%20adding%20a%20new%20vertex%20to%20vertices%20%24%202%20%24%20%2C%20%24%203%20%24%20%2C%20%24%204%20%24%20and%20%24%205%20%24%20are%20isomorphic%2C%20thus%20the%20answer%20is%20%24%201%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F718%5C%2FD%22%2C%22id%22%3A%22718D%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu4f60%5Cu4e00%5Cu4e2a%5Cu6709%24n%24%5Cu4e2a%5Cu70b9%5Cu7684%5Cu6811%5Cu3002%5Cu5f53%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu70b9%5Cu7684%5Cu5ea6%5Cu4e0d%5Cu8d85%5Cu8fc7%244%24%5Cu65f6%5Cu8fd9%5Cu68f5%5Cu6811%5Cu662f%5Cu5408%5Cu6cd5%5Cu7684%5Cu3002%5Cu73b0%5Cu5728%5Cu8ba9%5Cu4f60%5Cu518d%5Cu6dfb%5Cu52a0%5Cu4e00%5Cu4e2a%5Cu70b9%5Cuff0c%5Cu5728%5Cu6811%5Cu4ecd%5Cu7136%5Cu5408%5Cu6cd5%5Cu7684%5Cu60c5%5Cu51b5%5Cu4e0b%5Cuff0c%5Cu4e00%5Cu5171%5Cu6709%5Cu591a%5Cu5c11%5Cu79cd%5Cu6811%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5f53%5Cu4e24%5Cu68f5%5Cu6811%5Cu540c%5Cu6784%5Cu65f6%5Cu89c6%5Cu4f5c%5Cu540c%5Cu4e00%5Cu79cd%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu4fdd%5Cu8bc1%5Cu8f93%5Cu5165%5Cu7684%5Cu6811%5Cu662f%5Cu5408%5Cu6cd5%5Cu7684%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A127%2C%22totalAccepted%22%3A59%2C%22pid%22%3A%22CF718D%22%2C%22title%22%3A%22Andrew%20and%20Chemistry%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A44187%2C%22title%22%3A%22%5Cu5929%5Cu5566%5Cu6076%5Cu610f%5Cu8bc4%5Cu5206%5Cu4e5f%5Cu4e0d%5Cu81f3%5Cu4e8e%5Cu8fd9%5Cu4e48%5Cu8fc7%5Cu5206%5Cu5427%22%2C%22forum%22%3A%7B%22id%22%3A9782%2C%22name%22%3A%22CF718D%20Andrew%20and%20Chemistry%22%2C%22slug%22%3A%22CF718D%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3979%22%2C%22title%22%3A%22%5Cu9065%5Cu8fdc%5Cu7684%5Cu56fd%5Cu5ea6%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF765E%22%2C%22title%22%3A%22Tree%20Folding%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF723E%22%2C%22title%22%3A%22One-Way%20Reform%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF573C%22%2C%22title%22%3A%22Bear%20and%20Drawing%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF555E%22%2C%22title%22%3A%22Case%20of%20Computer%20Network%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Andrew%20and%20Chemistry%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Andrew and Chemistry</h1>
<h2>题意翻译</h2>
<div>给你一个有$n$个点的树。当每一个点的度不超过$4$时这棵树是合法的。现在让你再添加一个点，在树仍然合法的情况下，一共有多少种树。
当两棵树同构时视作同一种。
保证输入的树是合法的。</div>
<h2>题目描述</h2>
<div>During the chemistry lesson Andrew learned that the saturated hydrocarbons (alkanes) enter into radical chlorination reaction. Andrew is a very curious boy, so he wondered how many different products of the reaction may be forms for a given alkane. He managed to solve the task for small molecules, but for large ones he faced some difficulties and asks you to help.
Formally, you are given a tree consisting of $ n $ vertices, such that the degree of each vertex doesn't exceed $ 4 $ . You have to count the number of distinct non-isomorphic trees that can be obtained by adding to this tree one new vertex and one new edge, such that the graph is still the tree and the degree of each vertex doesn't exceed $ 4 $ .
Two trees are isomorphic if there exists a bijection $ f(v) $ such that vertices $ u $ and $ v $ are connected by an edge if and only if vertices $ f(v) $ and $ f(u) $ are connected by an edge.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains an integer $ n $ ( $ 1<=n<=100000 $ ) — the number of vertices in the tree.
Then follow $ n-1 $ lines with edges descriptions. Each edge is given by two integers $ u_{i} $ and $ v_{i} $ ( $ 1<=u_{i},v_{i}<=n $ ) — indices of vertices connected by an edge. It's guaranteed that the given graph is a tree and the degree of each vertex doesn't exceed $ 4 $ .</div>
<h3>输出格式</h3>
<br />
<div>Print one integer — the answer to the question.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
1 2
2 3
2 4
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5
1 2
1 3
1 4
1 5
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>5
2 5
5 3
4 3
4 1
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>3
</code></pre>
<h2>说明</h2>
<div>In the first sample, one can add new vertex to any existing vertex, but the trees we obtain by adding a new vertex to vertices $ 1 $ , $ 3 $ and $ 4 $ are isomorphic, thus the answer is $ 2 $ .
In the second sample, one can't add new vertex to the first vertex, as its degree is already equal to four. Trees, obtained by adding a new vertex to vertices $ 2 $ , $ 3 $ , $ 4 $ and $ 5 $ are isomorphic, thus the answer is $ 1 $ .</div>
</article>
</div>
</div>
</body>
</html>
