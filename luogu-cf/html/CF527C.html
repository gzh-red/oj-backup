<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Glass Carving - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573395119:BhrszNC5uZGLY8epg/czzyIGemwjzn6kty/M98N2LKs=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Leonid%20wants%20to%20become%20a%20glass%20carver%20%28the%20person%20who%20creates%20beautiful%20artworks%20by%20cutting%20the%20glass%29.%20He%20already%20has%20a%20rectangular%20%24%20w%20%24%20mm%20%24%20%5Cu00d7%20%24%20%24%20h%20%24%20mm%20sheet%20of%20glass%2C%20a%20diamond%20glass%20cutter%20and%20lots%20of%20enthusiasm.%20What%20he%20lacks%20is%20understanding%20of%20what%20to%20carve%20and%20how.%5Cn%5CnIn%20order%20not%20to%20waste%20time%2C%20he%20decided%20to%20practice%20the%20technique%20of%20carving.%20To%20do%20this%2C%20he%20makes%20vertical%20and%20horizontal%20cuts%20through%20the%20entire%20sheet.%20This%20process%20results%20in%20making%20smaller%20rectangular%20fragments%20of%20glass.%20Leonid%20does%20not%20move%20the%20newly%20made%20glass%20fragments.%20In%20particular%2C%20a%20cut%20divides%20each%20fragment%20of%20glass%20that%20it%20goes%20through%20into%20smaller%20fragments.%5Cn%5CnAfter%20each%20cut%20Leonid%20tries%20to%20determine%20what%20area%20the%20largest%20of%20the%20currently%20available%20glass%20fragments%20has.%20Since%20there%20appear%20more%20and%20more%20fragments%2C%20this%20question%20takes%20him%20more%20and%20more%20time%20and%20distracts%20him%20from%20the%20fascinating%20process.%5Cn%5CnLeonid%20offers%20to%20divide%20the%20labor%20%5Cu2014%20he%20will%20cut%20glass%2C%20and%20you%20will%20calculate%20the%20area%20of%20the%20maximum%20fragment%20after%20each%20cut.%20Do%20you%20agree%3F%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20three%20integers%20%24%20w%2Ch%2Cn%20%24%20%28%20%24%202%3C%3Dw%2Ch%3C%3D200000%20%24%20%2C%20%24%201%3C%3Dn%3C%3D200000%20%24%20%29.%5Cn%5CnNext%20%24%20n%20%24%20lines%20contain%20the%20descriptions%20of%20the%20cuts.%20Each%20description%20has%20the%20form%20%24%20H%5Cu00a0y%20%24%20or%20%24%20V%5Cu00a0x%20%24%20.%20In%20the%20first%20case%20Leonid%20makes%20the%20horizontal%20cut%20at%20the%20distance%20%24%20y%20%24%20millimeters%20%28%20%24%201%3C%3Dy%3C%3Dh-1%20%24%20%29%20from%20the%20lower%20edge%20of%20the%20original%20sheet%20of%20glass.%20In%20the%20second%20case%20Leonid%20makes%20a%20vertical%20cut%20at%20distance%20%24%20x%20%24%20%28%20%24%201%3C%3Dx%3C%3Dw-1%20%24%20%29%20millimeters%20from%20the%20left%20edge%20of%20the%20original%20sheet%20of%20glass.%20It%20is%20guaranteed%20that%20Leonid%20won%27t%20make%20two%20identical%20cuts.%22%2C%22outputFormat%22%3A%22After%20each%20cut%20print%20on%20a%20single%20line%20the%20area%20of%20the%20maximum%20available%20glass%20fragment%20in%20mm%20%24%20%5E%7B2%7D%20%24%20.%22%2C%22samples%22%3A%5B%5B%224%203%204%5CnH%202%5CnV%202%5CnV%203%5CnV%201%5Cn%22%2C%228%5Cn4%5Cn4%5Cn2%5Cn%22%5D%2C%5B%227%206%205%5CnH%204%5CnV%203%5CnV%205%5CnH%202%5CnV%201%5Cn%22%2C%2228%5Cn16%5Cn12%5Cn6%5Cn4%5Cn%22%5D%5D%2C%22hint%22%3A%22Picture%20for%20the%20first%20sample%20test%3A%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF527C%5C%2F6468d2fd0321178fa316ccb774411f002769e9ee.png%29%20Picture%20for%20the%20second%20sample%20test%3A%20%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF527C%5C%2F40ba2772b27431a21bc874ab308dc348ec8365fd.png%29%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F527%5C%2FC%22%2C%22id%22%3A%22527C%22%7D%2C%22translation%22%3A%22%5Cu6709%5Cu4e00%5Cu5757w%2Ah%5Cu7684%5Cu73bb%5Cu7483%2C%5Cu6bcf%5Cu6b21%5Cu6a2a%5Cu7740%5Cu5207%5Cu4e00%5Cu5200%28H%29%5Cu6216%5Cu8005%5Cu7ad6%5Cu7740%5Cu5207%5Cu4e00%5Cu5200%28V%29%2C%5Cu6ca1%5Cu6709%5Cu4e24%5Cu6b21%5Cu76f8%5Cu540c%5Cu7684%5Cu5207%5Cu5272%2C%5Cu6c42%5Cu6700%5Cu5927%5Cu7684%5Cu77e9%5Cu5f62%5Cu788e%5Cu7247%5Cu9762%5Cu79ef%5Cu3002%20%5Cu6837%5Cu4f8b%5Cu4e2d%5Cu7b2c%5Cu4e00%5Cu884c%5Cu662fw%2Ch%28%5Cu73bb%5Cu7483%5Cu5927%5Cu5c0f%29%5Cu548cn%28%5Cu5207%5Cu5272%5Cu6b21%5Cu6570%29%2C%5Cu5b57%5Cu6bcd%5Cu540e%5Cu7684%5Cu6570%5Cu5b57%5Cu8868%5Cu793a%5Cu8ddd%5Cu4e0b%5Cu8fb9%5Cu7f18%28H%29%5C%2F%5Cu5de6%5Cu8fb9%5Cu7f18%28V%29%5Cu7684%5Cu8ddd%5Cu79bb%22%2C%22tags%22%3A%5B42%2C113%2C266%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A279%2C%22totalAccepted%22%3A151%2C%22pid%22%3A%22CF527C%22%2C%22title%22%3A%22Glass%20Carving%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A32844%2C%22title%22%3A%22%5Cu9898%5Cu76ee%5Cu5927%5Cu610f%22%2C%22forum%22%3A%7B%22id%22%3A10550%2C%22name%22%3A%22CF527C%20Glass%20Carving%22%2C%22slug%22%3A%22CF527C%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2894%22%2C%22title%22%3A%22%5BUSACO08FEB%5D%5Cu9152%5Cu5e97Hotel%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF558E%22%2C%22title%22%3A%22A%20Simple%20Task%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF555C%22%2C%22title%22%3A%22Case%20of%20Chocolate%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF551C%22%2C%22title%22%3A%22GukiZ%20hates%20Boxes%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF339D%22%2C%22title%22%3A%22Xenia%20and%20Bit%20Operations%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Glass%20Carving%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Glass Carving</h1>
<h2>题意翻译</h2>
<div>有一块w*h的玻璃,每次横着切一刀(H)或者竖着切一刀(V),没有两次相同的切割,求最大的矩形碎片面积。 样例中第一行是w,h(玻璃大小)和n(切割次数),字母后的数字表示距下边缘(H)/左边缘(V)的距离</div>
<h2>题目描述</h2>
<div>Leonid wants to become a glass carver (the person who creates beautiful artworks by cutting the glass). He already has a rectangular $ w $ mm $ × $ $ h $ mm sheet of glass, a diamond glass cutter and lots of enthusiasm. What he lacks is understanding of what to carve and how.
In order not to waste time, he decided to practice the technique of carving. To do this, he makes vertical and horizontal cuts through the entire sheet. This process results in making smaller rectangular fragments of glass. Leonid does not move the newly made glass fragments. In particular, a cut divides each fragment of glass that it goes through into smaller fragments.
After each cut Leonid tries to determine what area the largest of the currently available glass fragments has. Since there appear more and more fragments, this question takes him more and more time and distracts him from the fascinating process.
Leonid offers to divide the labor — he will cut glass, and you will calculate the area of the maximum fragment after each cut. Do you agree?</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains three integers $ w,h,n $ ( $ 2<=w,h<=200000 $ , $ 1<=n<=200000 $ ).
Next $ n $ lines contain the descriptions of the cuts. Each description has the form $ H y $ or $ V x $ . In the first case Leonid makes the horizontal cut at the distance $ y $ millimeters ( $ 1<=y<=h-1 $ ) from the lower edge of the original sheet of glass. In the second case Leonid makes a vertical cut at distance $ x $ ( $ 1<=x<=w-1 $ ) millimeters from the left edge of the original sheet of glass. It is guaranteed that Leonid won't make two identical cuts.</div>
<h3>输出格式</h3>
<br />
<div>After each cut print on a single line the area of the maximum available glass fragment in mm $ ^{2} $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 3 4
H 2
V 2
V 3
V 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>8
4
4
2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>7 6 5
H 4
V 3
V 5
H 2
V 1
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>28
16
12
6
4
</code></pre>
<h2>说明</h2>
<div>Picture for the first sample test:
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF527C/6468d2fd0321178fa316ccb774411f002769e9ee.png) Picture for the second sample test: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF527C/40ba2772b27431a21bc874ab308dc348ec8365fd.png)</div>
</article>
</div>
</div>
</body>
</html>
