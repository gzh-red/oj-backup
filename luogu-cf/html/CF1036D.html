<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Vasya and Arrays - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573400749:8SFNgnavaEa9Un6p6otfTe5vhCMhilUGEJTxRr7mNsQ=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Vasya%20has%20two%20arrays%20%24%20A%20%24%20and%20%24%20B%20%24%20of%20lengths%20%24%20n%20%24%20and%20%24%20m%20%24%20%2C%20respectively.%5Cn%5CnHe%20can%20perform%20the%20following%20operation%20arbitrary%20number%20of%20times%20%28possibly%20zero%29%3A%20he%20takes%20some%20consecutive%20subsegment%20of%20the%20array%20and%20replaces%20it%20with%20a%20single%20element%2C%20equal%20to%20the%20sum%20of%20all%20elements%20on%20this%20subsegment.%20For%20example%2C%20from%20the%20array%20%24%20%5B1%2C%2010%2C%20100%2C%201000%2C%2010000%5D%20%24%20Vasya%20can%20obtain%20array%20%24%20%5B1%2C%201110%2C%2010000%5D%20%24%20%2C%20and%20from%20array%20%24%20%5B1%2C%202%2C%203%5D%20%24%20Vasya%20can%20obtain%20array%20%24%20%5B6%5D%20%24%20.%5Cn%5CnTwo%20arrays%20%24%20A%20%24%20and%20%24%20B%20%24%20are%20considered%20equal%20if%20and%20only%20if%20they%20have%20the%20same%20length%20and%20for%20each%20valid%20%24%20i%20%24%20%24%20A_i%20%3D%20B_i%20%24%20.%5Cn%5CnVasya%20wants%20to%20perform%20some%20of%20these%20operations%20on%20array%20%24%20A%20%24%20%2C%20some%20on%20array%20%24%20B%20%24%20%2C%20in%20such%20a%20way%20that%20arrays%20%24%20A%20%24%20and%20%24%20B%20%24%20become%20equal.%20Moreover%2C%20the%20lengths%20of%20the%20resulting%20arrays%20should%20be%20maximal%20possible.%5Cn%5CnHelp%20Vasya%20to%20determine%20the%20maximum%20length%20of%20the%20arrays%20that%20he%20can%20achieve%20or%20output%20that%20it%20is%20impossible%20to%20make%20arrays%20%24%20A%20%24%20and%20%24%20B%20%24%20equal.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20a%20single%20integer%20%24%20n~%281%20%5C%5Cle%20n%20%5C%5Cle%203%20%5C%5Ccdot%2010%5E5%29%20%24%20%5Cu2014%20the%20length%20of%20the%20first%20array.%5Cn%5CnThe%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_1%2C%20a_2%2C%20%5C%5Ccdots%2C%20a_n~%281%20%5C%5Cle%20a_i%20%5C%5Cle%2010%5E9%29%20%24%20%5Cu2014%20elements%20of%20the%20array%20%24%20A%20%24%20.%5Cn%5CnThe%20third%20line%20contains%20a%20single%20integer%20%24%20m~%281%20%5C%5Cle%20m%20%5C%5Cle%203%20%5C%5Ccdot%2010%5E5%29%20%24%20%5Cu2014%20the%20length%20of%20the%20second%20array.%5Cn%5CnThe%20fourth%20line%20contains%20%24%20m%20%24%20integers%20%24%20b_1%2C%20b_2%2C%20%5C%5Ccdots%2C%20b_m~%281%20%5C%5Cle%20b_i%20%5C%5Cle%2010%5E9%29%20%24%20-%20elements%20of%20the%20array%20%24%20B%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20maximum%20length%20of%20the%20resulting%20arrays%20after%20some%20operations%20were%20performed%20on%20arrays%20%24%20A%20%24%20and%20%24%20B%20%24%20in%20such%20a%20way%20that%20they%20became%20equal.%5Cn%5CnIf%20there%20is%20no%20way%20to%20make%20array%20equal%2C%20print%20%5C%22-1%5C%22.%22%2C%22samples%22%3A%5B%5B%225%5Cn11%202%203%205%207%5Cn4%5Cn11%207%203%207%5Cn%22%2C%223%5Cn%22%5D%2C%5B%222%5Cn1%202%5Cn1%5Cn100%5Cn%22%2C%22-1%5Cn%22%5D%2C%5B%223%5Cn1%202%203%5Cn3%5Cn1%202%203%5Cn%22%2C%223%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1036%5C%2FD%22%2C%22id%22%3A%221036D%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu5b9a%24A%2CB%24%5Cu4e24%5Cu4e2a%5Cu6570%5Cu5217%5Cuff0c%5Cu957f%5Cu5ea6%5Cu5206%5Cu522b%5Cu4e3a%24n%2Cm%24%5Cuff0c%5Cu6570%5Cu5217%5Cu957f%5Cu5ea6%5Cu4e0d%5Cu8d85%5Cu8fc7%243%20%5C%5Ctimes%2010%5E5%24%5Cn%5Cn%5Cu6570%5Cu5217%5Cu4e2d%5Cu6bcf%5Cu4e2a%5Cu5143%5Cu7d20%5Cu7684%5Cu503c%5Cu4e3a%24%5B1%2C10%5E9%5D%24%5Cu7684%5Cu6574%5Cu6570%5Cn%5Cn%5Cu4f60%5Cu9700%5Cu8981%5Cu5c06%5Cu4e24%5Cu4e2a%5Cu6570%5Cu5217%5Cu90fd%5Cu5206%5Cu5272%5Cu6210%24k%24%5Cu4efd%5Cuff0c%5Cu4f7f%5Cu5f97%5Cu6bcf%5Cu4e00%5Cu4efd%5Cu7684%5Cu5143%5Cu7d20%5Cu548c%5Cu5bf9%5Cu5e94%5Cu76f8%5Cu7b49%5Cn%5Cn%5Cu5982%5Cu679c%5Cu53ef%5Cu884c%5Cuff0c%5Cu8f93%5Cu51fa%5Cu6700%5Cu591a%5Cu5c06%5Cu5e8f%5Cu5217%5Cu5206%5Cu5272%5Cu6210%5Cu591a%5Cu5c11%5Cu4efd%5Cuff0c%5Cu5982%5Cu679c%5Cu4e0d%5Cu53ef%5Cu884c%5Cuff0c%5Cu8f93%5Cu51fa%24-1%24%5Cn%5Cn%5Cu4e3e%5Cu4e2a%5Cu4f8b%5Cu5b50%5Cuff1a%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu5e8f%5Cu5217%6011%202%203%205%207%60%5Cu548c%6011%207%203%207%60%5Cn%5Cn%5Cu524d%5Cu8005%5Cu53ef%5Cu4ee5%5Cu5206%5Cu6210%60%2811%29%20%282%203%205%29%20%287%29%60%5Cn%5Cn%5Cu540e%5Cu8005%5Cu53ef%5Cu4ee5%5Cu5206%5Cu6210%60%2811%29%20%287%203%29%20%287%29%60%5Cn%5Cn%5Cu5bf9%5Cu5e94%5Cu7684%5Cu5143%5Cu7d20%5Cu548c%5Cu4e3a%6011%2010%207%60%5Cn%5Cn%5Cu56e0%5Cu6b64%5Cu8f93%5Cu51fa%603%60%5Cn%5Cn%5Cu611f%5Cu8c22%40iki9%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A197%2C%22totalAccepted%22%3A86%2C%22pid%22%3A%22CF1036D%22%2C%22title%22%3A%22Vasya%20and%20Arrays%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A62967%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A29250%2C%22name%22%3A%22CF1036D%20Vasya%20and%20Arrays%22%2C%22slug%22%3A%22CF1036D%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22CF1036C%22%2C%22title%22%3A%22Classy%20Numbers%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1036B%22%2C%22title%22%3A%22Diagonal%20Walking%20v.2%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1051D%22%2C%22title%22%3A%22Bicolorings%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1034A%22%2C%22title%22%3A%22Enlarge%20GCD%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1060C%22%2C%22title%22%3A%22Maximum%20Subrectangle%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Vasya%20and%20Arrays%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Vasya and Arrays</h1>
<h2>题意翻译</h2>
<div>给定$A,B$两个数列，长度分别为$n,m$，数列长度不超过$3 \times 10^5$
数列中每个元素的值为$[1,10^9]$的整数
你需要将两个数列都分割成$k$份，使得每一份的元素和对应相等
如果可行，输出最多将序列分割成多少份，如果不可行，输出$-1$
举个例子：
对于序列`11 2 3 5 7`和`11 7 3 7`
前者可以分成`(11) (2 3 5) (7)`
后者可以分成`(11) (7 3) (7)`
对应的元素和为`11 10 7`
因此输出`3`
感谢@iki9 提供的翻译</div>
<h2>题目描述</h2>
<div>Vasya has two arrays $ A $ and $ B $ of lengths $ n $ and $ m $ , respectively.
He can perform the following operation arbitrary number of times (possibly zero): he takes some consecutive subsegment of the array and replaces it with a single element, equal to the sum of all elements on this subsegment. For example, from the array $ [1, 10, 100, 1000, 10000] $ Vasya can obtain array $ [1, 1110, 10000] $ , and from array $ [1, 2, 3] $ Vasya can obtain array $ [6] $ .
Two arrays $ A $ and $ B $ are considered equal if and only if they have the same length and for each valid $ i $ $ A_i = B_i $ .
Vasya wants to perform some of these operations on array $ A $ , some on array $ B $ , in such a way that arrays $ A $ and $ B $ become equal. Moreover, the lengths of the resulting arrays should be maximal possible.
Help Vasya to determine the maximum length of the arrays that he can achieve or output that it is impossible to make arrays $ A $ and $ B $ equal.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains a single integer $ n~(1 \le n \le 3 \cdot 10^5) $ — the length of the first array.
The second line contains $ n $ integers $ a_1, a_2, \cdots, a_n~(1 \le a_i \le 10^9) $ — elements of the array $ A $ .
The third line contains a single integer $ m~(1 \le m \le 3 \cdot 10^5) $ — the length of the second array.
The fourth line contains $ m $ integers $ b_1, b_2, \cdots, b_m~(1 \le b_i \le 10^9) $ - elements of the array $ B $ .</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the maximum length of the resulting arrays after some operations were performed on arrays $ A $ and $ B $ in such a way that they became equal.
If there is no way to make array equal, print "-1".</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5
11 2 3 5 7
4
11 7 3 7
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2
1 2
1
100
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>-1
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>3
1 2 3
3
1 2 3
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>3
</code></pre>
</article>
</div>
</div>
</body>
</html>
