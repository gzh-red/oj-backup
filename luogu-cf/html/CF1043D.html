<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Mysterious Crime - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573400913:rONFC3ejKMj2o4L68GwQWruqW7wEfE9jyyAxpgWQLDs=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Acingel%20is%20a%20small%20town.%20There%20was%20only%20one%20doctor%20here%20%5Cu2014%20Miss%20Ada.%20She%20was%20very%20friendly%20and%20nobody%20has%20ever%20said%20something%20bad%20about%20her%2C%20so%20who%20could%27ve%20expected%20that%20Ada%20will%20be%20found%20dead%20in%20her%20house%3F%20Mr%20Gawry%2C%20world-famous%20detective%2C%20is%20appointed%20to%20find%20the%20criminal.%20He%20asked%20%24%20m%20%24%20neighbours%20of%20Ada%20about%20clients%20who%20have%20visited%20her%20in%20that%20unlucky%20day.%20Let%27s%20number%20the%20clients%20from%20%24%201%20%24%20to%20%24%20n%20%24%20.%20Each%20neighbour%27s%20testimony%20is%20a%20permutation%20of%20these%20numbers%2C%20which%20describes%20the%20order%20in%20which%20clients%20have%20been%20seen%20by%20the%20asked%20neighbour.%5Cn%5CnHowever%2C%20some%20facts%20are%20very%20suspicious%20%5Cu2013%20how%20it%20is%20that%2C%20according%20to%20some%20of%20given%20permutations%2C%20some%20client%20has%20been%20seen%20in%20the%20morning%2C%20while%20in%20others%20he%20has%20been%20seen%20in%20the%20evening%3F%20%5C%22In%20the%20morning%20some%20of%20neighbours%20must%20have%20been%20sleeping%21%5C%22%20%5Cu2014%20thinks%20Gawry%20%5Cu2014%20%5C%22and%20in%20the%20evening%20there%27s%20been%20too%20dark%20to%20see%20somebody%27s%20face...%5C%22.%20Now%20he%20wants%20to%20delete%20some%20prefix%20and%20some%20suffix%20%28both%20prefix%20and%20suffix%20can%20be%20empty%29%20in%20each%20permutation%2C%20so%20that%20they%27ll%20be%20non-empty%20and%20equal%20to%20each%20other%20after%20that%20%5Cu2014%20some%20of%20the%20potential%20criminals%20may%20disappear%2C%20but%20the%20testimony%20won%27t%20stand%20in%20contradiction%20to%20each%20other.%5Cn%5CnIn%20how%20many%20ways%20he%20can%20do%20it%3F%20Two%20ways%20are%20called%20different%20if%20the%20remaining%20common%20part%20is%20different.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%20%5C%5Cle%20n%20%5C%5Cle%20100%5C%5C%2C000%20%24%20%2C%20%24%201%20%5C%5Cle%20m%20%5C%5Cle%2010%20%24%20%29%20%5Cu2014%20the%20number%20of%20suspects%20and%20the%20number%20of%20asked%20neighbors.%5Cn%5CnEach%20of%20the%20next%20%24%20m%20%24%20lines%20contains%20%24%20n%20%24%20integers%20%24%20a_1%2C%20a_2%2C%20%5C%5Cldots%2C%20a_n%20%24%20%28%20%24%201%20%5C%5Cle%20a_i%20%5C%5Cle%20n%20%24%20%29.%20It%20is%20guaranteed%20that%20these%20integers%20form%20a%20correct%20permutation%20%28that%20is%2C%20each%20number%20from%20%24%201%20%24%20to%20%24%20n%20%24%20appears%20exactly%20once%29.%22%2C%22outputFormat%22%3A%22Output%20a%20single%20integer%20denoting%20the%20number%20of%20ways%20to%20delete%20some%20prefix%20and%20some%20suffix%20of%20each%20permutation%20%28possibly%20empty%29%2C%20such%20that%20the%20remaining%20parts%20will%20be%20equal%20and%20non-empty.%22%2C%22samples%22%3A%5B%5B%223%202%5Cn1%202%203%5Cn2%203%201%5Cn%22%2C%224%5Cn%22%5D%2C%5B%225%206%5Cn1%202%203%204%205%5Cn2%203%201%204%205%5Cn3%204%205%201%202%5Cn3%205%204%202%201%5Cn2%203%205%204%201%5Cn1%202%203%204%205%5Cn%22%2C%225%5Cn%22%5D%2C%5B%222%202%5Cn1%202%5Cn2%201%5Cn%22%2C%222%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20example%2C%20all%20possible%20common%20parts%20are%20%24%20%5B1%5D%20%24%20%2C%20%24%20%5B2%5D%20%24%20%2C%20%24%20%5B3%5D%20%24%20and%20%24%20%5B2%2C%203%5D%20%24%20.%5Cn%5CnIn%20the%20second%20and%20third%20examples%2C%20you%20can%20only%20leave%20common%20parts%20of%20length%20%24%201%20%24%20.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F1043%5C%2FD%22%2C%22id%22%3A%221043D%22%7D%2C%22translation%22%3A%22%5Cu7ed9%5Cu5b9a%24m%24%20%28%24m%24%20%24%5C%5Cle%24%20%2410%24%29%20%5Cu4e2a%5Cu957f%5Cu4e3a%24n%24%20%28%24n%24%20%24%5C%5Cle%24%20%241000000%24%29%20%5Cu7684%5Cu6392%5Cu5217%5Cuff0c%5Cu6c42%5Cu7ed9%5Cu6240%5Cu6709%5Cu6392%5Cu5217%5Cu53bb%5Cu6389%5Cu4e00%5Cu6bb5%5Cu524d%5Cu7f00%5Cu548c%5Cu540e%5Cu7f00%5Cu4e4b%5Cu540e%5Cu4f7f%5Cu5f97%5Cu6240%5Cu6709%5Cu6392%5Cu5217%5Cu5747%5Cu76f8%5Cu540c%5Cu7684%5Cu65b9%5Cu6848%5Cu6570%5Cu3002%20%20%5Cr%5Cn%5Cu53bb%5Cu6389%5Cu7684%5Cu524d%5Cu7f00%5Cu540e%5Cu7f00%5Cu957f%5Cu5ea6%5Cu53ef%5Cu4ee5%5Cu4e3a%240%24%20%20%5Cr%5Cn%5Cu4fdd%5Cu7559%5Cu7684%5Cu533a%5Cu95f4%5Cu957f%5Cu4e0d%5Cu80fd%5Cu4e3a%240%24%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A59%2C%22totalAccepted%22%3A39%2C%22pid%22%3A%22CF1043D%22%2C%22title%22%3A%22Mysterious%20Crime%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A77583%2C%22title%22%3A%22%5Cu60bc%5Cu5ff5tourist%5Cu7684200%5Cu70b9rating%22%2C%22forum%22%3A%7B%22id%22%3A31297%2C%22name%22%3A%22CF1043D%20Mysterious%20Crime%22%2C%22slug%22%3A%22CF1043D%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2221%22%2C%22title%22%3A%22%5BHAOI2012%5D%5Cu9ad8%5Cu901f%5Cu516c%5Cu8def%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4213%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu675c%5Cu6559%5Cu7b5b%5Cuff08Sum%5Cuff09%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF1043F%22%2C%22title%22%3A%22Make%20It%20One%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1043E%22%2C%22title%22%3A%22Train%20Hard%2C%20Win%20Easy%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22P4996%22%2C%22title%22%3A%22%5Cu5495%5Cu5495%5Cu5495%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Mysterious%20Crime%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Mysterious Crime</h1>
<h2>题意翻译</h2>
<div>给定$m$ ($m$ $\le$ $10$) 个长为$n$ ($n$ $\le$ $1000000$) 的排列，求给所有排列去掉一段前缀和后缀之后使得所有排列均相同的方案数。
去掉的前缀后缀长度可以为$0$
保留的区间长不能为$0$</div>
<h2>题目描述</h2>
<div>Acingel is a small town. There was only one doctor here — Miss Ada. She was very friendly and nobody has ever said something bad about her, so who could've expected that Ada will be found dead in her house? Mr Gawry, world-famous detective, is appointed to find the criminal. He asked $ m $ neighbours of Ada about clients who have visited her in that unlucky day. Let's number the clients from $ 1 $ to $ n $ . Each neighbour's testimony is a permutation of these numbers, which describes the order in which clients have been seen by the asked neighbour.
However, some facts are very suspicious – how it is that, according to some of given permutations, some client has been seen in the morning, while in others he has been seen in the evening? "In the morning some of neighbours must have been sleeping!" — thinks Gawry — "and in the evening there's been too dark to see somebody's face...". Now he wants to delete some prefix and some suffix (both prefix and suffix can be empty) in each permutation, so that they'll be non-empty and equal to each other after that — some of the potential criminals may disappear, but the testimony won't stand in contradiction to each other.
In how many ways he can do it? Two ways are called different if the remaining common part is different.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 1 \le n \le 100\,000 $ , $ 1 \le m \le 10 $ ) — the number of suspects and the number of asked neighbors.
Each of the next $ m $ lines contains $ n $ integers $ a_1, a_2, \ldots, a_n $ ( $ 1 \le a_i \le n $ ). It is guaranteed that these integers form a correct permutation (that is, each number from $ 1 $ to $ n $ appears exactly once).</div>
<h3>输出格式</h3>
<br />
<div>Output a single integer denoting the number of ways to delete some prefix and some suffix of each permutation (possibly empty), such that the remaining parts will be equal and non-empty.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 2
1 2 3
2 3 1
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>4
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5 6
1 2 3 4 5
2 3 1 4 5
3 4 5 1 2
3 5 4 2 1
2 3 5 4 1
1 2 3 4 5
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>5
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>2 2
1 2
2 1
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>2
</code></pre>
<h2>说明</h2>
<div>In the first example, all possible common parts are $ [1] $ , $ [2] $ , $ [3] $ and $ [2, 3] $ .
In the second and third examples, you can only leave common parts of length $ 1 $ .</div>
</article>
</div>
</div>
</body>
</html>
