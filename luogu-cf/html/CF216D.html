<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Spider&#039;s Web - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573391790:glNxv0cdsAs0tSy+e7uRwAnAV6/1NchyjlSFPJ5Qhuk=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Paw%20the%20Spider%20is%20making%20a%20web.%20Web-making%20is%20a%20real%20art%2C%20Paw%20has%20been%20learning%20to%20do%20it%20his%20whole%20life.%20Let%27s%20consider%20the%20structure%20of%20the%20web.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF216D%5C%2Fe65dd65db24247adc6327b212b9c0054dfc81151.png%29There%20are%20%24%20n%20%24%20main%20threads%20going%20from%20the%20center%20of%20the%20web.%20All%20main%20threads%20are%20located%20in%20one%20plane%20and%20divide%20it%20into%20%24%20n%20%24%20equal%20infinite%20sectors.%20The%20sectors%20are%20indexed%20from%20%24%201%20%24%20to%20%24%20n%20%24%20in%20the%20clockwise%20direction.%20Sectors%20%24%20i%20%24%20and%20%24%20i%2B1%20%24%20are%20adjacent%20for%20every%20%24%20i%20%24%20%2C%20%24%201%3C%3Di%26lt%3Bn%20%24%20.%20In%20addition%2C%20sectors%20%24%201%20%24%20and%20%24%20n%20%24%20are%20also%20adjacent.%5Cn%5CnSome%20sectors%20have%20bridge%20threads.%20Each%20bridge%20connects%20the%20two%20main%20threads%20that%20make%20up%20this%20sector.%20The%20points%20at%20which%20the%20bridge%20is%20attached%20to%20the%20main%20threads%20will%20be%20called%20attachment%20points.%20Both%20attachment%20points%20of%20a%20bridge%20are%20at%20the%20same%20distance%20from%20the%20center%20of%20the%20web.%20At%20each%20attachment%20point%20exactly%20one%20bridge%20is%20attached.%20The%20bridges%20are%20adjacent%20if%20they%20are%20in%20the%20same%20sector%2C%20and%20there%20are%20no%20other%20bridges%20between%20them.%5Cn%5CnA%20cell%20of%20the%20web%20is%20a%20trapezoid%2C%20which%20is%20located%20in%20one%20of%20the%20sectors%20and%20is%20bounded%20by%20two%20main%20threads%20and%20two%20adjacent%20bridges.%20You%20can%20see%20that%20the%20sides%20of%20the%20cell%20may%20have%20the%20attachment%20points%20of%20bridges%20from%20adjacent%20sectors.%20If%20the%20number%20of%20attachment%20points%20on%20one%20side%20of%20the%20cell%20is%20not%20equal%20to%20the%20number%20of%20attachment%20points%20on%20the%20other%20side%2C%20it%20creates%20an%20imbalance%20of%20pulling%20forces%20on%20this%20cell%20and%20this%20may%20eventually%20destroy%20the%20entire%20web.%20We%27ll%20call%20such%20a%20cell%20unstable.%20The%20perfect%20web%20does%20not%20contain%20unstable%20cells.%5Cn%5CnUnstable%20cells%20are%20marked%20red%20in%20the%20figure.%20Stable%20cells%20are%20marked%20green.%5Cn%5CnPaw%20the%20Spider%20isn%27t%20a%20skillful%20webmaker%20yet%2C%20he%20is%20only%20learning%20to%20make%20perfect%20webs.%20Help%20Paw%20to%20determine%20the%20number%20of%20unstable%20cells%20in%20the%20web%20he%20has%20just%20spun.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20integer%20%24%20n%20%24%20%28%20%24%203%3C%3Dn%3C%3D1000%20%24%20%29%20%5Cu2014%20the%20number%20of%20main%20threads.%5Cn%5CnThe%20%24%20i%20%24%20-th%20of%20following%20%24%20n%20%24%20lines%20describe%20the%20bridges%20located%20in%20the%20%24%20i%20%24%20-th%20sector%3A%20first%20it%20contains%20integer%20%24%20k_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dk_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29%20equal%20to%20the%20number%20of%20bridges%20in%20the%20given%20sector.%20Then%20follow%20%24%20k_%7Bi%7D%20%24%20different%20integers%20%24%20p_%7Bij%7D%20%24%20%28%20%24%201%3C%3Dp_%7Bij%7D%3C%3D10%5E%7B5%7D%3B%5Cu00a01%3C%3Dj%3C%3Dk_%7Bi%7D%20%24%20%29.%20Number%20%24%20p_%7Bij%7D%20%24%20equals%20the%20distance%20from%20the%20attachment%20points%20of%20the%20%24%20j%20%24%20-th%20bridge%20of%20the%20%24%20i%20%24%20-th%20sector%20to%20the%20center%20of%20the%20web.%5Cn%5CnIt%20is%20guaranteed%20that%20any%20two%20bridges%20between%20adjacent%20sectors%20are%20attached%20at%20a%20different%20distance%20from%20the%20center%20of%20the%20web.%20It%20is%20guaranteed%20that%20the%20total%20number%20of%20the%20bridges%20doesn%27t%20exceed%20%24%2010%5E%7B5%7D%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20number%20of%20unstable%20cells%20in%20Paw%20the%20Spider%27s%20web.%22%2C%22samples%22%3A%5B%5B%227%5Cn3%201%206%207%5Cn4%203%205%202%209%5Cn2%208%201%5Cn4%203%207%206%204%5Cn3%202%205%209%5Cn3%206%203%208%5Cn3%204%202%209%5Cn%22%2C%226%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F216%5C%2FD%22%2C%22id%22%3A%22216D%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22CF216D%22%2C%22title%22%3A%22Spider%27s%20Web%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Spider%27s%20Web%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Spider&#039;s Web</h1>
<h2>题目描述</h2>
<div>Paw the Spider is making a web. Web-making is a real art, Paw has been learning to do it his whole life. Let's consider the structure of the web.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF216D/e65dd65db24247adc6327b212b9c0054dfc81151.png)There are $ n $ main threads going from the center of the web. All main threads are located in one plane and divide it into $ n $ equal infinite sectors. The sectors are indexed from $ 1 $ to $ n $ in the clockwise direction. Sectors $ i $ and $ i+1 $ are adjacent for every $ i $ , $ 1<=i&lt;n $ . In addition, sectors $ 1 $ and $ n $ are also adjacent.
Some sectors have bridge threads. Each bridge connects the two main threads that make up this sector. The points at which the bridge is attached to the main threads will be called attachment points. Both attachment points of a bridge are at the same distance from the center of the web. At each attachment point exactly one bridge is attached. The bridges are adjacent if they are in the same sector, and there are no other bridges between them.
A cell of the web is a trapezoid, which is located in one of the sectors and is bounded by two main threads and two adjacent bridges. You can see that the sides of the cell may have the attachment points of bridges from adjacent sectors. If the number of attachment points on one side of the cell is not equal to the number of attachment points on the other side, it creates an imbalance of pulling forces on this cell and this may eventually destroy the entire web. We'll call such a cell unstable. The perfect web does not contain unstable cells.
Unstable cells are marked red in the figure. Stable cells are marked green.
Paw the Spider isn't a skillful webmaker yet, he is only learning to make perfect webs. Help Paw to determine the number of unstable cells in the web he has just spun.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains integer $ n $ ( $ 3<=n<=1000 $ ) — the number of main threads.
The $ i $ -th of following $ n $ lines describe the bridges located in the $ i $ -th sector: first it contains integer $ k_{i} $ ( $ 1<=k_{i}<=10^{5} $ ) equal to the number of bridges in the given sector. Then follow $ k_{i} $ different integers $ p_{ij} $ ( $ 1<=p_{ij}<=10^{5}; 1<=j<=k_{i} $ ). Number $ p_{ij} $ equals the distance from the attachment points of the $ j $ -th bridge of the $ i $ -th sector to the center of the web.
It is guaranteed that any two bridges between adjacent sectors are attached at a different distance from the center of the web. It is guaranteed that the total number of the bridges doesn't exceed $ 10^{5} $ .</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the number of unstable cells in Paw the Spider's web.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>7
3 1 6 7
4 3 5 2 9
2 8 1
4 3 7 6 4
3 2 5 9
3 6 3 8
3 4 2 9
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>6</code></pre>
</article>
</div>
</div>
</body>
</html>
