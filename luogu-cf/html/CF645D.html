<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Robot Rapping Results Report - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573396347:ERJf3K+QTcfuVZa7roFHVn+uQHKoxl5//HfqwukSoW8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22While%20Farmer%20John%20rebuilds%20his%20farm%20in%20an%20unfamiliar%20portion%20of%20Bovinia%2C%20Bessie%20is%20out%20trying%20some%20alternative%20jobs.%20In%20her%20new%20gig%20as%20a%20reporter%2C%20Bessie%20needs%20to%20know%20about%20programming%20competition%20results%20as%20quickly%20as%20possible.%20When%20she%20covers%20the%202016%20Robot%20Rap%20Battle%20Tournament%2C%20she%20notices%20that%20all%20of%20the%20robots%20operate%20under%20deterministic%20algorithms.%20In%20particular%2C%20robot%20%24%20i%20%24%20will%20beat%20robot%20%24%20j%20%24%20if%20and%20only%20if%20robot%20%24%20i%20%24%20has%20a%20higher%20skill%20level%20than%20robot%20%24%20j%20%24%20.%20And%20if%20robot%20%24%20i%20%24%20beats%20robot%20%24%20j%20%24%20and%20robot%20%24%20j%20%24%20beats%20robot%20%24%20k%20%24%20%2C%20then%20robot%20%24%20i%20%24%20will%20beat%20robot%20%24%20k%20%24%20.%20Since%20rapping%20is%20such%20a%20subtle%20art%2C%20two%20robots%20can%20never%20have%20the%20same%20skill%20level.%5Cn%5CnGiven%20the%20results%20of%20the%20rap%20battles%20in%20the%20order%20in%20which%20they%20were%20played%2C%20determine%20the%20minimum%20number%20of%20first%20rap%20battles%20that%20needed%20to%20take%20place%20before%20Bessie%20could%20order%20all%20of%20the%20robots%20by%20skill%20level.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20consists%20of%20two%20integers%2C%20the%20number%20of%20robots%20%24%20n%20%24%20%28%20%24%202%3C%3Dn%3C%3D100000%20%24%20%29%20and%20the%20number%20of%20rap%20battles%20%24%20m%20%24%20%28%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF645D%5C%2Fff5e51057dd7573544b70b3883f7e12532c00133.png%29%29.%5Cn%5CnThe%20next%20%24%20m%20%24%20lines%20describe%20the%20results%20of%20the%20rap%20battles%20in%20the%20order%20they%20took%20place.%20Each%20consists%20of%20two%20integers%20%24%20u_%7Bi%7D%20%24%20and%20%24%20v_%7Bi%7D%20%24%20%28%20%24%201%3C%3Du_%7Bi%7D%2Cv_%7Bi%7D%3C%3Dn%20%24%20%2C%20%24%20u_%7Bi%7D%5Cu2260v_%7Bi%7D%20%24%20%29%2C%20indicating%20that%20robot%20%24%20u_%7Bi%7D%20%24%20beat%20robot%20%24%20v_%7Bi%7D%20%24%20in%20the%20%24%20i%20%24%20-th%20rap%20battle.%20No%20two%20rap%20battles%20involve%20the%20same%20pair%20of%20robots.%5Cn%5CnIt%20is%20guaranteed%20that%20at%20least%20one%20ordering%20of%20the%20robots%20satisfies%20all%20%24%20m%20%24%20relations.%22%2C%22outputFormat%22%3A%22Print%20the%20minimum%20%24%20k%20%24%20such%20that%20the%20ordering%20of%20the%20robots%20by%20skill%20level%20is%20uniquely%20defined%20by%20the%20first%20%24%20k%20%24%20rap%20battles.%20If%20there%20exists%20more%20than%20one%20ordering%20that%20satisfies%20all%20%24%20m%20%24%20relations%2C%20output%20-1.%22%2C%22samples%22%3A%5B%5B%224%205%5Cn2%201%5Cn1%203%5Cn2%203%5Cn4%202%5Cn4%203%5Cn%22%2C%224%5Cn%22%5D%2C%5B%223%202%5Cn1%202%5Cn3%202%5Cn%22%2C%22-1%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%2C%20the%20robots%20from%20strongest%20to%20weakest%20must%20be%20%24%20%284%2C2%2C1%2C3%29%20%24%20%2C%20which%20Bessie%20can%20deduce%20after%20knowing%20the%20results%20of%20the%20first%20four%20rap%20battles.%5Cn%5CnIn%20the%20second%20sample%2C%20both%20%24%20%281%2C3%2C2%29%20%24%20and%20%24%20%283%2C1%2C2%29%20%24%20are%20possible%20orderings%20of%20the%20robots%20from%20strongest%20to%20weakest%20after%20both%20rap%20battles.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F645%5C%2FD%22%2C%22id%22%3A%22645D%22%7D%2C%22translation%22%3A%22%60%60%60%5Cr%5CnDescription%20%5Cr%5Cnn%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu6709%5Cu4e00%5Cu4e2a%5Cu4e0d%5Cu540c%5Cu7684%5Cu7ea7%5Cu522b%5Cuff0c%5Cu7ea7%5Cu522b%5Cu4ecb%5Cu4e8e1~n%5Cuff0c%5Cu9ad8%5Cu7ea7%5Cu522b%5Cu7684%5Cu53ef%5Cu4ee5%5Cu6253%5Cu8d25%5Cu4f4e%5Cu7ea7%5Cu522b%5Cu7684%5Cuff0c%5Cu73b0%5Cu5728%5Cu7ed9%5Cu51fan%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu7684m%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu80dc%5Cu8d1f%5Cu60c5%5Cu51b5%5Cuff0c%5Cu95ee%5Cu6700%5Cu5c11%5Cu9700%5Cu8981%5Cu524d%5Cu51e0%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu5c31%5Cu53ef%5Cu4ee5%5Cu786e%5Cu5b9a%5Cu6bcf%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu7684%5Cu7ea7%5Cu522b%20%5Cr%5CnInput%20%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570n%5Cu548cm%5Cu8868%5Cu793a%5Cu673a%5Cu5668%5Cu4eba%5Cu4e2a%5Cu6570%5Cu548c%5Cu6bd4%5Cu8d5b%5Cu573a%5Cu6570%5Cuff0c%5Cu4e4b%5Cu540em%5Cu884c%5Cu6bcf%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570u%5Cu548cv%5Cu8868%5Cu793a%5Cu673a%5Cu5668%5Cu4ebau%5Cu6253%5Cu8d25%5Cu673a%5Cu5668%5Cu4ebav%20%5Cr%5Cn%282%3C%3Dn%3C%3D1e5%2C1%3C%3Dm%3C%3Dmin%28n%2A%28n-1%29%5C%2F2%2C1e5%29%29%20%5Cr%5CnOutput%20%5Cr%5Cn%5Cu5982%5Cu679c%5Cu8fd9m%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu53ef%5Cu4ee5%5Cu786e%5Cu5b9a%5Cu6bcf%5Cu4e2a%5Cu673a%5Cu5668%5Cu4eba%5Cu7684%5Cu7ea7%5Cu522b%5Cu5219%5Cu8f93%5Cu51fa%5Cu6700%5Cu5c11%5Cu9700%5Cu8981%5Cu524d%5Cu51e0%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu5c31%5Cu53ef%5Cu4ee5%5Cu786e%5Cu5b9a%5Cuff0c%5Cu5426%5Cu5219%5Cu8f93%5Cu51fa-1%20%5Cr%5Cn%5Cr%5Cn%5Cr%5Cn%5Cu6b64%5Cu7ffb%5Cu8bd1%5Cu6765%5Cu6e90%5Cu4e8e%5Cu67d0ppt%5Cr%5Cn%60%60%60%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A27%2C%22totalAccepted%22%3A13%2C%22pid%22%3A%22CF645D%22%2C%22title%22%3A%22Robot%20Rapping%20Results%20Report%22%2C%22difficulty%22%3A4%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Robot%20Rapping%20Results%20Report%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573306449;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Robot Rapping Results Report</h1>
<h2>题意翻译</h2>
<div>```
Description
n个机器人，每个机器人有一个不同的级别，级别介于1~n，高级别的可以打败低级别的，现在给出n个机器人的m场比赛胜负情况，问最少需要前几场比赛就可以确定每个机器人的级别
Input
第一行两个整数n和m表示机器人个数和比赛场数，之后m行每行两个整数u和v表示机器人u打败机器人v
(2<=n<=1e5,1<=m<=min(n*(n-1)/2,1e5))
Output
如果这m场比赛可以确定每个机器人的级别则输出最少需要前几场比赛就可以确定，否则输出-1
此翻译来源于某ppt
```</div>
<h2>题目描述</h2>
<div>While Farmer John rebuilds his farm in an unfamiliar portion of Bovinia, Bessie is out trying some alternative jobs. In her new gig as a reporter, Bessie needs to know about programming competition results as quickly as possible. When she covers the 2016 Robot Rap Battle Tournament, she notices that all of the robots operate under deterministic algorithms. In particular, robot $ i $ will beat robot $ j $ if and only if robot $ i $ has a higher skill level than robot $ j $ . And if robot $ i $ beats robot $ j $ and robot $ j $ beats robot $ k $ , then robot $ i $ will beat robot $ k $ . Since rapping is such a subtle art, two robots can never have the same skill level.
Given the results of the rap battles in the order in which they were played, determine the minimum number of first rap battles that needed to take place before Bessie could order all of the robots by skill level.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input consists of two integers, the number of robots $ n $ ( $ 2<=n<=100000 $ ) and the number of rap battles $ m $ (![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF645D/ff5e51057dd7573544b70b3883f7e12532c00133.png)).
The next $ m $ lines describe the results of the rap battles in the order they took place. Each consists of two integers $ u_{i} $ and $ v_{i} $ ( $ 1<=u_{i},v_{i}<=n $ , $ u_{i}≠v_{i} $ ), indicating that robot $ u_{i} $ beat robot $ v_{i} $ in the $ i $ -th rap battle. No two rap battles involve the same pair of robots.
It is guaranteed that at least one ordering of the robots satisfies all $ m $ relations.</div>
<h3>输出格式</h3>
<br />
<div>Print the minimum $ k $ such that the ordering of the robots by skill level is uniquely defined by the first $ k $ rap battles. If there exists more than one ordering that satisfies all $ m $ relations, output -1.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 5
2 1
1 3
2 3
4 2
4 3
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>4
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>3 2
1 2
3 2
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>-1
</code></pre>
<h2>说明</h2>
<div>In the first sample, the robots from strongest to weakest must be $ (4,2,1,3) $ , which Bessie can deduce after knowing the results of the first four rap battles.
In the second sample, both $ (1,3,2) $ and $ (3,1,2) $ are possible orderings of the robots from strongest to weakest after both rap battles.</div>
</article>
</div>
</div>
</body>
</html>
