<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Quarrel - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573390091:MOzqPrHaOIMz/MvyvCJBWzJjs3kdZysZbpNHGIzNWy8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Friends%20Alex%20and%20Bob%20live%20in%20Bertown.%20In%20this%20town%20there%20are%20%24%20n%20%24%20crossroads%2C%20some%20of%20them%20are%20connected%20by%20bidirectional%20roads%20of%20equal%20length.%20Bob%20lives%20in%20a%20house%20at%20the%20crossroads%20number%20%24%201%20%24%20%2C%20Alex%20%5Cu2014%20in%20a%20house%20at%20the%20crossroads%20number%20%24%20n%20%24%20.%5Cn%5CnOne%20day%20Alex%20and%20Bob%20had%20a%20big%20quarrel%2C%20and%20they%20refused%20to%20see%20each%20other.%20It%20occurred%20that%20today%20Bob%20needs%20to%20get%20from%20his%20house%20to%20the%20crossroads%20%24%20n%20%24%20and%20Alex%20needs%20to%20get%20from%20his%20house%20to%20the%20crossroads%20%24%201%20%24%20.%20And%20they%20don%27t%20want%20to%20meet%20at%20any%20of%20the%20crossroads%2C%20but%20they%20can%20meet%20in%20the%20middle%20of%20the%20street%2C%20when%20passing%20it%20in%20opposite%20directions.%20Alex%20and%20Bob%20asked%20you%2C%20as%20their%20mutual%20friend%2C%20to%20help%20them%20with%20this%20difficult%20task.%5Cn%5CnFind%20for%20Alex%20and%20Bob%20such%20routes%20with%20equal%20number%20of%20streets%20that%20the%20guys%20can%20follow%20these%20routes%20and%20never%20appear%20at%20the%20same%20crossroads%20at%20the%20same%20time.%20They%20are%20allowed%20to%20meet%20in%20the%20middle%20of%20the%20street%20when%20moving%20toward%20each%20other%20%28see%20Sample%201%29.%20Among%20all%20possible%20routes%2C%20select%20such%20that%20the%20number%20of%20streets%20in%20it%20is%20the%20least%20possible.%20Until%20both%20guys%20reach%20their%20destinations%2C%20none%20of%20them%20can%20stay%20without%20moving.%5Cn%5CnThe%20guys%20are%20moving%20simultaneously%20with%20equal%20speeds%2C%20i.e.%20it%20is%20possible%20that%20when%20one%20of%20them%20reaches%20some%20of%20the%20crossroads%2C%20the%20other%20one%20leaves%20it.%20For%20example%2C%20Alex%20can%20move%20from%20crossroad%20%24%201%20%24%20to%20crossroad%20%24%202%20%24%20%2C%20while%20Bob%20moves%20from%20crossroad%20%24%202%20%24%20to%20crossroad%20%24%203%20%24%20.%5Cn%5CnIf%20the%20required%20routes%20don%27t%20exist%2C%20your%20program%20should%20output%20-1.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%202%3C%3Dn%3C%3D500%2C1%3C%3Dm%3C%3D10000%20%24%20%29%20%5Cu2014%20the%20amount%20of%20crossroads%20and%20the%20amount%20of%20roads.%20Each%20of%20the%20following%20%24%20m%20%24%20lines%20contains%20two%20integers%20%5Cu2014%20the%20numbers%20of%20crossroads%20connected%20by%20the%20road.%20It%20is%20guaranteed%20that%20no%20road%20connects%20a%20crossroads%20with%20itself%20and%20no%20two%20crossroads%20are%20connected%20by%20more%20than%20one%20road.%22%2C%22outputFormat%22%3A%22If%20the%20required%20routes%20don%27t%20exist%2C%20output%20-1.%20Otherwise%2C%20the%20first%20line%20should%20contain%20integer%20%24%20k%20%24%20%5Cu2014%20the%20length%20of%20shortest%20routes%20%28the%20length%20of%20the%20route%20is%20the%20amount%20of%20roads%20in%20it%29.%20The%20next%20line%20should%20contain%20%24%20k%2B1%20%24%20integers%20%5Cu2014%20Bob%27s%20route%2C%20i.e.%20the%20numbers%20of%20%24%20k%2B1%20%24%20crossroads%20passed%20by%20Bob.%20The%20last%20line%20should%20contain%20Alex%27s%20route%20in%20the%20same%20format.%20If%20there%20are%20several%20optimal%20solutions%2C%20output%20any%20of%20them.%22%2C%22samples%22%3A%5B%5B%222%201%5Cn1%202%5Cn%22%2C%221%5Cn1%202%20%5Cn2%201%20%5Cn%22%5D%2C%5B%227%205%5Cn1%202%5Cn2%207%5Cn7%206%5Cn2%203%5Cn3%204%5Cn%22%2C%22-1%5Cn%22%5D%2C%5B%227%206%5Cn1%202%5Cn2%207%5Cn7%206%5Cn2%203%5Cn3%204%5Cn1%205%5Cn%22%2C%226%5Cn1%202%203%204%203%202%207%20%5Cn7%206%207%202%201%205%201%20%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F29%5C%2FE%22%2C%22id%22%3A%2229E%22%7D%2C%22translation%22%3A%22%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%3A%5Cu6709%5Cu4e00%5Cu4e2a%5Cu542b%5Cu6709n%5Cu4e2a%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cuff0cm%5Cu6761%5Cu9053%5Cu8def%5Cu7684%5Cu8857%5Cu533a%5Cuff0c%5Cu5c0fB%5Cu4f4f%5Cu57281%5Cu53f7%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cu5904%5Cuff0c%5Cu5c0fA%5Cu4f4f%5Cu5728n%5Cu53f7%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cu5904%5Cu3002%5Cn%5Cu4e00%5Cu5929%5Cu5c0fA%5Cu4e0e%5Cu5c0fB%5Cu5435%5Cu4e86%5Cu67b6%5Cuff0c%5Cu56e0%5Cu6b64%5Cu4ed6%5Cu4eec%5Cu4e0d%5Cu60f3%5Cu5728%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cu9047%5Cu89c1%5Cu5bf9%5Cu65b9%5Cuff08%5Cu4f46%5Cu662f%5Cu53ef%5Cu4ee5%5Cu5728%5Cu8857%5Cu9053%5Cu7684%5Cu4e2d%5Cu592e%5Cu76f8%5Cu5411%5Cu7a7f%5Cu8fc7%5Cuff0c%5Cu89c1%5Cu6837%5Cu4f8b1%5Cuff09%5Cu3002%5Cn%5Cu5de7%5Cu7684%5Cu662f%5Cuff0c%5Cu5c0fA%5Cu8981%5Cu524d%5Cu5f801%5Cu53f7%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cuff0c%5Cu5c0fB%5Cu8981%5Cu524d%5Cu5f80n%5Cu53f7%5Cu5341%5Cu5b57%5Cu8def%5Cu53e3%5Cuff0c%5Cu800c%5Cu4e14%5Cu4ed6%5Cu4eec%5Cu5728%5Cu4e24%5Cu4eba%5Cu90fd%5Cu5230%5Cu8fbe%5Cu7ec8%5Cu70b9%5Cu524d%5Cu5fc5%5Cu987b%5Cu4fdd%5Cu6301%5Cu79fb%5Cu52a8%5Cuff0c%5Cu8bf7%5Cu4f60%5Cu5e2e%5Cu4ed6%5Cu4eec%5Cu89c4%5Cu5212%5Cu51fa%5Cu4e00%5Cu6761%5Cu5c3d%5Cu53ef%5Cu80fd%5Cu77ed%5Cu7684%5Cu8def%5Cu7ebf%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu5165%3A%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570n%2Cm%5Cuff0c%5Cu4e4b%5Cu540em%5Cu884c%5Cu6bcf%5Cu884c%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570a%2Cb%5Cu8868%5Cu793aa%2Cb%5Cu8def%5Cu53e3%5Cu95f4%5Cu6709%5Cu4e00%5Cu6761%5Cu8def%5Cn%5Cn%5Cu8f93%5Cu51fa%3A%5Cu82e5%5Cu6ca1%5Cu6709%5Cu5408%5Cu6cd5%5Cu65b9%5Cu6848%5Cu5219%5Cu8f93%5Cu51fa%5C%22-1%5C%22%2C%5Cu5426%5Cu5219%5Cu5148%5Cu8f93%5Cu51fa%5Cu6bcf%5Cu4eba%5Cu6700%5Cu5c0f%5Cu7684%5Cu79fb%5Cu52a8%5Cu6b65%5Cu6570k%5Cuff0c%5Cu7b2c%5Cu4e8c%5Cu884c%5Cu8f93%5Cu51fa%5Cu5c0fB%5Cu7684%5Cu8def%5Cu7ebf%5Cuff0c%5Cu7b2c%5Cu4e09%5Cu884c%5Cu8f93%5Cu51fa%5Cu5c0fA%5Cu7684%5Cu8def%5Cu7ebf%5Cn%5Cn2%3C%3Dn%3C%3D500%2C1%3C%3Dm%3C%3D10000%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A15%2C%22totalAccepted%22%3A5%2C%22pid%22%3A%22CF29E%22%2C%22title%22%3A%22Quarrel%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A32597%2C%22title%22%3A%22%5Cu3010%5Cu56db%5Cu5341%5Cu56db%5Cu7bc7%5Cu3011%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12574%2C%22name%22%3A%22CF29E%20Quarrel%22%2C%22slug%22%3A%22CF29E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Quarrel%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573295103;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Quarrel</h1>
<h2>题意翻译</h2>
<div>题目描述:有一个含有n个十字路口，m条道路的街区，小B住在1号十字路口处，小A住在n号十字路口处。
一天小A与小B吵了架，因此他们不想在十字路口遇见对方（但是可以在街道的中央相向穿过，见样例1）。
巧的是，小A要前往1号十字路口，小B要前往n号十字路口，而且他们在两人都到达终点前必须保持移动，请你帮他们规划出一条尽可能短的路线。
输入:第一行两个正整数n,m，之后m行每行两个整数a,b表示a,b路口间有一条路
输出:若没有合法方案则输出"-1",否则先输出每人最小的移动步数k，第二行输出小B的路线，第三行输出小A的路线
2<=n<=500,1<=m<=10000</div>
<h2>题目描述</h2>
<div>Friends Alex and Bob live in Bertown. In this town there are $ n $ crossroads, some of them are connected by bidirectional roads of equal length. Bob lives in a house at the crossroads number $ 1 $ , Alex — in a house at the crossroads number $ n $ .
One day Alex and Bob had a big quarrel, and they refused to see each other. It occurred that today Bob needs to get from his house to the crossroads $ n $ and Alex needs to get from his house to the crossroads $ 1 $ . And they don't want to meet at any of the crossroads, but they can meet in the middle of the street, when passing it in opposite directions. Alex and Bob asked you, as their mutual friend, to help them with this difficult task.
Find for Alex and Bob such routes with equal number of streets that the guys can follow these routes and never appear at the same crossroads at the same time. They are allowed to meet in the middle of the street when moving toward each other (see Sample 1). Among all possible routes, select such that the number of streets in it is the least possible. Until both guys reach their destinations, none of them can stay without moving.
The guys are moving simultaneously with equal speeds, i.e. it is possible that when one of them reaches some of the crossroads, the other one leaves it. For example, Alex can move from crossroad $ 1 $ to crossroad $ 2 $ , while Bob moves from crossroad $ 2 $ to crossroad $ 3 $ .
If the required routes don't exist, your program should output -1.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 2<=n<=500,1<=m<=10000 $ ) — the amount of crossroads and the amount of roads. Each of the following $ m $ lines contains two integers — the numbers of crossroads connected by the road. It is guaranteed that no road connects a crossroads with itself and no two crossroads are connected by more than one road.</div>
<h3>输出格式</h3>
<br />
<div>If the required routes don't exist, output -1. Otherwise, the first line should contain integer $ k $ — the length of shortest routes (the length of the route is the amount of roads in it). The next line should contain $ k+1 $ integers — Bob's route, i.e. the numbers of $ k+1 $ crossroads passed by Bob. The last line should contain Alex's route in the same format. If there are several optimal solutions, output any of them.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 1
1 2
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
1 2 
2 1 
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>7 5
1 2
2 7
7 6
2 3
3 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>-1
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>7 6
1 2
2 7
7 6
2 3
3 4
1 5
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>6
1 2 3 4 3 2 7 
7 6 7 2 1 5 1 
</code></pre>
</article>
</div>
</div>
</body>
</html>
