<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Lucky Array - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573390957:rlTuoqyj4xJTs/YqukRjvsZRVCumI3TgZVJVTnkjDeY=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Petya%20loves%20lucky%20numbers.%20Everybody%20knows%20that%20lucky%20numbers%20are%20positive%20integers%20whose%20decimal%20representation%20contains%20only%20the%20lucky%20digits%204%20and%207.%20For%20example%2C%20numbers%2047%2C%20744%2C%204%20are%20lucky%20and%205%2C%2017%2C%20467%20are%20not.%5Cn%5CnPetya%20has%20an%20array%20consisting%20of%20%24%20n%20%24%20numbers.%20He%20wants%20to%20perform%20%24%20m%20%24%20operations%20of%20two%20types%3A%5Cn%5Cn-%20add%20%24%20l%20%24%20%24%20r%20%24%20%24%20d%20%24%20%20%5Cu2014%20add%20an%20integer%20%24%20d%20%24%20to%20all%20elements%20whose%20indexes%20belong%20to%20the%20interval%20from%20%24%20l%20%24%20to%20%24%20r%20%24%20%2C%20inclusive%20%24%20%281%3C%3Dl%3C%3Dr%3C%3Dn%2C1%3C%3Dd%3C%3D10%5E%7B4%7D%29%20%24%20%3B%5Cn-%20count%20%24%20l%20%24%20%24%20r%20%24%20%20%5Cu2014%20find%20and%20print%20on%20the%20screen%20how%20many%20lucky%20numbers%20there%20are%20among%20elements%20with%20indexes%20that%20belong%20to%20the%20interval%20from%20%24%20l%20%24%20to%20%24%20r%20%24%20inclusive%20%24%20%281%3C%3Dl%3C%3Dr%3C%3Dn%29%20%24%20.%20Each%20lucky%20number%20should%20be%20counted%20as%20many%20times%20as%20it%20appears%20in%20the%20interval.%5Cn%5CnPetya%20has%20a%20list%20of%20all%20operations.%20The%20operations%20are%20such%20that%20after%20all%20additions%20the%20array%20won%27t%20have%20numbers%20that%20would%20exceed%20%24%2010%5E%7B4%7D%20%24%20.%20Help%20Petya%20write%20a%20program%20that%20would%20perform%20these%20operations.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%3C%3Dn%2Cm%3C%3D10%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20numbers%20in%20the%20array%20and%20the%20number%20of%20operations%20correspondingly.%20The%20second%20line%20contains%20%24%20n%20%24%20positive%20integers%2C%20none%20of%20which%20exceeds%20%24%2010%5E%7B4%7D%20%24%20%5Cu2014%20those%20are%20the%20array%20numbers.%20Next%20%24%20m%20%24%20lines%20contain%20operations%2C%20one%20per%20line.%20They%20correspond%20to%20the%20description%20given%20in%20the%20statement.%5Cn%5CnIt%20is%20guaranteed%20that%20after%20all%20operations%20are%20fulfilled%20each%20number%20in%20the%20array%20will%20not%20exceed%20%24%2010%5E%7B4%7D%20%24%20.%22%2C%22outputFormat%22%3A%22For%20each%20operation%20of%20the%20second%20type%20print%20the%20single%20number%20on%20the%20single%20line%20%5Cu2014%20the%20number%20of%20lucky%20numbers%20in%20the%20corresponding%20interval.%22%2C%22samples%22%3A%5B%5B%223%206%5Cn2%203%204%5Cncount%201%203%5Cncount%201%202%5Cnadd%201%203%202%5Cncount%201%203%5Cnadd%202%203%203%5Cncount%201%203%5Cn%22%2C%221%5Cn0%5Cn1%5Cn1%5Cn%22%5D%2C%5B%224%205%5Cn4%204%204%204%5Cncount%201%204%5Cnadd%201%204%203%5Cncount%201%204%5Cnadd%202%203%2040%5Cncount%201%204%5Cn%22%2C%224%5Cn4%5Cn4%5Cn%22%5D%5D%2C%22hint%22%3A%22In%20the%20first%20sample%20after%20the%20first%20addition%20the%20array%20will%20look%20in%20the%20following%20manner%3A%5Cn%5Cn4%205%206%5Cn%5CnAfter%20the%20second%20addition%3A%5Cn%5Cn4%208%209%5Cn%5CnThe%20second%20sample%20after%20the%20first%20addition%3A%5Cn%5Cn7%207%207%207%5Cn%5CnAfter%20the%20second%20addition%3A%5Cn%5Cn7%2047%2047%207%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B4000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F121%5C%2FE%22%2C%22id%22%3A%22121E%22%7D%2C%22translation%22%3A%22%23%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5CnPetya%20%5Cu559c%5Cu6b22%5Cu5e78%5Cu8fd0%5Cu6570%5Cuff0c%5Cu5e78%5Cu8fd0%5Cu6570%5Cu53ea%5Cu5305%5Cu542b%204%20%5Cu548c%207%20%5Cu8fd9%5Cu4e24%5Cu4e2a%5Cu6570%5Cu5b57%5Cu3002%5Cu4f8b%5Cu5982%2047%5Cuff0c744%5Cuff0c4%20%5Cu90fd%5Cu662f%5Cu5e78%5Cu8fd0%5Cu6570%5Cu5b57%5Cuff0c%5Cu4f46%205%2C16%2C467%20%5Cu4e0d%5Cu662f%5Cu3002%5Cn%5CnPetya%20%5Cu6709%5Cu4e00%5Cu4e2a%20N%20%5Cu4e2a%5Cu6570%5Cu7684%5Cu6570%5Cu7ec4%5Cuff0c%5Cu4ed6%5Cu60f3%5Cu7ed9%5Cu8fd9%5Cu4e2a%5Cu6570%5Cu7ec4%5Cu6267%5Cu884c%20M%20%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu53ef%5Cu4ee5%5Cu5206%5Cu4e3a%5Cu4e24%5Cu79cd%5Cu64cd%5Cu4f5c%5Cuff1a%5Cn%5Cn1.%20%60add%20l%20r%20d%60%20%5Cu628a%5Cu7b2c%20l%20%5Cu5230%20%5Cu7b2c%20r%20%5Cu4e2a%5Cu6570%5Cu90fd%5Cu52a0%5Cu4e0a%20d%5Cuff1b%5Cn9%5Cn2.%20%60count%20l%20r%60%20%5Cu7edf%5Cu8ba1%5Cu7b2c%20l%20%5Cu5230%5Cu7b2c%20r%20%5Cu4e2a%5Cu6570%5Cu6709%5Cu591a%5Cu5c11%5Cu4e2a%5Cu5e78%5Cu8fd0%5Cu6570%5Cu5b57%5Cu3002%5Cn%5Cn%5Cu8bf7%5Cu4f60%5Cu7f16%5Cu4e00%5Cu4e2a%5Cu7a0b%5Cu5e8f%5Cu6765%5Cu6267%5Cu884c%5Cu8fd9%5Cu4e9b%5Cu64cd%5Cu4f5c%5Cu3002%5Cn%5Cn%20%241%20%5C%5Cleq%20N%2CM%20%5C%5Cleq%2010%5E5%5C%5C%20%2C%5C%5C%201%20%5C%5Cleq%20l%20%5C%5Cleq%20r%20%5C%5Cleq%20N%5C%5C%20%2C%5C%5C%201%20%5C%5Cleq%20d%20%5C%5Cleq%2010%5E4%24%20%5Cn%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cuff0c%5Cu4e24%5Cu4e2a%5Cu6570%20N%20%5Cu548c%20M%5Cuff1b%5Cn%5Cn%5Cu7b2c%5Cu4e8c%5Cu884c%5Cuff0cN%20%5Cu4e2a%5Cu6570%5Cuff0c%5Cu8868%5Cu793a%5Cu539f%5Cu6570%5Cu7ec4%5Cuff1b%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765%20M%20%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu8868%5Cu793a%5Cu4e00%5Cu4e2a%5Cu64cd%5Cu4f5c%5Cuff0c%5Cu683c%5Cu5f0f%5Cu89c1%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cu3002%5Cn%5Cn%23%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cn%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e2a%5Cu8be2%5Cu95ee%5Cu5e78%5Cu8fd0%5Cu6570%5Cu4e2a%5Cu6570%5Cu7684%5Cu95ee%5Cu9898%5Cuff0c%5Cu8f93%5Cu51fa%5Cu7b54%5Cu6848%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu5360%5Cu4e00%5Cu884c%5Cu3002%5Cn%5Cn_%5Cu8f93%5Cu5165%5Cu8f93%5Cu51fa%5Cu6837%5Cu4f8b%5Cu5728%5Cu4e0b%5Cu9762_%5Cn%5Cn%23%23%20%5Cu8bf4%5Cu660e%5Cn%5Cu5bf9%5Cu4e8e%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu6837%5Cu4f8b%5Cuff1a%5Cn1.%20%5Cu6267%5Cu884c%5Cu4e86%60add%201%203%202%60%5Cu64cd%5Cu4f5c%5Cu4e4b%5Cu540e%5Cu53d8%5Cu6210%5Cuff1a%604%205%206%60%5Cn2.%20%5Cu6267%5Cu884c%5Cu4e86%60add%202%203%203%60%5Cu64cd%5Cu4f5c%5Cu4e4b%5Cu540e%5Cu53d8%5Cu6210%5Cuff1a%604%208%209%60%5Cn%5Cn%5Cu5bf9%5Cu4e8e%5Cu7b2c%5Cu4e8c%5Cu4e2a%5Cu6837%5Cu4f8b%5Cuff1a%5Cn%5Cn1.%20%5Cu6267%5Cu884c%5Cu4e86%60add%201%204%203%60%5Cu4e4b%5Cu540e%5Cu53d8%5Cu6210%5Cuff1a%607%207%207%207%60%5Cn2.%20%5Cu6267%5Cu884c%5Cu4e86%60add%202%203%2040%60%5Cu4e4b%5Cu540e%5Cu53d8%5Cu6210%5Cuff1a%607%2047%2047%207%60%5Cn%5Cn%5Cu611f%5Cu8c22%40%5Cu7a81%5Cu7136%5Cu9893%5Cu5e9f%20%5Cu63d0%5Cu4f9b%5Cu7ffb%5Cu8bd1%20%22%2C%22tags%22%3A%5B53%2C111%2C244%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A360%2C%22totalAccepted%22%3A124%2C%22pid%22%3A%22CF121E%22%2C%22title%22%3A%22Lucky%20Array%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A90923%2C%22title%22%3A%22%5Cu7b2c%5Cu516d%5Cu5341%5Cu4e8c%5Cu4e2a%5Cu70b9tle%5Cu4e86%22%2C%22forum%22%3A%7B%22id%22%3A12117%2C%22name%22%3A%22CF121E%20Lucky%20Array%22%2C%22slug%22%3A%22CF121E%22%7D%7D%2C%7B%22id%22%3A90893%2C%22title%22%3A%22%5Cu8d85%5Cu65f6%5Cu4e86%5Cuff0c%5Cu6c42%5Cu4f18%5Cu5316%22%2C%22forum%22%3A%7B%22id%22%3A12117%2C%22name%22%3A%22CF121E%20Lucky%20Array%22%2C%22slug%22%3A%22CF121E%22%7D%7D%2C%7B%22id%22%3A80862%2C%22title%22%3A%22%5Cu6837%5Cu4f8b%5Cu90fd%5Cu53ef%5Cu4ee5%5Cu8fc7%5Cu4f46%5Cu662f%5Cuff01%5Cu6d4b%5Cu8bd5%5Cu6570%5Cu636e%5Cu8fc7%5Cu53bb%5Cuff01%5Cu627e%5Cu4e0d%5Cu5230%5Cu54ea%5Cu91cc%5Cu9519%5Cu4e86%28%3E_%3C%29%22%2C%22forum%22%3A%7B%22id%22%3A12117%2C%22name%22%3A%22CF121E%20Lucky%20Array%22%2C%22slug%22%3A%22CF121E%22%7D%7D%2C%7B%22id%22%3A46554%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12117%2C%22name%22%3A%22CF121E%20Lucky%20Array%22%2C%22slug%22%3A%22CF121E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3384%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu6811%5Cu94fe%5Cu5256%5Cu5206%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4168%22%2C%22title%22%3A%22%5BViolet%5D%5Cu84b2%5Cu516c%5Cu82f1%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF916E%22%2C%22title%22%3A%22Jamie%20and%20Tree%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF877E%22%2C%22title%22%3A%22Danil%20and%20a%20Part-time%20Job%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22P4555%22%2C%22title%22%3A%22%5B%5Cu56fd%5Cu5bb6%5Cu96c6%5Cu8bad%5Cu961f%5D%5Cu6700%5Cu957f%5Cu53cc%5Cu56de%5Cu6587%5Cu4e32%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Lucky%20Array%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Lucky Array</h1>
<h2>题意翻译</h2>
<div>## 题目描述
Petya 喜欢幸运数，幸运数只包含 4 和 7 这两个数字。例如 47，744，4 都是幸运数字，但 5,16,467 不是。
Petya 有一个 N 个数的数组，他想给这个数组执行 M 个操作，可以分为两种操作：
1. `add l r d` 把第 l 到 第 r 个数都加上 d；
9
2. `count l r` 统计第 l 到第 r 个数有多少个幸运数字。
请你编一个程序来执行这些操作。
$1 \leq N,M \leq 10^5\ ,\ 1 \leq l \leq r \leq N\ ,\ 1 \leq d \leq 10^4$
## 输入格式
第一行，两个数 N 和 M；
第二行，N 个数，表示原数组；
接下来 M 行，每行表示一个操作，格式见题目描述。
## 输出格式
对于每个询问幸运数个数的问题，输出答案，每个占一行。
_输入输出样例在下面_
## 说明
对于第一个样例：
1. 执行了`add 1 3 2`操作之后变成：`4 5 6`
2. 执行了`add 2 3 3`操作之后变成：`4 8 9`
对于第二个样例：
1. 执行了`add 1 4 3`之后变成：`7 7 7 7`
2. 执行了`add 2 3 40`之后变成：`7 47 47 7`
感谢@突然颓废 提供翻译 </div>
<h2>题目描述</h2>
<div>Petya loves lucky numbers. Everybody knows that lucky numbers are positive integers whose decimal representation contains only the lucky digits 4 and 7. For example, numbers 47, 744, 4 are lucky and 5, 17, 467 are not.
Petya has an array consisting of $ n $ numbers. He wants to perform $ m $ operations of two types:
- add $ l $ $ r $ $ d $ — add an integer $ d $ to all elements whose indexes belong to the interval from $ l $ to $ r $ , inclusive $ (1<=l<=r<=n,1<=d<=10^{4}) $ ;
- count $ l $ $ r $ — find and print on the screen how many lucky numbers there are among elements with indexes that belong to the interval from $ l $ to $ r $ inclusive $ (1<=l<=r<=n) $ . Each lucky number should be counted as many times as it appears in the interval.
Petya has a list of all operations. The operations are such that after all additions the array won't have numbers that would exceed $ 10^{4} $ . Help Petya write a program that would perform these operations.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 1<=n,m<=10^{5} $ ) — the number of numbers in the array and the number of operations correspondingly. The second line contains $ n $ positive integers, none of which exceeds $ 10^{4} $ — those are the array numbers. Next $ m $ lines contain operations, one per line. They correspond to the description given in the statement.
It is guaranteed that after all operations are fulfilled each number in the array will not exceed $ 10^{4} $ .</div>
<h3>输出格式</h3>
<br />
<div>For each operation of the second type print the single number on the single line — the number of lucky numbers in the corresponding interval.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 6
2 3 4
count 1 3
count 1 2
add 1 3 2
count 1 3
add 2 3 3
count 1 3
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
0
1
1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>4 5
4 4 4 4
count 1 4
add 1 4 3
count 1 4
add 2 3 40
count 1 4
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>4
4
4
</code></pre>
<h2>说明</h2>
<div>In the first sample after the first addition the array will look in the following manner:
4 5 6
After the second addition:
4 8 9
The second sample after the first addition:
7 7 7 7
After the second addition:
7 47 47 7</div>
</article>
</div>
</div>
</body>
</html>
