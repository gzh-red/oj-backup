<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Pseudorandom Sequence Period - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573391387:T6W/yjQV11WRxNjXwagvd4y14jkN/UEyvKsdkthc4Jc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Polycarpus%20has%20recently%20got%20interested%20in%20sequences%20of%20pseudorandom%20numbers.%20He%20learned%20that%20many%20programming%20languages%20generate%20such%20sequences%20in%20a%20similar%20way%3A%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF172B%5C%2F02c4eeecb957768b3b96e1481a979d6934aab656.png%29%20%28for%20%24%20i%3E%3D1%20%24%20%29.%20Here%20%24%20a%20%24%20%2C%20%24%20b%20%24%20%2C%20%24%20m%20%24%20are%20constants%2C%20fixed%20for%20the%20given%20realization%20of%20the%20pseudorandom%20numbers%20generator%2C%20%24%20r_%7B0%7D%20%24%20is%20the%20so-called%20%24%20randseed%20%24%20%28this%20value%20can%20be%20set%20from%20the%20program%20using%20functions%20like%20RandSeed%28r%29%20or%20srand%28n%29%29%2C%20and%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF172B%5C%2F99fd5677ca5c02520be7595d9b1eaf3e9972e601.png%29%20denotes%20the%20operation%20of%20taking%20the%20remainder%20of%20division.%5Cn%5CnFor%20example%2C%20if%20%24%20a%3D2%2Cb%3D6%2Cm%3D12%2Cr_%7B0%7D%3D11%20%24%20%2C%20the%20generated%20sequence%20will%20be%3A%20%24%204%2C2%2C10%2C2%2C10%2C2%2C10%2C2%2C10%2C2%2C10%2C...%20%24%20.%5Cn%5CnPolycarpus%20realized%20that%20any%20such%20sequence%20will%20sooner%20or%20later%20form%20a%20cycle%2C%20but%20the%20cycle%20may%20occur%20not%20in%20the%20beginning%2C%20so%20there%20exist%20a%20preperiod%20and%20a%20period.%20The%20example%20above%20shows%20a%20preperiod%20equal%20to%201%20and%20a%20period%20equal%20to%202.%5Cn%5CnYour%20task%20is%20to%20find%20the%20period%20of%20a%20sequence%20defined%20by%20the%20given%20values%20of%20%24%20a%2Cb%2Cm%20%24%20and%20%24%20r_%7B0%7D%20%24%20.%20Formally%2C%20you%20have%20to%20find%20such%20minimum%20positive%20integer%20%24%20t%20%24%20%2C%20for%20which%20exists%20such%20positive%20integer%20%24%20k%20%24%20%2C%20that%20for%20any%20%24%20i%3E%3Dk%20%24%20%3A%20%24%20r_%7Bi%7D%3Dr_%7Bi%2Bt%7D%20%24%20.%22%2C%22inputFormat%22%3A%22The%20single%20line%20of%20the%20input%20contains%20four%20integers%20%24%20a%20%24%20%2C%20%24%20b%20%24%20%2C%20%24%20m%20%24%20and%20%24%20r_%7B0%7D%20%24%20%28%20%24%201%3C%3Dm%3C%3D10%5E%7B5%7D%2C0%3C%3Da%2Cb%3C%3D1000%2C0%3C%3Dr_%7B0%7D%26lt%3Bm%20%24%20%29%2C%20separated%20by%20single%20spaces.%22%2C%22outputFormat%22%3A%22Print%20a%20single%20integer%20%5Cu2014%20the%20period%20of%20the%20sequence.%22%2C%22samples%22%3A%5B%5B%222%206%2012%2011%5Cn%22%2C%222%5Cn%22%5D%2C%5B%222%203%205%201%5Cn%22%2C%224%5Cn%22%5D%2C%5B%223%206%2081%209%5Cn%22%2C%221%5Cn%22%5D%5D%2C%22hint%22%3A%22The%20first%20sample%20is%20described%20above.%5Cn%5CnIn%20the%20second%20sample%20the%20sequence%20is%20%28starting%20from%20the%20first%20element%29%3A%20%24%200%2C3%2C4%2C1%2C0%2C3%2C4%2C1%2C0%2C...%20%24%5Cn%5CnIn%20the%20third%20sample%20the%20sequence%20is%20%28starting%20from%20the%20first%20element%29%3A%20%24%2033%2C24%2C78%2C78%2C78%2C78%2C...%20%24%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F172%5C%2FB%22%2C%22id%22%3A%22172B%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A6%2C%22totalAccepted%22%3A5%2C%22pid%22%3A%22CF172B%22%2C%22title%22%3A%22Pseudorandom%20Sequence%20Period%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A95898%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A11901%2C%22name%22%3A%22CF172B%20Pseudorandom%20Sequence%20Period%22%2C%22slug%22%3A%22CF172B%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Pseudorandom%20Sequence%20Period%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573295103;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Pseudorandom Sequence Period</h1>
<h2>题目描述</h2>
<div>Polycarpus has recently got interested in sequences of pseudorandom numbers. He learned that many programming languages generate such sequences in a similar way: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF172B/02c4eeecb957768b3b96e1481a979d6934aab656.png) (for $ i>=1 $ ). Here $ a $ , $ b $ , $ m $ are constants, fixed for the given realization of the pseudorandom numbers generator, $ r_{0} $ is the so-called $ randseed $ (this value can be set from the program using functions like RandSeed(r) or srand(n)), and ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF172B/99fd5677ca5c02520be7595d9b1eaf3e9972e601.png) denotes the operation of taking the remainder of division.
For example, if $ a=2,b=6,m=12,r_{0}=11 $ , the generated sequence will be: $ 4,2,10,2,10,2,10,2,10,2,10,... $ .
Polycarpus realized that any such sequence will sooner or later form a cycle, but the cycle may occur not in the beginning, so there exist a preperiod and a period. The example above shows a preperiod equal to 1 and a period equal to 2.
Your task is to find the period of a sequence defined by the given values of $ a,b,m $ and $ r_{0} $ . Formally, you have to find such minimum positive integer $ t $ , for which exists such positive integer $ k $ , that for any $ i>=k $ : $ r_{i}=r_{i+t} $ .</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The single line of the input contains four integers $ a $ , $ b $ , $ m $ and $ r_{0} $ ( $ 1<=m<=10^{5},0<=a,b<=1000,0<=r_{0}&lt;m $ ), separated by single spaces.</div>
<h3>输出格式</h3>
<br />
<div>Print a single integer — the period of the sequence.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 6 12 11
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2 3 5 1
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>4
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>3 6 81 9
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>1
</code></pre>
<h2>说明</h2>
<div>The first sample is described above.
In the second sample the sequence is (starting from the first element): $ 0,3,4,1,0,3,4,1,0,... $
In the third sample the sequence is (starting from the first element): $ 33,24,78,78,78,78,... $</div>
</article>
</div>
</div>
</body>
</html>
