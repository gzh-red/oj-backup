<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Race - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573390245:mAkvS+PW2qu2f5aISfNo4IPu4tX6JFXwZ0+ehShoBww=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22Today%20%24%20s%20%24%20kilometer%20long%20auto%20race%20takes%20place%20in%20Berland.%20The%20track%20is%20represented%20by%20a%20straight%20line%20as%20long%20as%20%24%20s%20%24%20kilometers.%20There%20are%20%24%20n%20%24%20cars%20taking%20part%20in%20the%20race%2C%20all%20of%20them%20start%20simultaneously%20at%20the%20very%20beginning%20of%20the%20track.%20For%20every%20car%20is%20known%20its%20behavior%20%5Cu2014%20the%20system%20of%20segments%20on%20each%20of%20which%20the%20speed%20of%20the%20car%20is%20constant.%20The%20%24%20j%20%24%20-th%20segment%20of%20the%20%24%20i%20%24%20-th%20car%20is%20pair%20%24%20%28v_%7Bi%2Cj%7D%2Ct_%7Bi%2Cj%7D%29%20%24%20%2C%20where%20%24%20v_%7Bi%2Cj%7D%20%24%20is%20the%20car%27s%20speed%20on%20the%20whole%20segment%20in%20kilometers%20per%20hour%20and%20%24%20t_%7Bi%2Cj%7D%20%24%20is%20for%20how%20many%20hours%20the%20car%20had%20been%20driving%20at%20that%20speed.%20The%20segments%20are%20given%20in%20the%20order%20in%20which%20they%20are%20%5C%22being%20driven%20on%5C%22%20by%20the%20cars.%5Cn%5CnYour%20task%20is%20to%20find%20out%20how%20many%20times%20during%20the%20race%20some%20car%20managed%20to%20have%20a%20lead%20over%20another%20car.%20A%20lead%20is%20considered%20a%20situation%20when%20one%20car%20appears%20in%20front%20of%20another%20car.%20It%20is%20known%2C%20that%20all%20the%20leads%20happen%20instantly%2C%20i.%20e.%20there%20are%20no%20such%20time%20segment%20of%20positive%20length%2C%20during%20which%20some%20two%20cars%20drive%20%5C%22together%5C%22.%20At%20one%20moment%20of%20time%20on%20one%20and%20the%20same%20point%20several%20leads%20may%20appear.%20In%20this%20case%20all%20of%20them%20should%20be%20taken%20individually.%20Meetings%20of%20cars%20at%20the%20start%20and%20finish%20are%20not%20considered%20to%20be%20counted%20as%20leads.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20s%20%24%20%28%20%24%202%3C%3Dn%3C%3D100%2C1%3C%3Ds%3C%3D10%5E%7B6%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20cars%20and%20the%20length%20of%20the%20track%20in%20kilometers.%20Then%20follow%20%24%20n%20%24%20lines%20%5Cu2014%20the%20description%20of%20the%20system%20of%20segments%20for%20each%20car.%20Every%20description%20starts%20with%20integer%20%24%20k%20%24%20%28%20%24%201%3C%3Dk%3C%3D100%20%24%20%29%20%5Cu2014%20the%20number%20of%20segments%20in%20the%20system.%20Then%20%24%20k%20%24%20space-separated%20pairs%20of%20integers%20are%20written.%20Each%20pair%20is%20the%20speed%20and%20time%20of%20the%20segment.%20These%20integers%20are%20positive%20and%20don%27t%20exceed%201000.%20It%20is%20guaranteed%2C%20that%20the%20sum%20of%20lengths%20of%20all%20segments%20%28in%20kilometers%29%20for%20each%20car%20equals%20to%20%24%20s%20%24%20%3B%20and%20all%20the%20leads%20happen%20instantly.%22%2C%22outputFormat%22%3A%22Print%20the%20single%20number%20%5Cu2014%20the%20number%20of%20times%20some%20car%20managed%20to%20take%20the%20lead%20over%20another%20car%20during%20the%20race.%22%2C%22samples%22%3A%5B%5B%222%2033%5Cn2%205%201%202%2014%5Cn1%203%2011%5Cn%22%2C%221%5Cn%22%5D%2C%5B%222%2033%5Cn2%201%203%2010%203%5Cn1%2011%203%5Cn%22%2C%220%5Cn%22%5D%2C%5B%225%2033%5Cn2%201%203%203%2010%5Cn1%2011%203%5Cn2%205%203%203%206%5Cn2%203%201%2010%203%5Cn2%206%203%203%205%5Cn%22%2C%222%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F43%5C%2FE%22%2C%22id%22%3A%2243E%22%7D%2C%22translation%22%3A%22%5Cu3010%5Cu9898%5Cu76ee%5Cu5927%5Cu610f%5Cu3011%20%5Cu6c7d%5Cu8f66%5Cu8d5b%5Cu6709n%5Cu8f86%5Cu8f66%5Cuff0c%5Cu5171s%5Cu5343%5Cu7c73%5Cu3002%5Cu6bcf%5Cu8f86%5Cu8f66%5Cu5728%5Cu4e0d%5Cu540c%5Cu65f6%5Cu95f4%5Cu6bb5%5Cu7684%5Cu901f%5Cu5ea6%5Cu4e0d%5Cu540c%5Cuff0c%5Cu7b2ci%5Cu8f86%5Cu8f66%5Cu5728%5Cu7b2cj%20%5Cu6bb5%5Cu65f6%5Cu95f4%5Cu7684%5Cu901f%5Cu5ea6%5Cu4e3avij%5Cuff0c%5Cu5e76%5Cu6301%5Cu7eedtij%5Cu5c0f%5Cu65f6%5Cu3002%5Cu6240%5Cu6709%5Cu8f66%5Cu5728%5Cu540c%5Cu4e00%5Cu65f6%5Cu523b%5Cu51fa%5Cu53d1%5Cuff0c%5Cu73b0%5Cu8981%5Cu6c42%5Cu6574%5Cu573a%5Cu6bd4%5Cu8d5b%5Cu4e2d%5Cu7684%5Cu603b%5Cu5171%5Cu8d85%5Cu8f66%5Cu6b21%5Cu6570%5Cuff0c%5Cu6570%5Cu636e%5Cu4fdd%5Cu8bc1%5Cu4e0d%5Cu4f1a%5Cu6709%5Cu4e24%5Cu8f86%5Cu8f66%5Cu5728%5Cu540c%5Cu4e00%5Cu65f6%5Cu95f4%5Cu5728%5Cu540c%5Cu4e00%5Cu4f4d%5Cu7f6e%5Cu4e14%5Cu901f%5Cu5ea6%5Cu76f8%5Cu540c%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu5165%5Cuff1a%5Cn%5Cn%5Cu7b2c%5Cu4e00%5Cu884c2%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570n%20%5Cu3001s%5Cuff082%3C%3Dn%3C%3D100%20%2C%201%3C%3Ds%3C%3D1000000%5Cuff09%5Cuff08%5Cu610f%5Cu4e49%5Cu89c1%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cuff09%5Cn%5Cn%5Cu63a5%5Cu4e0b%5Cu6765n%5Cu884c%5Cu6bcf%5Cu884c%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570k%5Cuff081%3C%3Dk%3C%3D100%5Cuff09%5Cuff0c%5Cu8868%5Cu793a%20%5Cu7b2ci%20%5Cu8f86%5Cu8f66%5Cu4e00%5Cu5171%5Cu6709k%20%5Cu4e2a%5Cu65f6%5Cu95f4%5Cu6bb5%5Cuff0c%5Cu63a5%5Cu77402k%5Cu4e2a%5Cu6570vij%20%5Cu3001%20tij%20%5Cuff08vij%20%2C%20tij%20%3C%3D1000%20%29%5Cuff08%5Cu610f%5Cu4e49%5Cu89c1%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cuff09%5Cuff0c%5Cu4fdd%5Cu8bc1%5Cu6bcf%5Cu8f86%5Cu8f66%5Cu6700%5Cu540e%5Cu6070%5Cu597d%5Cu5230%5Cu8fbe%5Cu7ec8%5Cu70b9%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu51fa%5Cuff1a%5Cn%5Cn%5Cu4e00%5Cu4e2a%5Cu6570%5Cuff0c%5Cu603b%5Cu5171%5Cu8d85%5Cu8f66%5Cu6b21%5Cu6570%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%40%5Cu6797%5Cu5219%5Cu5f90%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A18%2C%22totalAccepted%22%3A8%2C%22pid%22%3A%22CF43E%22%2C%22title%22%3A%22Race%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A33561%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12495%2C%22name%22%3A%22CF43E%20Race%22%2C%22slug%22%3A%22CF43E%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Race%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Race</h1>
<h2>题意翻译</h2>
<div>【题目大意】 汽车赛有n辆车，共s千米。每辆车在不同时间段的速度不同，第i辆车在第j 段时间的速度为vij，并持续tij小时。所有车在同一时刻出发，现要求整场比赛中的总共超车次数，数据保证不会有两辆车在同一时间在同一位置且速度相同。
输入：
第一行2个正整数n 、s（2<=n<=100 , 1<=s<=1000000）（意义见题目描述）
接下来n行每行第一个正整数k（1<=k<=100），表示 第i 辆车一共有k 个时间段，接着2k个数vij 、 tij （vij , tij <=1000 )（意义见题目描述），保证每辆车最后恰好到达终点。
输出：
一个数，总共超车次数。
感谢@林则徐 提供的翻译</div>
<h2>题目描述</h2>
<div>Today $ s $ kilometer long auto race takes place in Berland. The track is represented by a straight line as long as $ s $ kilometers. There are $ n $ cars taking part in the race, all of them start simultaneously at the very beginning of the track. For every car is known its behavior — the system of segments on each of which the speed of the car is constant. The $ j $ -th segment of the $ i $ -th car is pair $ (v_{i,j},t_{i,j}) $ , where $ v_{i,j} $ is the car's speed on the whole segment in kilometers per hour and $ t_{i,j} $ is for how many hours the car had been driving at that speed. The segments are given in the order in which they are "being driven on" by the cars.
Your task is to find out how many times during the race some car managed to have a lead over another car. A lead is considered a situation when one car appears in front of another car. It is known, that all the leads happen instantly, i. e. there are no such time segment of positive length, during which some two cars drive "together". At one moment of time on one and the same point several leads may appear. In this case all of them should be taken individually. Meetings of cars at the start and finish are not considered to be counted as leads.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ s $ ( $ 2<=n<=100,1<=s<=10^{6} $ ) — the number of cars and the length of the track in kilometers. Then follow $ n $ lines — the description of the system of segments for each car. Every description starts with integer $ k $ ( $ 1<=k<=100 $ ) — the number of segments in the system. Then $ k $ space-separated pairs of integers are written. Each pair is the speed and time of the segment. These integers are positive and don't exceed 1000. It is guaranteed, that the sum of lengths of all segments (in kilometers) for each car equals to $ s $ ; and all the leads happen instantly.</div>
<h3>输出格式</h3>
<br />
<div>Print the single number — the number of times some car managed to take the lead over another car during the race.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2 33
2 5 1 2 14
1 3 11
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>2 33
2 1 3 10 3
1 11 3
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>0
</code></pre>
<h3>输入样例 #3</h3>
<pre><code>5 33
2 1 3 3 10
1 11 3
2 5 3 3 6
2 3 1 10 3
2 6 3 3 5
</code></pre>
<h3>输出样例 #3</h3>
<pre><code>2
</code></pre>
</article>
</div>
</div>
</body>
</html>
