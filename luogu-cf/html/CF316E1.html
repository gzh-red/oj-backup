<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Summer Homework - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573392598:EV6H2d+ZGVkDibQJDBMq0qTL00Kk/Xg6T0NDekGGr8U=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22By%20the%20age%20of%20three%20Smart%20Beaver%20mastered%20all%20arithmetic%20operations%20and%20got%20this%20summer%20homework%20from%20the%20amazed%20teacher%3A%5Cn%5CnYou%20are%20given%20a%20sequence%20of%20integers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%20%24%20.%20Your%20task%20is%20to%20perform%20on%20it%20%24%20m%20%24%20consecutive%20operations%20of%20the%20following%20type%3A%5Cn%5Cn1.%20For%20given%20numbers%20%24%20x_%7Bi%7D%20%24%20and%20%24%20v_%7Bi%7D%20%24%20assign%20value%20%24%20v_%7Bi%7D%20%24%20to%20element%20%24%20a_%7Bxi%7D%20%24%20.%5Cn2.%20For%20given%20numbers%20%24%20l_%7Bi%7D%20%24%20and%20%24%20r_%7Bi%7D%20%24%20you%27ve%20got%20to%20calculate%20sum%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF316E1%5C%2F095e734be6677a366eba0d190d121c644f5bca60.png%29%2C%20where%20%24%20f_%7B0%7D%3Df_%7B1%7D%3D1%20%24%20and%20at%20%24%20i%3E%3D2%20%24%20%3A%20%24%20f_%7Bi%7D%3Df_%7Bi-1%7D%2Bf_%7Bi-2%7D%20%24%20.%5Cn3.%20For%20a%20group%20of%20three%20numbers%20%24%20l_%7Bi%7D%20%24%20%24%20r_%7Bi%7D%20%24%20%24%20d_%7Bi%7D%20%24%20you%20should%20increase%20value%20%24%20a_%7Bx%7D%20%24%20by%20%24%20d_%7Bi%7D%20%24%20for%20all%20%24%20x%20%24%20%24%20%28l_%7Bi%7D%3C%3Dx%3C%3Dr_%7Bi%7D%29%20%24%20.%5Cn%5CnSmart%20Beaver%20planned%20a%20tour%20around%20great%20Canadian%20lakes%2C%20so%20he%20asked%20you%20to%20help%20him%20solve%20the%20given%20problem.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20and%20%24%20m%20%24%20%28%20%24%201%3C%3Dn%2Cm%3C%3D2%5Cu00b710%5E%7B5%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20integers%20in%20the%20sequence%20and%20the%20number%20of%20operations%2C%20correspondingly.%20The%20second%20line%20contains%20%24%20n%20%24%20integers%20%24%20a_%7B1%7D%2Ca_%7B2%7D%2C...%2Ca_%7Bn%7D%20%24%20%28%20%24%200%3C%3Da_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29.%20Then%20follow%20%24%20m%20%24%20lines%2C%20each%20describes%20an%20operation.%20Each%20line%20starts%20with%20an%20integer%20%24%20t_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dt_%7Bi%7D%3C%3D3%20%24%20%29%20%5Cu2014%20the%20operation%20type%3A%5Cn%5Cn-%20if%20%24%20t_%7Bi%7D%3D1%20%24%20%2C%20then%20next%20follow%20two%20integers%20%24%20x_%7Bi%7D%20%24%20%24%20v_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dx_%7Bi%7D%3C%3Dn%2C0%3C%3Dv_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29%3B%5Cn-%20if%20%24%20t_%7Bi%7D%3D2%20%24%20%2C%20then%20next%20follow%20two%20integers%20%24%20l_%7Bi%7D%20%24%20%24%20r_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dl_%7Bi%7D%3C%3Dr_%7Bi%7D%3C%3Dn%20%24%20%29%3B%5Cn-%20if%20%24%20t_%7Bi%7D%3D3%20%24%20%2C%20then%20next%20follow%20three%20integers%20%24%20l_%7Bi%7D%20%24%20%24%20r_%7Bi%7D%20%24%20%24%20d_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dl_%7Bi%7D%3C%3Dr_%7Bi%7D%3C%3Dn%2C0%3C%3Dd_%7Bi%7D%3C%3D10%5E%7B5%7D%20%24%20%29.%5Cn%5CnThe%20input%20limits%20for%20scoring%20%24%2030%20%24%20points%20are%20%28subproblem%20E1%29%3A%5Cn%5Cn-%20It%20is%20guaranteed%20that%20%24%20n%20%24%20does%20not%20exceed%20%24%20100%20%24%20%2C%20%24%20m%20%24%20does%20not%20exceed%20%24%2010000%20%24%20and%20there%20will%20be%20no%20queries%20of%20the%20%24%203%20%24%20-rd%20type.%5Cn%5CnThe%20input%20limits%20for%20scoring%20%24%2070%20%24%20points%20are%20%28subproblems%20E1%2BE2%29%3A%5Cn%5Cn-%20It%20is%20guaranteed%20that%20there%20will%20be%20queries%20of%20the%20%24%201%20%24%20-st%20and%20%24%202%20%24%20-nd%20type%20only.%5Cn%5CnThe%20input%20limits%20for%20scoring%20%24%20100%20%24%20points%20are%20%28subproblems%20E1%2BE2%2BE3%29%3A%5Cn%5Cn-%20No%20extra%20limitations.%22%2C%22outputFormat%22%3A%22For%20each%20query%20print%20the%20calculated%20sum%20modulo%20%24%201000000000%20%24%20%24%20%2810%5E%7B9%7D%29%20%24%20.%22%2C%22samples%22%3A%5B%5B%225%205%5Cn1%203%201%202%204%5Cn2%201%204%5Cn2%201%205%5Cn2%202%204%5Cn1%203%2010%5Cn2%201%205%5Cn%22%2C%2212%5Cn32%5Cn8%5Cn50%5Cn%22%5D%2C%5B%225%204%5Cn1%203%201%202%204%5Cn3%201%204%201%5Cn2%202%204%5Cn1%202%2010%5Cn2%201%205%5Cn%22%2C%2212%5Cn45%5Cn%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F316%5C%2FE1%22%2C%22id%22%3A%22316E1%22%7D%2C%22translation%22%3A%22%5Cu9898%5Cu76ee%5Cu7ffb%5Cu8bd1%5Cuff1a%5Cr%5Cn%5Cr%5Cn%5Cu6709%24n%24%5Cu4e2a%5Cu6570%5Cuff0c%5Cu652f%5Cu6301%24m%24%5Cu6b21%5Cu64cd%5Cu4f5c%5Cu3002%5Cr%5Cn%5Cr%5Cn%241%24%20%24x%24%20%24y%24%20%5Cu5c06%5Cu7b2c%24x%24%5Cu4e2a%5Cu6570%5Cu4fee%5Cu6539%5Cu4e3a%24y%24%5Cr%5Cn%5Cr%5Cn%242%24%20%24l%24%20%24r%24%20%5Cu5bf9%5Cu8fd9%5Cu4e2a%5Cu533a%5Cu95f4%5Cu6c42%5Cu51fa%24%5C%5Csum_%7Bi%3D0%7D%5E%7Br-l%7Df_%7Bi%7Da_%7Bi%2Bl%7D%24%5Cu7684%5Cu548c%5Cr%5Cn%5Cr%5Cn%243%24%20%24l%24%20%24r%24%20%24d%24%20%5Cu7ed9%5Cu533a%5Cu95f4%5Cu7684%5Cu6bcf%5Cu4e2a%24a_i%24%5Cu52a0%5Cu4e0a%5Cu4e00%5Cu4e2a%24d%24%5Cr%5Cn%5Cr%5Cn%5Cu5176%5Cu4e2d%24f_i%24%5Cu662f%5Cu6590%5Cu6ce2%5Cu62c9%5Cu5951%5Cu6570%5Cu5217%5Cu3002%5Cu8fd9%5Cu91cc%24f_0%3D1%2Cf_1%3D1%24%5Cr%5Cn%5Cr%5Cn%241%3C%3Dn%2Cm%3C%3D200000%24%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A14%2C%22totalAccepted%22%3A5%2C%22pid%22%3A%22CF316E1%22%2C%22title%22%3A%22Summer%20Homework%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Summer%20Homework%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573286098;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Summer Homework</h1>
<h2>题意翻译</h2>
<div>题目翻译：
有$n$个数，支持$m$次操作。
$1$ $x$ $y$ 将第$x$个数修改为$y$
$2$ $l$ $r$ 对这个区间求出$\sum_{i=0}^{r-l}f_{i}a_{i+l}$的和
$3$ $l$ $r$ $d$ 给区间的每个$a_i$加上一个$d$
其中$f_i$是斐波拉契数列。这里$f_0=1,f_1=1$
$1<=n,m<=200000$</div>
<h2>题目描述</h2>
<div>By the age of three Smart Beaver mastered all arithmetic operations and got this summer homework from the amazed teacher:
You are given a sequence of integers $ a_{1},a_{2},...,a_{n} $ . Your task is to perform on it $ m $ consecutive operations of the following type:
1. For given numbers $ x_{i} $ and $ v_{i} $ assign value $ v_{i} $ to element $ a_{xi} $ .
2. For given numbers $ l_{i} $ and $ r_{i} $ you've got to calculate sum ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF316E1/095e734be6677a366eba0d190d121c644f5bca60.png), where $ f_{0}=f_{1}=1 $ and at $ i>=2 $ : $ f_{i}=f_{i-1}+f_{i-2} $ .
3. For a group of three numbers $ l_{i} $ $ r_{i} $ $ d_{i} $ you should increase value $ a_{x} $ by $ d_{i} $ for all $ x $ $ (l_{i}<=x<=r_{i}) $ .
Smart Beaver planned a tour around great Canadian lakes, so he asked you to help him solve the given problem.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains two integers $ n $ and $ m $ ( $ 1<=n,m<=2·10^{5} $ ) — the number of integers in the sequence and the number of operations, correspondingly. The second line contains $ n $ integers $ a_{1},a_{2},...,a_{n} $ ( $ 0<=a_{i}<=10^{5} $ ). Then follow $ m $ lines, each describes an operation. Each line starts with an integer $ t_{i} $ ( $ 1<=t_{i}<=3 $ ) — the operation type:
- if $ t_{i}=1 $ , then next follow two integers $ x_{i} $ $ v_{i} $ ( $ 1<=x_{i}<=n,0<=v_{i}<=10^{5} $ );
- if $ t_{i}=2 $ , then next follow two integers $ l_{i} $ $ r_{i} $ ( $ 1<=l_{i}<=r_{i}<=n $ );
- if $ t_{i}=3 $ , then next follow three integers $ l_{i} $ $ r_{i} $ $ d_{i} $ ( $ 1<=l_{i}<=r_{i}<=n,0<=d_{i}<=10^{5} $ ).
The input limits for scoring $ 30 $ points are (subproblem E1):
- It is guaranteed that $ n $ does not exceed $ 100 $ , $ m $ does not exceed $ 10000 $ and there will be no queries of the $ 3 $ -rd type.
The input limits for scoring $ 70 $ points are (subproblems E1+E2):
- It is guaranteed that there will be queries of the $ 1 $ -st and $ 2 $ -nd type only.
The input limits for scoring $ 100 $ points are (subproblems E1+E2+E3):
- No extra limitations.</div>
<h3>输出格式</h3>
<br />
<div>For each query print the calculated sum modulo $ 1000000000 $ $ (10^{9}) $ .</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5 5
1 3 1 2 4
2 1 4
2 1 5
2 2 4
1 3 10
2 1 5
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>12
32
8
50
</code></pre>
<h3>输入样例 #2</h3>
<pre><code>5 4
1 3 1 2 4
3 1 4 1
2 2 4
1 2 10
2 1 5
</code></pre>
<h3>输出样例 #2</h3>
<pre><code>12
45
</code></pre>
</article>
</div>
</div>
</body>
</html>
