<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Adam and Tree - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573394136:iN9WTf3ohZyqDYGdCc26C08YW2f/KOiWp1H85p9gfVc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22When%20Adam%20gets%20a%20rooted%20tree%20%28connected%20non-directed%20graph%20without%20cycles%29%2C%20he%20immediately%20starts%20coloring%20it.%20More%20formally%2C%20he%20assigns%20a%20color%20to%20each%20edge%20of%20the%20tree%20so%20that%20it%20meets%20the%20following%20two%20conditions%3A%5Cn%5Cn-%20There%20is%20no%20vertex%20that%20has%20more%20than%20two%20incident%20edges%20painted%20the%20same%20color.%5Cn-%20For%20any%20two%20vertexes%20that%20have%20incident%20edges%20painted%20the%20same%20color%20%28say%2C%20%24%20c%20%24%20%29%2C%20the%20path%20between%20them%20consists%20of%20the%20edges%20of%20the%20color%20%24%20c%20%24%20.%5Cn%5CnNot%20all%20tree%20paintings%20are%20equally%20good%20for%20Adam.%20Let%27s%20consider%20the%20path%20from%20some%20vertex%20to%20the%20root.%20Let%27s%20call%20the%20number%20of%20distinct%20colors%20on%20this%20path%20the%20cost%20of%20the%20vertex.%20The%20cost%20of%20the%20tree%27s%20coloring%20will%20be%20the%20maximum%20cost%20among%20all%20the%20vertexes.%20Help%20Adam%20determine%20the%20minimum%20possible%20cost%20of%20painting%20the%20tree.%5Cn%5CnInitially%2C%20Adam%27s%20tree%20consists%20of%20a%20single%20vertex%20that%20has%20number%20one%20and%20is%20the%20root.%20In%20one%20move%20Adam%20adds%20a%20new%20vertex%20to%20the%20already%20existing%20one%2C%20the%20new%20vertex%20gets%20the%20number%20equal%20to%20the%20minimum%20positive%20available%20integer.%20After%20each%20operation%20you%20need%20to%20calculate%20the%20minimum%20cost%20of%20coloring%20the%20resulting%20tree.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20integer%20%24%20n%20%24%20%28%20%24%201%3C%3Dn%3C%3D10%5E%7B6%7D%20%24%20%29%20%5Cu2014%20the%20number%20of%20times%20a%20new%20vertex%20is%20added.%20The%20second%20line%20contains%20%24%20n%20%24%20numbers%20%24%20p_%7Bi%7D%20%24%20%28%20%24%201%3C%3Dp_%7Bi%7D%3C%3Di%20%24%20%29%20%5Cu2014%20the%20numbers%20of%20the%20vertexes%20to%20which%20we%20add%20another%20vertex.%22%2C%22outputFormat%22%3A%22Print%20%24%20n%20%24%20integers%20%5Cu2014%20the%20minimum%20costs%20of%20the%20tree%20painting%20after%20each%20addition.%22%2C%22samples%22%3A%5B%5B%2211%5Cn1%201%201%203%204%204%207%203%207%206%206%5Cn%22%2C%221%201%201%201%201%202%202%202%202%202%203%20%22%5D%5D%2C%22hint%22%3A%22The%20figure%20below%20shows%20one%20of%20the%20possible%20variants%20to%20paint%20a%20tree%20from%20the%20sample%20at%20the%20last%20moment.%20The%20cost%20of%20the%20vertexes%20with%20numbers%2011%20and%2012%20equals%203.%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF442D%5C%2F6877a658192cab08c1f166dfd261ee256f3df3a2.png%29%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F442%5C%2FD%22%2C%22id%22%3A%22442D%22%7D%2C%22translation%22%3A%22%5Cr%5Cn%5Cu6811%5Cu6307%5Cu7684%5Cu662f%5Cu4e00%5Cu79cd%5Cu65e0%5Cu5411%5Cu8fde%5Cu901a%5Cu56fe%5Cu4e14%5Cu6ee1%5Cu8db3%5Cu4efb%5Cu610f%5Cu4e24%5Cu4e2a%5Cu70b9%5Cu95f4%5Cu4e0d%5Cu5b58%5Cu5728%5Cu4e24%5Cu6761%5Cu4e0d%5Cu540c%5Cu7684%5Cu7b80%5Cu5355%5Cu8def%5Cu5f84%5Cuff1b%5Cr%5Cn%5Cr%5Cn%5Cu5f69%5Cu8272%5Cu6811%5Cu6307%5Cu7684%5Cu662f%5Cu4e00%5Cu79cd%5Cu6bcf%5Cu6761%5Cu8fb9%5Cu90fd%5Cu6709%5Cu4e00%5Cu79cd%5Cu989c%5Cu8272%5Cu7684%5Cu6811%5Cuff0c%5Cu5e76%5Cu4e14%5Cu540c%5Cu4e00%5Cu79cd%5Cu989c%5Cu8272%5Cu7684%5Cu8fb9%5Cu96c6%5Cu4e00%5Cu5b9a%5Cu5f62%5Cu6210%5Cu4e00%5Cu6761%5Cu8def%5Cu5f84%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu5f69%5Cu8272%5Cu6811%5Cu4e0a%5Cu7684%5Cu4efb%5Cu610f%5Cu4e00%5Cu4e2a%5Cu70b9u%5Cuff0c%5Cu5b9a%5Cu4e49%5Cu5176%5Cu6743%5Cu503cw%28u%29%5Cu4e3au%5Cu81f3%5Cu6839%5Cu8282%5Cu70b9%5Cuff08%5Cu53731%5Cu53f7%5Cu70b9%5Cuff09%5Cu7684%5Cu8def%5Cu5f84%5Cu4e0a%5Cu6240%5Cu6709%5Cu8fb9%5Cu7684%5Cu989c%5Cu8272%5Cu79cd%5Cu7c7b%5Cu6570%5Cu3002%5Cr%5Cn%5Cu5f69%5Cu8272%5Cu6811%5Cu4f1a%5Cu751f%5Cu957f%5Cuff0c%5Cu521d%5Cu59cb%5Cu65f6%5Cu6811%5Cu4e2d%5Cu4ec5%5Cu6709%5Cu6839%5Cu8282%5Cu70b91%5Cu53f7%5Cu70b9%5Cuff0c%5Cu6bcf%5Cu4e2a%5Cu65f6%5Cu523b%5Cu90fd%5Cu4f1a%5Cu6709%5Cu4e00%5Cu4e2a%5Cu65b0%5Cu8282%5Cu70b9%5Cu957f%5Cu51fa%5Cu6765%5Cu3002%5Cu6bcf%5Cu4e2a%5Cu65f6%5Cu523b%5Cr%5Cn%5Cuff08%5Cu5305%5Cu62ec%5Cu521d%5Cu59cb%5Cu65f6%5Cu523b%5Cuff09%5Cuff0c%5Cu4f60%5Cu9700%5Cu8981%5Cu51b3%5Cu5b9a%5Cu6bcf%5Cu6761%5Cu8fb9%5Cu7684%5Cu989c%5Cu8272%5Cuff0c%5Cu5728%5Cu6ee1%5Cu8db3%5Cu5f69%5Cu8272%5Cu6811%5Cu7684%5Cu5b9a%5Cu4e49%5Cu7684%5Cu524d%5Cu63d0%5Cu4e0b%5Cuff0c%5Cu4f7f%5Cu8fd9%5Cu4e2a%5Cu65f6%5Cu523b%5Cu6811%5Cu4e2d%5Cu8282%5Cu70b9%5Cu6743%5Cr%5Cn%5Cu503c%5Cu7684%5Cu6700%5Cu5927%5Cu503c%5Cu6700%5Cu5c0f%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cr%5Cn%5Cu7b2c1%5Cu884c1%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570n%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu63a5%5Cu4e0b%5Cu6765n-1%5Cu884c%5Cuff0c%5Cu7b2ci%5Cu884c1%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570fi%5Cuff0c%5Cu8868%5Cu793a%5Cu7b2ci%5Cu65f6%5Cu523b%5Cu52a0%5Cu5165%5Cu70b9i%5Cu4e14%5Cu5176%5Cu7236%5Cu4eb2%5Cu4e3afi%5Cr%5Cn%5Cr%5Cn%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu5171n%5Cu884c%5Cuff0c%5Cu7b2ci%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cu8868%5Cu793a%5Cu65f6%5Cu523bi%5Cu7684%5Cu7b54%5Cu6848%5Cu3002%5Cr%5Cn%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A69%2C%22totalAccepted%22%3A30%2C%22pid%22%3A%22CF442D%22%2C%22title%22%3A%22Adam%20and%20Tree%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2300%22%2C%22title%22%3A%22%5Cu5408%5Cu5e76%5Cu795e%5Cu7287%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22CF765F%22%2C%22title%22%3A%22Souvenirs%22%2C%22difficulty%22%3A7%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF521D%22%2C%22title%22%3A%22Shop%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1196F%22%2C%22title%22%3A%22K-th%20Path%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%7B%22pid%22%3A%22CF1209F%22%2C%22title%22%3A%22Koala%20and%20Notebook%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Adam%20and%20Tree%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Adam and Tree</h1>
<h2>题意翻译</h2>
<div>
树指的是一种无向连通图且满足任意两个点间不存在两条不同的简单路径；
彩色树指的是一种每条边都有一种颜色的树，并且同一种颜色的边集一定形成一条路径。
对于彩色树上的任意一个点u，定义其权值w(u)为u至根节点（即1号点）的路径上所有边的颜色种类数。
彩色树会生长，初始时树中仅有根节点1号点，每个时刻都会有一个新节点长出来。每个时刻
（包括初始时刻），你需要决定每条边的颜色，在满足彩色树的定义的前提下，使这个时刻树中节点权
值的最大值最小。
输入格式
第1行1个正整数n。
接下来n-1行，第i行1个正整数fi，表示第i时刻加入点i且其父亲为fi
输出格式
共n行，第i行一个整数表示时刻i的答案。
</div>
<h2>题目描述</h2>
<div>When Adam gets a rooted tree (connected non-directed graph without cycles), he immediately starts coloring it. More formally, he assigns a color to each edge of the tree so that it meets the following two conditions:
- There is no vertex that has more than two incident edges painted the same color.
- For any two vertexes that have incident edges painted the same color (say, $ c $ ), the path between them consists of the edges of the color $ c $ .
Not all tree paintings are equally good for Adam. Let's consider the path from some vertex to the root. Let's call the number of distinct colors on this path the cost of the vertex. The cost of the tree's coloring will be the maximum cost among all the vertexes. Help Adam determine the minimum possible cost of painting the tree.
Initially, Adam's tree consists of a single vertex that has number one and is the root. In one move Adam adds a new vertex to the already existing one, the new vertex gets the number equal to the minimum positive available integer. After each operation you need to calculate the minimum cost of coloring the resulting tree.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains integer $ n $ ( $ 1<=n<=10^{6} $ ) — the number of times a new vertex is added. The second line contains $ n $ numbers $ p_{i} $ ( $ 1<=p_{i}<=i $ ) — the numbers of the vertexes to which we add another vertex.</div>
<h3>输出格式</h3>
<br />
<div>Print $ n $ integers — the minimum costs of the tree painting after each addition.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>11
1 1 1 3 4 4 7 3 7 6 6
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1 1 1 1 1 2 2 2 2 2 3 </code></pre>
<h2>说明</h2>
<div>The figure below shows one of the possible variants to paint a tree from the sample at the last moment. The cost of the vertexes with numbers 11 and 12 equals 3.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF442D/6877a658192cab08c1f166dfd261ee256f3df3a2.png)</div>
</article>
</div>
</div>
</body>
</html>
