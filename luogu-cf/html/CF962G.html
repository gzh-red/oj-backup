<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Visible Black Areas - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573399869:Hmi7FsbINwVUZWoMQ1ZdFFI2iK78DmWEJUmhpGE7lD4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Petya%20has%20a%20polygon%20consisting%20of%20%24%20n%20%24%20vertices.%20All%20sides%20of%20the%20Petya%27s%20polygon%20are%20parallel%20to%20the%20coordinate%20axes%2C%20and%20each%20two%20adjacent%20sides%20of%20the%20Petya%27s%20polygon%20are%20perpendicular.%20It%20is%20guaranteed%20that%20the%20polygon%20is%20simple%2C%20that%20is%2C%20it%20doesn%27t%20have%20self-intersections%20and%20self-touches.%20All%20internal%20area%20of%20the%20polygon%20%28borders%20are%20not%20included%29%20was%20painted%20in%20black%20color%20by%20Petya.%5Cn%5CnAlso%2C%20Petya%20has%20a%20rectangular%20window%2C%20defined%20by%20its%20coordinates%2C%20through%20which%20he%20looks%20at%20the%20polygon.%20A%20rectangular%20window%20can%20not%20be%20moved.%20The%20sides%20of%20the%20rectangular%20window%20are%20parallel%20to%20the%20coordinate%20axes.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FCF962G%5C%2F4e9eed6795a2bd70a392d64c22cb68435ea81a3d.png%29Blue%20color%20represents%20the%20border%20of%20a%20polygon%2C%20red%20color%20is%20the%20Petya%27s%20window.%20The%20answer%20in%20this%20case%20is%202.Determine%20the%20number%20of%20black%20connected%20areas%20of%20Petya%27s%20polygon%2C%20which%20can%20be%20seen%20through%20the%20rectangular%20window.%22%2C%22inputFormat%22%3A%22The%20first%20line%20contain%20four%20integers%20%24%20x_1%2C%20y_1%2C%20x_2%2C%20y_2%20%24%20%28%20%24%20x_1%20%3C%20x_2%20%24%20%2C%20%24%20y_2%20%3C%20y_1%20%24%20%29%20%5Cu2014%20the%20coordinates%20of%20top-left%20and%20bottom-right%20corners%20of%20the%20rectangular%20window.%5Cn%5CnThe%20second%20line%20contains%20a%20single%20integer%20%24%20n%20%24%20%28%20%24%204%20%5C%5Cle%20n%20%5C%5Cle%2015%5C%5C%2C000%20%24%20%29%20%5Cu2014%20the%20number%20of%20vertices%20in%20Petya%27s%20polygon.%5Cn%5CnEach%20of%20the%20following%20%24%20n%20%24%20lines%20contains%20two%20integers%20%5Cu2014%20the%20coordinates%20of%20vertices%20of%20the%20Petya%27s%20polygon%20in%20counterclockwise%20order.%20Guaranteed%2C%20that%20the%20given%20polygon%20satisfies%20the%20conditions%20described%20in%20the%20statement.%5Cn%5CnAll%20coordinates%20of%20the%20rectangular%20window%20and%20all%20coordinates%20of%20the%20vertices%20of%20the%20polygon%20are%20non-negative%20and%20do%20not%20exceed%20%24%2015%5C%5C%2C000%20%24%20.%22%2C%22outputFormat%22%3A%22Print%20the%20number%20of%20black%20connected%20areas%20of%20Petya%27s%20polygon%2C%20which%20can%20be%20seen%20through%20the%20rectangular%20window.%22%2C%22samples%22%3A%5B%5B%225%207%2016%203%5Cn16%5Cn0%200%5Cn18%200%5Cn18%206%5Cn16%206%5Cn16%201%5Cn10%201%5Cn10%204%5Cn7%204%5Cn7%202%5Cn2%202%5Cn2%206%5Cn12%206%5Cn12%2012%5Cn10%2012%5Cn10%208%5Cn0%208%5Cn%22%2C%222%22%5D%5D%2C%22hint%22%3A%22The%20example%20corresponds%20to%20the%20picture%20above.%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B256000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22CodeForces%22%2C%22link%22%3A%22http%3A%5C%2F%5C%2Fcodeforces.com%5C%2Fproblemset%5C%2Fproblem%5C%2F962%5C%2FG%22%2C%22id%22%3A%22962G%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A1%2C%22totalAccepted%22%3A1%2C%22pid%22%3A%22CF962G%22%2C%22title%22%3A%22Visible%20Black%20Areas%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22CF%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22Visible%20Black%20Areas%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>Visible Black Areas</h1>
<h2>题目描述</h2>
<div>Petya has a polygon consisting of $ n $ vertices. All sides of the Petya's polygon are parallel to the coordinate axes, and each two adjacent sides of the Petya's polygon are perpendicular. It is guaranteed that the polygon is simple, that is, it doesn't have self-intersections and self-touches. All internal area of the polygon (borders are not included) was painted in black color by Petya.
Also, Petya has a rectangular window, defined by its coordinates, through which he looks at the polygon. A rectangular window can not be moved. The sides of the rectangular window are parallel to the coordinate axes.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF962G/4e9eed6795a2bd70a392d64c22cb68435ea81a3d.png)Blue color represents the border of a polygon, red color is the Petya's window. The answer in this case is 2.Determine the number of black connected areas of Petya's polygon, which can be seen through the rectangular window.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contain four integers $ x_1, y_1, x_2, y_2 $ ( $ x_1 < x_2 $ , $ y_2 < y_1 $ ) — the coordinates of top-left and bottom-right corners of the rectangular window.
The second line contains a single integer $ n $ ( $ 4 \le n \le 15\,000 $ ) — the number of vertices in Petya's polygon.
Each of the following $ n $ lines contains two integers — the coordinates of vertices of the Petya's polygon in counterclockwise order. Guaranteed, that the given polygon satisfies the conditions described in the statement.
All coordinates of the rectangular window and all coordinates of the vertices of the polygon are non-negative and do not exceed $ 15\,000 $ .</div>
<h3>输出格式</h3>
<br />
<div>Print the number of black connected areas of Petya's polygon, which can be seen through the rectangular window.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5 7 16 3
16
0 0
18 0
18 6
16 6
16 1
10 1
10 4
7 4
7 2
2 2
2 6
12 6
12 12
10 12
10 8
0 8
</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2</code></pre>
<h2>说明</h2>
<div>The example corresponds to the picture above.</div>
</article>
</div>
</div>
</body>
</html>
